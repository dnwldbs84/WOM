/* 2018-02-14 */

!function e(t,s,i){function n(r,o){if(!s[r]){if(!t[r]){var l="function"==typeof require&&require;if(!o&&l)return l(r,!0);if(a)return a(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var d=s[r]={exports:{}};t[r][0].call(d.exports,function(e){var s=t[r][1][e];return n(s||e)},d,d.exports,e,t,s,i)}return s[r].exports}for(var a="function"==typeof require&&require,r=0;r<i.length;r++)n(i[r]);return n}({1:[function(e,t,s){var i,n,a,r,o,l=e("./CUser.js"),c=e("../public/util.js"),d=e("../public/gameConfig.json"),u=e("../public/objectAssign.js"),p=e("../public/quadtree.js"),h=e("./CObstacle.js"),E=[],m=[],g=[],f=function(){this.user=null,this.users=[],this.chests=[],this.obstacles=[],this.immortalGrounds=[],this.portals=[],this.treesCount=0,this.effects=[],this.userEffects=[],this.projectiles=[],this.riseText=[],this.userEffectTimer=Date.now(),this.objGolds=[],this.objJewels=[],this.objSkills=[],this.objBoxs=[],this.onUserLevelUp=new Function,this.onMainUserMove=new Function,this.onSkillFire=new Function,this.onProjectileSkillFire=new Function,this.staticInterval=null,this.affectInterval=null};f.prototype={start:function(e,t,s){i=e,n=t,a=s,r=new p({width:d.CANVAS_MAX_SIZE.width,height:d.CANVAS_MAX_SIZE.height,maxElements:5}),o=new p({width:d.CANVAS_MAX_SIZE.width,height:d.CANVAS_MAX_SIZE.height,maxElements:5}),this.mapSetting(),this.updateGame()},mapSetting:function(){this.createObstacles(),this.setEnvironments()},updateGame:function(){var e=1e3/d.INTERVAL;null===this.staticInterval&&(this.staticInterval=setInterval(function(){for(var e=this.userEffects.length-1;e>=0;e--)Date.now()-this.userEffects[e].startTime>=this.userEffects[e].resourceLifeTime?this.userEffects.splice(e,1):Date.now()-this.userEffects[e].effectTimer>=d.USER_DETACH_EFFECT_CHANGE_TIME&&this.userEffects[e].changeIndex();if(Date.now()-this.userEffectTimer>=d.USER_DETACH_EFFECT_MAKE_TIME){for(var t in this.users)if(this.users[t].isRender)for(var e=0;e<this.users[t].buffImgDataList.length;e++)if(!this.users[t].buffImgDataList[e].isAttach){var s=c.makeUserEffect(this.users[t],this.users[t].buffImgDataList[e]);this.userEffects.push(s)}this.userEffectTimer=Date.now()}if(this.user){var i=c.checkCircleCollision(o,this.user.position.x,this.user.position.y,this.user.size.width/2,this.user.objectID);if(i.length)for(var e=0;e<i.length;e++)a=i[e],i[e].isCollide||(a.isCollide=!0)}var e=g.length;for(;e--;){var i=c.checkCircleCollision(r,g[e].position.x,g[e].position.y,g[e].radius,d.PREFIX_SKILL);if(i.length)for(var n=0;n<i.length;n++){var a=i[n];a.isCollide||(a.isCollide=!0)}g.splice(e,1)}for(var t in this.users)this.users[t].setEntityEle();var e=this.projectiles.length;for(;e--;)if(this.projectiles[e].isExpired())this.projectiles.splice(e,1);else if(this.projectiles[e].move(),this.projectiles[e].projectileImgData&&Date.now()-this.projectiles[e].effectTimer>=d.PROJECTILE_EFFECT_CHANGE_TIME&&(this.projectiles[e].effectTimer=Date.now(),this.projectiles[e].effectRotateDegree+=10),this.projectiles[e].type===d.SKILL_TYPE_INSTANT_PROJECTILE||this.projectiles[e].type===d.SKILL_TYPE_PROJECTILE||this.projectiles[e].type===d.SKILL_TYPE_PROJECTILE_TICK||this.projectiles[e].type===d.SKILL_TYPE_PROJECTILE_TICK_EXPLOSION){var i=c.checkCircleCollision(r,this.projectiles[e].position.x,this.projectiles[e].position.y,this.projectiles[e].radius,d.PREFIX_SKILL_PROJECTILE);if(i.length)for(var n=0;n<i.length;n++){var a=i[n];a.id.substr(0,3)===d.PREFIX_OBSTACLE_CHEST_GROUND||a.isCollide||(a.isCollide=!0)}}var e=this.effects.length;for(;e--;)this.effects[e].isCheckCollision||Date.now()-this.effects[e].startTime>this.effects[e].lifeTime/2&&(g.push(this.effects[e]),this.effects[e].isCheckCollision=!0),this.effects[e].startTime+this.effects[e].lifeTime<Date.now()?this.effects.splice(e,1):this.effects[e].scaleFactor=c.interpolationSine(Date.now()-this.effects[e].startTime,this.effects[e].lifeTime)}.bind(this),e))},createObstacles:function(){for(var e=u({},c.findAllDatas(a,"type",d.OBJ_TYPE_ROCK)),t=0;t<Object.keys(e).length;t++){var s=u({},c.findData(n,"index",e[t].imgData)),i=new h(e[t].posX,e[t].posY,e[t].radius,e[t].id,s);this.obstacles.push(i),E.push(i.staticEle)}var l=u({},c.findAllDatas(a,"type",d.OBJ_TYPE_CHEST_GROUND));for(t=0;t<Object.keys(l).length;t++){s=u({},c.findData(n,"index",l[t].imgData));var p=new h(l[t].posX,l[t].posY,l[t].radius,l[t].id,s);this.obstacles.push(p),E.push(p.staticEle)}var g=u({},c.findAllDatas(a,"type",d.OBJ_TYPE_TREE));this.treesCount=Object.keys(g).length;for(t=0;t<Object.keys(g).length;t++){s=u({},c.findData(n,"index",g[t].imgData));var f=new h(g[t].posX,g[t].posY,g[t].radius,g[t].id,s);f.setTreeImgEle(g[t].treeImgRadius),this.obstacles.push(f),E.push(f.staticEle),m.push(f.treeImgEle)}r.pushAll(E),o.pushAll(m)},setEnvironments:function(){for(var e=u({},c.findAllDatas(a,"type",d.ENV_TYPE_IMMORTAL_GROUND)),t=0;t<Object.keys(e).length;t++){var s=u({},c.findData(n,"index",e[t].imgData));(r=new h(e[t].posX,e[t].posY,e[t].radius,e[t].id,s)).size.width=2*(e[t].radius+30),r.size.height=2*(e[t].radius+30),this.immortalGrounds.push(r)}var i=u({},c.findAllDatas(a,"type",d.ENV_TYPE_PORTAL));for(t=0;t<Object.keys(i).length;t++){var r;s=u({},c.findData(n,"index",i[t].imgData));(r=new h(i[t].posX,i[t].posY,i[t].radius,i[t].id,s)).size.width=2*(i[t].radius+60),r.size.height=2*(i[t].radius+60),this.portals.push(r)}},setChests:function(e){for(var t=0;t<e.length;t++)this.createChest(e[t])},createChest:function(e){for(var t=u({},c.findAllDatas(a,"type",d.OBJ_TYPE_CHEST_GROUND)),s=0;s<Object.keys(t).length;s++)if(t[s].id===e.locationID){var i=t[s],r={x:t[s].posX,y:t[s].posY};break}if(i&&r){switch(e.grade){case 1:var o=d.RESOURCE_INDEX_CHEST_GRADE_1;break;case 2:o=d.RESOURCE_INDEX_CHEST_GRADE_2;break;case 3:o=d.RESOURCE_INDEX_CHEST_GRADE_3;break;case 4:o=d.RESOURCE_INDEX_CHEST_GRADE_4;break;case 5:o=d.RESOURCE_INDEX_CHEST_GRADE_5}var l=u({},c.findData(n,"index",o));this.chests.push({objectID:e.objectID,locationID:e.locationID,grade:e.grade,HP:e.HP,maxHP:e.maxHP,position:r,size:{width:2*i.radius,height:2*i.radius},center:{x:r.x+i.radius,y:r.y+i.radius},imgData:l})}},updateChest:function(e,t){for(var s=0;s<this.chests.length;s++)if(this.chests[s].locationID===e){this.chests[s].HP=t;break}},deleteChest:function(e){for(var t=0;t<this.chests.length;t++)if(this.chests[t].locationID===e){this.chests.splice(t,1);break}},setUser:function(e){if(!(e.objectID in this.users)){var t=new l(e);this.users[e.objectID]=t,this.users[e.objectID].onMove=I.bind(this),this.users[e.objectID].changeState(e.currentState)}},setUsers:function(e){for(var t=0;t<e.length;t++){e[t].imgData=this.setImgData(e[t],n,i);var s=new l(e[t]);this.users[e[t].objectID]=s,this.users[e[t].objectID].onMove=I.bind(this),this.users[e[t].objectID].changeState(e[t].currentState)}},setImgData:function(e){var t=c.findDataWithTwoColumns(i,"type",e.type,"level",e.level).imgData;return u({},c.findData(n,"index",t))},setUsersSkills:function(e){for(var t=0;t<e.length;t++)e[t].fireTime>0&&this.userSkill(e[t].userID,e[t])},setObjs:function(e){for(var t=0;t<e.length;t++)e[t].objectID.substr(0,3)===d.PREFIX_OBJECT_SKILL?this.objSkills.push(e[t]):e[t].objectID.substr(0,3)===d.PREFIX_OBJECT_GOLD?this.objGolds.push(e[t]):e[t].objectID.substr(0,3)===d.PREFIX_OBJECT_JEWEL?this.objJewels.push(e[t]):e[t].objectID.substr(0,3)===d.PREFIX_OBJECT_BOX&&this.objBoxs.push(e[t])},createOBJs:function(e){for(var t=0;t<e.length;t++)e[t].objectID.substr(0,3)===d.PREFIX_OBJECT_SKILL?this.objSkills.push(e[t]):e[t].objectID.substr(0,3)===d.PREFIX_OBJECT_GOLD?this.objGolds.push(e[t]):e[t].objectID.substr(0,3)===d.PREFIX_OBJECT_JEWEL?this.objJewels.push(e[t]):e[t].objectID.substr(0,3)===d.PREFIX_OBJECT_BOX&&this.objBoxs.push(e[t])},deleteOBJ:function(e){if(e.substr(0,3)===d.PREFIX_OBJECT_SKILL){for(var t=0;t<this.objSkills.length;t++)if(this.objSkills[t].objectID===e)return void this.objSkills.splice(t,1)}else if(e.substr(0,3)===d.PREFIX_OBJECT_GOLD){for(t=0;t<this.objGolds.length;t++)if(this.objGolds[t].objectID===e)return void this.objGolds.splice(t,1)}else if(e.substr(0,3)===d.PREFIX_OBJECT_JEWEL){for(t=0;t<this.objJewels.length;t++)if(this.objJewels[t].objectID===e)return void this.objJewels.splice(t,1)}else if(e.substr(0,3)===d.PREFIX_OBJECT_BOX)for(t=0;t<this.objBoxs.length;t++)if(this.objBoxs[t].objectID===e)return void this.objBoxs.splice(t,1)},iamRestart:function(e){this.users[this.user.objectID]=this.user,this.user.changeState(d.OBJECT_STATE_IDLE)},setUserInitState:function(e){e in this.users&&this.users[e].changeState(d.OBJECT_STATE_IDLE)},iamDead:function(){this.user.hitImgDataList=[],this.user.buffImgDataList=[],this.user.conditions=[],this.user.position={x:-2e3,y:-2e3},this.user.changeState(d.OBJECT_STATE_DEATH)},kickUser:function(e){e in this.users&&(this.users[e].changeState(d.OBJECT_STATE_DEATH),delete this.users[e])},checkUserAtUsers:function(e){return e.objectID in this.users},moveUser:function(e){this.user.targetPosition=e,this.user.setCenter(),this.user.setTargetDirection(),this.user.setSpeed(),this.user.changeState(d.OBJECT_STATE_MOVE)},stopUser:function(){this.user.changeState(d.OBJECT_STATE_IDLE)},moveAndAttackUser:function(e,t,s,i){var n=!1;if(n=e===this.user.objectID||e in this.users&&c.isRender(this.user,this.users[e],t),e in this.users&&n){this.users[e].setRenderVar(n),this.users[e].targetPosition=t,this.users[e].setCenter(),i?(this.users[e].setTargetDirection(i),this.users[e].setSpeed(d.MOVE_BACK_WARD_SPEED_DECREASE_RATE)):(this.users[e].setTargetDirection(),this.users[e].setSpeed()),s.direction=this.users[e].targetDirection;var a=this.users[e].makeSkillInstance(s),r=this.user,o=this.users[e],l=this.onSkillFire;a.onFire=function(e){r===o&&l(s,e),o.skillCastEffectPlay=!1},this.users[e].changeState(d.OBJECT_STATE_MOVE_AND_ATTACK),this.users[e].setSkill(a),i&&(this.users[e].isMoveBackward=!0)}},useSkill:function(e,t){var s=!1;if(!this.user)return!0;if(s=e===this.user.objectID||e in this.users&&c.isRender(this.user,this.users[e],t.targetPosition),e in this.users&&s){this.users[e].setRenderVar(s);var i=this.users[e].makeSkillInstance(t),n=this.user,a=this.users[e],r=this.onSkillFire,o=this.onProjectileSkillFire;this.users[e].targetDirection=t.direction,t.type===d.SKILL_TYPE_INSTANT_RANGE?(i.onFire=function(e){n===a&&r(t,e),a.skillCastEffectPlay=!1},this.users[e].changeState(d.OBJECT_STATE_ATTACK)):t.type===d.SKILL_TYPE_INSTANT_PROJECTILE?(i.onFire=function(e){var s=a.makeProjectile(t.projectileIDs[0],i,t.direction);n===a&&o([s],e),a.skillCastEffectPlay=!1},this.users[e].changeState(d.OBJECT_STATE_ATTACK)):t.type===d.SKILL_TYPE_RANGE||t.type===d.SKILL_TYPE_SELF||t.type===d.SKILL_TYPE_SELF_EXPLOSION||t.type===d.SKILL_TYPE_TELEPORT?(i.onFire=function(e){n===a&&r(t,e),a.skillCastEffectPlay=!1},this.users[e].changeState(d.OBJECT_STATE_CAST)):t.type!==d.SKILL_TYPE_PROJECTILE&&t.type!==d.SKILL_TYPE_PROJECTILE_TICK&&t.type!==d.SKILL_TYPE_PROJECTILE_EXPLOSION&&t.type!==d.SKILL_TYPE_PROJECTILE_TICK_EXPLOSION||(i.onFire=function(e){for(var s=[],r=t.direction,l=0;l<t.projectileCount;l++){if(t.projectileCount%2==0){var c=l-(t.projectileCount/2-.5);r=t.direction+c*d.MULTI_PROJECTILE_DEGREE}else if(t.projectileCount%2==1){c=l-Math.floor(t.projectileCount/2),r=t.direction+c*d.MULTI_PROJECTILE_DEGREE}var u=a.makeProjectile(t.projectileIDs[l],i,r);s.push(u),n===a&&s.length===t.projectileCount&&o(s,e),a.skillCastEffectPlay=!1}},this.users[e].changeState(d.OBJECT_STATE_CAST)),this.users[e].setSkill(i)}},applySkill:function(e,t,s){if(e.type===d.SKILL_TYPE_TELEPORT){if(t in this.users){e.targetPosition.x<this.users[t].size.width/2?e.targetPosition.x=this.users[t].size.width/2:e.targetPosition.x>d.CANVAS_MAX_SIZE.width-this.users[t].size.width/2&&(e.targetPosition.x=d.CANVAS_MAX_SIZE.width-this.users[t].size.width/2),e.targetPosition.y<this.users[t].size.height/2?e.targetPosition.y=this.users[t].size.height/2:e.targetPosition.y>d.CANVAS_MAX_SIZE.height-this.users[t].size.height/2&&(e.targetPosition.y=d.CANVAS_MAX_SIZE.height-this.users[t].size.height/2);var i={x:e.targetPosition.x,y:e.targetPosition.y};this.moveUserToNewPos(t,i)}}else this.effects.push({property:e.property,position:{x:e.targetPosition.x-e.explosionRadius,y:e.targetPosition.y-e.explosionRadius},radius:e.explosionRadius,startTime:Date.now(),lifeTime:e.effectLastTime,scaleFactor:1,effectImgData:s||0,isCheckCollision:!1})},applyProjectile:function(e,t,s){this.projectiles.push({userID:e.userID,objectID:e.objectID,type:e.type,property:e.property,position:e.position,speed:e.speed,startTime:e.startTime,radius:e.radius,lifeTime:2*e.lifeTime,projectileImgData:t||0,effectRotateDegree:0,effectTimer:Date.now(),timer:Date.now(),effect:{property:e.property,position:e.position,radius:e.explosionRadius,startTime:0,lifeTime:e.effectLastTime,effectImgData:s||0,scaleFactor:1},move:function(){var e=(Date.now()-this.timer)/1e3;this.position.x+=this.speed.x*e,this.position.y+=this.speed.y*e,this.timer=Date.now()},isExpired:function(){return!(this.lifeTime>Date.now()-this.startTime)},explode:function(e){this.setEffect(e)},setEffect:function(e){this.effect.position=e,this.effect.startTime=Date.now()}})},applyCastSpeed:function(e,t){e in this.users&&(t.fireTime=Math.floor(t.fireTime*(100/this.users[e].castSpeed)),t.totalTime=Math.floor(t.totalTime*(100/this.users[e].castSpeed)))},deleteProjectile:function(e,t){for(var s=0;s<this.projectiles.length;s++)if(this.projectiles[s].objectID===e&&this.projectiles[s].userID===t){this.projectiles.splice(s,1);break}},explodeProjectile:function(e,t,s){for(var i=0;i<this.projectiles.length;i++)if(this.projectiles[i].objectID===e&&this.projectiles[i].userID===t){this.projectiles[i].explode(s),this.effects.push(this.projectiles[i].effect),this.projectiles.splice(i,1);break}},changeUserStat:function(e,t){if(e.objectID in this.users)if((e.level!==this.users[e.objectID].level||t)&&(this.users[e.objectID].level=e.level,this.users[e.objectID].imgData=this.setImgData(e),e.objectID===this.user.objectID&&this.onUserLevelUp(e.level)),this.users[e.objectID].exp=e.exp,this.users[e.objectID].maxHP=e.maxHP,this.users[e.objectID].maxMP=e.maxMP,this.users[e.objectID].HP=e.HP,this.users[e.objectID].MP=e.MP,this.users[e.objectID].castSpeed=e.castSpeed,this.users[e.objectID].maxSpeed=e.maxSpeed,this.users[e.objectID].rotateSpeed=e.rotateSpeed,this.users[e.objectID].conditions=e.conditions,this.users[e.objectID].buffList=e.buffList,this.users[e.objectID].passiveList=e.passiveList,this.users[e.objectID].setSpeed(),this.users[e.objectID].currentState===d.OBJECT_STATE_CAST&&this.users[e.objectID].currentSkill){var s=this.users[e.objectID].currentSkill.consumeMP;(this.users[e.objectID].conditions[d.USER_CONDITION_FREEZE]||this.users[e.objectID].conditions[d.USER_CONDITION_SILENCE]||this.users[e.objectID].conditions[d.USER_CONDITION_BLUR]||this.users[e.objectID].MP<s)&&this.users[e.objectID].changeState(d.OBJECT_STATE_IDLE)}else this.users[e.objectID].currentState===d.OBJECT_STATE_ATTACK&&(this.users[e.objectID].conditions[d.USER_CONDITION_FREEZE]||this.users[e.objectID].conditions[d.USER_CONDITION_SILENCE]||this.users[e.objectID].conditions[d.USER_CONDITION_BLUR])&&this.users[e.objectID].changeState(d.OBJECT_STATE_IDLE)},moveUserToNewPos:function(e,t){e in this.users&&(this.users[e].changePosition(t),this.users[e].changeState(d.OBJECT_STATE_IDLE),e===this.user.objectID&&this.onMainUserMove(this.user))},updateSkillPossessions:function(e,t){e in this.users&&this.users[e].updateSkillPossessions(t)},setUserData:function(e){e.objectID in this.users&&(this.users[e.objectID].name=e.name,this.users[e.objectID].position=e.position,this.users[e.objectID].targetPosition=e.targetPosition,this.users[e.objectID].direction=e.direction,this.users[e.objectID].maxSpeed=e.maxSpeed,this.users[e.objectID].rotateSpeed=e.rotateSpeed,this.users[e.objectID].setCenter(),this.users[e.objectID].setTargetDirection(),this.users[e.objectID].setSpeed(),this.users[e.objectID].changeState(e.currentState))},updateUserData:function(e){var t=!1;if(!this.user)return!0;t=e.objectID===this.user.objectID||e.objectID in this.users&&c.isRender(this.user,this.users[e.objectID],e.targetPosition),e.objectID in this.users&&this.users[e.objectID].currentState!==d.OBJECT_STATE_DEATH&&(this.users[e.objectID].setRenderVar(t),this.users[e.objectID].position=e.position,this.users[e.objectID].targetPosition=e.targetPosition,this.users[e.objectID].direction=e.direction,this.users[e.objectID].maxSpeed=e.maxSpeed,this.users[e.objectID].rotateSpeed=e.rotateSpeed,this.users[e.objectID].setCenter(),this.users[e.objectID].setTargetDirection(),this.users[e.objectID].setSpeed(),t?this.users[e.objectID].changeState(e.currentState):this.users[e.objectID].changeState(d.OBJECT_STATE_IDLE))},syncUserData:function(e){var t=!1;t=!this.user||(e.objectID===this.user.objectID||e.objectID in this.users&&c.isRender(this.user,this.users[e.objectID],e.targetPosition)),e.objectID in this.users&&(this.users[e.objectID].position=e.position,t&&(this.users[e.objectID].currentState!==d.OBJECT_STATE_ATTACK&&this.users[e.objectID].currentState!==d.OBJECT_STATE_CAST&&(this.users[e.objectID].targetPosition=e.targetPosition,this.users[e.objectID].direction=e.direction,this.users[e.objectID].maxSpeed=e.maxSpeed,this.users[e.objectID].rotateSpeed=e.rotateSpeed,this.users[e.objectID].setCenter(),this.users[e.objectID].setTargetDirection(),this.users[e.objectID].setSpeed()),this.users[e.objectID].currentState!==e.currentState&&this.users[e.objectID].currentState!==d.OBJECT_STATE_CAST&&this.users[e.objectID].currentState!==d.OBJECT_STATE_ATTACK&&this.users[e.objectID].currentState!==d.OBJECT_STATE_MOVE_AND_ATTACK&&this.users[e.objectID].changeState(e.currentState)))},updateUserBuffImgData:function(e,t){e in this.users&&this.users[e].updateBuffImgData(t)},updateSkillHitImgData:function(e,t){e in this.users&&this.users[e].updateSkillHitImgData(t)},synchronizeUser:function(e){for(var t in this.users)this.users[t].objectID===e&&(this.user=this.users[t],this.user.onMainUserMove=S.bind(this,this.user));this.user},getUserCurrentState:function(e){if(e in this.users)return this.users[e].getCurrentState()},getUserCurrentSkillIndex:function(e){if(e in this.users)return this.users[e].getCurrentSkillIndex()},processUserData:function(){if(this.user.currentState===d.OBJECT_STATE);return{objectID:this.user.objectID,currentState:this.user.currentState,position:this.user.position,direction:this.user.direction,time:this.user.timer}},processSkillData:function(e){return{skillIndex:e.index,skillTargetPosition:e.targetPosition}},processProjectileData:function(e){for(var t=[],s=0;s<e.length;s++)t.push({objectID:e[s].objectID,skillIndex:e[s].index,position:e[s].position,speed:e[s].speed});return t},checkCollisionWithObstacles:function(e,t){return c.checkCircleCollision(r,e.x-t.size.width/2,e.y-t.size.height/2,t.size.width/2,t.objectID)},reCalcSkillTargetPosition:function(e,t,s){var i=[s[0]],n=c.calcCompelPos({x:e.x-t.size.width/2,y:e.y-t.size.height/2,width:t.size.width,height:t.size.height,id:t.objectID},i);return{x:e.x+n.x,y:e.y+n.y}},setUserChatMsg:function(e,t){e in this.users&&this.users[e].setChatMsg(t)}};var I=function(e){var t=c.checkCircleCollision(r,e.entityTreeEle.x,e.entityTreeEle.y,e.entityTreeEle.width/2,e.entityTreeEle.id);if(t.length>0)var s=c.calcCompelPos(e.entityTreeEle,t);return s},S=function(e){this.onMainUserMove(e)};t.exports=f},{"../public/gameConfig.json":8,"../public/objectAssign.js":9,"../public/quadtree.js":10,"../public/util.js":12,"./CObstacle.js":2,"./CUser.js":5}],2:[function(e,t,s){function i(e,t,s,i,n){this.objectID=i,this.imgData=n,this.position={x:e,y:t},this.size={width:2*s,height:2*s},this.center={x:this.position.x+this.size.width/2,y:this.position.y+this.size.height/2},this.staticEle={x:this.position.x,y:this.position.y,width:this.size.width,height:this.size.height,id:this.objectID,isCollide:!1}}i.prototype={setPosition:function(e,t){this.position.x=e,this.position.y=t,this.setCenter()},setSize:function(e,t){this.size.width=e,this.size.height=t},setCenter:function(){0==this.size.width||this.size.height,this.center.x=this.position.x+this.size.width/2,this.center.y=this.position.y+this.size.height/2},setTreeImgEle:function(e){this.treeImgEle={x:this.center.x-e,y:this.center.y-e,width:2*e,height:2*e,id:this.objectID,isCollide:!1}}},t.exports=i},{}],3:[function(e,t,s){var i=e("../public/util.js"),n=e("../public/gameConfig.json");function a(e,t){this.index=e.index,this.type=e.type,this.property=e.property,this.consumeMP=e.consumeMP,this.totalTime=e.totalTime,this.fireTime=e.fireTime,this.range=e.range,this.explosionRadius=e.explosionRadius,this.radius=e.radius,this.maxSpeed=e.maxSpeed,this.lifeTime=e.lifeTime,this.direction=e.direction,this.targetPosition=e.targetPosition,this.userAniStartTime=t,this.effectLastTime=e.effectLastTime,this.effect={position:this.targetPosition,radius:this.explosionRadius,startTime:0,lifeTime:this.effectLastTime},this.userAniTimeout=!1,this.fireTimeout=!1,this.totalTimeout=!1,this.onUserAniStart=new Function,this.onFire=new Function,this.onTimeOver=new Function}a.prototype={executeSkill:function(){this.userAniTimeout=setTimeout(function(){this.onUserAniStart()}.bind(this),this.userAniStartTime);var e=this.fireTime-n.SKILL_INFORM_TIME;e<0&&(e=0),this.userAniStartTime>e&&(e=this.userAniStartTime),this.syncFireTime=Date.now()+this.fireTime,this.fireTimeout=setTimeout(function(){this.onFire(this.syncFireTime)}.bind(this),e),this.totalTimeout=setTimeout(function(){this.onTimeOver()}.bind(this),this.totalTime)},startEffectTimer:function(){this.effect.startTime=Date.now()},destroy:function(){this.userAniTimeout&&clearTimeout(this.userAniTimeout),this.fireTimeout&&clearTimeout(this.fireTimeout),this.totalTimeout&&clearTimeout(this.totalTimeout)},makeProjectile:function(e,t,s){var a=i.calcForePosition(e,this.radius,s,n.PROJECTILE_FIRE_DISTANCE);return new r(this,a,t,s)}};var r=function(e,t,s,i){this.objectID=s,this.index=e.index,this.position={x:t.x,y:t.y},this.direction=i,this.speed={x:e.maxSpeed*Math.cos(this.direction*Math.PI/180),y:e.maxSpeed*Math.sin(this.direction*Math.PI/180)},this.radius=e.radius,this.lifeTime=e.lifeTime,this.explosionRadius=e.explosionRadius};t.exports=a},{"../public/gameConfig.json":8,"../public/util.js":12}],4:[function(e,t,s){var i,n,a,r,o,l,c,d,u,p,h,E=e("../public/util.js"),m=e("../public/gameConfig.json"),g=e("../public/objectAssign.js"),f=e("../public/serverList.json"),I=1,S="PYRO",_="<span class='red'>PYRO</span> is a powerful mage.<br>After growth<span class='memo'>(attention passive)</span>, <span class='red'>PYRO</span> is more powerful if PYRO`s HP is lower.",T="FROSTER",C="<span class='blue'>FROSTER</span> is a magical mage.<br>After growth<span class='memo'>(attention passive)</span>, <span class='blue'>FROSTER</span>`s ice spell may freeze enemy.",L="MYSTER",b="<span class='purple'>MYSTER</span> is a unpredictable mage.<br>After growth<span class='memo'>(attention passive)</span>, <span class='purple'>MYSTER</span> will be strengthen whenever use arcane spell.",A=0,D=null,v=0,y=null,R=new Array(4),P=new Array(4),k=[],O=[],M=[],N=0;M[m.USER_CONDITION_FREEZE]=!1,M[m.USER_CONDITION_SILENCE]=!1,M[m.USER_CONDITION_BLUR]=!1;var x,F,w,B,U,j,H,K,X,G,Y,J,z,V,W,q,Z,Q,$,ee,te,se,ie,ne,ae,re,oe,le,ce,de,ue,pe,he,Ee,me,ge,fe,Ie,Se,_e,Te,Ce,Le,be,Ae,De,ve,ye,Re,Pe,ke,Oe,Me,Ne,xe,Fe,we,Be,Ue,je,He,Ke,Xe,Ge,Ye,Je,ze,Ve,We,qe,Ze,Qe,$e,et,tt,st,it,nt,at,rt,ot,lt,ct,dt,ut,pt,ht,Et,mt,gt,ft,It,St,_t,Tt,Ct,Lt,bt,At,Dt,vt,yt,Rt,Pt,kt,Ot,Mt,Nt=0,xt=0,Ft=0,wt=0,Bt=1,Ut=!0,jt=!0,Ht=!0,Kt=!0,Xt=!0,Gt=[],Yt=[],Jt=!1,zt=Date.now(),Vt=!1,Wt=!1,qt=null,Zt=null,Qt=null,$t=null,es=!0;function ts(e,t,s,o){i=e,n=t,a=s,r=o,this.serverResponseTimeout=!1,this.onLoadCompleteServerList=new Function,this.onStartBtnClick=new Function,this.onSocialBtnClick=new Function,this.serverConditionOn=new Function,this.serverConditionOff=new Function,this.onSetRankers=new Function,this.onPopUpSkillChangeClick=new Function,this.onSelectCharIcon=new Function,this.onSelectSkillCancelBtnClick=new Function,this.onSkillIconClick=new Function,this.onSkillUpgrade=new Function,this.onExchangeSkill=new Function,this.onExchangePassive=new Function,this.onEquipPassive=new Function,this.onUnequipPassive=new Function}ts.prototype={initStartScene:function(){c=document.getElementById("startScene"),d=document.getElementById("gameScene"),u=document.getElementById("standingScene"),p=document.getElementById("startButton");document.getElementById("startSceneSelectedCharName"),document.getElementById("startSceneSelectedCharStatPower"),document.getElementById("startSceneSelectedCharStatMagic"),document.getElementById("startSceneSelectedCharStatSpeed"),document.getElementById("startSceneSelectedCharDesc");h=document.getElementById("restartButton"),ct=document.getElementById("standingSceneSelectedCharName"),dt=document.getElementById("standingSceneSelectedCharStatPower"),ut=document.getElementById("standingSceneSelectedCharStatMagic"),pt=document.getElementById("standingSceneSelectedCharStatSpeed"),ht=document.getElementById("standingSceneSelectedCharBaseSkill"),Et=document.getElementById("standingSceneSelectedCharPassiveSkill"),mt=document.getElementById("standingSceneSelectedCharEquipSkill1"),gt=document.getElementById("standingSceneSelectedCharEquipSkill2"),ft=document.getElementById("standingSceneSelectedCharEquipSkill3"),It=document.getElementById("standingSceneSelectedCharEquipSkill4"),ht.getElementsByTagName("img")[0].src=o,Et.getElementsByTagName("img")[0].src=o,mt.getElementsByTagName("img")[0].src=o,gt.getElementsByTagName("img")[0].src=o,ft.getElementsByTagName("img")[0].src=o,It.getElementsByTagName("img")[0].src=o,ht.onmouseover=ds.bind(ht),ht.onmouseout=Es.bind(ht),Et.onmouseover=ds.bind(Et),Et.onmouseout=Es.bind(Et),mt.onmouseover=ds.bind(mt),mt.onmouseout=Es.bind(mt),gt.onmouseover=ds.bind(gt),gt.onmouseout=Es.bind(gt),ft.onmouseover=ds.bind(ft),ft.onmouseout=Es.bind(ft),It.onmouseover=ds.bind(It),It.onmouseout=Es.bind(It),St=document.getElementById("standingSceneSkillSettingBtn"),_t=document.getElementById("userStandingNickName"),p.onclick=ns.bind(this,p),p.getElementsByTagName("span")[0].classList.remove("disable"),p.getElementsByTagName("img")[0].classList.add("disable"),Ds();var e=document.getElementById("startSceneFacebook"),t=document.getElementById("startSceneTwitter"),s=document.getElementById("standingSceneFacebook"),i=document.getElementById("standingSceneTwitter"),n=this.onSocialBtnClick;function a(e){var t=E.createRequest();t.onreadystatechange=function(e){if(4===t.readyState){var s=E.getCookie(document.cookie,"twitter"),i=E.getCookie(document.cookie,"facebook");n(s,i)}},t.open("POST",e,!0),t.send()}e.onclick=a.bind("","/facebook"),s.onclick=a.bind("","/facebook"),t.onclick=a.bind("","/twitter"),i.onclick=a.bind("","/twitter")},completeTwitter:function(){var e=document.getElementById("startSceneTwitterReward"),t=document.getElementById("standingSceneTwitterReward");e.getElementsByTagName("img")[1].classList.remove("disable"),t.getElementsByTagName("img")[1].classList.remove("disable")},completeFacebook:function(){var e=document.getElementById("startSceneFacebookReward"),t=document.getElementById("standingSceneFacebookReward");e.getElementsByTagName("img")[1].classList.remove("disable"),t.getElementsByTagName("img")[1].classList.remove("disable")},setServerList:function(){var e=document.getElementById("servers"),t=!1,s=!1,i=this.onLoadCompleteServerList;setTimeout(function(){t||(alert("Sorry. Can`t find available server."),e.selectedIndex=1,t=!0,i())},m.MAX_FIND_AVAILABLE_SERVER_TIME);var n=0;for(var a in f)if(f[a]){var r="http://"+f[a].IP,o=e.querySelectorAll('[label="'+f[a].SERVER+'"]')[0];E.createDomSelectOption(a,r,!0,o);try{!function(){var a=E.createRequest();a.onreadystatechange=function(n){if(4===a.readyState&&200===a.status){var r=JSON.parse(a.response);if(r.isServerDown){l=(o=e.querySelectorAll('[value="'+r.ip+'"]')[0]).text+" ["+r.currentUser+"/"+r.maxUser+"]";o.text=l}else{var o;(o=e.querySelectorAll('[value="'+r.ip+'"]')[0]).disabled=!1,parseInt(r.currentUser)>=parseInt(r.maxUser)&&o.classList.add("overUser"),Date.now()-r.startTime>=m.MAX_PING_LIMIT&&o.classList.add("highPing"),o.classList.contains("overUser")||o.classList.contains("highPing")||o.classList.add("available");var l=o.text+" ["+r.currentUser+"/"+r.maxUser+"] "+(Date.now()-r.startTime)+"ms";o.text=l,s||(s=!0,e.selectedIndex=r.optionIndex),t||parseInt(r.currentUser)<parseInt(r.maxUser)&&(t=!0,i(),e.selectedIndex=r.optionIndex)}}},a.open("POST",r+"/usersInfo",!0),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.send("ip="+r+"&startTime="+Date.now()+"&optionIndex="+n)}(),n++}catch(e){}}else E.createDomSelectOptGroup(a,e,!1)},getSelectedServer:function(){var e=document.getElementById("servers");return e.options[e.selectedIndex].value},getStartUserName:function(){var e=document.getElementById("userStartNickName").value;if(e){var t=E.processMessage(e,m.USER_NICK_NAME_LENGTH,!0);return t||"WOM.io"}return"WOM.io"},getStandingUserName:function(){var e=_t.value;if(e){var t=E.processMessage(e,m.USER_NICK_NAME_LENGTH,!0);return t||"WOM.io"}return"WOM.io"},checkServerCondition:function(e){var t=E.createRequest(),s=Date.now(),i=this.serverConditionOn,n=this.serverConditionOff;t.onreadystatechange=function(e){if(4===t.readyState)if(200===t.status){var a=JSON.parse(t.response),r=Date.now()-s;a.canJoin?r<m.MAX_PING_LIMIT?i():(alert("Ping is too high! How about join to other server."),n()):(a.version!==m.GAME_VERSION?(alert("Client`s game version is different from server`s. Reload page."),location.reload()):a.isServerDown?(alert("Server is down for update! Reload page."),location.reload()):alert("The server is currently full! How about join to other server."),n())}else alert("Sorry. Unpredicted internet server error!"),n()};try{s=Date.now(),t.open("POST",e+"/serverCheck",!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.send("version="+m.GAME_VERSION)}catch(e){}},setFeedbackBtn:function(){try{Mt=document.getElementById("crowd-shortcut").parentNode}catch(e){}},disableStartButton:function(){p.onclick="",p.getElementsByTagName("span")[0].classList.add("disable"),p.getElementsByTagName("img")[0].classList.remove("disable");for(var e=document.getElementById("startSceneHudCenterCenterCharSelect").children,t=0;t<e.length;t++)e[t].onclick=new Function},enableStartButton:function(){p.onclick=ns.bind(this,p),p.getElementsByTagName("span")[0].classList.remove("disable"),p.getElementsByTagName("img")[0].classList.add("disable"),Ds()},disableStartScene:function(){c.classList.add("disappearSmoothAni"),c.classList.remove("enable"),setTimeout(function(){c.classList.add("disable")},1e3),d.classList.add("appearSmoothAni"),d.classList.remove("disable"),setTimeout(function(){d.classList.add("enable"),d.classList.remove("appearSmoothAni")},1e3)},initStandingScene:function(e,t){u.classList.remove("disable"),u.classList.add("enable"),setTimeout(function(){h.getElementsByTagName("span")[0].classList.remove("disable"),h.getElementsByTagName("img")[0].classList.add("disable")},1500),_t.select(),_t.onkeydown=function(e){13!==e.keyCode&&13!==e.which||h.onclick()},"WOM.io"!==t&&(_t.value=t);var s=0;switch(e){case m.CHAR_TYPE_FIRE:s=0;break;case m.CHAR_TYPE_FROST:s=1;break;case m.CHAR_TYPE_ARCANE:s=2}h.onclick=ns.bind(this,h);for(var i=this.onSelectCharIcon,n=document.getElementById("standingSceneHudCenterCenterCharSelect").children,a=0;a<n.length;a++){if(s===a){for(var r=0;r<n.length;r++)n[r].classList.remove("selectedChar");n[a].classList.add("selectedChar")}n[a].onclick=function(){var e=parseInt(this.getAttribute("type"));if(e===m.CHAR_TYPE_FIRE||e===m.CHAR_TYPE_FROST||e===m.CHAR_TYPE_ARCANE){I=e;for(var t=0;t<n.length;t++)n[t].classList.remove("selectedChar");this.classList.add("selectedChar"),i(e)}else i(m.CHAR_TYPE_FIRE)}}n[s].onclick(),St.onclick=function(){rs(),ss(Be,!0),lt.onclick(),Vt?As():bs()}},updateCharInfoSelectedPanel:function(e,t){var s="",i="white";switch(e){case m.CHAR_TYPE_FIRE:s=S,i="red";break;case m.CHAR_TYPE_FROST:s=T,i="blue";break;case m.CHAR_TYPE_ARCANE:s=L,i="purple"}var n=g({},E.findDataWithTwoColumns(r,"type",e,"level",t));ct.innerHTML="<span class='yellow'>Lv "+t+" </span><span class='"+i+"'>"+s+"</span>",dt.getElementsByTagName("span")[0].innerHTML=n.power,ut.getElementsByTagName("span")[0].innerHTML=n.magic,pt.getElementsByTagName("span")[0].innerHTML=n.speed,dt.onmouseover=us.bind(dt,m.STAT_POWER_INDEX,n.power),dt.onmouseout=Es.bind(dt),ut.onmouseover=us.bind(ut,m.STAT_MAGIC_INDEX,n.magic),ut.onmouseout=Es.bind(ut),pt.onmouseover=us.bind(pt,m.STAT_SPEED_INDEX,n.speed),pt.onmouseout=Es.bind(pt),gs()},disableStandingScene:function(){for(var e=document.getElementById("standingSceneHudCenterCenterCharSelect").children,t=0;t<e.length;t++)e[t].onclick="";u.classList.add("disappearSmoothAni"),u.classList.remove("enable"),setTimeout(function(){u.classList.add("disable"),u.classList.remove("disappearSmoothAni")},1e3),d.classList.add("appearSmoothAni"),d.classList.remove("disable"),setTimeout(function(){d.classList.add("enable"),d.classList.remove("appearSmoothAni")},1e3),h.onclick="",h.getElementsByTagName("span")[0].classList.add("disable"),h.getElementsByTagName("img")[0].classList.remove("disable"),St.onclick=""},initHUD:function(){x=document.getElementById("hudBaseSkillImg"),F=document.getElementById("hudEquipSkill1Img"),w=document.getElementById("hudEquipSkill2Img"),B=document.getElementById("hudEquipSkill3Img"),U=document.getElementById("hudEquipSkill4Img"),j=document.getElementById("hudPassiveSkillImg"),x.src=o,F.src=o,w.src=o,B.src=o,U.src=o,j.src=o,x.addEventListener("mouseover",ls.bind(x,m.SKILL_BASIC_INDEX),!1),F.addEventListener("mouseover",ls.bind(F,m.SKILL_EQUIP1_INDEX),!1),w.addEventListener("mouseover",ls.bind(w,m.SKILL_EQUIP2_INDEX),!1),B.addEventListener("mouseover",ls.bind(B,m.SKILL_EQUIP3_INDEX),!1),U.addEventListener("mouseover",ls.bind(U,m.SKILL_EQUIP4_INDEX),!1),j.addEventListener("mouseover",ls.bind(j,m.SKILL_PASSIVE_INDEX),!1),x.addEventListener("mouseout",cs.bind(x),!1),F.addEventListener("mouseout",cs.bind(F),!1),w.addEventListener("mouseout",cs.bind(w),!1),B.addEventListener("mouseout",cs.bind(B),!1),U.addEventListener("mouseout",cs.bind(U),!1),j.addEventListener("mouseout",cs.bind(j),!1),x.onclick=ms.bind(this,m.SKILL_BASIC_INDEX),F.onclick=ms.bind(this,m.SKILL_EQUIP1_INDEX),w.onclick=ms.bind(this,m.SKILL_EQUIP2_INDEX),B.onclick=ms.bind(this,m.SKILL_EQUIP3_INDEX),U.onclick=ms.bind(this,m.SKILL_EQUIP4_INDEX),H=document.getElementById("hudBtnSkillChange"),K=document.getElementById("gameSceneBuffsContainer"),X=document.getElementById("userHPProgressBar"),Y=document.getElementById("userExpProgressBar"),G=document.getElementById("userMPProgressBar"),J=document.getElementById("hudBaseSkillMask"),z=document.getElementById("hudEquipSkill1Mask"),V=document.getElementById("hudEquipSkill2Mask"),W=document.getElementById("hudEquipSkill3Mask"),q=document.getElementById("hudEquipSkill4Mask"),J.addEventListener("animationend",as.bind(J,m.SKILL_BASIC_INDEX,this.checkSkillsConditions),!1),z.addEventListener("animationend",as.bind(z,m.SKILL_EQUIP1_INDEX,this.checkSkillsConditions),!1),V.addEventListener("animationend",as.bind(V,m.SKILL_EQUIP2_INDEX,this.checkSkillsConditions),!1),W.addEventListener("animationend",as.bind(W,m.SKILL_EQUIP3_INDEX,this.checkSkillsConditions),!1),q.addEventListener("animationend",as.bind(q,m.SKILL_EQUIP4_INDEX,this.checkSkillsConditions),!1),Z=document.getElementById("hudBaseSkillBlockMask"),Q=document.getElementById("hudEquipSkill1BlockMask"),$=document.getElementById("hudEquipSkill2BlockMask"),ee=document.getElementById("hudEquipSkill3BlockMask"),te=document.getElementById("hudEquipSkill4BlockMask"),se=document.getElementById("hudPassiveSkillBlockMask"),ie=document.getElementById("hudBaseSkillConditionBlockMask"),ne=document.getElementById("hudEquipSkill1ConditionBlockMask"),ae=document.getElementById("hudEquipSkill2ConditionBlockMask"),re=document.getElementById("hudEquipSkill3ConditionBlockMask"),oe=document.getElementById("hudEquipSkill4ConditionBlockMask"),le=document.getElementById("gameSceneHudBottomRightCenter"),ce=document.getElementById("gameSceneCharNameAndLevel"),de=document.getElementById("userStatOffence"),ue=document.getElementById("userStatDefence"),pe=document.getElementById("userStatPowerContainer"),he=document.getElementById("userStatMagicContainer"),Ee=document.getElementById("userStatSpeedContainer"),Tt=document.getElementById("miniMapUser"),Ct=document.getElementById("miniMapChest1"),Lt=document.getElementById("miniMapChest2"),bt=document.getElementById("miniMapChest3"),At=document.getElementById("miniMapChest4"),Dt=document.getElementById("miniMapChest5"),vt=document.getElementById("miniMapChest6"),yt=document.getElementById("miniMapChest7"),Rt=document.getElementById("miniMapChest8"),Pt=document.getElementById("miniMapChest9"),kt=document.getElementById("gameSceneFpsText"),Ot=document.getElementById("gameScenePingText"),me=document.getElementById("gameSceneHudTopLeft"),ge=document.getElementById("gameSceneHudTopCenter"),selectSkillImgContainer=document.getElementById("selectSkillImgContainer"),fe=document.getElementById("selectSkillInfo"),document.getElementById("btnSelectSkillCancel").onclick=function(){this.onSelectSkillCancelBtnClick()}.bind(this),Ie=document.getElementById("goldContainer"),Se=document.getElementById("jewelContainer"),_e=document.getElementById("gameBoardRank"),Te=document.getElementById("gameBoardName"),Ce=document.getElementById("gameBoardLevel"),Le=document.getElementById("gameBoardKillScore"),be=document.getElementById("gameBoardTotalScore"),Ae=document.getElementById("gameSceneDeadScene"),De=document.getElementById("deadSceneBackground"),ve=document.getElementById("deadSceneTextContainer"),ye=document.getElementById("deadSceneText"),Re=document.getElementById("deadSceneToLevel"),Pe=document.getElementById("deadSceneLoseGold"),ke=document.getElementById("deadSceneLoseJewel"),Oe=document.getElementById("chatInputContainer"),Me=document.getElementById("chatInput"),Ne=document.getElementById("flashMessageContainer"),xe=document.getElementById("risingMessageContainer"),we=document.getElementById("downMessageContainer"),Fe=document.getElementById("adminMessageContainer")},changeLoadingText:function(){var e=document.getElementById("loadingText"),t="Loading ";switch(Bt){case 1:t+=".";break;case 2:t+="..";break;case 3:t+="..."}++Bt>3&&(Bt=1),e.innerHTML=t},startSceneLoadingComplete:function(){var e=document.getElementById("loadingImgContainer"),t=document.getElementById("startSceneHudContent");e.getElementsByTagName("span")[0].classList.add("disable"),e.classList.add("disappearSmoothAni"),setTimeout(function(){e.classList.remove("disappearSmoothAni"),e.classList.add("disable")},1e3),t.classList.remove("disable"),t.classList.add("appearSmoothAni"),setTimeout(function(){t.classList.remove("appearSmoothAni")},1e3);var s=document.getElementById("userStartNickName");s.select(),s.onkeydown=function(e){13!==e.keyCode&&13!==e.which||p.onclick()}},drawStartScene:function(){d.classList.add("disable"),u.classList.add("disable")},drawGameScene:function(){if(c.classList.add("disable"),u.classList.add("disable"),Mt)Mt.style.display="none";else try{Mt=document.getElementById("crowd-shortcut").parentNode}catch(e){}},drawRestartScene:function(){if(c.classList.add("disable"),d.classList.add("disable"),Mt)Mt.style.display="block";else try{Mt=document.getElementById("crowd-shortcut").parentNode}catch(e){}},drawFPSAndPing:function(e,t){e<40?(e<0&&(e=0),kt.innerHTML='FPS : <span class="red">'+e+"</span>"):kt.innerHTML='FPS : <span class="green">'+e+"</span>",Ot.innerHTML=t>500?'PING : <span class="red">'+t+"ms</span>":'PING : <span class="green">'+t+"ms</span>"},enableSelectSkillInfo:function(e){var t=document.createElement("img"),s=g({},E.findData(a,"index",e.skillIcon));t.src=o;t.style.clip=E.makeCssClipStyle(s,1),E.setImgCssStyle(t,s,1),selectSkillImgContainer.appendChild(t);var i="white";switch(e.property){case m.SKILL_PROPERTY_FIRE:i="red";break;case m.SKILL_PROPERTY_FROST:i="blue";break;case m.SKILL_PROPERTY_ARCANE:i="purple"}switch(fe.getElementsByTagName("h4")[0].innerHTML="<span class='yellow'>Lv "+e.level+" </span><span class='"+i+"'>"+e.clientName+"</span>",fe.getElementsByTagName("div")[0].innerHTML="<span class='yellow'>Damage : </span><span class='"+i+"'>"+(e.fireDamage+e.frostDamage+e.arcaneDamage)+"</span>",fe.getElementsByTagName("div")[1].innerHTML="<span class='yellow'>ManaCost : </span>"+e.consumeMP,fe.getElementsByTagName("div")[2].innerHTML=e.clientDesc.replace(/&nbsp;/g,"<br>"),ge.classList.add("enable"),ge.classList.remove("disable"),e.index){case A:Q.classList.remove("disable"),$.classList.remove("disable"),ee.classList.remove("disable"),te.classList.remove("disable"),se.classList.remove("disable");break;case R[0]:Z.classList.remove("disable"),$.classList.remove("disable"),ee.classList.remove("disable"),te.classList.remove("disable"),se.classList.remove("disable");break;case R[1]:Z.classList.remove("disable"),Q.classList.remove("disable"),ee.classList.remove("disable"),te.classList.remove("disable"),se.classList.remove("disable");break;case R[2]:Z.classList.remove("disable"),Q.classList.remove("disable"),$.classList.remove("disable"),te.classList.remove("disable"),se.classList.remove("disable");break;case R[3]:Z.classList.remove("disable"),Q.classList.remove("disable"),$.classList.remove("disable"),ee.classList.remove("disable"),se.classList.remove("disable")}},disableSelectSkillInfo:function(){for(;selectSkillImgContainer.firstChild;)selectSkillImgContainer.removeChild(selectSkillImgContainer.firstChild);fe.getElementsByTagName("h4")[0].innerHTML="",ge.classList.add("disable"),ge.classList.remove("enable"),Z.classList.add("disable"),Q.classList.add("disable"),$.classList.add("disable"),ee.classList.add("disable"),te.classList.add("disable"),se.classList.add("disable")},syncSkills:function(e,t,s,i,n,a,r){A=e,D=t,R=s,P=i,k=n,v=a,y=r},updatePossessionSkills:function(e){k=e},setNewSkill:function(e){O.push(e)},updateNewSkills:function(e){for(var t=0;t<e.length;t++)-1===O.indexOf(e[t])&&O.push(e[t]);var s=H.parentNode.getElementsByTagName("img");s[0].classList.add("disable");var i=St.getElementsByTagName("img");i[0].classList.add("disable"),O.length&&(s[0].classList.remove("disable"),i[0].classList.remove("disable"))},updateHP:function(e){var t=e.HP/e.maxHP*100;t>100&&(t=100),X.style.height=t+"%";X.parentNode.getElementsByTagName("div")[1].innerHTML=Math.floor(e.HP)+"<br>/ "+Math.floor(e.maxHP)},updateMP:function(e){N=e.MP;var t=e.MP/e.maxMP*100;t>100&&(t=100),G.style.height=t+"%";G.parentNode.getElementsByTagName("div")[1].innerHTML=Math.floor(e.MP)+"<br>/ "+Math.floor(e.maxMP)},updateExp:function(e,t){if(-1===t)var s=100;else(s=e.exp/t*100)>100&&(s=100);Y.style.width=s+"%"},updateCondition:function(e){M[m.USER_CONDITION_FREEZE]=e[m.USER_CONDITION_FREEZE],M[m.USER_CONDITION_SILENCE]=e[m.USER_CONDITION_SILENCE],M[m.USER_CONDITION_BLUR]=e[m.USER_CONDITION_BLUR]},checkSkillsConditions:function(){var e=!1,t=!1,s=!1,i=!1,n=!1,a=!1;M[m.USER_CONDITION_FREEZE]||M[m.USER_CONDITION_SILENCE]||M[m.USER_CONDITION_BLUR]?e=!0:(Ut||(t=!0),P[0]&&(P[0].consumeMP>N?s=!0:jt?P[0].type===m.SKILL_TYPE_PASSIVE&&(s=!0):s=!0),P[1]&&(P[1].consumeMP>N?i=!0:Ht?P[1].type===m.SKILL_TYPE_PASSIVE&&(i=!0):i=!0),P[2]&&(P[2].consumeMP>N?n=!0:Kt?P[2].type===m.SKILL_TYPE_PASSIVE&&(n=!0):n=!0),P[3]&&(P[3].consumeMP>N?a=!0:Xt?P[3].type===m.SKILL_TYPE_PASSIVE&&(a=!0):a=!0)),e?(ie.classList.remove("disable"),ne.classList.remove("disable"),ae.classList.remove("disable"),re.classList.remove("disable"),oe.classList.remove("disable")):(ie.classList.add("disable"),ne.classList.add("disable"),ae.classList.add("disable"),re.classList.add("disable"),oe.classList.add("disable"),t&&ie.classList.remove("disable"),s&&ne.classList.remove("disable"),i&&ae.classList.remove("disable"),n&&re.classList.remove("disable"),a&&oe.classList.remove("disable"))},applySkill:function(e,t){var s=null,n={};if(A===e?(s=J,Ut=!1,n.slot=m.SKILL_BASIC_INDEX):R[0]===e?(s=z,jt=!1,n.slot=m.SKILL_EQUIP1_INDEX):R[1]===e?(s=V,Ht=!1,n.slot=m.SKILL_EQUIP2_INDEX):R[2]===e?(s=W,Kt=!1,n.slot=m.SKILL_EQUIP3_INDEX):R[3]===e&&(s=q,Xt=!1,n.slot=m.SKILL_EQUIP4_INDEX),s){var a=g({},E.findData(i,"index",e));if(t)var r=t/1e3;else r=a.cooldown*(100-wt)/1e5,n.skillIndex=a.index,n.startTime=Date.now(),n.cooldownTime=r,Gt.push(n);s.style.animationDuration=r+"s",s.classList.add("cooldownMaskAni")}},applySkillCooldown:function(e,t){for(var s=Is(t),i=0,n=0;n<Gt.length;n++)if(Gt[n].slot===s){var a=Date.now()-Gt[n].startTime;i=1e3*Gt[n].cooldownTime-a}for(n=0;n<Gt.length;n++)if(Gt[n].skillIndex===e){a=Date.now()-Gt[n].startTime;var r=1e3*Gt[n].cooldownTime-a;r>i&&r>=500&&this.applySkill(e,r)}},updateUnEquipSkillSlotCooldown:function(e){for(var t=Is(e),s=!0,i=0;i<Gt.length;i++)Gt[i].slot===t&&(s=!1);if(s){switch(t){case m.SKILL_EQUIP1_INDEX:jt=!0,z.classList.remove("cooldownMaskAni"),z.style.opacity=0;break;case m.SKILL_EQUIP2_INDEX:Ht=!0,V.classList.remove("cooldownMaskAni"),V.style.opacity=0;break;case m.SKILL_EQUIP3_INDEX:Kt=!0,W.classList.remove("cooldownMaskAni"),W.style.opacity=0;break;case m.SKILL_EQUIP4_INDEX:Xt=!0,q.classList.remove("cooldownMaskAni"),q.style.opacity=0}this.checkSkillsConditions()}},checkCooltime:function(e){switch(e){case A:return Ut;case R[0]:return jt;case R[1]:return Ht;case R[2]:return Kt;case R[3]:return Xt}},clearCooltime:function(){jt=!0,z.classList.remove("cooldownMaskAni"),z.style.opacity=0,Ht=!0,V.classList.remove("cooldownMaskAni"),V.style.opacity=0,Kt=!0,W.classList.remove("cooldownMaskAni"),W.style.opacity=0,Xt=!0,q.classList.remove("cooldownMaskAni"),q.style.opacity=0},setHUDSkills:function(){var e=48/72;if(D){var t=g({},E.findData(a,"index",D.skillIcon));x.style.clip=E.makeCssClipStyle(t,e),E.setImgCssStyle(x,t,e)}else x.style.clip=E.makeCssClipStyle(l,e),E.setImgCssStyle(x,l,e);if(y){t=g({},E.findData(a,"index",y.skillIcon));j.style.clip=E.makeCssClipStyle(t,e),E.setImgCssStyle(j,t,e)}else j.style.clip=E.makeCssClipStyle(l,e),E.setImgCssStyle(j,l,e);if(e=64/72,P[0]){t=g({},E.findData(a,"index",P[0].skillIcon));F.style.clip=E.makeCssClipStyle(t,e),E.setImgCssStyle(F,t,e)}else F.style.clip=E.makeCssClipStyle(l,e),E.setImgCssStyle(F,l,e);if(P[1]){t=g({},E.findData(a,"index",P[1].skillIcon));w.style.clip=E.makeCssClipStyle(t,e),E.setImgCssStyle(w,t,e)}else w.style.clip=E.makeCssClipStyle(l,e),E.setImgCssStyle(w,l,e);if(P[2]){t=g({},E.findData(a,"index",P[2].skillIcon));B.style.clip=E.makeCssClipStyle(t,e),E.setImgCssStyle(B,t,e)}else B.style.clip=E.makeCssClipStyle(l,e),E.setImgCssStyle(B,l,e);if(P[3]){t=g({},E.findData(a,"index",P[3].skillIcon));U.style.clip=E.makeCssClipStyle(t,e),E.setImgCssStyle(U,t,e)}else U.style.clip=E.makeCssClipStyle(l,e),E.setImgCssStyle(U,l,e)},setHUDStats:function(e){var t="white";switch(I){case m.CHAR_TYPE_FIRE:var s=S;t="red";break;case m.CHAR_TYPE_FROST:s=T,t="blue";break;case m.CHAR_TYPE_ARCANE:s=L,t="purple"}20===e.level?ce.innerHTML="<span class='yellow'>Lv MAX</span><span class='"+t+"'>"+s+"</span>":ce.innerHTML="<span class='yellow'>Lv "+e.level+"</span><span class='"+t+"'>"+s+"</span>";var i=Math.floor(10*(e.damageRate+(e.fireDamageRate+e.frostDamageRate+e.arcaneDamageRate)/3-200))/10,n=Math.floor(10*(e.resistAll+(e.resistFire+e.resistFrost+e.resistArcane)/3))/10;de.getElementsByTagName("span")[0].innerHTML=i+" %",de.onmouseover=ps.bind(de,m.STAT_OFFENCE_INDEX,e),de.onmouseout=Es.bind(de),ue.getElementsByTagName("span")[0].innerHTML=n+" %",ue.onmouseover=ps.bind(ue,m.STAT_DEFENCE_INDEX,e),ue.onmouseout=Es.bind(ue),pe.getElementsByTagName("span")[0].innerHTML=Nt=e.statPower,pe.onmouseover=us.bind(pe,m.STAT_POWER_INDEX,Nt),pe.onmouseout=Es.bind(pe),he.getElementsByTagName("span")[0].innerHTML=xt=e.statMagic,he.onmouseover=us.bind(he,m.STAT_MAGIC_INDEX,xt),he.onmouseout=Es.bind(he),Ee.getElementsByTagName("span")[0].innerHTML=Ft=e.statSpeed,Ee.onmouseover=us.bind(Ee,m.STAT_SPEED_INDEX,Ft),Ee.onmouseout=Es.bind(Ee)},setCooldownReduceRate:function(e){wt=e},setSkillChangeBtn:function(){H.onclick=function(){rs(),ss(Be),lt.onclick(),Vt?As():bs()},Ue.onclick=function(){rs(),ss(Be),lt.onclick()},He.onclick=function(){rs(),ss(Be),lt.onclick()}},popChangeWithKey:function(){rs(),ss(Be),lt.onclick(),H.classList.add("clicked"),setTimeout(function(){H.classList.remove("clicked")},250)},popCloseWithKey:function(){Be.classList.contains("disable")||(this.closePopUpSkillChange(),H.classList.add("clicked"),setTimeout(function(){H.classList.remove("clicked")},250))},setSkillIconResource:function(e){o=e.src,l=g({},E.findData(a,"index",m.UI_RESOURCE_INDEX_BLANK))},setResource:function(e){Ie.innerHTML=e.gold,Se.innerHTML=e.jewel},addResource:function(e,t){var s=parseInt(Ie.innerText),i=parseInt(Se.innerText);E.isNumeric(e)&&E.isNumeric(s)&&(Ie.innerText=s+e),E.isNumeric(t)&&E.isNumeric(i)&&(Se.innerText=i+t)},makeAdminMessage:function(e){var t=document.createElement("p");t.innerHTML=e,t.classList.add("adminMessage"),Fe.appendChild(t),setTimeout(function(){t.classList.add("adminMessageAni")},2e3),setTimeout(function(){Fe.removeChild(t)},7e3)},makeDownMessage:function(e,t){we.innerHTML="";var s=document.createElement("p"),i=parseInt(t/6e4);s.innerHTML=e+" ("+i+" min)",s.classList.add("downMessage"),we.appendChild(s);var n=this;Jt=setTimeout(function(){t-=6e4,n.makeDownMessage.call(n,e,t)},6e4)},cancelDown:function(){we.innerHTML="",Jt&&clearTimeout(Jt),Jt=!1},makeFlashMessage:function(e){var t=document.createElement("p");t.innerHTML=e,t.classList.add("flashMessage"),Ne.appendChild(t),setTimeout(function(){t.classList.add("flashMessageAni")},2e3),setTimeout(function(){Ne.removeChild(t)},5e3)},makeRisingMessage:function(e){var t=0;Date.now()>zt+150?(t=0,zt=Date.now()):(t=zt+150-Date.now(),zt=Date.now()+t),setTimeout(function(){var t=document.createElement("div");if(t.classList.add("risingMessage"),e.type===m.GET_RESOURCE_TYPE_GOLD){(s=document.createElement("img")).src="../images/GoldIcon.png",t.appendChild(s);(i=document.createElement("span")).innerHTML="<span class='yellow'> + </span>"+e.amount,t.appendChild(i)}else if(e.type===m.GET_RESOURCE_TYPE_JEWEL){var s;(s=document.createElement("img")).src="../images/JewelIcon.png",t.appendChild(s);var i;(i=document.createElement("span")).innerHTML="<span class='yellow'> + </span>"+e.amount,t.appendChild(i)}xe.appendChild(t),setTimeout(function(){t.classList.add("risingMessageAni")},50),setTimeout(function(){xe.removeChild(t)},3e3)},t)},makeRisingMessageForSkill:function(e,t){var s=0;Date.now()>zt+150?(s=0,zt=Date.now()):(s=zt+150-Date.now(),zt=Date.now()+s),setTimeout(function(){var s=document.createElement("div");s.classList.add("risingMessageSkill");var i=document.createElement("div");(c=document.createElement("img")).src=o;var n=g({},E.findData(a,"index",e.skillIcon));if(c.style.clip=E.makeCssClipStyle(n,40/72),E.setImgCssStyle(c,n,40/72),i.appendChild(c),s.appendChild(i),t){i.classList.add("risingMessageSkillImgToChange");var r=document.createElement("div");r.classList.add("risingMessageArrow"),s.appendChild(r);var l=document.createElement("div");l.classList.add("risingMessageResource");var c=document.createElement("img");if(e.exchangeToGold){c.src="../images/GoldIcon.png";var d=e.exchangeToGold;(u=document.createElement("span")).innerHTML="<span class='yellow'> : </span>"+d}else if(e.exchangeToJewel){c.src="../images/JewelIcon.png",d=e.exchangeToJewel;var u;(u=document.createElement("span")).innerHTML="<span class='yellow'> : </span>&nbsp;"+d}l.appendChild(c),l.appendChild(u),s.appendChild(l)}else i.classList.add("risingMessageSkillImg");xe.appendChild(s),setTimeout(function(){s.classList.add("risingMessageAniForSkill")},50),setTimeout(function(){xe.removeChild(s)},3e3)},s)},updateBuffIcon:function(e,t,s,i){for(;K.firstChild;)K.removeChild(K.firstChild);K.innerHTML="";if(y){var r=g({},E.findData(n,"index",y.buffToSelf));(u=document.createElement("div")).setAttribute("buffGroupIndex",y.buffToSelf);(p=document.createElement("div")).classList.add("buffImgContainer");(m=document.createElement("img")).src=o;var l=g({},E.findData(a,"index",r.buffIcon));m.style.clip=E.makeCssClipStyle(l,.5),E.setImgCssStyle(m,l,.5),p.appendChild(m),u.appendChild(p),K.appendChild(u),u.addEventListener("mouseover",hs.bind(u),!1),u.addEventListener("mouseout",Es.bind(u),!1)}if(e)for(var c=0;c<e.length;c++){var d=g({},E.findData(n,"index",e[c])),u=document.createElement("div");(p=document.createElement("div")).classList.add("buffImgContainer"),u.setAttribute("buffGroupIndex",d.index);(m=document.createElement("img")).src=o;l=g({},E.findData(a,"index",d.buffIcon));m.style.clip=E.makeCssClipStyle(l,.5),E.setImgCssStyle(m,l,.5),p.appendChild(m),u.appendChild(p),K.appendChild(u),u.addEventListener("mouseover",hs.bind(u),!1),u.addEventListener("mouseout",Es.bind(u),!1)}if(s)for(c=0;c<s.length;c++){var p,h=g({},E.findData(n,"index",s[c]));u=document.createElement("div");(p=document.createElement("div")).classList.add("buffImgContainer"),u.setAttribute("buffGroupIndex",h.index);var m;(m=document.createElement("img")).src=o;l=g({},E.findData(a,"index",h.buffIcon));m.style.clip=E.makeCssClipStyle(l,.5),E.setImgCssStyle(m,l,.5),p.appendChild(m),u.appendChild(p),K.appendChild(u),u.addEventListener("mouseover",hs.bind(u),!1),u.addEventListener("mouseout",Es.bind(u),!1)}if(t)for(c=0;c<t.length;c++)!function(){var e=g({},E.findData(n,"index",t[c].index)),s=e.buffLifeTime,r=t[c].startTime+i,l=Date.now()-r,d=(t[c],document.createElement("div"));d.setAttribute("buffGroupIndex",e.index);var u=document.createElement("div");u.classList.add("buffImgContainer");var p=document.createElement("img");p.src=o;var h=g({},E.findData(a,"index",e.buffIcon));p.style.clip=E.makeCssClipStyle(h,.5),E.setImgCssStyle(p,h,.5),u.appendChild(p),d.appendChild(u),K.appendChild(d),d.addEventListener("mouseover",hs.bind(d),!1),d.addEventListener("mouseout",Es.bind(d),!1);var m=function(){l=Date.now()-r,s-l<=5e3?d.classList.add("buffBeforeEndAni"):setTimeout(m,100)};setTimeout(m,100)}()},initPopUpSkillChanger:function(){Be=document.getElementById("popUpSkillChange"),Ue=document.getElementById("popUpCloseBtn"),je=document.getElementById("popUpSkillContainer"),He=document.getElementById("popUpBackground"),Ke=document.getElementById("popUpSkillInfoAndBtn"),(Xe=document.getElementById("popUpSkillInfoIcon")).onclick=rs,Ge=document.getElementById("popUpSkillInfoDesc"),Ye=document.getElementById("skillUpgradeEffect"),Je=document.getElementById("popUpSkillUpgradeCostGold"),ze=document.getElementById("popUpSkillUpgradeCostJewel"),Ve=document.getElementById("popUpSkillUpgradeBtn"),qe=document.getElementById("popUpSkillTutorialClickText1"),Ze=document.getElementById("popUpSkillTutorialClickText2"),Qe=document.getElementById("popUpSkillTutorialArrow"),$e=document.getElementById("popUpSkillTextSkillInfo"),(We=document.getElementById("popUpCancelSkillSelectBtn")).onclick=rs,et=document.getElementById("popUpEquipBaseSkill"),tt=document.getElementById("popUpEquipSkillsContainer"),st=document.getElementById("popUpEquipSkill1"),it=document.getElementById("popUpEquipSkill2"),nt=document.getElementById("popUpEquipSkill3"),at=document.getElementById("popUpEquipSkill4"),rt=document.getElementById("popUpEquipPassiveSkill"),ot=document.getElementById("popUpSortType"),lt=document.getElementById("popUpSortBtn")},checkPopUpSkillChange:function(){var e=!1,t=parseInt(st.getAttribute("skillIndex")),s=parseInt(it.getAttribute("skillIndex")),i=parseInt(nt.getAttribute("skillIndex")),n=parseInt(at.getAttribute("skillIndex"));R[0]&&t!==R[0]&&(e=!0),R[1]&&s!==R[1]&&(e=!0),R[2]&&i!==R[2]&&(e=!0),R[3]&&n!==R[3]&&(e=!0);for(var a=je.children,r=0;r<a.length;r++){for(var o=!1,l=parseInt(a[r].getAttribute("skillIndex")),c=0;c<k.length;c++)if(l===k[c]){o=!0;break}o||(e=!0)}return e},upgradeBaseSkill:function(e,t){var s=A;A=e,D=t,$t===s&&this.updateSelectedPanel(e),this.updateDOMElementsSkillIndex(s,e),es=!0,Ve.getElementsByTagName("span")[0].classList.remove("disable"),Ve.getElementsByTagName("img")[0].classList.add("disable"),this.serverResponseTimeout&&(clearTimeout(this.serverResponseTimeout),this.serverResponseTimeout=!1)},upgradeInherentSkill:function(e,t){var s=v;v=e,y=t,$t===s&&this.updateSelectedPanel(e),this.updateDOMElementsSkillIndex(s,e),es=!0,Ve.getElementsByTagName("span")[0].classList.remove("disable"),Ve.getElementsByTagName("img")[0].classList.add("disable"),this.serverResponseTimeout&&(clearTimeout(this.serverResponseTimeout),this.serverResponseTimeout=!1)},upgradePossessionSkill:function(e,t){for(var s=0;s<k.length;s++)if(k[s]===e){var n=k.indexOf(e);k.splice(n,1,t);break}for(s=0;s<R.length;s++)if(R[s]===e){n=R.indexOf(e);R.splice(n,1,t);var a=g({},E.findData(i,"index",t));P.splice(n,1,a);break}$t===e&&this.updateSelectedPanel(t),this.updateDOMElementsSkillIndex(e,t),es=!0,Ve.getElementsByTagName("span")[0].classList.remove("disable"),Ve.getElementsByTagName("img")[0].classList.add("disable"),this.serverResponseTimeout&&(clearTimeout(this.serverResponseTimeout),this.serverResponseTimeout=!1)},playSkillUpgradeEffect:function(){Ye.classList.remove("skillUpgradeEffectAni"),setTimeout(function(){Ye.classList.add("skillUpgradeEffectAni")},50)},updateDOMElementsSkillIndex:function(e,t){for(var s=document.querySelectorAll('[skillIndex="'+e+'"]'),n=(g({},E.findData(i,"index",t)),0);n<s.length;n++)s[n].setAttribute("skillIndex",t);this.setHUDSkills()},setPopUpSkillChange:function(e,t){if(t){var s=$t;rs()}for(;et.firstChild;)et.removeChild(et.firstChild);for(;st.firstChild;)st.removeChild(st.firstChild);for(;it.firstChild;)it.removeChild(it.firstChild);for(;nt.firstChild;)nt.removeChild(nt.firstChild);for(;at.firstChild;)at.removeChild(at.firstChild);for(;rt.firstChild;)rt.removeChild(rt.firstChild);st.removeAttribute("skillIndex"),it.removeAttribute("skillIndex"),nt.removeAttribute("skillIndex"),at.removeAttribute("skillIndex");(h=document.createElement("div")).classList.add("popUpskillImgContainer");var n=document.createElement("img");n.src=o;var r=60/72,l=g({},E.findData(a,"index",D.skillIcon));n.style.clip=E.makeCssClipStyle(l,r),E.setImgCssStyle(n,l,r),et.setAttribute("skillIndex",A),h.appendChild(n),et.appendChild(h),et.onclick=is.bind(this,et,m.SKILL_CHANGE_PANEL_EQUIP,e);(h=document.createElement("div")).classList.add("popUpskillImgContainer");var c=document.createElement("img");c.src=o;l=g({},E.findData(a,"index",y.skillIcon));if(c.style.clip=E.makeCssClipStyle(l,r),E.setImgCssStyle(c,l,r),rt.setAttribute("skillIndex",v),h.appendChild(c),rt.appendChild(h),rt.onclick=is.bind(this,rt,m.SKILL_CHANGE_PANEL_EQUIP,e),r=75/72,P[0]){var d=document.createElement("img");(h=document.createElement("div")).classList.add("popUpskillImgContainer"),d.src=o;l=g({},E.findData(a,"index",P[0].skillIcon));d.style.clip=E.makeCssClipStyle(l,r),E.setImgCssStyle(d,l,r),st.setAttribute("skillIndex",P[0].index),h.appendChild(d),st.appendChild(h)}if(P[1]){(h=document.createElement("div")).classList.add("popUpskillImgContainer");var u=document.createElement("img");u.src=o;l=g({},E.findData(a,"index",P[1].skillIcon));u.style.clip=E.makeCssClipStyle(l,r),E.setImgCssStyle(u,l,r),it.setAttribute("skillIndex",P[1].index),h.appendChild(u),it.appendChild(h)}if(P[2]){(h=document.createElement("div")).classList.add("popUpskillImgContainer");var p=document.createElement("img");p.src=o;l=g({},E.findData(a,"index",P[2].skillIcon));p.style.clip=E.makeCssClipStyle(l,r),E.setImgCssStyle(p,l,r),nt.setAttribute("skillIndex",P[2].index),h.appendChild(p),nt.appendChild(h)}if(P[3]){var h;(h=document.createElement("div")).classList.add("popUpskillImgContainer");var f=document.createElement("img");f.src=o;l=g({},E.findData(a,"index",P[3].skillIcon));f.style.clip=E.makeCssClipStyle(l,r),E.setImgCssStyle(f,l,r),at.setAttribute("skillIndex",P[3].index),h.appendChild(f),at.appendChild(h)}if(st.onclick=is.bind(this,st,m.SKILL_CHANGE_PANEL_EQUIP,e),it.onclick=is.bind(this,it,m.SKILL_CHANGE_PANEL_EQUIP,e),nt.onclick=is.bind(this,nt,m.SKILL_CHANGE_PANEL_EQUIP,e),at.onclick=is.bind(this,at,m.SKILL_CHANGE_PANEL_EQUIP,e),ot.onclick=function(){var e=parseInt(ot.getAttribute("sortType"));if(e)switch(e){case m.CHAR_TYPE_FIRE:ot.setAttribute("sortType",m.CHAR_TYPE_FROST),ot.src="/images/charFrostSymbol.png";break;case m.CHAR_TYPE_FROST:ot.setAttribute("sortType",m.CHAR_TYPE_ARCANE),ot.src="/images/charArcaneSymbol.png";break;case m.CHAR_TYPE_ARCANE:ot.setAttribute("sortType",m.CHAR_TYPE_FIRE),ot.src="/images/charFireSymbol.png"}else ot.setAttribute("sortType",m.CHAR_TYPE_FIRE),ot.src="/images/charArcaneSymbol.png";lt.onclick()}.bind(this),lt.onclick=function(e){var t=parseInt(ot.getAttribute("sortType"));t||(t=m.CHAR_TYPE_FIRE);for(var s=[],n=[],r=0;r<k.length;r++){var l=g({},E.findData(i,"index",k[r]));l.property===t?s.push(k[r]):n.push(k[r])}s.sort(function(e,t){return e-t}),n.sort(function(e,t){return e-t}),k=[];for(var r=0;r<s.length;r++)k.push(s[r]);for(var r=0;r<n.length;r++)k.push(n[r]);for(;je.firstChild;)je.removeChild(je.firstChild);for(var c=[],r=0;r<R.length;r++)c.push(R[r]);for(var r=0;r<k.length;r++){var d=!1;if(-1!==c.indexOf(k[r])&&(d=!0),!d){var u=!1;-1!==O.indexOf(k[r])&&(u=!0);var l=g({},E.findData(i,"index",k[r])),p=document.createElement("div"),h=document.createElement("div");h.classList.add("popUpskillImgContainer");var f=document.createElement("img");p.setAttribute("skillIndex",k[r]);var I=document.createElement("img");I.src="../images/newIcon.png",u||I.classList.add("disable"),p.appendChild(I),p.classList.add("popUpSkillContainerItem"),f.src=o;var S=g({},E.findData(a,"index",l.skillIcon));f.style.clip=E.makeCssClipStyle(S,75/72),E.setImgCssStyle(f,S,75/72),h.appendChild(f),p.appendChild(h),je.appendChild(p),p.onclick=is.bind(this,p,m.SKILL_CHANGE_PANEL_CONTAINER,e)}}}.bind(this,e),lt.onclick(),s){Be.querySelectorAll('[skillIndex="'+s+'"]')[0].onclick()}},updateSelectedPanel:function(e){for(;Xe.firstChild;)Xe.removeChild(Xe.firstChild);for(;Ge.firstChild;)Ge.removeChild(Ge.firstChild);if(Je.innerHTML="",ze.innerHTML="",We.classList.add("disable"),e){$t=e;var t=g({},E.findData(i,"index",e)),s=document.createElement("img");if(-1!==t.nextSkillIndex)var n=g({},E.findData(i,"index",t.nextSkillIndex));var r=fs(t,n).replace(/&nbsp;/g,"<br>");if(Ge.innerHTML=r,n)for(var l=Ge.getElementsByTagName("img"),c=0;c<l.length;c++)l[c].classList.remove("disable");s.src=o;var d=g({},E.findData(a,"index",t.skillIcon));s.style.clip=E.makeCssClipStyle(d,75/72),E.setImgCssStyle(s,d,75/72);var u=parseInt(Ie.innerText),p=parseInt(Se.innerText),h="white";h=u>=t.upgradeGoldAmount?"green":"red",Je.innerHTML="<span class='"+h+"'>"+t.upgradeGoldAmount+"<br>/ "+u,h=p>=t.upgradeJewelAmount?"green":"red",ze.innerHTML="<span class='"+h+"'>"+t.upgradeJewelAmount+"<br>/ "+p,Xe.appendChild(s),Ve.onclick=function(e){if(es&&$t)if(-1!==e.nextSkillIndex){var t=parseInt(Ie.innerText),s=parseInt(Se.innerText);t>=e.upgradeGoldAmount&&s>=e.upgradeJewelAmount?(this.onSkillUpgrade($t),es=!1,Ve.getElementsByTagName("span")[0].classList.add("disable"),Ve.getElementsByTagName("img")[0].classList.remove("disable"),this.serverResponseTimeout=setTimeout(function(){es||(es=!0,Ve.getElementsByTagName("span")[0].classList.remove("disable"),Ve.getElementsByTagName("img")[0].classList.add("disable"))},m.MAX_SERVER_RESPONSE_TIME)):this.makeFlashMessage("Not enough resource!!!")}else this.makeFlashMessage("Spell reach max level!!!")}.bind(this,t),We.classList.remove("disable"),-1!==t.nextSkillIndex?(Ve.getElementsByTagName("span")[0].innerHTML="Upgrade",skillUpgradeBlockMask.classList.add("disable")):(Ve.getElementsByTagName("span")[0].innerHTML="Max Level",skillUpgradeBlockMask.classList.remove("disable"),Je.innerHTML="",ze.innerHTML="")}else Ve.onclick=new Function,Ve.getElementsByTagName("span")[0].innerHTML=" ",skillUpgradeBlockMask.classList.remove("disable")},closePopUpSkillChange:function(){Be.classList.contains("enable")&&(rs(),ss(Be),lt.onclick())},setBoard:function(e,t){var s=[],i=[],n=0,a="",r=0;e.sort(function(e,t){return t.totalScore-e.totalScore});for(var o=0;o<e.length;o++)t===e[o].id&&(n=o+1,a=e[o].name,userLevel=e[o].level,r=e[o].killScore,userScore=e[o].totalScore),0!==o&&1!==o&&2!==o||s.push(e[o].id),i.push({rank:o+1,name:e[o].name,level:e[o].level,kill:e[o].killScore,score:e[o].totalScore});var l="<h3>Rank</h3><hr>",c="<h3>Name</h3><hr>",d="<h3>Level</h3><hr>",u="<h3>Kills</h3><hr>",p="<h3>Score</h3><hr>",h=i.length>10?10:i.length;for(o=0;o<h;o++){var E=!1;0!==o&&1!==o&&2!==o||(E=!0),n<=10&&n===o+1?E?(l+=0==o?"<img src='/images/rank1Icon.png'/>":1===o?"<img src='/images/rank2Icon.png'/>":"<img src='/images/rank3Icon.png'/>",c+="<p class='user ranker'>"+i[o].name+"</p>",d+="<p class='user ranker'>"+i[o].level+"</p>",u+="<p class='user ranker'>"+i[o].kill+"</p>",p+="<p class='user ranker'>"+i[o].score+"</p>"):(l+="<p class='user'>"+i[o].rank+"</p>",c+="<p class='user'>"+i[o].name+"</p>",d+="<p class='user'>"+i[o].level+"</p>",u+="<p class='user'>"+i[o].kill+"</p>",p+="<p class='user'>"+i[o].score+"</p>"):E?(l+=0==o?"<img src='/images/rank1Icon.png'/>":1===o?"<img src='/images/rank2Icon.png'/>":"<img src='/images/rank3Icon.png'/>",c+="<p class='ranker'>"+i[o].name+"</p>",d+="<p class='ranker'>"+i[o].level+"</p>",u+="<p class='ranker'>"+i[o].kill+"</p>",p+="<p class='ranker'>"+i[o].score+"</p>"):(l+="<p>"+i[o].rank+"</p>",c+="<p>"+i[o].name+"</p>",d+="<p>"+i[o].level+"</p>",u+="<p>"+i[o].kill+"</p>",p+="<p>"+i[o].score+"</p>")}n>10&&(l+="<p class='user' style='font-size: 12px'>"+n+"</p>",c+="<p class='user' style='font-size: 12px'>"+a+"</p>",d+="<p class='user' style='font-size: 12px'>"+userLevel+"</p>",u+="<p class='user' style='font-size: 12px'>"+r+"</p>",p+="<p class='user' style='font-size: 12px'>"+r+"</p>"),_e.innerHTML=l,Te.innerHTML=c,Ce.innerHTML=d,Le.innerHTML=u,be.innerHTML=p,this.onSetRankers(s)},updateBoard:function(e,t){this.setBoard(e,t)},updateKillBoard:function(e,t){var s=document.createElement("span");s.classList.add("killFeedBack");var i="",n="white",a="white";switch(e.userType){case m.CHAR_TYPE_FIRE:n="red";break;case m.CHAR_TYPE_FROST:n="blue";break;case m.CHAR_TYPE_ARCANE:n="purple"}switch(t.userType){case m.CHAR_TYPE_FIRE:a="red";break;case m.CHAR_TYPE_FROST:a="blue";break;case m.CHAR_TYPE_ARCANE:a="purple"}if(e.userName)r=e.userName;else var r="NoName";if(t.userName)o=t.userName;else var o="NoName";if(e.userID===t.userID)i+="&nbsp; <span class="+n+">"+r+"</span>",i+="&nbsp; commit suicide";else if(e.feedBackLevel){switch(e.feedBackLevel){case m.KILL_FEEDBACK_LEVEL_0:break;case m.KILL_FEEDBACK_LEVEL_1:i+='<span class="feedbackLevel1 feedback" style="color : '+m.KILL_FEEDBACK_LEVEL_1_COLOR+'">'+m.KILL_FEEDBACK_LEVEL_1_PREFIX+"</span>",setTimeout(function(){me.getElementsByClassName("feedbackLevel1")[0].classList.remove("feedbackLevel1")},50);break;case m.KILL_FEEDBACK_LEVEL_2:i+='<span class="feedbackLevel2 feedback" style="color : '+m.KILL_FEEDBACK_LEVEL_2_COLOR+'">'+m.KILL_FEEDBACK_LEVEL_2_PREFIX+"</span>",setTimeout(function(){me.getElementsByClassName("feedbackLevel2")[0].classList.remove("feedbackLevel2")},50);break;case m.KILL_FEEDBACK_LEVEL_3:i+='<span class="feedbackLevel3 feedback" style="color : '+m.KILL_FEEDBACK_LEVEL_3_COLOR+'">'+m.KILL_FEEDBACK_LEVEL_3_PREFIX+"</span>",setTimeout(function(){me.getElementsByClassName("feedbackLevel3")[0].classList.remove("feedbackLevel3")},50);break;case m.KILL_FEEDBACK_LEVEL_4:i+='<span class="feedbackLevel4 feedback" style="color : '+m.KILL_FEEDBACK_LEVEL_4_COLOR+'">'+m.KILL_FEEDBACK_LEVEL_4_PREFIX+"</span>",setTimeout(function(){me.getElementsByClassName("feedbackLevel4")[0].classList.remove("feedbackLevel4")},50);break;case m.KILL_FEEDBACK_LEVEL_5:i+='<span class="feedbackLevel5 feedback" style="color : '+m.KILL_FEEDBACK_LEVEL_5_COLOR+'">'+m.KILL_FEEDBACK_LEVEL_5_PREFIX+"</span>",setTimeout(function(){me.getElementsByClassName("feedbackLevel5")[0].classList.remove("feedbackLevel5")},50);break;case m.KILL_FEEDBACK_LEVEL_6:i+='<span class="feedbackLevel6 feedback" style="color : '+m.KILL_FEEDBACK_LEVEL_6_COLOR+'">'+m.KILL_FEEDBACK_LEVEL_6_PREFIX+"</span>",setTimeout(function(){me.getElementsByClassName("feedbackLevel6")[0].classList.remove("feedbackLevel6")},50);break;case m.KILL_FEEDBACK_LEVEL_7:i+='<span class="feedbackLevel7 feedback" style="color : '+m.KILL_FEEDBACK_LEVEL_7_COLOR+'">'+m.KILL_FEEDBACK_LEVEL_7_PREFIX+"</span>",setTimeout(function(){me.getElementsByClassName("feedbackLevel7")[0].classList.remove("feedbackLevel7")},50)}i+="&nbsp; <span class="+n+">"+r+"</span>",i+="&nbsp;&nbsp; kill ",i+="&nbsp; <span class="+a+">"+o+"</span>"}else i+="&nbsp; <span class="+n+">"+r+"</span>",i+="&nbsp;&nbsp;  kill ",i+="&nbsp; <span class="+a+">"+o+"</span>";i+="&nbsp;!!!<br>",s.innerHTML=i;for(var l=me.getElementsByClassName("killFeedBack");l.length>=5;)me.removeChild(l[0]);me.appendChild(s),setTimeout(function(){s.classList.add("disappearSmoothAni"),setTimeout(function(){s.classList.remove("disappearSmoothAni"),s.classList.add("disable")},1e3)},5e3)},setMiniMapChests:function(e,t){Ct.setAttribute("locationID",t[0].id),Ct.style.left=Math.floor(100*t[0].posX/m.CANVAS_MAX_SIZE.width)+"%",Ct.style.top=Math.floor(100*t[0].posY/m.CANVAS_MAX_SIZE.height)+"%",Lt.setAttribute("locationID",t[1].id),Lt.style.left=Math.floor(100*t[1].posX/m.CANVAS_MAX_SIZE.width)+"%",Lt.style.top=Math.floor(100*t[1].posY/m.CANVAS_MAX_SIZE.height)+"%",bt.setAttribute("locationID",t[2].id),bt.style.left=Math.floor(100*t[2].posX/m.CANVAS_MAX_SIZE.width)+"%",bt.style.top=Math.floor(100*t[2].posY/m.CANVAS_MAX_SIZE.height)+"%",At.setAttribute("locationID",t[3].id),At.style.left=Math.floor(100*t[3].posX/m.CANVAS_MAX_SIZE.width)+"%",At.style.top=Math.floor(100*t[3].posY/m.CANVAS_MAX_SIZE.height)+"%",Dt.setAttribute("locationID",t[4].id),Dt.style.left=Math.floor(100*t[4].posX/m.CANVAS_MAX_SIZE.width)+"%",Dt.style.top=Math.floor(100*t[4].posY/m.CANVAS_MAX_SIZE.height)+"%",vt.setAttribute("locationID",t[5].id),vt.style.left=Math.floor(100*t[5].posX/m.CANVAS_MAX_SIZE.width)+"%",vt.style.top=Math.floor(100*t[5].posY/m.CANVAS_MAX_SIZE.height)+"%",yt.setAttribute("locationID",t[6].id),yt.style.left=Math.floor(100*t[6].posX/m.CANVAS_MAX_SIZE.width)+"%",yt.style.top=Math.floor(100*t[6].posY/m.CANVAS_MAX_SIZE.height)+"%",Rt.setAttribute("locationID",t[7].id),Rt.style.left=Math.floor(100*t[7].posX/m.CANVAS_MAX_SIZE.width)+"%",Rt.style.top=Math.floor(100*t[7].posY/m.CANVAS_MAX_SIZE.height)+"%",Pt.setAttribute("locationID",t[8].id),Pt.style.left=Math.floor(100*t[8].posX/m.CANVAS_MAX_SIZE.width)+"%",Pt.style.top=Math.floor(100*t[8].posY/m.CANVAS_MAX_SIZE.height)+"%";for(var s=Ct.parentNode.querySelectorAll("[type=chest]"),i=0;i<s.length-1;i++){(r=s[i].getElementsByTagName("img"))[0].src=m.MINIMAP_CHEST_GROUND_SRC}for(i=0;i<e.length;i++)for(var n=0;n<s.length-1;n++){var a=s[n].getAttribute("locationID");if(e[i].locationID===a){var r=s[n].getElementsByTagName("img");1===e[i].grade||2===e[i].grade?r[0].src=m.MINIMAP_CHEST_SRC_1:3===e[i].grade||4===e[i].grade?r[0].src=m.MINIMAP_CHEST_SRC_2:5===e[i].grade&&(r[0].src=m.MINIMAP_CHEST_SRC_3);break}}},setMinimapZones:function(e,t){var s=document.getElementById("miniMapSafe1"),i=document.getElementById("miniMapSafe2"),n=document.getElementById("miniMapSafe3"),a=document.getElementById("miniMapSafe4"),r=document.getElementById("miniMapPortal1"),o=document.getElementById("miniMapPortal2");s.style.left=Math.floor(100*e[0].posX/m.CANVAS_MAX_SIZE.width)+"%",s.style.top=Math.floor(100*e[0].posY/m.CANVAS_MAX_SIZE.height)+"%",i.style.left=Math.floor(100*e[1].posX/m.CANVAS_MAX_SIZE.width)+"%",i.style.top=Math.floor(100*e[1].posY/m.CANVAS_MAX_SIZE.height)+"%",n.style.left=Math.floor(100*e[2].posX/m.CANVAS_MAX_SIZE.width)+"%",n.style.top=Math.floor(100*e[2].posY/m.CANVAS_MAX_SIZE.height)+"%",a.style.left=Math.floor(100*e[3].posX/m.CANVAS_MAX_SIZE.width)+"%",a.style.top=Math.floor(100*e[3].posY/m.CANVAS_MAX_SIZE.height)+"%",r.style.left=Math.floor(100*t[0].posX/m.CANVAS_MAX_SIZE.width)+"%",r.style.top=Math.floor(100*t[0].posY/m.CANVAS_MAX_SIZE.height)+"%",o.style.left=Math.floor(100*t[1].posX/m.CANVAS_MAX_SIZE.width)+"%",o.style.top=Math.floor(100*t[1].posY/m.CANVAS_MAX_SIZE.height)+"%"},createChest:function(e,t){for(var s=Ct.parentNode.querySelectorAll("[type=chest]"),i=0;i<s.length;i++)if(e===s[i].getAttribute("locationID")){var n=s[i].getElementsByTagName("img");1===t||2===t?(n[0].src=m.MINIMAP_CHEST_SRC_1,n[0].classList.add("chestAni1"),n[1].classList.add("chestAni1")):3===t||4===t?(n[0].src=m.MINIMAP_CHEST_SRC_2,n[0].classList.add("chestAni2"),n[1].classList.add("chestAni2")):5===t&&(n[0].src=m.MINIMAP_CHEST_SRC_3,n[0].classList.add("chestAni3"),n[1].classList.add("chestAni3")),n[0].classList.add("chestAni"),n[1].classList.add("chestAni")}},deleteChest:function(e){for(var t=Ct.parentNode.querySelectorAll("[type=chest]"),s=0;s<t.length;s++)if(e===t[s].getAttribute("locationID")){var i=t[s].getElementsByTagName("img");i[0].src=m.MINIMAP_CHEST_GROUND_SRC,i[0].classList.remove("chestAni"),i[1].classList.remove("chestAni"),i[0].classList.remove("chestAni1"),i[1].classList.remove("chestAni1"),i[0].classList.remove("chestAni2"),i[1].classList.remove("chestAni2"),i[0].classList.remove("chestAni3"),i[1].classList.remove("chestAni3")}},setUserPosition:function(e){Tt.style.left=Math.floor(100*e.x/m.CANVAS_MAX_SIZE.width)+"%",Tt.style.top=Math.floor(100*e.y/m.CANVAS_MAX_SIZE.height)+"%"},updateUserPosition:function(e){Tt.style.left=Math.floor(100*e.x/m.CANVAS_MAX_SIZE.width)+"%",Tt.style.top=Math.floor(100*e.y/m.CANVAS_MAX_SIZE.height)+"%"},showChatInput:function(){Oe.classList.remove("disable"),Me.select()},getChatMessage:function(){return Me.value},disableChatInput:function(){Oe.classList.add("disable")},clearChatInput:function(){Me.value=""},playDeadScene:function(e,t,s,i,n,a){Ae.style.width="100%",Ae.style.height="100%",De.classList.remove("deadSceneBackgroundDefault"),De.classList.add("deadSceneBackgroundAni");var r="";r=t?e===t?"You kill yourself":"You are slain by <span class='yellow'>"+t+"</span>":"You are dead",ye.innerHTML=r;var o="";switch(I){case m.CHAR_TYPE_FIRE:o+=a>s?"<span class='red'>"+S+"</span> level down to <span class='yellow'>"+s+"</span>":"<span class='yellow'>Lv "+s+" </span><span class='red'>"+S+"</span>";break;case m.CHAR_TYPE_FROST:o+=a>s?"<span class='blue'>"+T+"</span> level down to <span class='yellow'>"+s+"</span>":"<span class='yellow'>Lv "+s+" </span><span class='blue'>"+T+"</span>";break;case m.CHAR_TYPE_ARCANE:o+=a>s?"<span class='purple'>"+L+"</span> level down to <span class='yellow'>"+s+"</span>":"<span class='yellow'>Lv "+s+" </span><span class='purple'>"+L+"</span>"}if(n&&(o+="<br><span class='red'>Some knowledges have lost...<span class='smallFont'>[Some skills level down]</span></span>"),Re.innerHTML=o,i.gold)var l="<span class='red'> -"+i.gold+"</span>";else l=i.gold;if(i.jewel)var c="<span class='red'> -"+i.jewel+"</span>";else c=i.jewel;Pe.innerHTML=l,ke.innerHTML=c,setTimeout(function(){ve.classList.remove("deadSceneTextDefault"),ve.classList.add("deadSceneTextAni")},m.DEAD_SCENE_TEXT_ANI_PLAY_DELAY_TIME);var d=E.isNumeric(parseInt(Ie.innerText)-i.gold)?parseInt(Ie.innerText)-i.gold:0,u=E.isNumeric(parseInt(Se.innerText)-i.jewel)?parseInt(Se.innerText)-i.jewel:0;this.setResource({gold:d,jewel:u})},disableDeadScene:function(){ye.innerHTML="",De.classList.remove("deadSceneBackgroundAni"),De.classList.add("deadSceneBackgroundDefault"),ve.classList.remove("deadSceneTextAni"),ve.classList.add("deadSceneTextDefault"),Ae.style.width="0%",Ae.style.height="0%",d.classList.add("disappearSmoothAni"),d.classList.remove("enable"),setTimeout(function(){d.classList.add("disable"),d.classList.remove("disappearSmoothAni")},1e3)},bottomToRight:function(){le.classList.add("bottomRightCenterToRight")},rightToBottom:function(){le.classList.remove("bottomRightCenterToRight")}};function ss(e,t){e.classList.contains("disable")?(e.classList.add("enable"),e.classList.remove("disable"),t?(e.classList.add("popToCenter"),He.classList.add("enable"),He.classList.remove("disable")):e.classList.remove("popToCenter")):e.classList.contains("enable")&&(e.classList.add("disable"),e.classList.remove("enable"),e.classList.remove("popToCenter"),He.classList.add("disable"),He.classList.remove("enable"))}function is(e,t,s){this.onPopUpSkillChangeClick(),os();var n=null,r=null;t===m.SKILL_CHANGE_PANEL_EQUIP&&(e===et?n=-1:e===st?n=0:e===it?n=1:e===nt?n=2:e===at?n=3:e===rt&&(n=-1));var l=parseInt(e.getAttribute("skillIndex"));if(t===m.SKILL_CHANGE_PANEL_CONTAINER){var c=O.indexOf(l);-1!==c&&O.splice(c,1),e.getElementsByTagName("img")[0].classList.add("disable");var d=H.parentNode.getElementsByTagName("img");d[0].classList.add("disable");var u=St.getElementsByTagName("img");u[0].classList.add("disable"),O.length&&(d[0].classList.remove("disable"),u[0].classList.remove("disable"))}if(qt){if(qt!==t){if(qt===m.SKILL_CHANGE_PANEL_CONTAINER)if(-1===n)this.makeFlashMessage("Can not change character spell!!!");else{for(var p=0,h=0;h<je.childNodes.length;h++)if(je.childNodes[h]===Zt){p=h;break}if(je.removeChild(Zt),l){var f=g({},E.findData(i,"index",l)),S=document.createElement("div");(v=document.createElement("div")).classList.add("popUpskillImgContainer");var _=document.createElement("img");S.setAttribute("skillIndex",l);(y=document.createElement("img")).classList.add("disable"),S.appendChild(y),S.classList.add("popUpSkillContainerItem"),_.src=o;var T=g({},E.findData(a,"index",f.skillIcon));_.style.clip=E.makeCssClipStyle(T,75/72),E.setImgCssStyle(_,T,75/72),v.appendChild(_),S.appendChild(v),je.insertBefore(S,je.childNodes[p]),S.onclick=is.bind(this,S,m.SKILL_CHANGE_PANEL_CONTAINER,s)}for(;e.firstChild;)e.removeChild(e.firstChild);r=Is(n),R.splice(n,1),P.splice(n,1),R.splice(n,0,$t);var C=g({},E.findData(i,"index",$t));P.splice(n,0,C);(v=document.createElement("div")).classList.add("popUpskillImgContainer");(_=document.createElement("img")).src=o;T=g({},E.findData(a,"index",C.skillIcon));_.style.clip=E.makeCssClipStyle(T,75/72),E.setImgCssStyle(_,T,75/72),e.setAttribute("skillIndex",C.index),v.appendChild(_),e.appendChild(v),this.applySkillCooldown(C.index,n)}else if(-1===Qt)this.makeFlashMessage("Can not change character spell!!!");else{for(p=0,h=0;h<je.childNodes.length;h++)if(je.childNodes[h]===e){p=h;break}if(je.removeChild(e),$t){f=g({},E.findData(i,"index",$t)),S=document.createElement("div");(v=document.createElement("div")).classList.add("popUpskillImgContainer");_=document.createElement("img");(y=document.createElement("img")).classList.add("disable"),S.appendChild(y),S.setAttribute("skillIndex",$t),S.classList.add("popUpSkillContainerItem"),_.src=o;T=g({},E.findData(a,"index",f.skillIcon));_.style.clip=E.makeCssClipStyle(T,75/72),E.setImgCssStyle(_,T,75/72),v.appendChild(_),S.appendChild(v),je.insertBefore(S,je.childNodes[p]),S.onclick=is.bind(this,S,m.SKILL_CHANGE_PANEL_CONTAINER,s)}for(;Zt.firstChild;)Zt.removeChild(Zt.firstChild);r=Is(Qt),R.splice(Qt,1),P.splice(Qt,1),R.splice(Qt,0,l);C=g({},E.findData(i,"index",l));P.splice(Qt,0,C);(v=document.createElement("div")).classList.add("popUpskillImgContainer");(_=document.createElement("img")).src=o;T=g({},E.findData(a,"index",C.skillIcon));_.style.clip=E.makeCssClipStyle(T,75/72),E.setImgCssStyle(_,T,75/72),Zt.setAttribute("skillIndex",C.index),v.appendChild(_),Zt.appendChild(v),this.applySkillCooldown(C.index,Qt)}if(this.onExchangeSkill(I),!s){var L=Ss(r);if(C&&f)if(C.type===m.SKILL_TYPE_PASSIVE&&f.type===m.SKILL_TYPE_PASSIVE){var b=g({},E.findData(i,"index",f.index)).buffToSelf,A=g({},E.findData(i,"index",C.index)).buffToSelf;L?_s(b)?(Cs(b),Ts(A),setTimeout(Ls.bind(this.onEquipPassive,A),L)):(this.onUnequipPassive(b),Ts(A),setTimeout(Ls.bind(this.onEquipPassive,A),L)):this.onExchangePassive(b,A)}else if(C.type===m.SKILL_TYPE_PASSIVE){var D=g({},E.findData(i,"index",C.index)).buffToSelf;L?(Ts(D),setTimeout(Ls.bind(this.onEquipPassive,D),L)):this.onEquipPassive(D)}else f.type===m.SKILL_TYPE_PASSIVE&&(D=g({},E.findData(i,"index",f.index)).buffToSelf,L&&_s(D)?Cs(D):this.onUnequipPassive(D));else C?C.type===m.SKILL_TYPE_PASSIVE&&(D=g({},E.findData(i,"index",C.index)).buffToSelf,L?(Ts(D),setTimeout(Ls.bind(this.onEquipPassive,D),L)):this.onEquipPassive(D)):f&&f.type===m.SKILL_TYPE_PASSIVE&&(D=g({},E.findData(i,"index",f.index)).buffToSelf,L&&_s(D)?Cs(D):this.onUnequipPassive(D))}this.setHUDSkills(),gs(),$t=null,qt=null,Zt=null,Qt=null}else if(l===$t){if(t===m.SKILL_CHANGE_PANEL_EQUIP&&-1!==n){var v;C=g({},E.findData(i,"index",$t)),S=document.createElement("div");(v=document.createElement("div")).classList.add("popUpskillImgContainer");var y;_=document.createElement("img");(y=document.createElement("img")).classList.add("disable"),S.appendChild(y),S.setAttribute("skillIndex",$t),S.classList.add("popUpSkillContainerItem"),_.src=o;T=g({},E.findData(a,"index",C.skillIcon));for(_.style.clip=E.makeCssClipStyle(T,75/72),E.setImgCssStyle(_,T,75/72),v.appendChild(_),S.appendChild(v),je.appendChild(S),S.onclick=is.bind(this,S,m.SKILL_CHANGE_PANEL_CONTAINER,s);Zt.firstChild;)Zt.removeChild(Zt.firstChild),Zt.setAttribute("skillIndex","");if(R[Qt]&&(R.splice(Qt,1),P.splice(Qt,1)),R.splice(Qt,0,void 0),P.splice(Qt,0,void 0),this.updateUnEquipSkillSlotCooldown(Qt),C.type===m.SKILL_TYPE_PASSIVE){D=g({},E.findData(i,"index",C.index)).buffToSelf;(L=Ss(r=Is(Qt)))&&_s(D)?Cs(D):this.onUnequipPassive(D)}}this.setHUDSkills(),gs(),$t=null,qt=null,Zt=null,Qt=null}else if(Zt===e)rs();else if($t=l||null,qt=t,Zt=e,Qt=n,e.classList.add("selected"),t===m.SKILL_CHANGE_PANEL_CONTAINER)st.classList.add("equipable"),it.classList.add("equipable"),nt.classList.add("equipable"),at.classList.add("equipable");else if(t===m.SKILL_CHANGE_PANEL_EQUIP&&-1!==n)for(h=0;h<je.children.length;h++)je.children[h].classList.add("equipable")}else if($t=l||null,qt=t,Zt=e,Qt=n,e.classList.add("selected"),t===m.SKILL_CHANGE_PANEL_CONTAINER)st.classList.add("equipable"),it.classList.add("equipable"),nt.classList.add("equipable"),at.classList.add("equipable");else if(t===m.SKILL_CHANGE_PANEL_EQUIP)switch(n){case-1:break;default:for(h=0;h<je.children.length;h++)je.children[h].classList.add("equipable")}if(this.checkPopUpSkillChange()?(this.setPopUpSkillChange(s),$t=null,qt=null,Zt=null,Qt=null,os(),this.updateSelectedPanel()):(this.updateSelectedPanel($t),t===m.SKILL_CHANGE_PANEL_EQUIP&&!l&&e.classList.contains("selected")&&We.classList.remove("disable")),this.checkSkillsConditions(),!Vt){var k=0;for(h=0;h<R.length;h++)R[h]&&k++;k>=2?Vt=!0:R[0]!==m.SKILL_INDEX_PYRO_GIVEN&&R[0]!==m.SKILL_INDEX_FROST_GIVEN&&R[0]!==m.SKILL_INDEX_ARCANE_GIVEN&&(Vt=!0)}}function ns(e){if(e===p)var t=m.START_BUTTON;else e===h&&(t=m.RESTART_BUTTON);t===m.RESTART_BUTTON&&h.getElementsByTagName("span")[0].classList.contains("disable")||this.onStartBtnClick(I,t)}function as(e,t,s){switch(this.classList.remove("cooldownMaskAni"),this.style.opacity=0,e){case m.SKILL_BASIC_INDEX:Ut=!0;break;case m.SKILL_EQUIP1_INDEX:jt=!0;break;case m.SKILL_EQUIP2_INDEX:Ht=!0;break;case m.SKILL_EQUIP3_INDEX:Kt=!0;break;case m.SKILL_EQUIP4_INDEX:Xt=!0}for(var i=0;i<Gt.length;i++)if(Gt[i].slot===e){Gt.splice(i,1);break}t()}function rs(){for(;Xe.firstChild;)Xe.removeChild(Xe.firstChild);for(;Ge.firstChild;)Ge.removeChild(Ge.firstChild);Je.innerHTML="",ze.innerHTML="",$t=null,Ve.onclick=new Function,qt=null,Zt=null,Qt=null,Ve.getElementsByTagName("span")[0].innerHTML=" ",skillUpgradeBlockMask.classList.remove("disable"),We.classList.add("disable"),Ye.classList.remove("skillUpgradeEffectAni"),os()}function os(){et.classList.remove("selected"),rt.classList.remove("selected"),st.classList.remove("selected"),it.classList.remove("selected"),nt.classList.remove("selected"),at.classList.remove("selected"),st.classList.remove("equipable"),it.classList.remove("equipable"),nt.classList.remove("equipable"),at.classList.remove("equipable");for(var e=0;e<je.children.length;e++)je.children[e].classList.remove("equipable"),je.children[e].classList.remove("selected")}function ls(e){switch(e){case m.SKILL_BASIC_INDEX:if(D)var t=D;break;case m.SKILL_EQUIP1_INDEX:P[0]&&(t=P[0]);break;case m.SKILL_EQUIP2_INDEX:P[1]&&(t=P[1]);break;case m.SKILL_EQUIP3_INDEX:P[2]&&(t=P[2]);break;case m.SKILL_EQUIP4_INDEX:P[3]&&(t=P[3]);break;case m.SKILL_PASSIVE_INDEX:y&&(t=y)}if(t){var s=fs(t).replace(/&nbsp;/g,"<br>"),i=document.createElement("div");i.innerHTML=s,i.classList.add("bottomTooltip");this.parentNode.parentNode.appendChild(i)}}function cs(){for(var e=this.parentNode.parentNode,t=e.getElementsByClassName("bottomTooltip"),s=0;t.length;s++)e.removeChild(t[s])}function ds(){var e=parseInt(this.getAttribute("skillIndex"));if(e&&E.isNumeric(e)){var t=fs(g({},E.findData(i,"index",e))).replace(/&nbsp;/g,"<br>"),s=document.createElement("div");s.innerHTML=t,s.classList.add("bottomTooltip"),this.appendChild(s)}}function us(e,t){var s=document.createElement("div"),i="";switch(e){case m.STAT_POWER_INDEX:i+="Damage Rate <span class='green'>+"+Math.floor(t*m.STAT_CALC_FACTOR_POWER_TO_DAMAGE_RATE*100)/100+"%</span><br>",i+="Max HP <span class='green'>+"+Math.floor(t*m.STAT_CALC_FACTOR_POWER_TO_HP*100)/100+"</span><br>",i+="HP Regen <span class='green'>+"+Math.floor(t*m.STAT_CALC_FACTOR_POWER_TO_HP_REGEN*100)/100+"</span><br>";break;case m.STAT_MAGIC_INDEX:i+="All Resistance <span class='green'>+"+Math.floor(t*m.STAT_CALC_FACTOR_MAGIC_TO_RESISTANCE*100)/100+"%</span><br>",i+="Max MP <span class='green'>+"+Math.floor(t*m.STAT_CALC_FACTOR_MAGIC_TO_MP*100)/100+"</span><br>",i+="MP Regen <span class='green'>+"+Math.floor(t*m.STAT_CALC_FACTOR_MAGIC_TO_MP_REGEN*100)/100+"</span><br>";break;case m.STAT_SPEED_INDEX:i+="Casting Speed <span class='green'>+"+Math.floor(t*m.STAT_CALC_FACTOR_SPEED_TO_CAST_SPEED*100)/100+"%</span><br>",i+="Cooldown Reduce <span class='green'>+"+Math.floor(t*m.STAT_CALC_FACTOR_SPEED_TO_COOLDOWN_REDUCE_RATE*100)/100+"%</span><br>"}s.innerHTML=i,s.classList.add("bottomTooltip"),this.appendChild(s)}function ps(e,t){var s=document.createElement("div"),i="";e===m.STAT_OFFENCE_INDEX?(i+="<p><strong>All Damage <span class='green'>+"+Math.floor(10*(t.damageRate-100))/10+"%</span></strong></p>",i+="<p>Fire Damage <span class='green'>+"+Math.floor(10*(t.fireDamageRate-100))/10+"%</span></p>",i+="<p>Frost Damage <span class='green'>+"+Math.floor(10*(t.frostDamageRate-100))/10+"%</span></p>",i+="<p>Arcane Damage <span class='green'>+"+Math.floor(10*(t.arcaneDamageRate-100))/10+"%</span></p>"):e===m.STAT_DEFENCE_INDEX&&(i+="<p><strong>All Resistance <span class='green'>+"+Math.floor(10*t.resistAll)/10+"%</span></strong></p>",i+="<p>Fire Resistance <span class='green'>+"+Math.floor(10*t.resistFire)/10+"%</span></p>",i+="<p>Frost Resistance <span class='green'>+"+Math.floor(10*t.resistFrost)/10+"%</span></p>",i+="<p>Arcane Resistance <span class='green'>+"+Math.floor(10*t.resistArcane)/10+"%</span></p>"),s.innerHTML=i,s.classList.add("bottomTooltip"),this.appendChild(s)}function hs(){var e=document.createElement("div"),t=parseInt(this.getAttribute("buffGroupIndex")),s=g({},E.findData(n,"index",t)),i="<h4 class='yellow'>"+s.clientName+"</h4><hr>"+s.clientDesc.replace(/&nbsp;/g,"<br>");e.innerHTML=i,e.classList.add("bottomTooltip"),this.appendChild(e)}function Es(){for(var e=E.getElementsByClassName(this,"bottomTooltip"),t=0;t<e.length;t++)this.removeChild(e[t])}function ms(e){this.onSkillIconClick(e)}function gs(){var e=40/72,t=g({},E.findData(a,"index",D.skillIcon));ht.getElementsByTagName("img")[0].style.clip=E.makeCssClipStyle(t,e),ht.setAttribute("skillIndex",D.index),E.setImgCssStyle(ht.getElementsByTagName("img")[0],t,e),t=g({},E.findData(a,"index",y.skillIcon)),Et.getElementsByTagName("img")[0].style.clip=E.makeCssClipStyle(t,e),Et.setAttribute("skillIndex",y.index),E.setImgCssStyle(Et.getElementsByTagName("img")[0],t,e),e=50/72,P[0]?(t=g({},E.findData(a,"index",P[0].skillIcon)),mt.getElementsByTagName("img")[0].style.clip=E.makeCssClipStyle(t,e),mt.setAttribute("skillIndex",P[0].index),E.setImgCssStyle(mt.getElementsByTagName("img")[0],t,e)):(mt.getElementsByTagName("img")[0].style.clip=E.makeCssClipStyle(l,e),mt.setAttribute("skillIndex",0),E.setImgCssStyle(mt.getElementsByTagName("img")[0],l,e)),P[1]?(t=g({},E.findData(a,"index",P[1].skillIcon)),gt.getElementsByTagName("img")[0].style.clip=E.makeCssClipStyle(t,e),gt.setAttribute("skillIndex",P[1].index),E.setImgCssStyle(gt.getElementsByTagName("img")[0],t,e)):(gt.getElementsByTagName("img")[0].style.clip=E.makeCssClipStyle(l,e),gt.setAttribute("skillIndex",0),E.setImgCssStyle(gt.getElementsByTagName("img")[0],l,e)),P[2]?(t=g({},E.findData(a,"index",P[2].skillIcon)),ft.getElementsByTagName("img")[0].style.clip=E.makeCssClipStyle(t,e),ft.setAttribute("skillIndex",P[2].index),E.setImgCssStyle(ft.getElementsByTagName("img")[0],t,e)):(ft.getElementsByTagName("img")[0].style.clip=E.makeCssClipStyle(l,e),ft.setAttribute("skillIndex",0),E.setImgCssStyle(ft.getElementsByTagName("img")[0],l,e)),P[3]?(t=g({},E.findData(a,"index",P[3].skillIcon)),It.getElementsByTagName("img")[0].style.clip=E.makeCssClipStyle(t,e),It.setAttribute("skillIndex",P[3].index),E.setImgCssStyle(It.getElementsByTagName("img")[0],t,e)):(It.getElementsByTagName("img")[0].style.clip=E.makeCssClipStyle(l,e),It.setAttribute("skillIndex",0),E.setImgCssStyle(It.getElementsByTagName("img")[0],l,e))}function fs(e,t){var s="",i="white";switch(e.property){case m.SKILL_PROPERTY_FIRE:i="red";break;case m.SKILL_PROPERTY_FROST:i="blue";break;case m.SKILL_PROPERTY_ARCANE:i="purple"}if(s+="<h4 class='"+i+"'><span class='yellow'>Lv "+e.level+"</span> "+e.clientName+"</h4><hr>",s+="<div class='tierLabel'><span class='green'>Tier : </span>"+e.tier+"</span></div>",e.type!==m.SKILL_TYPE_PASSIVE){s+="<div class='titleLabel'><span class='green'>Active</span></div>";var a=e.fireDamage+e.frostDamage+e.arcaneDamage;if(t)var r=t.fireDamage+t.frostDamage+t.arcaneDamage;switch(e.type){case m.SKILL_TYPE_INSTANT_RANGE:s+=t&&r>a?"<div><span class='yellow'>Damage : </span><span class='"+i+"'>"+a+"</span><img src='/images/upIcon.png' class='disable' /></div>":"<div><span class='yellow'>Damage : </span><span class='"+i+"'>"+a+"</span></div>",t&&t.explosionRadius>e.explosionRadius?s+="<div><span class='yellow'>Range : </span>"+e.explosionRadius+"<img src='/images/upIcon.png' class='disable' /></div>":s+="<div><span class='yellow'>Range : </span>"+e.explosionRadius+"</div>";break;case m.SKILL_TYPE_PROJECTILE:t?(s+=r>a?"<div><span class='yellow'>Damage : </span><span class='"+i+"'>"+a+"</span><img src='/images/upIcon.png' class='disable' /></div>":"<div><span class='yellow'>Damage : </span><span class='"+i+"'>"+a+"</span></div>",t.radius>e.radius?s+="<div><span class='yellow'>Radius : </span>"+e.radius+"<img src='/images/upIcon.png' class='disable' /></div>":s+="<div><span class='yellow'>Radius : </span>"+e.radius+"</div>"):(s+="<div><span class='yellow'>Damage : </span><span class='"+i+"'>"+a+"</span></div>",s+="<div><span class='yellow'>Radius : </span>"+e.radius+"</div>");break;case m.SKILL_TYPE_PROJECTILE_EXPLOSION:s+=t&&r>a?"<div><span class='yellow'>Damage : </span><span class='"+i+"'>"+a+"</span><img src='/images/upIcon.png' class='disable' /></div>":"<div><span class='yellow'>Damage : </span><span class='"+i+"'>"+a+"</span></div>",t&&t.explosionRadius>e.explosionRadius?s+="<div><span class='yellow'>Range : </span>"+e.explosionRadius+"<img src='/images/upIcon.png' class='disable' /></div>":s+="<div><span class='yellow'>Range : </span>"+e.explosionRadius+"</div>";break;case m.SKILL_TYPE_PROJECTILE_TICK:case m.SKILL_TYPE_PROJECTILE_TICK_EXPLOSION:t?(s+=r>a?"<div><span class='yellow'>Damage : </span><span class='"+i+"'>"+a+"</span><img src='/images/upIcon.png' class='disable' /></div>":"<div><span class='yellow'>Damage : </span><span class='"+i+"'>"+a+"</span></div>",t.radius>e.radius?s+="<div><span class='yellow'>Radius : </span>"+e.radius+"<img src='/images/upIcon.png' class='disable' /></div>":s+="<div><span class='yellow'>Radius : </span>"+e.radius+"</div>"):(s+="<div><span class='yellow'>Damage : </span><span class='"+i+"'>"+a+"</span></div>",s+="<div><span class='yellow'>Radius : </span>"+e.radius+"</div>");break;case m.SKILL_TYPE_RANGE:if(a)s+=t&&r>a?"<div><span class='yellow'>Damage : </span><span class='"+i+"'>"+a+"</span><img src='/images/upIcon.png' class='disable' /></div>":"<div><span class='yellow'>Damage : </span><span class='"+i+"'>"+a+"</span></div>",t&&t.explosionRadius>e.explosionRadius?s+="<div><span class='yellow'>Range : </span>"+e.explosionRadius+"<img src='/images/upIcon.png' class='disable' /></div>":s+="<div><span class='yellow'>Range : </span>"+e.explosionRadius+"</div>";else{var o=g({},E.findData(n,"index",e.buffToTarget)),l=Math.floor(10*o.buffLifeTime)/1e4;if(t)var c=g({},E.findData(n,"index",t.buffToTarget)),d=Math.floor(10*c.buffLifeTime)/1e4;E.isNumeric(l)&&l>=1&&(t?E.isNumeric(d)&&d>=1&&(s+=d>l?"<div><span class='yellow'>Duration : </span>"+l+"(s)<img src='/images/upIcon.png' class='disable' /></div>":"<div><span class='yellow'>Duration : </span>"+l+"(s)</div>"):s+="<div><span class='yellow'>Duration : </span>"+l+"(s)</div>"),t&&t.explosionRadius>e.explosionRadius?s+="<div><span class='yellow'>Range : </span>"+e.explosionRadius+"<img src='/images/upIcon.png' class='disable' /></div>":s+="<div><span class='yellow'>Range : </span>"+e.explosionRadius+"</div>",(!E.isNumeric(l)||l<1)&&(s+="<div></div>")}break;case m.SKILL_TYPE_SELF:o=g({},E.findData(n,"index",e.buffToSelf)),l=Math.floor(10*o.buffLifeTime)/1e4;if(t)c=g({},E.findData(n,"index",t.buffToSelf)),d=Math.floor(10*c.buffLifeTime)/1e4;t?isNaN(d)||d<=1?(s+="<div><span class='yellow'>Duration : </span>"+l+"(s)<img src='/images/upIcon.png' class='disable' /></div>",s+="<div></div>"):d>l?(s+="<div><span class='yellow'>Duration : </span>"+l+"(s)<img src='/images/upIcon.png' class='disable' /></div>",s+="<div></div>"):(s+="<div><span class='yellow'>Duration : </span>"+l+"(s)</div>",s+="<div></div>"):isNaN(l)||l<=1||(s+="<div><span class='yellow'>Duration : </span>"+l+"(s)</div>",s+="<div></div>");break;case m.SKILL_TYPE_SELF_EXPLOSION:s+=t&&r>a?"<div><span class='yellow'>Damage : </span><span class='"+i+"'>"+a+"</span><img src='/images/upIcon.png' class='disable' /></div>":"<div><span class='yellow'>Damage : </span><span class='"+i+"'>"+a+"</span></div>",t&&t.explosionRadius>e.explosionRadius?s+="<div><span class='yellow'>Range : </span>"+e.explosionRadius+"<img src='/images/upIcon.png' class='disable' /></div>":s+="<div><span class='yellow'>Range : </span>"+e.explosionRadius+"</div>";break;case m.SKILL_TYPE_TELEPORT:t&&t.range>e.range?s+="<div><span class='yellow'>Range : </span>"+e.range+"<img src='/images/upIcon.png' class='disable' /></div>":s+="<div><span class='yellow'>Range : </span>"+e.range+"</div>",s+="<div></div>"}var u=Math.floor(10*e.cooldown)/1e4;e.type!==m.SKILL_TYPE_INSTANT_RANGE&&e.type!==m.SKILL_TYPE_INSTANT_PROJECTILE&&(t?(t.consumeMP>e.consumeMP?s+="<div><span class='yellow'>MP Cost : </span>"+e.consumeMP+"<img src='/images/downIcon.png' class='disable' /></div>":t.consumeMP<e.consumeMP?s+="<div><span class='yellow'>MP Cost : </span>"+e.consumeMP+"<img src='/images/upIcon.png' class='disable' /></div>":s+="<div><span class='yellow'>MP Cost : </span>"+e.consumeMP+"</div>",t.cooldown<e.cooldown?s+="<div><span class='yellow'>Cooldown : </span>"+u+"(s)<img src='/images/upIcon.png' class='disable' /></div>":s+="<div><span class='yellow'>Cooldown : </span>"+u+"(s)</div>"):(s+="<div><span class='yellow'>MP Cost : </span>"+e.consumeMP+"</div>",s+="<div><span class='yellow'>Cooldown : </span>"+u+"(s)</div>")),s+="<hr>"}else s+="<div class='titleLabel'><span class='green'>Passive</span></div>",s+="<div></div><div></div><hr>";return s+="<p>"+e.clientDesc+"</p>"}function Is(e){switch(e){case 0:return m.SKILL_EQUIP1_INDEX;case 1:return m.SKILL_EQUIP2_INDEX;case 2:return m.SKILL_EQUIP3_INDEX;case 3:return m.SKILL_EQUIP4_INDEX}}function Ss(e){for(var t=0,s=0;s<Gt.length;s++)if(e===Gt[s].slot){var i=Date.now()-Gt[s].startTime;t=1e3*Gt[s].cooldownTime-i;break}return t}function _s(e){for(var t=0;t<Yt.length;t++)if(Yt[t]===e)return!0;return!1}function Ts(e){for(var t=Yt.length-1;t>=0;t--)Yt[t]===e&&Yt.splice(t,1);Yt.push(e)}function Cs(e){var t=Yt.indexOf(e);-1!==t&&Yt.splice(t,1)}function Ls(e){for(var t=Yt.length-1;t>=0;t--)if(Yt[t]===e){Yt.splice(t,1),this(e);break}}function bs(){Wt||(Wt=!0,Ke.classList.add("disable"),$e.classList.add("disable"),setTimeout(function(){Vt?As():je.classList.add("skillEquipTutorialHighlight")},200),setTimeout(function(){Vt?As():(Ze.classList.add("disable"),qe.classList.remove("disable"),qe.classList.add("skillEquipTutorialAni"))},500),setTimeout(function(){Vt?As():(qe.classList.add("disable"),Qe.classList.remove("disable"),Qe.classList.add("skillEquipTutorialAni"),Qe.style.animationIterationCount=1),je.classList.remove("skillEquipTutorialHighlight")},2500),setTimeout(function(){Vt?As():tt.classList.add("skillEquipTutorialHighlight")},3500),setTimeout(function(){Vt?As():(Ze.classList.remove("disable"),Qe.classList.add("disable"),Ze.classList.add("skillEquipTutorialAni"))},3800),setTimeout(function(){tt.classList.remove("skillEquipTutorialHighlight"),Wt=!1,As(),Vt||(Ze.classList.add("disable"),bs())},5800))}function As(){Ke.classList.remove("disable"),$e.classList.remove("disable"),je.classList.remove("skillEquipTutorialHighlight"),tt.classList.remove("skillEquipTutorialHighlight"),qe.classList.add("disable"),Ze.classList.add("disable"),Qe.classList.add("disable")}function Ds(){for(var e=document.getElementById("startSceneHudCenterCenterCharSelect").children,t=0;t<e.length;t++)e[t].onclick=function(){var t=parseInt(this.getAttribute("type"));I=t===m.CHAR_TYPE_FIRE||t===m.CHAR_TYPE_FROST||t===m.CHAR_TYPE_ARCANE?t:m.CHAR_TYPE_FIRE;for(var s=0;s<e.length;s++)e[s].classList.remove("selectedChar");this.classList.add("selectedChar");var i="",n="",a="";switch(t){case m.CHAR_TYPE_FIRE:i=S,n=_,a="red";break;case m.CHAR_TYPE_FROST:i=T,n=C,a="blue";break;case m.CHAR_TYPE_ARCANE:i=L,n=b,a="purple"}var o=g({},E.findDataWithTwoColumns(r,"type",I,"level",1));startSceneSelectedCharName.innerHTML="<span class='"+a+"'>"+i+"</span>",startSceneSelectedCharDesc.innerHTML=n,startSceneSelectedCharStatPower.getElementsByTagName("span")[0].innerHTML=o.power,startSceneSelectedCharStatMagic.getElementsByTagName("span")[0].innerHTML=o.magic,startSceneSelectedCharStatSpeed.getElementsByTagName("span")[0].innerHTML=o.speed,startSceneSelectedCharStatPower.onmouseover=us.bind(startSceneSelectedCharStatPower,m.STAT_POWER_INDEX,o.power),startSceneSelectedCharStatPower.onmouseout=Es.bind(startSceneSelectedCharStatPower),startSceneSelectedCharStatMagic.onmouseover=us.bind(startSceneSelectedCharStatMagic,m.STAT_MAGIC_INDEX,o.magic),startSceneSelectedCharStatMagic.onmouseout=Es.bind(startSceneSelectedCharStatMagic),startSceneSelectedCharStatSpeed.onmouseover=us.bind(startSceneSelectedCharStatSpeed,m.STAT_SPEED_INDEX,o.speed),startSceneSelectedCharStatSpeed.onmouseout=Es.bind(startSceneSelectedCharStatSpeed)};e[0].onclick()}t.exports=ts},{"../public/gameConfig.json":8,"../public/objectAssign.js":9,"../public/serverList.json":11,"../public/util.js":12}],5:[function(e,t,s){var i=e("../public/util.js"),n=e("./CSkill.js"),a=e("../public/gameConfig.json"),r=function(e){this.objectID=e.objectID,this.name=e.name,this.type=e.type,this.imgData=e.imgData,this.isRender=!0,this.hitImgDataList=[],this.buffImgDataList=[],this.imgHandIndex=0,this.level=e.level,this.exp=e.exp,this.maxHP=e.maxHP,this.maxMP=e.maxMP,this.HP=e.HP,this.MP=e.MP,this.castSpeed=e.castSpeed,this.conditions=e.conditions,this.currentState=null,this.currentSkill=void 0,this.isExecutedSkill=!1,this.skillCastEffectPlay=!1,this.castEffectFactor=1,this.isMoveBackward=!1,this.effectTimer=Date.now(),this.effectRotateDegree=0,this.effectIndex=0,this.size=e.size,this.position=e.position,this.targetPosition=e.targetPosition,this.direction=e.direction,this.rotateSpeed=e.rotateSpeed,this.maxSpeed=e.maxSpeed,this.center={x:0,y:0},this.speed={x:0,y:0},this.targetDirection=0,this.timer=Date.now(),this.castingEndTime=!1,this.setCenter(),this.setSpeed(),this.setTargetDirection(),this.chatMessage1="",this.chatMessage2="",this.chatMessage1StartTime=Date.now(),this.chatMessage2StartTime=Date.now(),this.updateInterval=!1,this.imgHandTimeout=!1,this.updateFunction=null,this.entityTreeEle={x:this.position.x,y:this.position.y,width:this.size.width,height:this.size.height,id:this.objectID},this.moveUIUpdateTimer=Date.now(),this.onMove=new Function,this.onMainUserMove=new Function};r.prototype={changeState:function(e){switch(this.currentState=e,this.stop(),this.currentState){case a.OBJECT_STATE_IDLE:this.updateFunction=this.idle.bind(this);break;case a.OBJECT_STATE_MOVE:this.updateFunction=this.rotate.bind(this);break;case a.OBJECT_STATE_ATTACK:this.updateFunction=this.attack.bind(this);break;case a.OBJECT_STATE_CAST:this.updateFunction=this.rotate.bind(this);break;case a.OBJECT_STATE_DEATH:this.updateFunction=this.idle.bind(this);break;case a.OBJECT_STATE_MOVE_AND_ATTACK:this.updateFunction=this.rotate.bind(this)}this.update()},update:function(){this.updateInterval=setInterval(this.updateFunction,25)},setCenter:function(){this.center.x=this.position.x+this.size.width/2,this.center.y=this.position.y+this.size.height/2},idle:function(){this.doEveryTick()},rotate:function(){var e=(Date.now()-this.timer)/1e3;i.rotate.call(this,e),this.doEveryTick()},move:function(e,t){t?i.move.call(this,e,t):i.move.call(this,e),Date.now()-this.moveUIUpdateTimer>500&&(this.moveUIUpdateTimer=Date.now(),this.onMainUserMove())},setTargetDirection:function(e){i.setTargetDirection.call(this,e)},setSpeed:function(e){i.setSpeed.call(this,e)},moveOffset:function(){i.moveOffset.call(this)},attack:function(){this.executeSkill(),this.doEveryTick()},doEveryTick:function(){this.timer=Date.now();for(var e=this.hitImgDataList.length-1;e>=0;e--)Date.now()-this.hitImgDataList[e].startTime>=this.hitImgDataList[e].resourceLifeTime&&this.hitImgDataList.splice(e,1);Date.now()-this.chatMessage1StartTime>=a.CHAT_MESSAGE_TIME&&(this.chatMessage1=this.chatMessage2,this.chatMessage1StartTime=this.chatMessage2StartTime,this.chatMessage2="",this.chatMessage2StartTime=Date.now()),this.isRender&&Date.now()-this.effectTimer>=a.USER_ATTACH_EFFECT_CHANGE_TIME&&(this.effectTimer=Date.now(),this.effectRotateDegree+=10,this.effectIndex>100?this.effectIndex=0:this.effectIndex+=1)},updateBuffImgData:function(e){this.buffImgDataList=[];for(var t=0;t<e.length;t++)this.buffImgDataList.push(e[t])},updateSkillHitImgData:function(e){e.startTime=Date.now(),this.hitImgDataList.push(e)},addPosAndTargetPos:function(e,t){this.position.x+=e,this.position.y+=t,this.targetPosition.x+=e,this.targetPosition.y+=t,this.setCenter()},stop:function(){this.updateInterval&&(clearInterval(this.updateInterval),this.updateInterval=!1),this.currentSkill&&(this.currentSkill.destroy(),this.currentSkill=void 0,this.isExecutedSkill=!1,this.skillCastEffectPlay=!1),this.imgHandTimeout&&(clearTimeout(this.imgHandTimeout),this.imgHandTimeout=!1),this.isMoveBackward=!1,this.imgHandIndex=0,this.castingEndTime=!1},setEntityEle:function(){this.entityTreeEle={x:this.position.x,y:this.position.y,width:this.size.width,height:this.size.height,id:this.objectID}},makeSkillInstance:function(e){var t=Math.floor(a.USER_ANI_TIME*(100/this.castSpeed)),s=new n(e,e.fireTime-t);return s.onUserAniStart=function(e,t){var s=t/5;this.castingEndTime=Date.now()+(e.totalTime-e.userAniStartTime),this.imgHandTimeout=setTimeout(function e(t){this.imgHandIndex<4?(this.imgHandIndex++,this.imgHandTimeout=setTimeout(e.bind(this,t),t)):this.imgHandIndex=0}.bind(this,s),s)}.bind(this,s,t),s.onTimeOver=function(e){e.destroy(),this.currentSkill=void 0,this.isExecutedSkill=!1,this.skillCastEffectPlay=!1,this.castingEndTime=!1,this.changeState(a.OBJECT_STATE_IDLE,"onTimeOverHandler")}.bind(this,s),s},setSkill:function(e){this.currentSkill=e},executeSkill:function(){try{this.isExecutedSkill||(this.skillCastEffectPlay=!0,this.skillCastEffectStartTime=Date.now(),this.isExecutedSkill=!0,this.currentSkill.executeSkill()),this.setCastEffectFactor()}catch(e){}},setCastEffectFactor:function(){var e=Date.now()-this.skillCastEffectStartTime;this.castEffectFactor=i.interpolationSine(e)},updateSkillPossessions:function(e){this.possessSkills=e},makeProjectile:function(e,t,s){return t.makeProjectile(this.center,e,s)},changePosition:function(e){this.position.x=e.x-this.size.width/2,this.position.y=e.y-this.size.height/2,this.setCenter()},setChatMsg:function(e){this.chatMessage2?(this.chatMessage1=this.chatMessage2,this.chatMessage1StartTime=this.chatMessage2StartTime,this.chatMessage2=e,this.chatMessage2StartTime=Date.now()):this.chatMessage1?(this.chatMessage2=e,this.chatMessage2StartTime=Date.now()):(this.chatMessage1=e,this.chatMessage1StartTime=Date.now())},getCurrentState:function(){return this.currentState},getCurrentSkillIndex:function(){return this.currentSkill.index},setRenderVar:function(e){this.isRender=e}};t.exports=r},{"../public/gameConfig.json":8,"../public/util.js":12,"./CSkill.js":3}],6:[function(e,t,s){t.exports={toObject:function(e,t){var s=(t=t||{}).delimiter||",",n=i(t.quote),a=e,r=null;if("string"!=typeof a)throw new Error("Invalid input, input data should be a string");a=a.split(/[\n\r]+/gi),"string"==typeof t.headers?(r=t.headers.split(/[\n\r]+/gi),r=n?l(r.shift(),s,n):r.shift().split(s)):r=n?l(a.shift(),s,n):a.shift().split(s);var c=[];return a.forEach(function(e){if(e){e=n?l(e,s,n):e.split(s);var t={};r.forEach(function(s,i){var n=o(e[i]);parseInt(n)||0===parseInt(n)?t[s]=parseInt(n):parseFloat(n)?t[s]=parseFloat(n):t[s]=n}),c.push(t)}}),c},toArray:function(e,t){var s=(t=t||{}).delimiter||",",n=i(t.quote),a=e;if("string"!=typeof a)throw new Error("Invalid input, input data should be a string");var r=[];return(a=a.split(/[\n\r]+/gi)).forEach(function(e){e&&(e=(e=n?l(e,s,n):e.split(s)).map(function(e){return o(e)}),r.push(e))}),r},toColumnArray:function(e,t){var s=(t=t||{}).delimiter||",",n=i(t.quote),a=e,r=null;if("string"!=typeof a)throw new Error("Invalid input, input data should be a string");a=a.split(/[\n\r]+/gi),"string"==typeof t.headers?(r=t.headers.split(/[\n\r]+/gi),r=n?l(r.shift(),s,n):r.shift().split(s)):r=n?l(a.shift(),s,n):a.shift().split(s);var c={};return r.forEach(function(e){c[e]=[]}),a.forEach(function(e){e&&(e=n?l(e,s,n):e.split(s)).forEach(function(e,t){c[r[t]].push(o(e))})}),c},toSchemaObject:function(e,t){var s=(t=t||{}).delimiter||",",n=i(t.quote),a=e,r=null;if("string"!=typeof a)throw new Error("Invalid input, input should be a string");a=a.split(/[\n\r]+/gi),"string"==typeof t.headers?(r=t.headers.split(/[\n\r]+/gi),r=n?l(r.shift(),s,n):r.shift().split(s)):r=n?l(a.shift(),s,n):a.shift().split(s);var c=[];return a.forEach(function(e){if(e){var t={};(e=n?l(e,s,n):e.split(s)).forEach(function(e,i){!function e(t,s,i,n,a){var r,c,d=t.match(/\[*[\d]\]\.(\w+)|\.|\[\]|\[(.)\]|-|\+/gi);if(d){var u=d[0];if(-1!==d.indexOf("-"))return!0;if(-1!==d.indexOf(".")){var p=t.split(".");c=p.shift(),i[c]=i[c]||{},e(p.join("."),s,i[c],n,a)}else if(-1!==d.indexOf("[]"))r=t.replace(/\[\]/gi,""),i[r]||(i[r]=[]),i[r].push(s);else if(/\[*[\d]\]\.(\w+)/.test(u)){r=t.split("[").shift();var h=parseInt(u.match(/\[(.)\]/).pop(),10);c=t.split(".").pop(),i[r]=i[r]||[],i[r][h]=i[r][h]||{},i[r][h][c]=s}else if(/\[(.)\]/.test(u)){var n=u.match(/\[(.)\]/).pop();r=t.replace(/\[(.)\]/gi,""),i[r]=l(s,n,a)}else-1!==d.indexOf("+")&&(r=t.replace(/\+/gi,""),i[r]=Number(s))}else i[t]=o(s);return i}(r[i],e,t,s,n)}),c.push(t)}}),c},toCSV:function(e,t){(t=t||{}).delimiter=t.delimiter||",",t.wrap=t.wrap||"",t.arrayDenote=t.arrayDenote&&String(t.arrayDenote).trim()?t.arrayDenote:"[]",t.objectDenote=t.objectDenote&&String(t.objectDenote).trim()?t.objectDenote:".",t.detailedOutput="boolean"!=typeof t.detailedOutput||t.detailedOutput,t.headers=String(t.headers).toLowerCase();var s={},i="";t.headers.match(/none|full|relative|key/)?t.headers=t.headers.match(/none|full|relative|key/)[0]:t.headers="full";!0===t.wrap&&(t.wrap='"');"string"==typeof e&&(e=JSON.parse(e));a(e,s,"",0,t);var n=function(e,t,s){var i=/([^\[\]\.]+)$/,n=/\[\]\.?([^\[\]]+)$/;switch(e){case"none":return null;case"full":return Object.keys(t);case"key":return Object.keys(t).map(function(e){var t=e.match(i);return t&&2===t.length?t[1]:e});case"relative":return Object.keys(t).map(function(e){var t=e.match(n);return t&&2===t.length?t[1]:e})}}(t.headers,s);n&&(t.wrap&&(n=n.map(function(e){return t.wrap+e+t.wrap})),i=n.join(t.delimiter));var r=function(e){var t=0;return Object.keys(e).forEach(function(s){Array.isArray(e[s])&&e[s].length>t&&(t=e[s].length)}),t}(s),o=Object.keys(s),l=[],c=/\n|\r/g;t.wrap||(c=new RegExp("\n|\r|"+t.delimiter,"g"));for(var d=0;d<r;d++){l=[];for(var u=0;u<o.length;u++)s[o[u]][d]?(s[o[u]][d]=s[o[u]][d].replace(c,"\t"),t.wrap&&(s[o[u]][d]=t.wrap+s[o[u]][d]+t.wrap),l[l.length]=s[o[u]][d]):l[l.length]="";i+="\n"+l.join(t.delimiter)}return i}};function i(e){return"string"==typeof e?e:!0===e?'"':null}function n(e){if(null===e)return"null";if(e&&(1===e.nodeType||9===e.nodeType))return"element";var t=Object.prototype.toString.call(e).match(/\[object (.*?)\]/)[1].toLowerCase();if("number"===t){if(isNaN(e))return"nan";if(!isFinite(e))return"infinity"}return t}function a(e,t,s,i,o){return"undefined"===n(e)?r("",t,s,i,o):"null"===n(e)?r("null",t,s,i,o):Array.isArray(e)?function(e,t,s,i,o){if(l=e,l.every(function(e){var t=n(e);return!t.match(/array|object/)}))return r(e.join(";"),t,s+o.arrayDenote,i,o);var l;e.forEach(function(e,i){return a(e,t,s+o.arrayDenote,i,o)})}(e,t,s,i,o):"object"==typeof e?(l=e,c=t,d=s,u=i,p=o,void Object.keys(l).forEach(function(e){return a(l[e],c,d+p.objectDenote+e,u,p)})):r(String(e),t,s,i,o);var l,c,d,u,p}function r(e,t,s,i,n){return t&&t[s]||(t[s]=[]),i<t[s].length&&(i=t[s].length),t[s][i]=e,t}function o(e){return e?String(e).trim().replace(/^["|'](.*)["|']$/,"$1"):""}function l(e,t,s){if(s&&-1!==e.indexOf(s))return function(e,t,s){t=t||",",s=s||'"';var i=new RegExp("(?!\\s*$)\\s*(?:"+s+"([^"+s+"\\\\]*(?:\\\\[\\S\\s][^"+s+"\\\\]*)*)"+s+"|([^"+t+s+"\\s\\\\]*(?:\\s+[^"+t+s+"\\s\\\\]+)*))\\s*(?:"+t+"|$)","g"),n=[];e.replace(i,function(e,t,s){return void 0!==t?n.push(t.replace(/\\'/g,"'")):void 0!==s&&n.push(s),""}),/,\s*$/.test(e)&&n.push("");return n}(e,t,s);var i=[];return e.split(t).forEach(function(e){var t=e.trim();i.push(t)}),i}},{}],7:[function(e,t,s){t.exports={userStatData:"index,level,needExp,type,power,magic,speed,imgData\n1,1,150,1,22,14,19,1\n2,2,200,1,24,15,21,1\n3,3,250,1,27,17,23,1\n4,4,300,1,29,18,25,1\n5,5,400,1,32,20,27,1\n6,6,500,1,34,21,29,2\n7,7,600,1,37,23,31,2\n8,8,700,1,39,24,33,2\n9,9,800,1,42,26,35,2\n10,10,900,1,44,27,37,2\n11,11,1000,1,47,29,39,3\n12,12,1100,1,49,30,41,3\n13,13,1200,1,52,32,43,3\n14,14,1300,1,54,33,45,3\n15,15,1500,1,57,35,47,3\n16,16,1700,1,59,36,49,4\n17,17,2000,1,62,38,51,4\n18,18,2400,1,64,39,53,4\n19,19,3000,1,67,41,55,4\n20,20,-1,1,69,42,57,5\n101,1,150,2,17,21,17,6\n102,2,200,2,19,23,18,6\n103,3,250,2,21,26,20,6\n104,4,300,2,23,28,21,6\n105,5,400,2,25,31,23,6\n106,6,500,2,27,33,24,7\n107,7,600,2,29,36,26,7\n108,8,700,2,31,38,27,7\n109,9,800,2,33,41,29,7\n110,10,900,2,35,43,30,7\n111,11,1000,2,37,46,32,8\n112,12,1100,2,39,48,33,8\n113,13,1200,2,41,51,35,8\n114,14,1300,2,43,53,36,8\n115,15,1500,2,45,56,38,8\n116,16,1700,2,47,58,39,9\n117,17,2000,2,49,61,41,9\n118,18,2400,2,51,63,42,9\n119,19,3000,2,53,66,44,9\n120,20,-1,2,55,68,45,10\n201,1,150,3,18,15,22,11\n202,2,200,3,20,16,24,11\n203,3,250,3,22,18,27,11\n204,4,300,3,24,19,29,11\n205,5,400,3,26,21,32,11\n206,6,500,3,28,22,34,12\n207,7,600,3,30,24,37,12\n208,8,700,3,32,25,39,12\n209,9,800,3,34,27,42,12\n210,10,900,3,36,28,44,12\n211,11,1000,3,38,30,47,13\n212,12,1100,3,40,31,49,13\n213,13,1200,3,42,33,52,13\n214,14,1300,3,44,34,54,13\n215,15,1500,3,46,36,57,13\n216,16,1700,3,48,37,59,14\n217,17,2000,3,50,39,62,14\n218,18,2400,3,52,40,64,14\n219,19,3000,3,54,42,67,14\n220,20,-1,3,56,43,69,15\n",skillData:"index,name,level,type,property,tier,groupIndex,nextSkillIndex,totalTime,fireTime,cooldown,range,explosionRadius,explosionDamageRate,consumeMP,fireDamage,frostDamage,arcaneDamage,doDamageToMP,damageToMPRate,doDamageToSelf,damageToSelfRate,healHP,healHPRate,healMP,healMPRate,repeatLifeTime,repeatTime,buffToSelf,buffToTarget,projectileCount,radius,maxSpeed,lifeTime,tickTime,upgradeGoldAmount,upgradeJewelAmount,clientName,clientDesc,effectLastTime,skillIcon,hitEffectGroup,explosionEffectGroup,projectileEffectGroup,exchangeToGold,exchangeToJewel\n11,PyroBaseAttack1,1,1,1,1,10,12,500,400,150,60,45,0,0,100,0,0,0,0,0,0,0,0,0,0,0,0,,1,0,0,0,0,0,500,0,Pyro Attack, Damage to near front &nbsp; Ignite enemy(20%),300,1,6,,,200,\n12,PyroBaseAttack2,2,1,1,1,10,13,500,400,150,60,45,0,0,130,0,0,0,0,0,0,0,0,0,0,0,0,,1,0,0,0,0,0,1000,0,Pyro Attack, Damage to near front &nbsp; Ignite enemy(20%) <img src='/images/upIcon.png' class='disable' />,300,1,6,,,200,\n13,PyroBaseAttack3,3,1,1,1,10,14,500,400,150,60,47,0,0,150,0,0,0,0,0,0,0,0,0,0,0,0,,2,0,0,0,0,0,1500,1,Pyro Attack, Damage to near front &nbsp; Ignite enemy(30%),300,1,6,,,200,\n14,PyroBaseAttack4,4,1,1,1,10,15,500,400,150,60,47,0,0,180,0,0,0,0,0,0,0,0,0,0,0,0,,2,0,0,0,0,0,2000,2,Pyro Attack, Damage to near front &nbsp; Ignite enemy(30%) <img src='/images/upIcon.png' class='disable' />,300,1,6,,,200,\n15,PyroBaseAttack5,5,1,1,1,10,-1,500,400,150,60,50,0,0,200,0,0,0,0,0,0,0,0,0,0,0,0,,3,0,0,0,0,0,0,0,Pyro Attack, Damage to near front &nbsp; Ignite enemy(40%),300,1,6,,,200,\n21,FireBolt1,1,3,1,1,20,22,500,300,2500,0,0,0,40,300,0,0,0,0,0,0,0,0,0,0,0,0,,2,1,30,650,2000,0,500,0,Fire Bolt, Fire projectile &nbsp; Ignite enemy(30%),0,2,6,,,200,\n22,FireBolt2,2,3,1,1,20,23,500,300,2500,0,0,0,50,365,0,0,0,0,0,0,0,0,0,0,0,0,,2,1,30,650,2000,0,1000,0,Fire Bolt, Fire projectile &nbsp; Ignite enemy(30%) <img src='/images/upIcon.png' class='disable' />,0,2,6,,,200,\n23,FireBolt3,3,3,1,1,20,24,500,300,2500,0,0,0,60,400,0,0,0,0,0,0,0,0,0,0,0,0,,3,1,32,650,2000,0,1500,1,Fire Bolt, Fire projectile &nbsp; Ignite enemy(40%),0,2,6,,,200,\n24,FireBolt4,4,3,1,1,20,25,500,300,2500,0,0,0,70,465,0,0,0,0,0,0,0,0,0,0,0,0,,3,1,32,650,2000,0,2000,2,Fire Bolt, Fire projectile &nbsp; Ignite enemy(40%) <img src='/images/upIcon.png' class='disable' />,0,2,6,,,200,\n25,FireBolt5,5,3,1,1,20,-1,500,300,2500,0,0,0,80,500,0,0,0,0,0,0,0,0,0,0,0,0,,4,1,35,650,2000,0,0,0,Fire Bolt, Fire projectile &nbsp; Ignite enemy(50%),0,2,6,,,200,\n31,BurningSoul1,1,11,1,1,30,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,,0,0,0,0,0,500,0,Burning Soul, +4 HP regen <img src='/images/upIcon.png' class='disable' />,0,3,,,,200,\n32,BurningSoul2,2,11,1,1,30,33,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,,0,0,0,0,0,1000,0,Burning Soul, +6 HP regen <img src='/images/upIcon.png' class='disable' />  <img src='/images/plusIcon.png' class='disable' />,0,3,,,,200,\n33,BurningSoul3,3,11,1,1,30,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,,0,0,0,0,0,1500,1,Burning Soul, +7 HP regen <img src='/images/upIcon.png' class='disable' /> &nbsp; +300 HP,0,3,,,,200,\n34,BurningSoul4,4,11,1,1,30,35,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,,0,0,0,0,0,2000,2,Burning Soul, +9 HP regen <img src='/images/upIcon.png' class='disable' /> &nbsp; +300 HP <img src='/images/upIcon.png' class='disable' /> <img src='/images/plusIcon.png' class='disable' />,0,3,,,,200,\n35,BurningSoul5,5,11,1,1,30,-1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10,,0,0,0,0,0,0,0,Burning Soul, +10 HP regen &nbsp; +500 HP &nbsp; +10% Damage rate,0,3,,,,200,\n41,FireBall1,1,4,1,1,40,42,800,600,8000,0,110,0,100,350,0,0,0,0,0,0,0,0,0,0,0,0,,2,1,30,550,2000,0,1000,0,Fire Ball, Fire explosive projectile &nbsp; Ignite enemy(30%),300,4,6,,,400,\n42,FireBall2,2,4,1,1,40,43,800,600,8000,0,110,0,120,410,0,0,0,0,0,0,0,0,0,0,0,0,,2,1,30,550,2000,0,1500,1,Fire Ball, Fire explosive projectile &nbsp; Ignite enemy(30%) <img src='/images/upIcon.png' class='disable' />,300,4,6,,,400,\n43,FireBall3,3,4,1,1,40,44,800,600,8000,0,120,0,140,450,0,0,0,0,0,0,0,0,0,0,0,0,,3,1,35,550,2000,0,2000,2,Fire Ball, Fire explosive projectile &nbsp; Ignite enemy(40%),300,4,6,,,400,\n44,FireBall4,4,4,1,1,40,45,800,600,8000,0,120,0,160,510,0,0,0,0,0,0,0,0,0,0,0,0,,3,1,35,550,2000,0,2500,3,Fire Ball, Fire explosive projectile &nbsp; Ignite enemy(40%) <img src='/images/upIcon.png' class='disable' />,300,4,6,,,400,\n45,FireBall5,5,4,1,1,40,-1,800,600,8000,0,130,0,180,550,0,0,0,0,0,0,0,0,0,0,0,0,,4,1,40,550,2000,0,0,0,Fire Ball, Fire explosive projectile &nbsp; Ignite enemy(50%),300,4,6,,,400,\n51,InnerFire1,1,8,1,2,50,52,500,300,25000,0,0,0,100,0,0,0,0,0,1,100,0,0,0,0,0,0,11,16,0,0,0,0,0,1000,0,Inner Fire, +20% Damage rate <img src='/images/upIcon.png' class='disable' /> &nbsp; Make Ignite oneself,0,5,,,,400,\n52,InnerFire2,2,8,1,2,50,53,500,300,25000,0,0,0,120,0,0,0,0,0,1,100,0,0,0,0,0,0,12,16,0,0,0,0,0,1500,1,Inner Fire, +27% Damage rate <img src='/images/upIcon.png' class='disable' /> &nbsp; Make Ignite oneself <img src='/images/plusIcon.png' class='disable' />,0,5,,,,400,\n53,InnerFire3,3,8,1,2,50,54,500,300,25000,0,0,0,140,0,0,0,0,0,1,100,0,0,0,0,0,0,13,16,0,0,0,0,0,2000,2,Inner Fire, +30% Damage rate <img src='/images/upIcon.png' class='disable' /> &nbsp; Make Ignite oneself &nbsp; +10% Fire resistance,0,5,,,,400,\n54,InnerFire4,4,8,1,2,50,55,500,300,25000,0,0,0,160,0,0,0,0,0,1,100,0,0,0,0,0,0,14,16,0,0,0,0,0,2500,3,Inner Fire, +37% Damage rate <img src='/images/upIcon.png' class='disable' /> &nbsp; Make Ignite oneself &nbsp; +10% Fire resistance <img src='/images/upIcon.png' class='disable' /> <img src='/images/plusIcon.png' class='disable' />,0,5,,,,400,\n55,InnerFire5,5,8,1,2,50,-1,500,300,25000,0,0,0,180,0,0,0,0,0,1,100,0,0,0,0,0,0,15,16,0,0,0,0,0,0,0,Inner Fire, +40% Damage rate &nbsp; Make Ignite oneself &nbsp; +15% Fire resistance &nbsp; +3 HP regen,0,5,,,,400,\n61,RollingFire1,1,5,1,3,60,62,800,600,15000,0,0,0,130,50,0,0,0,0,0,0,0,0,0,0,0,0,,1,1,50,280,3000,60,1500,1,Rolling Fire, Fire rolling projectile &nbsp; Ignite enemy(20%),0,6,6,,1007,900,\n62,RollingFire2,2,5,1,3,60,63,800,600,15000,0,0,0,160,65,0,0,0,0,0,0,0,0,0,0,0,0,,1,1,50,280,3000,60,2000,2,Rolling Fire, Fire rolling projectile &nbsp; Ignite enemy(20%) <img src='/images/upIcon.png' class='disable' />,0,6,6,,1007,900,\n63,RollingFire3,3,5,1,3,60,64,800,600,15000,0,0,0,190,75,0,0,0,0,0,0,0,0,0,0,0,0,,2,1,53,280,3000,60,2500,3,Rolling Fire, Fire rolling projectile &nbsp; Ignite enemy(30%),0,6,6,,1007,900,\n64,RollingFire4,4,5,1,3,60,65,800,600,15000,0,0,0,220,90,0,0,0,0,0,0,0,0,0,0,0,0,,2,1,53,280,3000,60,3000,4,Rolling Fire, Fire rolling projectile &nbsp; Ignite enemy(30%) <img src='/images/upIcon.png' class='disable' />,0,6,6,,1007,900,\n65,RollingFire5,5,5,1,3,60,-1,800,600,15000,0,0,0,250,100,0,0,0,0,0,0,0,0,0,0,0,0,,3,1,55,280,3000,60,0,0,Rolling Fire, Fire rolling projectile &nbsp; Ignite enemy(40%),0,6,6,,1007,900,\n71,Fury1,1,11,1,3,70,72,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,,0,0,0,0,0,1500,1,Fury, +5% Move and Cast speed <img src='/images/upIcon.png' class='disable' />,0,7,,,,900,\n72,Fury2,2,11,1,3,70,73,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,18,,0,0,0,0,0,2000,2,Fury, +8% Move and Cast speed <img src='/images/upIcon.png' class='disable' /> <img src='/images/plusIcon.png' class='disable' />,0,7,,,,900,\n73,Fury3,3,11,1,3,70,74,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,19,,0,0,0,0,0,2500,3,Fury, +10% Move and Cast speed <img src='/images/upIcon.png' class='disable' /> &nbsp; +10% Move and Cast speed[While Ignite],0,7,,,,900,\n74,Fury4,4,11,1,3,70,75,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,20,,0,0,0,0,0,3000,4,Fury, +13% Move and Cast speed <img src='/images/upIcon.png' class='disable' /> &nbsp; +10% Move and Cast speed[While Ignite] <img src='/images/upIcon.png' class='disable' /> <img src='/images/plusIcon.png' class='disable' />,0,7,,,,900,\n75,Fury5,5,11,1,3,70,-1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,21,,0,0,0,0,0,0,0,Fury, +15% Move and Cast speed &nbsp; +15% Move and Cast speed[While Ignite] &nbsp; +10% Cooldown reduce rate,0,7,,,,900,\n81,Explosion1,1,9,1,4,80,82,1300,1100,20000,0,250,0,130,450,0,0,0,0,1,50,0,0,0,0,0,0,,5,0,0,0,0,0,2000,1,Explosion, Damage to near position &nbsp; Ignite enemy and oneself(100%) &nbsp; Damage to self(50%) <img src='/images/upIcon.png' class='disable' />,300,8,6,,,,1\n82,Explosion2,2,9,1,4,80,83,1300,1100,20000,0,250,0,160,510,0,0,0,0,1,45,0,0,0,0,0,0,,5,0,0,0,0,0,2500,2,Explosion, Damage to near position &nbsp; Ignite enemy and oneself(100%) &nbsp; Damage to self(45%) <img src='/images/upIcon.png' class='disable' />,300,8,6,,,,1\n83,Explosion3,3,9,1,4,80,84,1300,1100,20000,0,275,0,190,550,0,0,0,0,1,40,0,0,0,0,0,0,,5,0,0,0,0,0,3000,3,Explosion, Damage to near position &nbsp; Ignite enemy and oneself(100%) &nbsp; Damage to self(40%) <img src='/images/upIcon.png' class='disable' />,300,8,6,,,,1\n84,Explosion4,4,9,1,4,80,85,1300,1100,20000,0,275,0,220,610,0,0,0,0,1,35,0,0,0,0,0,0,,5,0,0,0,0,0,3500,4,Explosion, Damage to near position &nbsp; Ignite enemy and oneself(100%) &nbsp; Damage to self(35%) <img src='/images/upIcon.png' class='disable' />,300,8,6,,,,1\n85,Explosion5,5,9,1,4,80,-1,1300,1100,20000,0,300,0,250,650,0,0,0,0,1,25,0,0,0,0,0,0,,5,0,0,0,0,0,0,0,Explosion, Damage to near position &nbsp; Ignite enemy and oneself(100%) &nbsp; Damage to self(25%),300,8,6,,,,1\n91,Pyromaniac1,1,11,1,5,90,92,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,22,,0,0,0,0,0,2000,2,Pyromaniac, +5 Power <img src='/images/upIcon.png' class='disable' /> &nbsp;   +10% Fire Damage rate <img src='/images/upIcon.png' class='disable' />,0,9,,,,,1\n92,Pyromaniac2,2,11,1,5,90,93,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,23,,0,0,0,0,0,2500,3,Pyromaniac, +8 Power <img src='/images/upIcon.png' class='disable' /> &nbsp;   +14% Fire Damage rate <img src='/images/upIcon.png' class='disable' /> <img src='/images/plusIcon.png' class='disable' />,0,9,,,,,1\n93,Pyromaniac3,3,11,1,5,90,94,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,,0,0,0,0,0,3000,4,Pyromaniac, +10 Power <img src='/images/upIcon.png' class='disable' /> &nbsp;   +17% Fire Damage rate <img src='/images/upIcon.png' class='disable' /> &nbsp;  3% Damage Rate Per 10% Life Loss <img src='/images/upIcon.png' class='disable' />,0,9,,,,,1\n94,Pyromaniac4,4,11,1,5,90,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,25,,0,0,0,0,0,3500,5,Pyromaniac, +13 Power <img src='/images/upIcon.png' class='disable' /> &nbsp;   +21% Fire Damage rate <img src='/images/upIcon.png' class='disable' /> &nbsp;  4% Damage Rate Per 10% Life Loss <img src='/images/upIcon.png' class='disable' /> <img src='/images/plusIcon.png' class='disable' />,0,9,,,,,1\n95,Pyromaniac5,5,11,1,5,90,-1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,26,,0,0,0,0,0,0,0,Pyromaniac, +15 Power &nbsp;   +25% Fire Damage rate &nbsp;  +15% Cast Speed &nbsp;  +5% Damage Rate Per 10% Life Loss,0,9,,,,,1\n1001,FrosterBaseAttack1,1,1,2,1,1000,1002,600,400,150,60,47,0,0,0,80,0,0,0,0,0,0,0,0,0,0,0,,101,0,0,0,0,0,500,0,Froster Attack, Damage to near front &nbsp; Chill enemy(20%),300,101,7,,,200,\n1002,FrosterBaseAttack2,2,1,2,1,1000,1003,600,400,150,60,47,0,0,0,110,0,0,0,0,0,0,0,0,0,0,0,,101,0,0,0,0,0,1000,0,Froster Attack, Damage to near front &nbsp; Chill enemy(20%) <img src='/images/upIcon.png' class='disable' />,300,101,7,,,200,\n1003,FrosterBaseAttack3,3,1,2,1,1000,1004,600,400,150,60,50,0,0,0,130,0,0,0,0,0,0,0,0,0,0,0,,102,0,0,0,0,0,1500,1,Froster Attack, Damage to near front &nbsp; Chill enemy(25%),300,101,7,,,200,\n1004,FrosterBaseAttack4,4,1,2,1,1000,1005,600,400,150,60,50,0,0,0,160,0,0,0,0,0,0,0,0,0,0,0,,102,0,0,0,0,0,2000,2,Froster Attack, Damage to near front &nbsp; Chill enemy(25%) <img src='/images/upIcon.png' class='disable' />,300,101,7,,,200,\n1005,FrosterBaseAttack5,5,1,2,1,1000,-1,600,400,150,60,53,0,0,0,180,0,0,0,0,0,0,0,0,0,0,0,,103,0,0,0,0,0,0,0,Froster Attack, Damage to near front &nbsp; Chill enemy(30%),300,101,7,,,200,\n1011,IceBolt1,1,3,2,1,1010,1012,500,300,2500,0,0,0,50,0,270,0,0,0,0,0,0,0,0,0,0,0,,104,1,32,650,2000,0,500,0,Ice Bolt, Fire projectile &nbsp; Chill enemy(35%),300,102,7,,,200,\n1012,IceBolt2,2,3,2,1,1010,1013,500,300,2500,0,0,0,60,0,330,0,0,0,0,0,0,0,0,0,0,0,,104,1,32,650,2000,0,1000,0,Ice Bolt, Fire projectile &nbsp; Chill enemy(35%) <img src='/images/upIcon.png' class='disable' />,300,102,7,,,200,\n1013,IceBolt3,3,3,2,1,1010,1014,500,300,2500,0,0,0,70,0,360,0,0,0,0,0,0,0,0,0,0,0,,105,1,34,650,2000,0,1500,1,Ice Bolt, Fire projectile &nbsp; Chill enemy(40%),300,102,7,,,200,\n1014,IceBolt4,4,3,2,1,1010,1015,500,300,2500,0,0,0,80,0,420,0,0,0,0,0,0,0,0,0,0,0,,105,1,34,650,2000,0,2000,2,Ice Bolt, Fire projectile &nbsp; Chill enemy(40%) <img src='/images/upIcon.png' class='disable' />,300,102,7,,,200,\n1015,IceBolt5,5,3,2,1,1010,-1,500,300,2500,0,0,0,90,0,450,0,0,0,0,0,0,0,0,0,0,0,,106,1,36,650,2000,0,0,0,Ice Bolt, Fire projectile &nbsp; Chill enemy(45%),300,102,7,,,200,\n1021,Healing1,1,8,2,1,1020,1022,500,300,9000,0,0,0,80,0,0,0,0,0,0,0,300,0,0,0,0,0,2000,,0,0,0,0,0,500,0,Healing, Heal 300 HP <img src='/images/upIcon.png' class='disable' />,300,103,,,,200,\n1022,Healing2,2,8,2,1,1020,1023,500,300,9000,0,0,0,95,0,0,0,0,0,0,0,360,0,0,0,0,0,2000,,0,0,0,0,0,1000,0,Healing, Heal 360 HP <img src='/images/upIcon.png' class='disable' /> <img src='/images/plusIcon.png' class='disable' />,300,103,,,,200,\n1023,Healing3,3,8,2,1,1020,1024,500,300,9000,0,0,0,110,0,0,0,0,0,0,0,400,0,0,0,0,0,115,,0,0,0,0,0,1500,1,Healing, Heal 400 HP <img src='/images/upIcon.png' class='disable' /> &nbsp; Every second +2% HP Restore,300,103,,,,200,\n1024,Healing4,4,8,2,1,1020,1025,500,300,9000,0,0,0,125,0,0,0,0,0,0,0,460,0,0,0,0,0,115,,0,0,0,0,0,2000,2,Healing, Heal 460 HP <img src='/images/upIcon.png' class='disable' /> &nbsp; Every second +2% HP Restore <img src='/images/upIcon.png' class='disable' /> <img src='/images/plusIcon.png' class='disable' />,300,103,,,,200,\n1025,Healing5,5,8,2,1,1020,-1,500,300,9000,0,0,0,140,0,0,0,0,0,0,0,500,0,0,20,0,0,116,,0,0,0,0,0,0,0,Healing, Heal 500 HP &nbsp; Every second +3% HP Restore &nbsp; +20% MP Restore,300,103,,,,200,\n1031,FrozenSoul1,1,11,2,1,1030,1032,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,110,,0,0,0,0,0,500,0,Frozen Soul, +3 MP regen <img src='/images/upIcon.png' class='disable' />,300,104,,,,200,\n1032,FrozenSoul2,2,11,2,1,1030,1033,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,111,,0,0,0,0,0,1000,0,Frozen Soul, +5 MP regen <img src='/images/upIcon.png' class='disable' /> <img src='/images/plusIcon.png' class='disable' />,300,104,,,,200,\n1033,FrozenSoul3,3,11,2,1,1030,1034,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,112,,0,0,0,0,0,1500,1,Frozen Soul, +6 MP regen <img src='/images/upIcon.png' class='disable' /> &nbsp; +150 MP,300,104,,,,200,\n1034,FrozenSoul4,4,11,2,1,1030,1035,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,113,,0,0,0,0,0,2000,2,Frozen Soul, +8 MP regen <img src='/images/upIcon.png' class='disable' /> &nbsp; +150 MP <img src='/images/upIcon.png' class='disable' /> <img src='/images/plusIcon.png' class='disable' />,300,104,,,,200,\n1035,FrozenSoul5,5,11,2,1,1030,-1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,114,,0,0,0,0,0,0,0,Frozen Soul, +9 MP regen &nbsp; +300 MP &nbsp; +10% All Resistance ,300,104,,,,200,\n1041,Purify1,1,8,2,2,1040,1042,500,300,20000,0,0,0,120,0,0,0,0,0,0,0,0,0,0,0,0,0,117,,0,0,0,0,0,1000,0,Purify, Every second Dispel oneself &nbsp; Every second +2% HP Restore <img src='/images/upIcon.png' class='disable' />,300,105,,,,400,\n1042,Purify2,2,8,2,2,1040,1043,500,300,20000,0,0,0,120,0,0,0,0,0,0,0,0,0,0,0,0,0,118,,0,0,0,0,0,1500,1,Purify, Every second Dispel oneself &nbsp; Every second +3% HP Restore,300,105,,,,400,\n1043,Purify3,3,8,2,2,1040,1044,500,300,20000,0,0,0,100,0,0,0,0,0,0,0,0,0,0,0,0,0,119,,0,0,0,0,0,2000,2,Purify, Every second Dispel oneself &nbsp; Every second +3% HP Restore <img src='/images/upIcon.png' class='disable' />,300,105,,,,400,\n1044,Purify4,4,8,2,2,1040,1045,500,300,20000,0,0,0,100,0,0,0,0,0,0,0,0,0,0,0,0,0,120,,0,0,0,0,0,2500,3,Purify, Every second Dispel oneself &nbsp; Every second +4% HP Restore,300,105,,,,400,\n1045,Purify5,5,8,2,2,1040,-1,500,300,20000,0,0,0,80,0,0,0,0,0,0,0,0,0,0,0,0,0,121,,0,0,0,0,0,0,0,Purify, Every second Dispel oneself &nbsp; Every second +4% HP Restore,300,105,,,,400,\n1051,IceBlock1,1,8,2,2,1050,1052,500,300,20000,0,0,0,120,0,0,0,0,0,1,100,0,0,0,0,0,0,122,135,0,0,0,0,0,1000,0,Ice Block, Make Immortal(4s) and Freeze oneself(3s) &nbsp; Every second +5% HP Restore <img src='/images/upIcon.png' class='disable' />,300,106,,,,400,\n1052,IceBlock2,2,8,2,2,1050,1053,500,300,20000,0,0,0,120,0,0,0,0,0,1,100,0,0,0,0,0,0,123,135,0,0,0,0,0,1500,1,Ice Block, Make Immortal(4s) and Freeze oneself(3s) &nbsp; Every second +8% HP Restore <img src='/images/upIcon.png' class='disable' /> <img src='/images/plusIcon.png' class='disable' />,300,106,,,,400,\n1053,IceBlock3,3,8,2,2,1050,1054,500,300,20000,0,0,0,100,0,0,0,0,0,1,100,0,0,0,0,0,0,124,135,0,0,0,0,0,2000,2,Ice Block, Make Immortal(4s) and Freeze oneself(3s) &nbsp; Every second +10% HP Restore <img src='/images/upIcon.png' class='disable' /> &nbsp; Every second +5% MP Restore,300,106,,,,400,\n1054,IceBlock4,4,8,2,2,1050,1055,500,300,20000,0,0,0,100,0,0,0,0,0,1,100,0,0,0,0,0,0,125,135,0,0,0,0,0,2500,3,Ice Block, Make Immortal(4s) and Freeze oneself(3s) &nbsp; Every second +13% HP Restore <img src='/images/upIcon.png' class='disable' /> &nbsp; Every second +5% MP Restore <img src='/images/upIcon.png' class='disable' />,300,106,,,,400,\n1055,IceBlock5,5,8,2,2,1050,-1,500,300,20000,0,0,0,80,0,0,0,0,0,1,100,0,0,0,0,0,0,126,135,0,0,0,0,0,0,0,Ice Block, Make Immortal(4s) and Freeze oneself(3s) &nbsp; Every second +15% HP Restore &nbsp; Every second +10% MP Restore,300,106,,,,400,\n1061,ColdSnap1,1,7,2,3,1060,1062,800,600,15000,380,120,0,140,0,200,0,0,0,0,0,0,0,0,0,0,0,,107,0,0,0,0,0,1500,1,Cold Snap, Damage target area &nbsp; Chill enemy(70%),300,107,7,,,900,\n1062,ColdSnap2,2,7,2,3,1060,1063,800,600,15000,380,120,0,160,0,265,0,0,0,0,0,0,0,0,0,0,0,,107,0,0,0,0,0,2000,2,Cold Snap, Damage target area &nbsp; Chill enemy(70%) <img src='/images/upIcon.png' class='disable' />,300,107,7,,,900,\n1063,ColdSnap3,3,7,2,3,1060,1064,800,600,15000,420,130,0,180,0,300,0,0,0,0,0,0,0,0,0,0,0,,108,0,0,0,0,0,2500,3,Cold Snap, Damage target area &nbsp; Chill enemy(85%),300,107,7,,,900,\n1064,ColdSnap4,4,7,2,3,1060,1065,800,600,15000,420,130,0,200,0,365,0,0,0,0,0,0,0,0,0,0,0,,108,0,0,0,0,0,3000,4,Cold Snap, Damage target area &nbsp; Chill enemy(85%) <img src='/images/upIcon.png' class='disable' />,300,107,7,,,900,\n1065,ColdSnap5,5,7,2,3,1060,-1,800,600,15000,460,140,0,220,0,400,0,0,0,0,0,0,0,0,0,0,0,,109,0,0,0,0,0,0,0,Cold Snap, Damage target area &nbsp; Chill enemy(100%),300,107,7,,,900,\n1071,FrozenOrb1,1,6,2,4,1070,1072,800,600,20000,0,120,800,160,0,40,0,0,0,0,0,0,0,0,0,0,0,,101,1,52,280,2500,60,2000,1,Frozen Orb, Fire rolling explosive projectile &nbsp; Chill enemy(20%),300,108,7,1008,1008,,1\n1072,FrozenOrb2,2,6,2,4,1070,1073,800,600,20000,0,120,800,180,0,55,0,0,0,0,0,0,0,0,0,0,0,,101,1,52,280,2500,60,2500,2,Frozen Orb, Fire rolling explosive projectile &nbsp; Chill enemy(20%) <img src='/images/upIcon.png' class='disable' />,300,108,7,1008,1008,,1\n1073,FrozenOrb3,3,6,2,4,1070,1074,800,600,20000,0,130,800,200,0,65,0,0,0,0,0,0,0,0,0,0,0,,102,1,54,280,2500,60,3000,3,Frozen Orb, Fire rolling explosive projectile &nbsp; Chill enemy(25%),300,108,7,1008,1008,,1\n1074,FrozenOrb4,4,6,2,4,1070,1075,800,600,20000,0,130,800,220,0,80,0,0,0,0,0,0,0,0,0,0,0,,102,1,54,280,2500,60,3500,4,Frozen Orb, Fire rolling explosive projectile &nbsp; Chill enemy(25%) <img src='/images/upIcon.png' class='disable' />,300,108,7,1008,1008,,1\n1075,FrozenOrb5,5,6,2,4,1070,-1,800,600,20000,0,140,800,240,0,90,0,0,0,0,0,0,0,0,0,0,0,,103,1,56,280,2500,60,0,0,Frozen Orb, Fire rolling explosive projectile &nbsp; Chill enemy(30%),300,108,7,1008,1008,,1\n1081,IceSpear1,1,3,2,2,1080,1082,500,300,7000,0,0,0,110,0,160,0,0,0,0,0,0,0,0,0,0,0,,101,3,27,500,2000,0,1000,0,Ice Spear, Fire 3 projectile &nbsp; Chill enemy(20%),300,110,7,,,400,\n1082,IceSpear2,2,3,2,2,1080,1083,500,300,7000,0,0,0,130,0,185,0,0,0,0,0,0,0,0,0,0,0,,101,3,27,500,2000,0,1500,1,Ice Spear, Fire 3 projectile <img src='/images/upIcon.png' class='disable' /> &nbsp; Chill enemy(20%),300,110,7,,,400,\n1083,IceSpear3,3,3,2,2,1080,1084,500,300,7000,0,0,0,150,0,200,0,0,0,0,0,0,0,0,0,0,0,,102,4,27,500,2000,0,2000,2,Ice Spear, Fire 4 projectile &nbsp; Chill enemy(25%),300,110,7,,,400,\n1084,IceSpear4,4,3,2,2,1080,1085,500,300,7000,0,0,0,170,0,225,0,0,0,0,0,0,0,0,0,0,0,,102,4,27,500,2000,0,2500,3,Ice Spear, Fire 4 projectile <img src='/images/upIcon.png' class='disable' /> &nbsp; Chill enemy(25%),300,110,7,,,400,\n1085,IceSpear5,5,3,2,2,1080,-1,500,300,7000,0,0,0,190,0,240,0,0,0,0,0,0,0,0,0,0,0,,103,5,27,500,2000,0,0,0,Ice Spear, Fire 5 projectile &nbsp; Chill enemy(30%),300,110,7,,,400,\n1091,Freezer1,1,11,2,5,1090,1092,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,127,,0,0,0,0,0,2000,2,Freezer, +5 Magic <img src='/images/upIcon.png' class='disable' /> &nbsp;   +10% Frost Damage rate <img src='/images/upIcon.png' class='disable' />,0,109,,,,,1\n1092,Freezer2,2,11,2,5,1090,1093,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,128,,0,0,0,0,0,2500,3,Freezer, +8 Magic <img src='/images/upIcon.png' class='disable' /> &nbsp;   +14% Frost Damage rate <img src='/images/upIcon.png' class='disable' /> <img src='/images/plusIcon.png' class='disable' />,0,109,,,,,1\n1093,Freezer3,3,11,2,5,1090,1094,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,129,,0,0,0,0,0,3000,4,Freezer, +10 Magic <img src='/images/upIcon.png' class='disable' /> &nbsp;   +17% Frost Damage rate <img src='/images/upIcon.png' class='disable' /> &nbsp;  Can Make Freezing When Hit Chill Enemy(15%) <img src='/images/upIcon.png' class='disable' />,0,109,,,,,1\n1094,Freezer4,4,11,2,5,1090,1095,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,130,,0,0,0,0,0,3500,5,Freezer, +13 Magic <img src='/images/upIcon.png' class='disable' /> &nbsp;   +21% Frost Damage rate <img src='/images/upIcon.png' class='disable' /> &nbsp;  Can Make Freezing When Hit Chill Enemy(20%) <img src='/images/upIcon.png' class='disable' /> <img src='/images/plusIcon.png' class='disable' />,0,109,,,,,1\n1095,Freezer5,5,11,2,5,1090,-1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,131,,0,0,0,0,0,0,0,Freezer, +15 Magic &nbsp;   +25% Frost Damage rate &nbsp;  +7.5% Move Speed &nbsp;  Can Make Freezing When Hit Chill Enemy(25%),0,109,,,,,1\n2001,MysterBaseAttack1,1,1,3,1,2000,2002,600,400,150,60,45,0,0,0,0,80,1,20,0,0,0,0,0,0,0,0,,,0,0,0,0,0,500,0,Myster Attack, Damage to near front &nbsp; Burn enemy MP(20%),300,201,8,,,200,\n2002,MysterBaseAttack2,2,1,3,1,2000,2003,600,400,150,60,45,0,0,0,0,110,1,20,0,0,0,0,0,0,0,0,,,0,0,0,0,0,1000,0,Myster Attack, Damage to near front &nbsp; Burn enemy MP(20%) <img src='/images/upIcon.png' class='disable' />,300,201,8,,,200,\n2003,MysterBaseAttack3,3,1,3,1,2000,2004,600,400,150,60,47,0,0,0,0,130,1,25,0,0,0,0,0,0,0,0,,,0,0,0,0,0,1500,1,Myster Attack, Damage to near front &nbsp; Burn enemy MP(25%),300,201,8,,,200,\n2004,MysterBaseAttack4,4,1,3,1,2000,2005,600,400,150,60,47,0,0,0,0,160,1,25,0,0,0,0,0,0,0,0,,,0,0,0,0,0,2000,2,Myster Attack, Damage to near front &nbsp; Burn enemy MP(25%) <img src='/images/upIcon.png' class='disable' />,300,201,8,,,200,\n2005,MysterBaseAttack5,5,1,3,1,2000,-1,600,400,150,60,50,0,0,0,0,180,1,30,0,0,0,0,0,0,0,0,,,0,0,0,0,0,0,0,Myster Attack, Damage to near front &nbsp; Burn enemy MP(30%),300,201,8,,,200,\n2011,ArcaneBolt1,1,3,3,1,2010,2012,500,300,2200,0,0,0,40,0,0,270,1,20,0,0,0,0,0,0,0,0,,,1,30,650,2000,0,500,0,Arcane Bolt, Fire projectile &nbsp; Burn enemy MP(20%),300,202,8,,,200,\n2012,ArcaneBolt2,2,3,3,1,2010,2013,500,300,2200,0,0,0,50,0,0,330,1,20,0,0,0,0,0,0,0,0,,,1,30,650,2000,0,1000,0,Arcane Bolt, Fire projectile &nbsp; Burn enemy MP(20%) <img src='/images/upIcon.png' class='disable' />,300,202,8,,,200,\n2013,ArcaneBolt3,3,3,3,1,2010,2014,500,300,2200,0,0,0,60,0,0,360,1,25,0,0,0,0,0,0,0,0,,,1,32,650,2000,0,1500,1,Arcane Bolt, Fire projectile &nbsp; Burn enemy MP(25%),300,202,8,,,200,\n2014,ArcaneBolt4,4,3,3,1,2010,2015,500,300,2200,0,0,0,70,0,0,420,1,25,0,0,0,0,0,0,0,0,,,1,32,650,2000,0,2000,2,Arcane Bolt, Fire projectile &nbsp; Burn enemy MP(25%) <img src='/images/upIcon.png' class='disable' />,300,202,8,,,200,\n2015,ArcaneBolt5,5,3,3,1,2010,-1,500,300,2200,0,0,0,80,0,0,450,1,30,0,0,0,0,0,0,0,0,,,1,35,650,2000,0,0,0,Arcane Bolt, Fire projectile &nbsp; Burn enemy MP(30%),300,202,8,,,200,\n2021,ArcaneCloak1,1,11,3,1,2020,2022,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,201,,0,0,0,0,0,500,0,Arcane Cloak, +10% All Resistance <img src='/images/upIcon.png' class='disable' /> <img src='/images/plusIcon.png' class='disable' />,0,203,,,,200,\n2022,ArcaneCloak2,2,11,3,1,2020,2023,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,202,,0,0,0,0,0,1000,0,Arcane Cloak, +12% All Resistance <img src='/images/upIcon.png' class='disable' /> &nbsp; +5% Arcane Resistance <img src='/images/plusIcon.png' class='disable' />,0,203,,,,200,\n2023,ArcaneCloak3,3,11,3,1,2020,2024,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,203,,0,0,0,0,0,1500,1,Arcane Cloak, +15% All Resistance <img src='/images/upIcon.png' class='disable' /> &nbsp; +5% Arcane Resistance &nbsp; +5% Frost Resistance <img src='/images/plusIcon.png' class='disable' />,0,203,,,,200,\n2024,ArcaneCloak4,4,11,3,1,2020,2025,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,204,,0,0,0,0,0,2000,2,Arcane Cloak, +17% All Resistance <img src='/images/upIcon.png' class='disable' /> &nbsp; +5% Arcane Resistance <img src='/images/upIcon.png' class='disable' /> &nbsp; +5% Frost Resistance <img src='/images/upIcon.png' class='disable' /> &nbsp; +5% Fire Resistance <img src='/images/upIcon.png' class='disable' />,0,203,,,,200,\n2025,ArcaneCloak5,5,11,3,1,2020,-1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,205,,0,0,0,0,0,0,0,Arcane Cloak, +20% All Resistance &nbsp; + 10% Arcane Resistance &nbsp; +10% Frost Resistance &nbsp; +10% Fire Resistance,0,203,,,,200,\n2031,ArcaneMissile1,1,3,3,2,2030,2032,500,300,6000,0,0,0,100,0,0,160,1,15,0,0,0,0,0,0,0,0,,,3,25,500,2000,0,1000,0,Arcane Missile, Fire 3 projectile &nbsp; Burn enemy MP(15%),300,204,8,,,400,\n2032,ArcaneMissile2,2,3,3,2,2030,2033,500,300,6000,0,0,0,120,0,0,185,1,15,0,0,0,0,0,0,0,0,,,3,25,500,2000,0,1500,1,Arcane Missile, Fire 3 projectile <img src='/images/upIcon.png' class='disable' /> &nbsp; Burn enemy MP(15%),300,204,8,,,400,\n2033,ArcaneMissile3,3,3,3,2,2030,2034,500,300,6000,0,0,0,140,0,0,200,1,15,0,0,0,0,0,0,0,0,,,4,25,500,2000,0,2000,2,Arcane Missile, Fire 4 projectile &nbsp; Burn enemy MP(15%),300,204,8,,,400,\n2034,ArcaneMissile4,4,3,3,2,2030,2035,500,300,6000,0,0,0,160,0,0,225,1,15,0,0,0,0,0,0,0,0,,,4,25,500,2000,0,2500,3,Arcane Missile, Fire 4 projectile <img src='/images/upIcon.png' class='disable' /> &nbsp; Burn enemy MP(15%),300,204,8,,,400,\n2035,ArcaneMissile5,5,3,3,2,2030,-1,500,300,6000,0,0,0,180,0,0,240,1,15,0,0,0,0,0,0,0,0,,,5,25,500,2000,0,0,0,Arcane Missile, Fire 5 projectile &nbsp; Burn enemy MP(15%),300,204,8,,,400,\n2041,Silence1,1,7,3,2,2040,2042,500,300,15000,360,110,0,100,0,0,0,0,0,0,0,0,0,0,0,0,0,,206,0,0,0,0,0,1000,0,Silence, Silence enemy,300,205,,1009,,400,\n2042,Silence2,2,7,3,2,2040,2043,500,300,15000,360,110,0,120,0,0,0,0,0,0,0,0,0,0,0,0,0,,207,0,0,0,0,0,1500,1,Silence, Silence enemy,300,205,,1009,,400,\n2043,Silence3,3,7,3,2,2040,2044,500,300,13000,380,120,0,140,0,0,0,0,0,0,0,0,0,0,0,0,0,,207,0,0,0,0,0,2000,2,Silence, Silence enemy,300,205,,1009,,400,\n2044,Silence4,4,7,3,2,2040,2045,500,300,13000,380,120,0,160,0,0,0,0,0,0,0,0,0,0,0,0,0,,208,0,0,0,0,0,2500,3,Silence, Silence enemy,300,205,,1009,,400,\n2045,Silence5,5,7,3,2,2040,-1,500,300,11000,400,130,0,180,0,0,0,0,0,0,0,0,0,0,0,0,0,,208,0,0,0,0,0,0,0,Silence, Silence enemy,300,205,,1009,,400,\n2061,Blink1,1,10,3,3,2060,2062,500,300,10000,300,40,0,90,0,0,0,0,0,0,0,0,0,0,0,0,0,,,0,0,0,0,0,1500,1,Blink, Move direct to target position,300,207,,,,900,\n2062,Blink2,2,10,3,3,2060,2063,500,300,10000,320,40,0,90,0,0,0,0,0,0,0,0,0,0,0,0,0,,,0,0,0,0,0,2000,2,Blink, Move direct to target position,300,207,,,,900,\n2063,Blink3,3,10,3,3,2060,2064,500,300,9000,320,40,0,80,0,0,0,0,0,0,0,0,0,0,0,0,0,,,0,0,0,0,0,2500,3,Blink, Move direct to target position,300,207,,,,900,\n2064,Blink4,4,10,3,3,2060,2065,500,300,9000,350,40,0,80,0,0,0,0,0,0,0,0,0,0,0,0,0,,,0,0,0,0,0,3000,4,Blink, Move direct to target position,300,207,,,,900,\n2065,Blink5,5,10,3,3,2060,-1,500,300,8000,350,40,0,70,0,0,0,0,0,0,0,0,0,0,0,0,0,,,0,0,0,0,0,0,0,Blink, Move direct to target position,300,207,,,,900,\n2071,ArcaneBlast1,1,7,3,3,2070,2072,800,600,14000,370,110,0,100,0,0,300,1,20,0,0,0,0,0,0,0,0,,,0,0,0,0,0,1500,1,Arcane Blast, Damage to target area &nbsp; Burn enemy MP(20%),300,208,8,,,900,\n2072,ArcaneBlast2,2,7,3,3,2070,2073,800,600,14000,370,110,0,125,0,0,365,1,20,0,0,0,0,0,0,0,0,,,0,0,0,0,0,2000,2,Arcane Blast, Damage to target area &nbsp; Burn enemy MP(20%) <img src='/images/upIcon.png' class='disable' />,300,208,8,,,900,\n2073,ArcaneBlast3,3,7,3,3,2070,2074,800,600,14000,410,120,0,150,0,0,400,1,25,0,0,0,0,0,0,0,0,,,0,0,0,0,0,2500,3,Arcane Blast, Damage to target area &nbsp; Burn enemy MP(25%),300,208,8,,,900,\n2074,ArcaneBlast4,4,7,3,3,2070,2075,800,600,14000,410,120,0,175,0,0,465,1,25,0,0,0,0,0,0,0,0,,,0,0,0,0,0,3000,4,Arcane Blast, Damage to target area &nbsp; Burn enemy MP(25%) <img src='/images/upIcon.png' class='disable' />,300,208,8,,,900,\n2075,ArcaneBlast5,5,7,3,3,2070,-1,800,600,14000,450,130,0,200,0,0,500,1,30,0,0,0,0,0,0,0,0,,,0,0,0,0,0,0,0,Arcane Blast, Damage to target area &nbsp; Burn enemy MP(30%),300,208,8,,,900,\n2081,Haste1,1,8,3,3,2080,2082,500,300,30000,0,0,0,100,0,0,0,0,0,0,0,0,0,0,0,0,0,211,,0,0,0,0,0,1500,1,Haste, +15% Move and Cast speed <img src='/images/upIcon.png' class='disable' />,300,209,,,,900,\n2082,Haste2,2,8,3,3,2080,2083,500,300,30000,0,0,0,125,0,0,0,0,0,0,0,0,0,0,0,0,0,212,,0,0,0,0,0,2000,2,Haste, +18% Move and Cast speed <img src='/images/upIcon.png' class='disable' />,300,209,,,,900,\n2083,Haste3,3,8,3,3,2080,2084,500,300,30000,0,0,0,150,0,0,0,0,0,0,0,0,0,0,0,0,0,213,,0,0,0,0,0,2500,3,Haste, +20% Move and Cast speed <img src='/images/upIcon.png' class='disable' />,300,209,,,,900,\n2084,Haste4,4,8,3,3,2080,2085,500,300,30000,0,0,0,175,0,0,0,0,0,0,0,0,0,0,0,0,0,214,,0,0,0,0,0,3000,4,Haste, +23% Move and Cast speed <img src='/images/upIcon.png' class='disable' />,300,209,,,,900,\n2085,Haste5,5,8,3,3,2080,-1,500,300,25000,0,0,0,200,0,0,0,0,0,0,0,0,0,0,0,0,0,215,,0,0,0,0,0,0,0,Haste, +25% Move and Cast speed <img src='/images/upIcon.png' class='disable' />,300,209,,,,900,\n2091,Mystic1,1,11,3,5,2090,2092,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,216,,0,0,0,0,0,2000,2,Mystic, +2 All Stat <img src='/images/upIcon.png' class='disable' /> &nbsp;   +10% All Damage rate <img src='/images/upIcon.png' class='disable' />,0,210,,,,,1\n2092,Mystic2,2,11,3,5,2090,2093,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,217,,0,0,0,0,0,2500,3,Mystic, +4 All Stat <img src='/images/upIcon.png' class='disable' /> &nbsp;   +13% All Damage rate <img src='/images/upIcon.png' class='disable' /> <img src='/images/plusIcon.png' class='disable' />,0,210,,,,,1\n2093,Mystic3,3,11,3,5,2090,2094,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,218,,0,0,0,0,0,3000,4,Mystic, +5 All Stat <img src='/images/upIcon.png' class='disable' /> &nbsp;   +15% All Damage rate <img src='/images/upIcon.png' class='disable' /> &nbsp;  Add Random Buff When Use Arcane Spell <img src='/images/upIcon.png' class='disable' /> ,0,210,,,,,1\n2094,Mystic4,4,11,3,5,2090,2095,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,219,,0,0,0,0,0,3500,5,Mystic, +7 All Stat <img src='/images/upIcon.png' class='disable' /> &nbsp;   +18% All Damage rate <img src='/images/upIcon.png' class='disable' /> &nbsp;  Add Random Buff When Use Arcane Spell <img src='/images/upIcon.png' class='disable' />,0,210,,,,,1\n2095,Mystic5,5,11,3,5,2090,-1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,220,,0,0,0,0,0,0,0,Mystic, +8 All Stat &nbsp;   +20% All Damage rate &nbsp;  +15% Cooldown Reduce rate &nbsp;  Add Random Buff When Use Arcane Spell,0,210,,,,,1\n",buffGroupData:"index,name,clientName,clientDesc,isBuff,buff1,buff2,buff3,buff4,buff5,buff6,buff7,buff8,buff9,buff10,buffLifeTime,buffApplyRate,buffIcon,buffEffectGroup\n1,Ignite20,Ignite, Damage 3% of Max HP,0,1,,,,,,,,,,5000,20,515,5\n2,Ignite30,Ignite, Damage 3% of Max HP,0,1,,,,,,,,,,5000,30,515,5\n3,Ignite40,Ignite, Damage 3% of Max HP,0,1,,,,,,,,,,5000,40,515,5\n4,Ignite50,Ignite, Damage 3% of Max HP,0,1,,,,,,,,,,5000,50,515,5\n5,Ignite100,Ignite, Damage 3% of Max HP,0,1,,,,,,,,,,5000,100,515,5\n6,BurningSoul1,BurningSoul, +4 HP regen,1,19,,,,,,,,,,0,100,501,1010\n7,BurningSoul2,BurningSoul, +6 HP regen,1,20,,,,,,,,,,0,100,501,1010\n8,BurningSoul3,BurningSoul, +7 HP regen &nbsp; +300 HP,1,21,3,,,,,,,,,0,100,501,1010\n9,BurningSoul4,BurningSoul, +9 HP regen &nbsp; +300 HP,1,22,3,,,,,,,,,0,100,501,1010\n10,BurningSoul5,BurningSoul, +10 HP regen &nbsp; +500 HP &nbsp; +10% Damage rate,1,23,4,79,,,,,,,,0,100,501,1010\n11,InnerFire1,InnerFire, +20% Damage rate &nbsp; Make Ignite oneself,1,83,,,,,,,,,,15000,100,502,1001\n12,InnerFire2,InnerFire, +27% Damage rate &nbsp; Make Ignite oneself,1,84,,,,,,,,,,15000,100,502,1001\n13,InnerFire3,InnerFire, +30% Damage rate &nbsp; Make Ignite oneself &nbsp; +10% Fire resistance,1,85,117,,,,,,,,,15000,100,502,1001\n14,InnerFire4,InnerFire, +37% Damage rate &nbsp; Make Ignite oneself &nbsp; +10% Fire resistance,1,86,117,,,,,,,,,15000,100,502,1001\n15,InnerFire5,InnerFire, +40% Damage rate &nbsp; Make Ignite oneself &nbsp; +15% Fire resistance &nbsp; +3 HP regen,1,87,118,18,,,,,,,,15000,100,502,1001\n16,InnerFireIgnite,Ignite, Damage 3% of Max HP,0,1,,,,,,,,,,15000,100,515,5\n17,Fury1,Fury, +5% Move and Cast speed,1,29,42,,,,,,,,,0,100,503,1002\n18,Fury2,Fury, +8% Move and Cast speed,1,30,43,,,,,,,,,0,100,503,1002\n19,Fury3,Fury, +10% Move and Cast speed &nbsp; If ignite additional +10% Move and Cast speed,1,32,44,54,56,,,,,,,0,100,503,1002\n20,Fury4,Fury, +13% Move and Cast speed &nbsp; If ignite additional +10% Move and Cast speed,1,34,46,54,56,,,,,,,0,100,503,1002\n21,Fury5,Fury, +15% Move and Cast speed &nbsp; If ignite additional +15% Move and Cast speed &nbsp; +10% Cooldown reduce rate,1,35,47,55,57,109,,,,,,0,100,503,1002\n22,Pyromaniac1,Pyromaniac, +5 Power &nbsp;   +10% Fire Damage rate,1,60,88,,,,,,,,,0,100,504,101\n23,Pyromaniac2,Pyromaniac, +8 Power &nbsp;   +14% Fire Damage rate,1,62,89,,,,,,,,,0,100,504,101\n24,Pyromaniac3,Pyromaniac, +10 Power &nbsp;   +17% Fire Damage rate &nbsp;  3% Damage Rate Per 10% Life Loss,1,63,90,98,,,,,,,,0,100,504,101\n25,Pyromaniac4,Pyromaniac, +13 Power &nbsp;   +21% Fire Damage rate &nbsp;  4% Damage Rate Per 10% Life Loss,1,64,91,99,,,,,,,,0,100,504,101\n26,Pyromaniac5,Pyromaniac, +15 Power &nbsp;   +25% Fire Damage rate &nbsp;  +15% Cast Speed &nbsp;  +5% Damage Rate Per 10% Life Loss,1,65,92,100,47,,,,,,,0,100,504,101\n101,Chill20,Chill, Decrease 30% Move and Cast Speed,0,2,,,,,,,,,,3000,20,516,2\n102,Chill25,Chill, Decrease 30% Move and Cast Speed,0,2,,,,,,,,,,3000,25,516,2\n103,Chill30,Chill, Decrease 30% Move and Cast Speed,0,2,,,,,,,,,,3000,30,516,2\n104,Chill35,Chill, Decrease 30% Move and Cast Speed,0,2,,,,,,,,,,3000,35,516,2\n105,Chill40,Chill, Decrease 30% Move and Cast Speed,0,2,,,,,,,,,,3000,40,516,2\n106,Chill45,Chill, Decrease 30% Move and Cast Speed,0,2,,,,,,,,,,3000,45,516,2\n107,Chill70,Chill, Decrease 30% Move and Cast Speed,0,2,,,,,,,,,,3000,70,516,2\n108,Chill85,Chill, Decrease 30% Move and Cast Speed,0,2,,,,,,,,,,3000,85,516,2\n109,Chill100,Chill, Decrease 30% Move and Cast Speed,0,2,,,,,,,,,,3000,100,516,2\n110,FrozenSoul1,FrozenSoul, +3 MP regen,1,24,,,,,,,,,,0,100,505,1011\n111,FrozenSoul2,FrozenSoul, +5 MP regen,1,25,,,,,,,,,,0,100,505,1011\n112,FrozenSoul3,FrozenSoul, +6 MP regen &nbsp; +150 MP,1,26,5,,,,,,,,,0,100,505,1011\n113,FrozenSoul4,FrozenSoul, +8 MP regen &nbsp; +150 MP,1,27,5,,,,,,,,,0,100,505,1011\n114,FrozenSoul5,FrozenSoul, +9 MP regen &nbsp; +300 MP &nbsp; +10% All Resistance ,1,28,6,111,,,,,,,,0,100,505,1011\n115,Heal3,Heal, +2% HP Restore,1,8,,,,,,,,,,5000,100,514,1012\n116,Heal5,Heal, +3% HP Restore,1,9,,,,,,,,,,5000,100,514,1012\n117,Purify1,Purify, Purify oneself &nbsp; +2% HP Restore,1,8,106,,,,,,,,,3000,100,506,1012\n118,Purify2,Purify, Purify oneself &nbsp; +3% HP Restore,1,9,106,,,,,,,,,3000,100,506,1012\n119,Purify3,Purify, Purify oneself &nbsp; +3% HP Restore,1,9,106,,,,,,,,,4000,100,506,1012\n120,Purify4,Purify, Purify oneself &nbsp; +4% HP Restore,1,10,106,,,,,,,,,4000,100,506,1012\n121,Purify5,Purify, Purify oneself &nbsp; +4% HP Restore,1,10,106,,,,,,,,,5000,100,506,1012\n122,IceBlock1,IceBlock, Immortal &nbsp; +5% HP Restore,1,139,11,,,,,,,,,4000,100,507,1\n123,IceBlock2,IceBlock, Immortal &nbsp; +8% HP Restore,1,139,12,,,,,,,,,4000,100,507,1\n124,IceBlock3,IceBlock, Immortal &nbsp; +10% HP and MP Restore &nbsp; +5% MP Restore,1,139,13,16,,,,,,,,4000,100,507,1\n125,IceBlock4,IceBlock, Immortal &nbsp; +13% HP and MP Restore &nbsp; +5% MP Restore,1,139,14,16,,,,,,,,4000,100,507,1\n126,IceBlock5,IceBlock, Immortal &nbsp; +15% HP and MP Restore &nbsp; +10% MP Restore,1,139,15,17,,,,,,,,4000,100,507,1\n127,Freezer1,Freezer, +5 Magic &nbsp;   +10% Frost Damage rate,1,68,93,,,,,,,,,0,100,508,102\n128,Freezer2,Freezer, +8 Magic &nbsp;   +14% Frost Damage rate,1,70,94,,,,,,,,,0,100,508,102\n129,Freezer3,Freezer, +10 Magic &nbsp;   +17% Frost Damage rate &nbsp;  Can Make Freezing When Hit Chill Enemy(15%),1,71,95,101,,,,,,,,0,100,508,102\n130,Freezer4,Freezer, +13 Magic &nbsp;   +21% Frost Damage rate &nbsp;  Can Make Freezing When Hit Chill Enemy(20%),1,72,96,102,,,,,,,,0,100,508,102\n131,Freezer5,Freezer, +15 Magic &nbsp;   +25% Frost Damage rate &nbsp;  +7.5% Move Speed &nbsp;  Can Make Freezing When Hit Chill Enemy(25%),1,73,97,103,31,,,,,,,0,100,508,102\n132,Freeze1,Freeze, Frozen &nbsp; Can`t do anything!!!,0,104,,,,,,,,,,1000,15,517,3\n133,Freeze2,Freeze, Frozen &nbsp; Can`t do anything!!!,0,104,,,,,,,,,,1000,20,517,3\n134,Freeze3,Freeze, Frozen &nbsp; Can`t do anything!!!,0,104,,,,,,,,,,1000,25,517,3\n135,IceBlockFreeze,Freeze, Frozen &nbsp; Can`t do anything!!!,0,105,,,,,,,,,,3000,100,517,3\n201,ArcaneCloak1,ArcaneCloak, +10% All Resistance,1,111,,,,,,,,,,0,100,509,1005\n202,ArcaneCloak2,ArcaneCloak, +12% All Resistance &nbsp; +5% Arcane Resistance,1,112,119,,,,,,,,,0,100,509,1005\n203,ArcaneCloak3,ArcaneCloak, +15% All Resistance &nbsp; +5% Arcane Resistance &nbsp; +5% Frost Resistance,1,113,119,121,,,,,,,,0,100,509,1005\n204,ArcaneCloak4,ArcaneCloak, +17% All Resistance &nbsp; +5% Arcane Resistance &nbsp; +5% Frost Resistance &nbsp; +5% Fire Resistance,1,114,119,121,116,,,,,,,0,100,509,1005\n205,ArcaneCloak5,ArcaneCloak, +20% All Resistance &nbsp; + 10% Arcane Resistance &nbsp; +10% Frost Resistance &nbsp; +10% Fire Resistance,1,115,120,122,117,,,,,,,0,100,509,1005\n206,Silence1,Silence, Silenced &nbsp; Can`t cast spell!!!,0,123,,,,,,,,,,3000,100,518,4\n207,Silence2,Silence, Silenced &nbsp; Can`t cast spell!!!,0,123,,,,,,,,,,4000,100,518,4\n208,Silence3,Silence, Silenced &nbsp; Can`t cast spell!!!,0,123,,,,,,,,,,5000,100,518,4\n209,Dispel,Dispel, Dispel Buff,0,108,,,,,,,,,,500,100,519,1013\n210,DispelSelf,Dispel, Dispel Debuff,0,107,,,,,,,,,,500,100,513,1013\n211,Haste1,Haste, +15% Move and Cast speed,1,35,47,,,,,,,,,15000,100,510,1006\n212,Haste2,Haste, +18% Move and Cast speed,1,36,48,,,,,,,,,15000,100,510,1006\n213,Haste3,Haste, +20% Move and Cast speed,1,37,49,,,,,,,,,20000,100,510,1006\n214,Haste4,Haste, +23% Move and Cast speed,1,38,50,,,,,,,,,20000,100,510,1006\n215,Haste5,Haste, +25% Move and Cast speed,1,39,51,,,,,,,,,20000,100,510,1006\n216,Mystic1,Mystic, +2 All Stat &nbsp;   +10% All Damage rate,1,58,66,74,79,,,,,,,0,100,511,103\n217,Mystic2,Mystic, +4 All Stat &nbsp;   +13% All Damage rate,1,59,67,75,80,,,,,,,0,100,511,103\n218,Mystic3,Mystic, +5 All Stat &nbsp;   +15% All Damage rate &nbsp;  Add Random Buff When Use Arcane Spell ,1,60,68,76,81,124,,,,,,0,100,511,103\n219,Mystic4,Mystic, +7 All Stat &nbsp;   +18% All Damage rate &nbsp;  Add Random Buff When Use Arcane Spell,1,61,69,77,82,125,,,,,,0,100,511,103\n220,Mystic5,Mystic, +8 All Stat &nbsp;   +20% All Damage rate &nbsp;  +15% Cooldown Reduce rate &nbsp;  Add Random Buff When Use Arcane Spell,1,62,70,78,83,126,110,,,,,0,100,511,103\n221,RandomBuff1-1,MysticBuff1, +50 HP Restore,1,127,,,,,,,,,,7000,100,511,1014\n222,RandomBuff1-2,MysticBuff1, +30 MP Restore,1,128,,,,,,,,,,7000,100,511,1015\n223,RandomBuff1-3,MysticBuff1, +15% Damage Rate,1,129,,,,,,,,,,7000,100,511,1016\n224,RandomBuff1-4,MysticBuff1, +5% All Resistance,1,130,,,,,,,,,,7000,100,511,1017\n225,RandomBuff1-5,MysticBuff1, +10% Move and Cast speed,1,32,44,,,,,,,,,7000,100,511,1018\n226,RandomBuff2-1,MysticBuff2, +75 HP Restore,1,131,,,,,,,,,,8500,100,511,1014\n227,RandomBuff2-2,MysticBuff2, +40 MP Restore,1,132,,,,,,,,,,8500,100,511,1015\n228,RandomBuff2-3,MysticBuff2, +30% Damage Rate,1,133,,,,,,,,,,8500,100,511,1016\n229,RandomBuff2-4,MysticBuff2, +10% All Resistance,1,134,,,,,,,,,,8500,100,511,1017\n230,RandomBuff2-5,MysticBuff2, +15% Move and Cast speed,1,33,45,,,,,,,,,8500,100,511,1018\n231,RandomBuff3-1,MysticBuff3, +100 HP Restore,1,135,,,,,,,,,,10000,100,511,1014\n232,RandomBuff3-2,MysticBuff3, +50 MP Restore,1,136,,,,,,,,,,10000,100,511,1015\n233,RandomBuff3-3,MysticBuff3, +45% Damage Rate,1,137,,,,,,,,,,10000,100,511,1016\n234,RandomBuff3-4,MysticBuff3, +15% All Resistance,1,138,,,,,,,,,,10000,100,511,1017\n235,RandomBuff3-5,MysticBuff3, +20% Move and Cast speed,1,35,47,,,,,,,,,10000,100,511,1018\n1000,StartBuff,Immortal, Immortal ,1,139,140,141,,,,,,,,5000,100,512,1\n1001,LevelUPBuff,LevelUp, Level Up!!! ,1,140,141,,,,,,,,,1000,100,512,1019\n1002,EnvImmortal,Immortal, Immortal &nbsp;   You are totaly safe in here!,1,139,,,,,,,,,,0,100,512,1021\n1003,EnvPortal,,,1,143,139,,,,,,,,,1500,100,1002,1020\n2000,onlyForEffect,,,1,142,,,,,,,,,,500,100,1002,1012\n",chestData:"index,grade,HP,imgData,provideExp,provideGold,provideJewel,provideScore,minGoldCount,maxGoldCount,minGoldAmount,maxGoldAmount,minJewelCount,maxJewelCount,minJewelAmount,maxJewelAmount,minSkillCount,maxSkillCount,SkillIndex1,SkillDropRate1,SkillIndex2,SkillDropRate2,SkillIndex3,SkillDropRate3,SkillIndex4,SkillDropRate4,SkillIndex5,SkillDropRate5,SkillIndex6,SkillDropRate6,SkillIndex7,SkillDropRate7,SkillIndex7,SkillDropRate7,SkillIndex8,SkillDropRate8,SkillIndex9,SkillDropRate9,SkillIndex10,SkillDropRate10,SkillIndex11,SkillDropRate11,SkillIndex12,SkillDropRate12,SkillIndex13,SkillDropRate13,SkillIndex14,SkillDropRate14,SkillIndex15,SkillDropRate15,SkillIndex16,SkillDropRate16,SkillIndex17,SkillDropRate17,SkillIndex18,SkillDropRate18,SkillIndex19,SkillDropRate19,SkillIndex20,SkillDropRate20\n1,1,2000,108,300,50,0,100,5,7,50,130,0,1,1,1,1,1,21,50,31,100,41,75,51,50,61,50,71,50,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\n2,1,2000,108,300,50,0,100,5,7,50,130,0,1,1,1,1,1,1011,50,1021,100,1031,100,1041,75,1051,75,1061,50,1081,75,,,,,,,,,,,,,,,,,,,,,,,,,,,,\n3,1,2000,108,300,50,0,100,5,7,50,130,0,1,1,1,1,1,2011,50,2021,50,2031,75,2041,50,2061,50,2071,50,2081,50,,,,,,,,,,,,,,,,,,,,,,,,,,,,\n4,2,2500,109,500,100,0,150,6,7,75,175,0,1,1,1,1,1,41,75,51,50,61,50,71,50,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\n5,2,2500,109,500,100,0,150,6,7,75,175,0,1,1,1,1,1,1041,75,1051,75,1061,50,1081,75,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\n6,2,2500,109,500,100,0,150,6,7,75,175,0,1,1,1,1,1,2031,75,2041,50,2061,50,2071,50,2081,50,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\n7,3,3500,110,750,150,0,200,7,8,100,200,1,2,1,1,1,1,41,75,51,50,61,50,71,50,81,25,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\n8,3,3500,110,750,150,0,200,7,8,100,200,1,2,1,1,1,1,1041,75,1051,75,1061,50,1071,50,1081,75,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\n9,3,3500,110,750,150,0,200,7,8,100,200,1,2,1,1,1,1,2031,75,2041,50,2061,50,2071,50,2081,50,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\n10,4,4500,111,900,200,0,350,7,9,125,250,1,2,1,1,1,2,41,75,51,50,61,50,71,50,81,25,1041,75,1051,75,1061,50,1071,50,1081,75,,,,,,,,,,,,,,,,,,,,,,\n11,4,4500,111,900,200,0,350,7,9,125,250,1,2,1,1,1,2,1041,75,1051,75,1061,50,1071,50,2031,75,2041,50,2061,50,2071,50,2081,50,1081,75,,,,,,,,,,,,,,,,,,,,,,\n12,4,4500,111,900,200,0,350,7,9,125,250,1,2,1,1,1,2,2031,75,2041,50,2061,50,2071,50,2081,50,41,75,51,50,61,50,71,50,81,25,,,,,,,,,,,,,,,,,,,,,,\n13,5,6000,112,1000,250,0,500,8,10,150,300,1,2,1,1,1,2,61,50,71,50,81,25,1061,50,1071,50,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\n14,5,6000,112,1000,250,0,500,8,10,150,300,1,2,1,1,1,2,1061,50,1071,50,2061,50,2071,50,2081,50,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\n15,5,6000,112,1000,250,0,500,8,10,150,300,1,2,1,1,1,2,2061,50,2071,50,2081,50,61,50,71,50,81,25,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\n",obstacleData:"index,type,id,posX,posY,radius,treeImgRadius,imgData\n1,1,OTT1,1813,5287,15,45,103\n2,1,OTT2,2916,4689,15,45,103\n3,1,OTT3,3534,5217,15,45,103\n4,1,OTT4,2659,2268,15,45,103\n5,1,OTT5,2205,4811,15,45,103\n6,1,OTT6,4255,5123,15,45,103\n7,1,OTT7,911,5296,15,45,103\n8,1,OTT8,5019,847,15,45,103\n9,1,OTT9,3650,3575,15,45,103\n10,1,OTT10,2442,5525,15,45,103\n11,1,OTT11,4170,1353,15,45,103\n12,1,OTT12,2703,3846,15,45,103\n13,1,OTT13,1050,5250,15,45,103\n14,1,OTT14,5747,3310,15,45,103\n15,1,OTT15,1155,5825,15,45,103\n16,1,OTT16,3538,3638,25,75,102\n17,1,OTT17,5915,2959,25,75,102\n18,1,OTT18,1326,2446,25,75,102\n19,1,OTT19,2381,1937,25,75,102\n20,1,OTT20,5638,4165,25,75,102\n21,1,OTT21,4779,1984,25,75,102\n22,1,OTT22,4577,3139,25,75,102\n23,1,OTT23,5046,3716,25,75,102\n24,1,OTT24,4318,5169,25,75,102\n25,1,OTT25,4394,933,25,75,102\n26,1,OTT26,1539,3673,25,75,102\n27,1,OTT27,2505,1130,25,75,102\n28,1,OTT28,3130,420,25,75,102\n29,1,OTT29,1619,5102,25,75,102\n30,1,OTT30,1495,471,25,75,102\n31,1,OTT31,5776,3131,25,75,102\n32,1,OTT32,5713,5996,25,75,102\n33,1,OTT33,5333,5525,25,75,102\n34,1,OTT34,713,5955,25,75,102\n35,1,OTT35,1487,2343,25,75,102\n36,1,OTT36,3320,2989,25,75,102\n37,1,OTT37,4549,5696,25,75,102\n38,1,OTT38,1885,1192,25,75,102\n39,1,OTT39,620,3401,25,75,102\n40,1,OTT40,1365,1602,25,75,102\n41,1,OTT41,4259,5741,25,75,102\n42,1,OTT42,3759,2736,25,75,102\n43,1,OTT43,2441,2818,25,75,102\n44,1,OTT44,1297,2105,25,75,102\n45,1,OTT45,2790,1331,25,75,102\n46,1,OTT46,1056,1944,25,75,102\n47,1,OTT47,3698,1095,25,75,102\n48,1,OTT48,2627,3504,25,75,102\n49,1,OTT49,3488,1280,25,75,102\n50,1,OTT50,5526,4258,25,75,102\n51,1,OTT51,2504,1595,25,75,102\n52,1,OTT52,4500,1250,25,75,102\n53,1,OTT53,2582,749,30,90,101\n54,1,OTT54,5811,4682,30,90,101\n55,1,OTT55,1681,1557,30,90,101\n56,1,OTT56,5229,4733,30,90,101\n57,1,OTT57,2955,3093,30,90,101\n58,1,OTT58,3779,2909,30,90,101\n59,1,OTT59,5111,2341,30,90,101\n60,1,OTT60,3025,4827,30,90,101\n61,1,OTT61,1756,2445,30,90,101\n62,1,OTT62,4879,1238,30,90,101\n63,1,OTT63,3044,1209,30,90,101\n64,1,OTT64,2502,5932,30,90,101\n65,1,OTT65,3481,1035,30,90,101\n66,1,OTT66,3321,4427,30,90,101\n67,1,OTT67,5508,1295,30,90,101\n68,1,OTT68,650,728,30,90,101\n69,1,OTT69,1030,5347,30,90,101\n70,1,OTT70,5296,5735,30,90,101\n71,1,OTT71,5335,4911,30,90,101\n72,1,OTT72,4424,756,30,90,101\n73,1,OTT73,3617,3077,30,90,101\n74,1,OTT74,2067,3735,30,90,101\n75,1,OTT75,5656,1688,30,90,101\n76,1,OTT76,2026,3498,30,90,101\n77,1,OTT77,4142,5665,30,90,101\n78,1,OTT78,2142,1107,30,90,101\n79,1,OTT79,421,1652,30,90,101\n80,1,OTT80,5672,5072,30,90,101\n81,1,OTT81,2898,3001,30,90,101\n82,1,OTT82,5229,5102,30,90,101\n83,1,OTT83,1712,5196,30,90,101\n84,1,OTT84,844,4561,30,90,101\n85,1,OTT85,3324,2013,30,90,101\n86,1,OTT86,5427,1796,30,90,101\n87,1,OTT87,1800,1100,30,90,101\n88,1,OTT88,1900,1850,30,90,101\n89,1,OTT89,4350,4650,30,90,101\n90,1,OTT90,4450,4600,30,90,101\n91,1,OTT91,4600,1350,30,90,101\n101,2,OTR1,2908,4747,50,,106\n102,2,OTR2,5515,1649,50,,106\n103,2,OTR3,2290,5083,50,,106\n104,2,OTR4,3017,1005,50,,106\n105,2,OTR5,5004,4010,50,,106\n106,2,OTR6,1866,2244,50,,106\n107,2,OTR7,591,879,50,,106\n108,2,OTR8,3546,5294,50,,106\n109,2,OTR9,638,2656,50,,106\n110,2,OTR10,5974,3515,50,,106\n111,2,OTR11,5355,1263,50,,106\n112,2,OTR12,3815,716,50,,106\n113,2,OTR13,1121,2027,50,,106\n114,2,OTR14,3565,2288,50,,106\n115,2,OTR15,1075,5062,50,,106\n116,2,OTR16,4508,425,50,,106\n117,2,OTR17,4486,3926,50,,106\n118,2,OTR18,4685,3434,50,,106\n119,2,OTR19,3495,2151,50,,106\n120,2,OTR20,664,461,50,,106\n121,2,OTR21,4250,914,50,,106\n122,2,OTR22,3419,933,50,,106\n123,2,OTR23,3913,5340,50,,106\n124,2,OTR24,3886,5790,50,,106\n125,2,OTR25,3154,4025,50,,106\n126,2,OTR26,2000,1200,50,,106\n127,2,OTR27,4963,3212,70,,105\n128,2,OTR28,1190,5523,70,,105\n129,2,OTR29,3644,4896,70,,105\n130,2,OTR30,5263,886,70,,105\n131,2,OTR31,3689,3554,70,,105\n132,2,OTR32,2274,2461,70,,105\n133,2,OTR33,1310,1804,70,,105\n134,2,OTR34,1144,5225,70,,105\n135,2,OTR35,814,1889,70,,105\n136,2,OTR36,2152,3749,70,,105\n137,2,OTR37,4610,1118,70,,105\n138,2,OTR38,2968,782,70,,105\n139,2,OTR39,1476,1488,70,,105\n140,2,OTR40,651,3039,70,,105\n141,2,OTR41,2017,1779,70,,105\n142,2,OTR42,5493,5642,70,,105\n143,2,OTR43,4557,1479,70,,105\n144,2,OTR44,3421,4950,70,,105\n145,2,OTR45,1643,4767,70,,105\n146,2,OTR46,5339,3605,70,,105\n147,2,OTR47,666,2321,70,,105\n148,2,OTR48,3681,2011,70,,105\n149,2,OTR49,5014,5235,70,,105\n150,2,OTR50,2958,1974,70,,105\n151,2,OTR51,1758,3574,70,,105\n152,2,OTR52,3550,2900,70,,105\n201,3,OCG1,2090,920,35,,113\n202,3,OCG2,4480,1400,35,,113\n203,3,OCG3,2060,2000,35,,113\n204,3,OCG4,5520,2400,35,,113\n205,3,OCG5,3160,3160,35,,113\n206,3,OCG6,800,3920,35,,113\n207,3,OCG7,4260,4320,35,,113\n208,3,OCG8,1840,4920,35,,113\n209,3,OCG9,4230,5400,35,,113\n210,4,EIG1,1400,2900,200,,206\n211,4,EIG2,3000,1600,200,,206\n212,4,EIG3,4800,3300,200,,206\n213,4,EIG4,3100,4600,200,,206\n214,5,EPT1,3300,1600,20,,207\n215,5,EPT2,3100,4900,20,,207\n",resourceData:"index,name,srcPosX,srcPosY,srcWidth,srcHeight,width,height\n1,pyroNovice,0,0,70,70,60,60\n2,pyroApprentice,70,0,70,70,61,61\n3,pyroAdept,140,0,70,70,63,63\n4,pyroExpert,210,0,70,70,64,64\n5,pyroMaster,280,0,70,70,65,65\n6,frosterNovice,0,70,70,70,60,60\n7,frosterApprentice,70,70,70,70,61,61\n8,frosterAdept,140,70,70,70,63,63\n9,frosterExpert,210,70,70,70,64,64\n10,frosterMaster,280,70,70,70,65,65\n11,mysterNovice,0,140,70,70,60,60\n12,mysterApprentice,70,140,70,70,61,61\n13,mysterAdept,140,140,70,70,63,63\n14,mysterExpert,210,140,70,70,64,64\n15,mysterMaster,280,140,70,70,65,65\n16,charHandIdle,0,210,120,100,120,100\n17,charHandCast1,120,210,120,100,120,100\n18,charHandCast2,240,210,120,100,120,100\n19,charHandCast3,360,210,120,100,120,100\n20,charHandCast4,480,210,120,100,120,100\n21,castEffectFire,0,310,120,100,120,100\n22,castEffectFrost,120,310,120,100,120,100\n23,castEffectArcane,240,310,120,100,120,100\n24,projectileFire,0,220,70,70,65,65\n25,projectileFrost,70,220,70,70,65,65\n26,projectileArcane,140,220,70,70,65,65\n27,skillEffectFire,0,290,160,160,155,155\n28,skillEffectFrost,160,290,160,160,155,155\n29,skillEffectArcane,320,290,160,160,155,155\n30,ranker1,455,5,60,60,60,60\n31,ranker2,515,5,60,60,60,60\n32,ranker3,575,5,60,60,60,60\n100,projectileSkillArrow,0,410,240,80,240,80\n101,objTreeLarge,210,0,210,210,225,225\n102,objTreeMedium,210,0,210,210,185,185\n103,objTreeSmall,210,0,210,210,145,145\n104,objTreeInside,420,0,210,210,0,0\n105,objStoneLarge,0,0,210,210,165,165\n106,objStoneMedium,0,0,210,210,125,125\n107,objStoneSmall,0,0,210,210,85,85\n108,objChest1,0,210,90,90,85,85\n109,objChest2,90,210,90,90,85,85\n110,objChest3,180,210,90,90,85,85\n111,objChest4,270,210,90,90,85,85\n112,objChest5,360,210,90,90,85,85\n113,objChestGround,450,210,90,90,85,85\n200,objGold,0,300,70,70,65,65\n201,objJewel,70,300,70,70,65,65\n202,objSkillFire,0,370,70,70,65,65\n203,objSkillFrost,70,370,70,70,65,65\n204,objSkillArcane,140,370,70,70,65,65\n205,objBox,140,300,70,70,65,65\n206,envImmortal,0,90,150,150,150,150\n207,envPortal1,0,0,90,90,90,90\n208,envPortal2,90,0,90,90,90,90\n209,envPortal3,180,0,90,90,90,90\n210,envPortal4,270,0,90,90,90,90\n211,envPortal5,360,0,90,90,90,90\n1001,conditionEffectFreeze,0,0,80,80,75,75\n1002,conditionEffectChill,80,0,80,80,75,75\n1003,conditionEffectImmortal,160,0,80,80,75,75\n1004,conditionEffectSilence,240,0,80,80,75,75\n1005,conditionEffectIgnite1,0,80,60,60,55,55\n1006,conditionEffectIgnite2,60,80,60,60,55,55\n1007,conditionEffectIgnite3,120,80,60,60,55,55\n1008,conditionEffectIgnite4,180,80,60,60,55,55\n1009,conditionEffectIgnite5,240,80,60,60,55,55\n1010,conditionEffectIgnite6,300,80,60,60,55,55\n1011,fireHitEffect,210,220,70,70,65,65\n1012,frostHitEffect,280,220,70,70,65,65\n1013,arcaneHitEffect,350,220,70,70,65,65\n1014,blankImg,0,450,60,60,55,55\n1015,passiveEffectFire1,60,450,60,60,60,60\n1016,passiveEffectFire2,120,450,60,60,65,65\n1017,passiveEffectFire3,180,450,60,60,70,70\n1018,passiveEffectFire4,240,450,60,60,75,75\n1019,passiveEffectFire5,300,450,60,60,80,80\n1020,passiveEffectFire6,360,450,60,60,85,85\n1021,passiveEffectFire7,420,450,60,60,90,90\n1022,passiveEffectFrost1,0,510,60,60,60,60\n1023,passiveEffectFrost2,60,510,60,60,65,65\n1024,passiveEffectFrost3,120,510,60,60,70,70\n1025,passiveEffectFrost4,180,510,60,60,75,75\n1026,passiveEffectFrost5,240,510,60,60,80,80\n1027,passiveEffectFrost6,300,510,60,60,85,85\n1028,passiveEffectFrost7,360,510,60,60,90,90\n1029,passiveEffectArcane1,480,450,60,60,60,60\n1030,passiveEffectArcane2,420,510,60,60,65,65\n1031,passiveEffectArcane3,480,510,60,60,70,70\n1032,passiveEffectArcane4,540,510,60,60,75,75\n1033,passiveEffectArcane5,600,510,60,60,80,80\n1034,passiveEffectArcane6,660,510,60,60,85,85\n1035,passiveEffectArcane7,720,510,60,60,90,90\n1036,fireSkillEffectInnerFire,0,140,80,80,80,80\n1037,fireSkillEffectFury1,80,140,80,80,80,80\n1038,fireSkillEffectFury2,80,140,80,80,83,83\n1039,fireSkillEffectFury3,80,140,80,80,86,86\n1040,fireSkillEffectFury4,80,140,80,80,90,90\n1041,fireSkillEffectFury5,80,140,80,80,85,88\n1042,frostSkillEffectPurify,160,140,80,80,70,70\n1043,frostSkillEffectIceBlock,240,140,80,80,90,90\n1044,arcaneSkillEffectCloak,320,140,80,80,90,90\n1045,arcaneSkillEffectHaste1,400,140,80,80,80,80\n1046,arcaneSkillEffectHaste2,400,140,80,80,83,83\n1047,arcaneSkillEffectHaste3,400,140,80,80,86,86\n1048,arcaneSkillEffectHaste4,400,140,80,80,90,90\n1049,arcaneSkillEffectHaste5,400,140,80,80,85,88\n1050,fireProjectileRollingFire,480,290,90,90,90,90\n1051,frostProjectileFrostOrb,570,290,90,90,90,90\n1052,arcaneSkillNoDamageExplosion,660,290,90,90,90,90\n1053,regenHP1,360,80,60,60,55,55\n1054,regenHP2,420,80,60,60,55,55\n1055,regenHP3,480,80,60,60,55,55\n1056,regenHP4,540,80,60,60,55,55\n1057,regenHP5,600,80,60,60,55,55\n1058,regenMP1,360,20,60,60,55,55\n1059,regenMP2,420,20,60,60,55,55\n1060,regenMP3,480,20,60,60,55,55\n1061,regenMP4,540,20,60,60,55,55\n1062,regenMP5,600,20,60,60,55,55\n1063,purifyAndHeal1,660,20,60,60,55,55\n1064,purifyAndHeal2,720,20,60,60,55,55\n1065,dispel1,480,140,60,60,55,55\n1066,dispel2,540,140,60,60,55,55\n1067,dispel3,600,140,60,60,55,55\n1068,dispel4,660,140,60,60,55,55\n1069,levelUp1,160,0,80,80,64,64\n1070,levelUp2,160,0,80,80,66,66\n1071,levelUp3,160,0,80,80,68,68\n1072,levelUp4,160,0,80,80,70,70\n1073,levelUp5,160,0,80,80,72,72\n1074,portalEffect1,575,375,80,80,120,120\n1075,portalEffect2,575,375,80,80,122,122\n1076,portalEffect3,575,375,80,80,124,124\n1077,portalEffect4,575,375,80,80,126,126\n1078,portalEffect5,575,375,80,80,128,128\n1079,portalEffect6,575,375,80,80,130,130\n1080,portalEffect7,575,375,80,80,128,128\n1081,portalEffect8,575,375,80,80,126,126\n1082,portalEffect9,575,375,80,80,124,124\n1083,portalEffect10,575,375,80,80,122,122\n",iconResourceData:"index,name,top,right,bottom,left\n1,Pyro Attack,0,72,72,0\n2,Fire Bolt,0,144,72,72\n3,Burning Soul,0,216,72,144\n4,Fire Ball,0,288,72,216\n5,Inner Fire,0,360,72,288\n6,Rolling Fire,0,432,72,360\n7,Fury,0,504,72,432\n8,Explosion,0,576,72,504\n9,Pyromaniac,0,648,72,576\n101,Froster Attack,72,72,144,0\n102,Ice Bolt,72,144,144,72\n103,Healing,72,216,144,144\n104,Frozen Soul,72,288,144,216\n105,Purify,72,360,144,288\n106,Ice Block,72,432,144,360\n107,Cold Snap,72,504,144,432\n108,Frozen Orb,72,576,144,504\n109,Freezer,72,648,144,576\n110,Ice Spear,72,720,144,648\n201,Myster Attack,144,72,216,0\n202,Arcane Bolt,144,144,216,72\n203,Arcane Cloak,144,216,216,144\n204,Arcane Missile,144,288,216,216\n205,Silence,144,360,216,288\n206,Dispel,144,432,216,360\n207,Blink,144,504,216,432\n208,Arcane Blast,144,576,216,504\n209,Haste,144,648,216,576\n210,Mystic,144,720,216,648\n501,Buff_Burning Soul,360,72,432,0\n502,Buff_Inner Fire,360,144,432,72\n503,Buff_Fury,360,216,432,144\n504,Buff_Pyromaniac,360,288,432,216\n505,Buff_Frozen Soul,360,360,432,288\n506,Buff_Purify,360,432,432,360\n507,Buff_Ice Block,360,504,432,432\n508,Buff_Freezer,360,576,432,504\n509,Buff_Arcane Cloak,432,72,504,0\n510,Buff_Haste,432,144,504,72\n511,Buff_Mystic,432,216,504,144\n512,Buff_Immortal,432,288,504,216\n513,Buff_Dispel,360,648,432,576\n514,Buff_Heal,360,720,432,648\n515,Debuff_Ignite,288,72,360,0\n516,Debuff_Chill,288,144,360,72\n517,Debuff_Freeze,288,216,360,144\n518,Debuff_Silence,288,288,360,216\n519,Debuff_Dispel,288,360,360,288\n1001,blankImg,216,72,288,0\n1002,whiteBlankImg,216,144,288,72\n",effectGroupData:"index,name,isRotate,rotateStartDegree,isAttach,isFront,resourceLifeTime,resourceIndex1,resourceIndex2,resourceIndex3,resourceIndex4,resourceIndex5,resourceIndex6,resourceIndex7,resourceIndex8,resourceIndex9,resourceIndex10\n1,Immortal,1,0,1,1,,1003,,,,,,,,,\n2,Chill,0,,1,1,,1002,,,,,,,,,\n3,Freeze,0,,1,1,,1001,,,,,,,,,\n4,Silence,0,,1,1,,1004,,,,,,,,,\n5,Ignite,0,,0,0,300,1005,1006,1007,1008,1009,1010,,,,\n6,fireHitEffect,0,,1,1,100,1011,,,,,,,,,\n7,frostHitEffect,0,,1,1,100,1012,,,,,,,,,\n8,arcaneHitEffect,0,,1,1,100,1013,,,,,,,,,\n101,firePassive,0,,1,0,,1014,1014,1014,1015,1016,1017,1018,1019,1020,1021\n102,frostPassive,0,,1,0,,1014,1014,1014,1022,1023,1024,1025,1026,1027,1028\n103,arcanePassive,1,0,1,0,,1014,1014,1014,1029,1030,1031,1032,1033,1034,1035\n1001,fireSkillEffectInnerFire,1,0,1,0,,1036,,,,,,,,,\n1002,fireSkillEffectFury,0,,1,0,,1037,1038,1039,1040,1041,1040,1039,1038,1037,1037\n1003,frostSkillEffectPurify,1,0,1,1,,1042,,,,,,,,,\n1004,frostSkillEffectIceBlock,1,0,1,1,,1043,,,,,,,,,\n1005,arcaneSkillEffectCloak,1,0,1,0,,1044,,,,,,,,,\n1006,arcaneSkillEffectHaste,1,0,1,0,,1048,1047,1046,1045,1045,1045,1046,1047,1048,1049\n1007,fireProjectileRollingFire,1,0,0,1,,1050,,,,,,,,,\n1008,frostProjectileFrostOrb,1,0,0,1,,1051,,,,,,,,,\n1009,arcaneSkillNoDamageExplosion,0,,0,1,,1052,,,,,,,,,\n1010,regenHP,0,,1,1,,1054,1053,1054,1055,1056,1057,1014,1014,1014,1014\n1011,regenMP,0,,1,1,,1014,1014,1014,1014,1059,1058,1059,1060,1061,1062\n1012,purifyAndHeal,0,,1,1,,1063,1064,1063,1058,1059,,,,,\n1013,dispel,0,,1,1,,1066,1065,1066,1067,1068,,,,,\n1014,mysticRegenHP,0,,1,1,,1014,1014,1054,1053,1054,1055,1056,1057,1014,1014\n1015,mysticRegenMP,0,,1,1,,1014,1059,1058,1059,1060,1061,1062,1014,1014,1014\n1016,mysticInnerFire,1,180,1,0,,1036,,,,,,,,,\n1017,mysticCloak,1,180,1,0,,1044,,,,,,,,,\n1018,mysticHaste,1,0,1,0,,1045,1045,1046,1047,1048,1049,1048,1047,1046,1045\n1019,levelUp,1,0,1,1,,1069,1070,1071,1072,1073,1072,1071,1070,1069,\n1020,Portal,1,0,1,1,1000,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083\n1021,ImmortalZone,1,0,1,0,,1003,,,,,,,,,\n"}},{}],8:[function(e,t,s){t.exports={GAME_VERSION:"1.0.3",MAX_SERVER_RESPONSE_TIME:5e3,LIMIT_NO_ACTION_TIME:36e5,LONG_TIME_INTERVAL:3e5,MAX_PING_LIMIT:1e3,INTERVAL:60,FPS:60,MAX_FIND_AVAILABLE_SERVER_TIME:2e4,RESOURCES_COUNT:5,RESOURCE_SRC_CHARACTER:"../images/Character.png",RESOURCE_SRC_OBJECT:"../images/Objects.png",RESOURCE_SRC_SKILL_EFFECT:"../images/SkillEffect.png",RESOURCE_SRC_ENVIRONMENT:"../images/Environment.png",RESOURCE_SRC_UI:"../images/UI.png",MINIMAP_CHEST_GROUND_SRC:"../images/chestGround.png",MINIMAP_CHEST_SRC_1:"../images/chest1.png",MINIMAP_CHEST_SRC_2:"../images/chest2.png",MINIMAP_CHEST_SRC_3:"../images/chest3.png",MINIMAP_VOID_SRC:"../images/void.png",START_BUTTON:1,RESTART_BUTTON:2,MINIMUM_LOADING_TIME:2e3,CHANGE_LOADING_TEXT_TIME:500,SKILL_INFORM_TIME:150,SKILL_HIT_EFFECT_TIME:100,USER_ATTACH_EFFECT_CHANGE_TIME:150,USER_DETACH_EFFECT_CHANGE_TIME:50,USER_DETACH_EFFECT_MAKE_TIME:200,RISE_TEXT_LIFE_TIME:3e3,PROJECTILE_EFFECT_CHANGE_TIME:150,CHAT_MESSAGE_TIME:5e3,USER_NICK_NAME_LENGTH:15,CHAT_MESSAGE_LENGTH:25,DEAD_SCENE_TEXT_ANI_PLAY_DELAY_TIME:1e3,DEAD_SCENE_PLAY_TIME:5e3,CAST_EFFECT_INTERPOLATION_FACTOR:.1,SKILL_EFFECT_INTERPOLATION_FACTOR:.6,USER_ANI_TIME:500,IMG_COLLISION_CLEAR_TIME:200,CANVAS_MAX_SIZE:{width:6400,height:6400},CANVAS_MAX_LOCAL_SIZE:{width:1600,height:1e3},IMAGE_SOURCE_SIZE:{width:800,height:600},DRAW_MODE_NORMAL:1,DRAW_MODE_SKILL_RANGE:2,SKILL_CHANGE_PANEL_CONTAINER:1,SKILL_CHANGE_PANEL_EQUIP:2,OBJECT_STATE_IDLE:1,OBJECT_STATE_MOVE:2,OBJECT_STATE_ATTACK:3,OBJECT_STATE_CAST:4,OBJECT_STATE_DEATH:5,OBJECT_STATE_MOVE_AND_ATTACK:6,MOVE_SLIGHT_RATE:.6,MOVE_BACK_WARD_SPEED_DECREASE_RATE:.5,GAME_STATE_LOAD:1,GAME_STATE_START_SCENE:2,GAME_STATE_GAME_START:3,GAME_STATE_GAME_ON:4,GAME_STATE_GAME_END:5,GAME_STATE_RESTART_SCENE:6,GAME_STATE_RESTART:7,CHAR_TYPE_FIRE:1,CHAR_TYPE_FROST:2,CHAR_TYPE_ARCANE:3,PREFIX_USER:"USR",PREFIX_SKILL:"SKL",PREFIX_SKILL_PROJECTILE:"SKP",PREFIX_CHEST:"CHT",PREFIX_OBSTACLE_TREE:"OTT",PREFIX_OBSTACLE_ROCK:"OTR",PREFIX_OBSTACLE_CHEST_GROUND:"OCG",PREFIX_OBJECT_EXP:"OXP",PREFIX_OBJECT_SKILL:"OSK",PREFIX_OBJECT_GOLD:"OGD",PREFIX_OBJECT_JEWEL:"OJW",PREFIX_OBJECT_BOX:"OBX",PREFIX_ENVIRONMENT_IMMORTAL_GROUND:"EIG",PREFIX_ENVIRONMENT_PORTAL:"EPT",USER_CONDITION_IMMORTAL:1,USER_CONDITION_CHILL:2,USER_CONDITION_FREEZE:3,USER_CONDITION_SILENCE:4,USER_CONDITION_IGNITE:5,USER_CONDITION_BLUR:6,SKILL_PROPERTY_FIRE:1,SKILL_PROPERTY_FROST:2,SKILL_PROPERTY_ARCANE:3,SKILL_INDEX_PYRO_BASE:11,SKILL_INDEX_PYRO_PASSIVE:91,SKILL_INDEX_PYRO_GIVEN:21,SKILL_INDEX_FROST_BASE:1001,SKILL_INDEX_FROST_PASSIVE:1091,SKILL_INDEX_FROST_GIVEN:1011,SKILL_INDEX_ARCANE_BASE:2001,SKILL_INDEX_ARCANE_PASSIVE:2091,SKILL_INDEX_ARCANE_GIVEN:2011,TUTORIAL_SKILL_FIRE_INDEX:41,TUTORIAL_SKILL_FROST_INDEX:1021,TUTORIAL_SKILL_ARCANE_INDEX:2021,SKILL_TYPE_INSTANT_RANGE:1,SKILL_TYPE_INSTANT_PROJECTILE:2,SKILL_TYPE_PROJECTILE:3,SKILL_TYPE_PROJECTILE_EXPLOSION:4,SKILL_TYPE_PROJECTILE_TICK:5,SKILL_TYPE_PROJECTILE_TICK_EXPLOSION:6,SKILL_TYPE_RANGE:7,SKILL_TYPE_SELF:8,SKILL_TYPE_SELF_EXPLOSION:9,SKILL_TYPE_TELEPORT:10,SKILL_TYPE_PASSIVE:11,SKILL_BASIC_INDEX:1,SKILL_EQUIP1_INDEX:2,SKILL_EQUIP2_INDEX:3,SKILL_EQUIP3_INDEX:4,SKILL_EQUIP4_INDEX:5,SKILL_PASSIVE_INDEX:6,STAT_POWER_INDEX:1,STAT_MAGIC_INDEX:2,STAT_SPEED_INDEX:3,STAT_OFFENCE_INDEX:4,STAT_DEFENCE_INDEX:5,PROJECTILE_FIRE_DISTANCE:20,MULTI_PROJECTILE_DEGREE:15,OBJ_SKILL_RADIUS:20,OBJ_JEWEL_RADIUS:20,OBJ_BOX_RADIUS:23,GET_RESOURCE_TYPE_GOLD:1,GET_RESOURCE_TYPE_JEWEL:2,GET_RESOURCE_TYPE_EXP:3,OBJ_TYPE_TREE:1,OBJ_TYPE_ROCK:2,OBJ_TYPE_CHEST_GROUND:3,ENV_TYPE_IMMORTAL_GROUND:4,ENV_TYPE_PORTAL:5,RESOURCE_INDEX_USER_HAND_1:16,RESOURCE_INDEX_USER_HAND_2:17,RESOURCE_INDEX_USER_HAND_3:18,RESOURCE_INDEX_USER_HAND_4:19,RESOURCE_INDEX_USER_HAND_5:20,RESOURCE_INDEX_CASTING_FIRE:21,RESOURCE_INDEX_CASTING_FROST:22,RESOURCE_INDEX_CASTING_ARCANE:23,RESOURCE_INDEX_PROJECTILE_FIRE:24,RESOURCE_INDEX_PROJECTILE_FROST:25,RESOURCE_INDEX_PROJECTILE_ARCANE:26,RESOURCE_INDEX_SKILL_EFFECT_FIRE:27,RESOURCE_INDEX_SKILL_EFFECT_FROST:28,RESOURCE_INDEX_SKILL_EFFECT_ARCANE:29,RESOURCE_INDEX_RANK_1:30,RESOURCE_INDEX_RANK_2:31,RESOURCE_INDEX_RANK_3:32,RESOURCE_INDEX_PORTAL_1:207,RESOURCE_INDEX_PORTAL_2:208,RESOURCE_INDEX_PORTAL_3:209,RESOURCE_INDEX_PORTAL_4:210,RESOURCE_INDEX_PORTAL_5:211,RESOURCE_INDEX_PROJECTILE_SKILL_ARROW:100,RESOURCE_INDEX_OBSTACLE_TREE_INSIDE:104,RESOURCE_INDEX_OBJ_GOLD:200,RESOURCE_INDEX_OBJ_JEWEL:201,RESOURCE_INDEX_OBJ_BOX:205,RESOURCE_INDEX_OBJ_SKILL_FIRE:202,RESOURCE_INDEX_OBJ_SKILL_FROST:203,RESOURCE_INDEX_OBJ_SKILL_ARCANE:204,RESOURCE_INDEX_CHEST_GRADE_1:108,RESOURCE_INDEX_CHEST_GRADE_2:109,RESOURCE_INDEX_CHEST_GRADE_3:110,RESOURCE_INDEX_CHEST_GRADE_4:111,RESOURCE_INDEX_CHEST_GRADE_5:112,UI_RESOURCE_INDEX_BLANK:1001,STAT_CALC_FACTOR_POWER_TO_DAMAGE_RATE:.5,STAT_CALC_FACTOR_POWER_TO_HP:25,STAT_CALC_FACTOR_POWER_TO_HP_REGEN:.05,STAT_CALC_FACTOR_MAGIC_TO_RESISTANCE:.25,STAT_CALC_FACTOR_MAGIC_TO_MP:15,STAT_CALC_FACTOR_MAGIC_TO_MP_REGEN:.03,STAT_CALC_FACTOR_SPEED_TO_CAST_SPEED:.25,STAT_CALC_FACTOR_SPEED_TO_COOLDOWN_REDUCE_RATE:.25,KILL_FEEDBACK_LEVEL_0:1,KILL_FEEDBACK_LEVEL_1:2,KILL_FEEDBACK_LEVEL_1_PREFIX:"Gorgeous",KILL_FEEDBACK_LEVEL_1_COLOR:"#f5ebb6",KILL_FEEDBACK_LEVEL_2:3,KILL_FEEDBACK_LEVEL_2_PREFIX:"Amazing",KILL_FEEDBACK_LEVEL_2_COLOR:"#f5e489",KILL_FEEDBACK_LEVEL_3:4,KILL_FEEDBACK_LEVEL_3_PREFIX:"Incredible",KILL_FEEDBACK_LEVEL_3_COLOR:"#f7de57",KILL_FEEDBACK_LEVEL_4:5,KILL_FEEDBACK_LEVEL_4_PREFIX:"Heroic",KILL_FEEDBACK_LEVEL_4_COLOR:"#f9dc3e",KILL_FEEDBACK_LEVEL_5:6,KILL_FEEDBACK_LEVEL_5_PREFIX:"Legendary",KILL_FEEDBACK_LEVEL_5_COLOR:"#fbda25",KILL_FEEDBACK_LEVEL_6:7,KILL_FEEDBACK_LEVEL_6_PREFIX:"Mythic",KILL_FEEDBACK_LEVEL_6_COLOR:"#f9d511",KILL_FEEDBACK_LEVEL_7:8,KILL_FEEDBACK_LEVEL_7_PREFIX:"Godlike",KILL_FEEDBACK_LEVEL_7_COLOR:"#ffd700"}},{}],9:[function(e,t,s){"use strict";var i=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},s=0;s<10;s++)t["_"+String.fromCharCode(s)]=s;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(e){i[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var s,r,o=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){s=Object(arguments[l]);for(var c in s)n.call(s,c)&&(o[c]=s[c]);if(i){r=i(s);for(var d=0;d<r.length;d++)a.call(s,r[d])&&(o[r[d]]=s[r[d]])}}return o}},{}],10:[function(e,t,s){i=this,n=function(){var e=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};return function(){var t,s,i,n,a,r,o,l;function c(t){var s,i;if(this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this.maxElements=t.maxElements,null==this.width||null==this.height)throw new Error("Missing quadtree dimensions.");if(null==this.x&&(this.x=0),null==this.y&&(this.y=0),null==this.maxElements&&(this.maxElements=1),this.contents=[],this.oversized=[],this.size=0,this.width<1||this.height<1)throw new Error("Dimensions must be positive integers.");if(!e(this.x)||!e(this.y))throw new Error("Coordinates must be integers");if(this.maxElements<1)throw new Error("The maximum number of elements before a split must be a positive integer.");i=this,this.children={NW:{create:function(){return new c({x:i.x,y:i.y,width:Math.max(Math.floor(i.width/2),1),height:Math.max(Math.floor(i.height/2),1),maxElements:i.maxElements})},tree:null},NE:{create:function(){return new c({x:i.x+Math.max(Math.floor(i.width/2),1),y:i.y,width:Math.ceil(i.width/2),height:Math.max(Math.floor(i.height/2),1),maxElements:i.maxElements})},tree:null},SW:{create:function(){return new c({x:i.x,y:i.y+Math.max(Math.floor(i.height/2),1),width:Math.max(Math.floor(i.width/2),1),height:Math.ceil(i.height/2),maxElements:i.maxElements})},tree:null},SE:{create:function(){return new c({x:i.x+Math.max(Math.floor(i.width/2),1),y:i.y+Math.max(Math.floor(i.height/2),1),width:Math.ceil(i.width/2),height:Math.ceil(i.height/2),maxElements:i.maxElements})},tree:null}};for(s in this.children)this.children[s].get=function(){return null!=this.tree?this.tree:(this.tree=this.create(),this.tree)}}return n=function(e){var t,s;return{x:Math.floor((null!=(t=e.width)?t:1)/2)+e.x,y:Math.floor((null!=(s=e.height)?s:1)/2)+e.y}},t=function(e,t){var s,i,n,a;return!(e.x>=t.x+(null!=(s=t.width)?s:1)||e.x+(null!=(i=e.width)?i:1)<=t.x||e.y>=t.y+(null!=(n=t.height)?n:1)||e.y+(null!=(a=e.height)?a:1)<=t.y)},s=function(e,t){var s;return s=n(t),e.x<s.x?e.y<s.y?"NW":"SW":e.y<s.y?"NE":"SE"},l=function(e){if("object"!=typeof e)throw new Error("Element must be an Object.");if(null==e.x||null==e.y)throw new Error("Coordinates properties are missing.");if((null!=e?e.width:void 0)<0||(null!=e?e.height:void 0)<0)throw new Error("Width and height must be positive integers.")},r=function(e){var t,s,i,n;return s=Math.max(Math.floor(e.width/2),1),i=Math.ceil(e.width/2),n=Math.max(Math.floor(e.height/2),1),t=Math.ceil(e.height/2),{NW:{x:e.x,y:e.y,width:s,height:n},NE:{x:e.x+s,y:e.y,width:i,height:n},SW:{x:e.x,y:e.y+n,width:s,height:t},SE:{x:e.x+s,y:e.y+n,width:i,height:t}}},i=function(e,s){var i,n,a,o;o=[],a=r(s);for(n in a)i=a[n],t(e,i)&&o.push(n);return o},a=function(e,t){var s;return(s=function(s){return e["_"+s]=e[s],Object.defineProperty(e,s,{set:function(e){return t.remove(this,!0),this["_"+s]=e,t.push(this)},get:function(){return this["_"+s]},configurable:!0})})("x"),s("y"),s("width"),s("height")},o=function(e){var t;return(t=function(t){if(null!=e["_"+t])return delete e[t],e[t]=e["_"+t],delete e["_"+t]})("x"),t("y"),t("width"),t("height")},c.prototype.push=function(e,t){return this.pushAll([e],t)},c.prototype.pushAll=function(e,t){var s,n,r,o,c,d,u,p,h,E,m,g,f,I,S,_,T,C,L,b;for(m=0,I=e.length;m<I;m++)E=e[m],l(E),t&&a(E,this);for(u=[{tree:this,elements:e}];u.length>0;){for(b=(T=u.shift()).tree,p={NW:null,NE:null,SW:null,SE:null},g=0,S=(d=T.elements).length;g<S;g++)if(c=d[g],b.size++,1!==(h=i(c,b)).length||1===b.width||1===b.height)b.oversized.push(c);else if(b.size-b.oversized.length<=b.maxElements)b.contents.push(c);else{for(o=h[0],L=b.children[o],null==p[o]&&(p[o]={tree:L.get(),elements:[]}),p[o].elements.push(c),f=0,_=(C=b.contents).length;f<_;f++)n=C[f],null==p[r=i(n,b)[0]]&&(p[r]={tree:b.children[r].get(),elements:[]}),p[r].elements.push(n);b.contents=[]}for(o in p)null!=(s=p[o])&&u.push(s)}return this},c.prototype.remove=function(e,t){var i,n;return l(e),(i=this.oversized.indexOf(e))>-1?(this.oversized.splice(i,1),this.size--,t||o(e),!0):(i=this.contents.indexOf(e))>-1?(this.contents.splice(i,1),this.size--,t||o(e),!0):!(null==(n=this.children[s(e,this)]).tree||!n.tree.remove(e,t))&&(this.size--,0===n.tree.size&&(n.tree=null),!0)},c.prototype.colliding=function(e,s){var n,a,r,o,c,d,u,p,h,E,m,g,f,I;for(null==s&&(s=t),l(e),c=[],r=[this];r.length>0;){for(d=0,h=(g=(I=r.shift()).oversized).length;d<h;d++)(a=g[d])!==e&&s(e,a)&&c.push(a);for(u=0,E=(f=I.contents).length;u<E;u++)(a=f[u])!==e&&s(e,a)&&c.push(a);for(0===(o=i(e,I)).length&&(o=[],e.x>=I.x+I.width&&o.push("NE"),e.y>=I.y+I.height&&o.push("SW"),o.length>0&&(1===o.length?o.push("SE"):o=["SE"])),p=0,m=o.length;p<m;p++)n=o[p],null!=I.children[n].tree&&r.push(I.children[n].tree)}return c},c.prototype.onCollision=function(e,s,n){var a,r,o,c,d,u,p,h,E,m,g,f,I;for(null==n&&(n=t),l(e),o=[this];o.length>0;){for(d=0,h=(g=(I=o.shift()).oversized).length;d<h;d++)(r=g[d])!==e&&n(e,r)&&s(r);for(u=0,E=(f=I.contents).length;u<E;u++)(r=f[u])!==e&&n(e,r)&&s(r);for(0===(c=i(e,I)).length&&(c=[],e.x>=I.x+I.width&&c.push("NE"),e.y>=I.y+I.height&&c.push("SW"),c.length>0&&(1===c.length?c.push("SE"):c=["SE"])),p=0,m=c.length;p<m;p++)a=c[p],null!=I.children[a].tree&&o.push(I.children[a].tree)}return null},c.prototype.get=function(e){return this.where(e)},c.prototype.where=function(e){var t,i,n,a,r,o,c,d,u,p,h,E,m;if("object"==typeof e&&(null==e.x||null==e.y))return this.find(function(t){var s,i;s=!0;for(i in e)e[i]!==t[i]&&(s=!1);return s});for(l(e),a=[],n=[this];n.length>0;){for(r=0,d=(p=(m=n.shift()).oversized).length;r<d;r++){i=p[r],t=!0;for(c in e)e[c]!==i[c]&&(t=!1);t&&a.push(i)}for(o=0,u=(h=m.contents).length;o<u;o++){i=h[o],t=!0;for(c in e)e[c]!==i[c]&&(t=!1);t&&a.push(i)}null!=(E=m.children[s(e,m)]).tree&&n.push(E.tree)}return a},c.prototype.each=function(e){var t,s,i,n,a,r,o,l,c,d;for(s=[this];s.length>0;){for(n=0,r=(l=(d=s.shift()).oversized).length;n<r;n++)i=l[n],"function"==typeof e&&e(i);for(a=0,o=(c=d.contents).length;a<o;a++)i=c[a],"function"==typeof e&&e(i);for(t in d.children)null!=d.children[t].tree&&s.push(d.children[t].tree)}return this},c.prototype.find=function(e){var t,s,i,n,a,r,o,l,c,d,u;for(s=[this],n=[];s.length>0;){for(a=0,o=(c=(u=s.shift()).oversized).length;a<o;a++)i=c[a],("function"==typeof e?e(i):void 0)&&n.push(i);for(r=0,l=(d=u.contents).length;r<l;r++)i=d[r],("function"==typeof e?e(i):void 0)&&n.push(i);for(t in u.children)null!=u.children[t].tree&&s.push(u.children[t].tree)}return n},c.prototype.filter=function(e){var t;return(t=function(s){var i,n,a,r,o,l,d,u,p,h,E;(n=new c({x:s.x,y:s.y,width:s.width,height:s.height,maxElements:s.maxElements})).size=0;for(i in s.children)null!=s.children[i].tree&&(n.children[i].tree=t(s.children[i].tree),n.size+=null!=(u=null!=(p=n.children[i].tree)?p.size:void 0)?u:0);for(r=0,l=(h=s.oversized).length;r<l;r++)a=h[r],(null==e||("function"==typeof e?e(a):void 0))&&n.oversized.push(a);for(o=0,d=(E=s.contents).length;o<d;o++)a=E[o],(null==e||("function"==typeof e?e(a):void 0))&&n.contents.push(a);return n.size+=n.oversized.length+n.contents.length,0===n.size?null:n})(this)},c.prototype.reject=function(e){return this.filter(function(t){return!("function"==typeof e?e(t):void 0)})},c.prototype.visit=function(e){var t,s,i;for(s=[this];s.length>0;){i=s.shift(),e.bind(i)();for(t in i.children)null!=i.children[t].tree&&s.push(i.children[t].tree)}return this},c.prototype.pretty=function(){var e,t,s,i,n,a,r;for(a="",s=function(e){var t,s,i;for(i="",t=s=e;s<=0?t<0:t>0;s<=0?++t:--t)i+="   ";return i},t=[{label:"ROOT",tree:this,level:0}];t.length>0;){a+=(i=s((r=t.shift()).level))+"| "+r.label+"\n"+i+"| ------------\n",r.tree.oversized.length>0&&(a+=i+"| * Oversized elements *\n"+i+"|   "+r.tree.oversized+"\n"),r.tree.contents.length>0&&(a+=i+"| * Leaf content *\n"+i+"|   "+r.tree.contents+"\n"),n=!1;for(e in r.tree.children)null!=r.tree.children[e].tree&&(n=!0,t.unshift({label:e,tree:r.tree.children[e].tree,level:r.level+1}));n&&(a+=i+"\n")}return a},c}()},"function"==typeof define&&define.amd?define([],n):"object"==typeof s&&t.exports?t.exports=n():i.Quadtree=n();var i,n},{}],11:[function(e,t,s){t.exports={"NORTH EAST AMERICA":"","NORTH EAST AMERICA 1":{SERVER:"NORTH EAST AMERICA",IP:"54.236.247.164"},"NORTH EAST AMERICA 2":{SERVER:"NORTH EAST AMERICA",IP:"54.210.233.203"},"NORTH WEST AMERICA":"","NORTH WEST AMERICA 1":{SERVER:"NORTH WEST AMERICA",IP:"54.153.96.249"},ASIA:"","ASIA 1":{SERVER:"ASIA",IP:"13.115.229.58"},EUROPE:"","EUROPE 1":{SERVER:"EUROPE",IP:"52.59.225.91"},"EUROPE 2":{SERVER:"EUROPE",IP:"54.93.108.95"},"EUROPE 3":{SERVER:"EUROPE",IP:"52.59.211.8"}}},{}],12:[function(e,t,s){var i=e("./gameConfig.json"),n=Math.PI/180,a=e("../../modules/public/objectAssign.js");s.rotate=function(e){s.isNumeric(this.rotateSpeed)&&(this.targetDirection===this.direction?this.currentState===i.OBJECT_STATE_MOVE||this.currentState===i.OBJECT_STATE_MOVE_AND_ATTACK?this.move(e):this.currentState===i.OBJECT_STATE_ATTACK||this.currentState===i.OBJECT_STATE_CAST&&this.executeSkill():(this.direction>0&&this.targetDirection<0?180-this.direction+180+this.targetDirection<this.direction-this.targetDirection?Math.abs(this.targetDirection-this.direction)<this.rotateSpeed*e?this.direction+=Math.abs(this.targetDirection-this.direction):this.direction+=this.rotateSpeed*e:this.targetDirection<this.direction&&(Math.abs(this.targetDirection-this.direction)<this.rotateSpeed*e?this.direction-=Math.abs(this.targetDirection-this.direction):this.direction-=this.rotateSpeed*e):this.direction<0&&this.targetDirection>0?180+this.direction+180-this.targetDirection<this.targetDirection-this.direction?Math.abs(this.targetDirection-this.direction)<this.rotateSpeed*e?this.direction-=Math.abs(this.targetDirection-this.direction):this.direction-=this.rotateSpeed*e:this.targetDirection>this.direction&&(Math.abs(this.targetDirection-this.direction)<this.rotateSpeed*e?this.direction+=Math.abs(this.targetDirection-this.direction):this.direction+=this.rotateSpeed*e):this.targetDirection>this.direction?Math.abs(this.targetDirection-this.direction)<this.rotateSpeed*e?this.direction+=Math.abs(this.targetDirection-this.direction):this.direction+=this.rotateSpeed*e:this.targetDirection<this.direction&&(Math.abs(this.targetDirection-this.direction)<this.rotateSpeed*e?this.direction-=Math.abs(this.targetDirection-this.direction):this.direction-=this.rotateSpeed*e),this.currentState!==i.OBJECT_STATE_MOVE&&this.currentState!==i.OBJECT_STATE_MOVE_AND_ATTACK||this.move(e,!0)),this.direction>=180?this.direction-=360:this.direction<=-180&&(this.direction+=360))},s.move=function(e,t){if(s.isNumeric(this.speed.x)&&s.isNumeric(this.speed.y)){var n=this.targetPosition.x-this.center.x,a=this.targetPosition.y-this.center.y,r=Math.pow(n,2)+Math.pow(a,2);r<100&&this.currentState===i.OBJECT_STATE_MOVE_AND_ATTACK?this.executeSkill():r<100&&(this.stop(),this.changeState(i.OBJECT_STATE_IDLE)),Math.abs(n)<Math.abs(this.speed.x)*e&&(this.speed.x=n/e),Math.abs(a)<Math.abs(this.speed.y)*e&&(this.speed.y=a/e);var o=this.onMove(this);o&&s.isNumeric(o.x)&&s.isNumeric(o.y)&&(this.position.x+=o.x,this.position.y+=o.y),t?(this.position.x+=this.speed.x*e*i.MOVE_SLIGHT_RATE,this.position.y+=this.speed.y*e*i.MOVE_SLIGHT_RATE):(this.position.x+=this.speed.x*e,this.position.y+=this.speed.y*e),this.position.x<0?this.position.x=0:this.position.x>i.CANVAS_MAX_SIZE.width-this.size.width&&(this.position.x=i.CANVAS_MAX_SIZE.width-this.size.width),this.position.y<0?this.position.y=0:this.position.y>i.CANVAS_MAX_SIZE.height-this.size.height&&(this.position.y=i.CANVAS_MAX_SIZE.height-this.size.height),this.setCenter(),o&&(this.isMoveBackward?(this.setTargetDirection(!0),this.setSpeed(i.MOVE_BACK_WARD_SPEED_DECREASE_RATE)):(this.setTargetDirection(),this.setSpeed()))}},s.setSpeed=function(e){var t=this.targetPosition.x-this.center.x,s=this.targetPosition.y-this.center.y,i=Math.pow(t,2),n=Math.pow(s,2);0==t&&0==s?(this.speed.x=0,this.speed.y=0):i+n<100?(this.speed.x=t,this.speed.y=s):(this.speed.x=(t>=0?1:-1)*this.maxSpeed*Math.sqrt(i/(i+n)),this.speed.y=(s>=0?1:-1)*this.maxSpeed*Math.sqrt(n/(i+n))),e&&(this.speed.x*=1-e,this.speed.y*=1-e)},s.setTargetDirection=function(e){var t=this.targetPosition.x-this.center.x,s=this.targetPosition.y-this.center.y,i=180*Math.atan(s/t)/Math.PI;isNaN(i)?this.targetDirection=this.direction:this.targetDirection=t<0&&s>=0?i+180:t<0&&s<0?i-180:i,e&&(this.targetDirection>=0?this.targetDirection-=180:this.targetDirection+=180)},s.setTargetPosition=function(e,t){var s=e.x,n=e.y;return s<t.size.width/2?s=t.size.width/2:s>i.CANVAS_MAX_SIZE.width-t.size.width/2&&(s=i.CANVAS_MAX_SIZE.width-t.size.width/2),n<t.size.height/2?n=t.size.height/2:n>i.CANVAS_MAX_SIZE.height-t.size.height/2&&(n=i.CANVAS_MAX_SIZE.height-t.size.height/2),{x:s,y:n}},s.setMoveAttackUserTargetPosition=function(e,t,s){var i=e.x-s.center.x,n=e.y-s.center.y,a=i/Math.sqrt(Math.pow(i,2)+Math.pow(n,2)),r=n/Math.sqrt(Math.pow(i,2)+Math.pow(n,2)),o=t.range,l=i-a*o,c=n-r*o;if(Math.sqrt(Math.pow(i,2)+Math.pow(n,2))<o)var d=!0;else d=!1;return{x:s.center.x+l,y:s.center.y+c,moveBackward:d}},s.checkCircleCollision=function(e,t,s,i,n){var a=[],r={x:t,y:s,width:2*i,height:2*i,id:n};return e.onCollision(r,function(e){if(r.id!==e.id){var t=r.x+i,s=r.y+i,n=e.x+e.width/2,o=e.y+e.height/2;Math.pow(i+e.width/2,2)-Math.pow(n-t,2)-Math.pow(o-s,2)>0&&(a.collisionPosition={x:(t+n)/2,y:(s+o)/2},a.push(e))}}),a},s.calcCompelPos=function(e,t){for(var s={x:0,y:0},i=0;i<t.length;i++){var n=e.x+e.width/2,a=e.y+e.height/2,r=n-(t[i].x+t[i].width/2),o=a-(t[i].y+t[i].height/2),l=e.width/2+t[i].width/2-Math.sqrt(Math.pow(r,2)+Math.pow(o,2)),c=Math.pow(o/r,2),d=l*Math.sqrt(1/(1+c)),u=l*Math.sqrt(c/(1+c));s.x+=(r>0?1:-1)*d*1.1,s.y+=(o>0?1:-1)*u*1.1}return s},s.checkAndCalcCompelPos=function(e,t,s,i,n,a){var r=[];a={x:t,y:s,width:2*i,height:2*i,id:n};e.onCollision(a,function(e){if(a.id!==e.id){var t=a.x+a.width/2,s=a.y+a.height/2,i=e.x+e.width/2,n=e.y+e.height/2;Math.pow(a.width/2+e.width/2,2)-Math.pow(i-t,2)-Math.pow(n-s,2)>0&&r.push(e)}});var o={x:0,y:0};for(var l in r){var c=a.y+a.height/2,d=a.x+a.width/2-(r[l].x+r[l].width/2),u=c-(r[l].y+r[l].height/2),p=a.width/2+r[l].width/2-Math.sqrt(Math.pow(d,2)+Math.pow(u,2)),h=Math.pow(u/d,2),E=p*Math.sqrt(1/(1+h)),m=p*Math.sqrt(h/(1+h));o.x+=(d>0?1:-1)*E*1,o.y+=(u>0?1:-1)*m*1}return o},s.localToWorldPosition=function(e,t){return{x:e.x+t.x,y:e.y+t.y}},s.worldToLocalPosition=function(e,t,s){return s?{x:Math.round((e.x-t.x)*s),y:Math.round((e.y-t.y)*s)}:{x:Math.round(e.x-t.x),y:Math.round(e.y-t.y)}},s.worldXCoordToLocalX=function(e,t,s){return Math.round((e-t)*s)},s.worldYCoordToLocalY=function(e,t,s){return Math.round((e-t)*s)},s.isXInCanvas=function(e,t){return e>0&&e<t.canvasSize.width},s.isYInCanvas=function(e,t){return e>0&&e<t.canvasSize.height},s.isObjInCanvas=function(e,t,s){return e.x-(t+100)<=s.canvasSize.width&&e.x+(t+100)>=0&&e.y-(t+100)<=s.canvasSize.height&&e.y+(t+100)>=0},s.distanceSquare=function(e,t){var s=e.x-t.x,i=e.y-t.y;return Math.pow(s,2)+Math.pow(i,2)},s.distance=function(e,t){var i=s.distanceSpuare(e,t);return Math.sqrt(i)},s.calcSkillTargetPosition=function(e,t,a){switch(e.type){case i.SKILL_TYPE_INSTANT_RANGE:var r=e.range*Math.cos(a.direction*n),o=e.range*Math.sin(a.direction*n);return{x:a.center.x+r,y:a.center.y+o};case i.SKILL_TYPE_INSTANT_PROJECTILE:return{x:t.x,y:t.y};case i.SKILL_TYPE_RANGE:var l=s.distanceSquare(a.center,t);if(Math.pow(e.range,2)>l)return{x:t.x,y:t.y};var c=t.x-a.center.x,d=t.y-a.center.y,u=Math.atan(d/c);isNaN(u)?u=a.direction:c<0&&d>=0?u+=Math.PI:c<0&&d<0&&(u-=Math.PI);r=e.range*Math.cos(u),o=e.range*Math.sin(u);return{x:a.center.x+r,y:a.center.y+o};case i.SKILL_TYPE_SELF:case i.SKILL_TYPE_SELF_EXPLOSION:return{x:a.center.x,y:a.center.y};case i.SKILL_TYPE_TELEPORT:l=s.distanceSquare(a.center,t);if(Math.pow(e.range,2)>l)return{x:t.x,y:t.y};c=t.x-a.center.x,d=t.y-a.center.y,u=Math.atan(d/c);isNaN(u)?u=a.direction:c<0&&d>=0?u+=Math.PI:c<0&&d<0&&(u-=Math.PI);r=e.range*Math.cos(u),o=e.range*Math.sin(u);return{x:a.center.x+r,y:a.center.y+o};case i.SKILL_TYPE_PROJECTILE:case i.SKILL_TYPE_PROJECTILE_TICK:case i.SKILL_TYPE_PROJECTILE_EXPLOSION:case i.SKILL_TYPE_PROJECTILE_TICK_EXPLOSION:return{x:t.x,y:t.y}}},s.calcSkillTargetDirection=function(e,t,n){switch(e){case i.SKILL_TYPE_INSTANT_RANGE:case i.SKILL_TYPE_INSTANT_PROJECTILE:return n.direction;case i.SKILL_TYPE_RANGE:return s.calcTargetDirection(t,n.center,n.direction);case i.SKILL_TYPE_SELF:case i.SKILL_TYPE_SELF_EXPLOSION:return n.direction;case i.SKILL_TYPE_TELEPORT:case i.SKILL_TYPE_PROJECTILE:case i.SKILL_TYPE_PROJECTILE_TICK:case i.SKILL_TYPE_PROJECTILE_EXPLOSION:case i.SKILL_TYPE_PROJECTILE_TICK_EXPLOSION:return s.calcTargetDirection(t,n.center,n.direction)}},s.calcTargetDirection=function(e,t,s){var i=e.x-t.x,n=e.y-t.y,a=180*Math.atan(n/i)/Math.PI;return isNaN(a)?s:i<0&&n>=0?a+180:i<0&&n<0?a-180:a},s.calcTargetPosition=function(e,t,s){return{x:s*Math.cos(t*n),y:s*Math.sin(t*n)}},s.findData=function(e,t,s){for(var i=void 0,n=0;n<e.length;n++)if(e[n][t]==s){i=e[n];break}return i},s.findAllDatas=function(e,t,s){for(var i=[],n=0;n<e.length;n++)e[n][t]==s&&i.push(e[n]);return i},s.findDataWithTwoColumns=function(e,t,s,i,n){for(var a=[],r=null,o=0;o<e.length;o++)e[o][t]==s&&a.push(e[o]);if(a.length>0)for(o=0;o<a.length;o++)if(a[o][i]==n){r=a[o];break}return r},s.findAndSetBuffs=function(e,t,i){for(var n=[],r=0;r<10;r++){var o=e["buff"+(r+1)];if(!o)return n;var l=a({},s.findData(t,"index",o));l.actorID=i,n.push(l)}return n},s.getBuffs=function(e){for(var t=[],s=0;s<10;s++)e["buff"+(s+1)]&&t.push(e["buff"+(s+1)]);return t},s.setResourceData=function(e,t){t.resourceLength=0;for(var i=0;i<10;i++){var n=t["resourceIndex"+(i+1)];if(!n)break;var r=a({},s.findData(e,"index",n));t["resourceIndex"+(i+1)]=r,t.resourceLength=i+1}return!!t.resourceLength},s.makeUserEffect=function(e,t){var s={x:e.center.x,y:e.center.y};return{index:t.index,isRotate:t.isRotate,resourceIndex1:t.resourceIndex1,resourceIndex2:t.resourceIndex2,resourceIndex3:t.resourceIndex3,resourceIndex4:t.resourceIndex4,resourceIndex5:t.resourceIndex5,resourceIndex6:t.resourceIndex6,resourceIndex7:t.resourceIndex7,resourceIndex8:t.resourceIndex8,resourceIndex9:t.resourceIndex9,resourceIndex10:t.resourceIndex10,resourceLength:t.resourceLength,resourceLifeTime:t.resourceLifeTime,startTime:Date.now(),effectTimer:Date.now(),effectIndex:0,center:s,changeIndex:function(){this.effectIndex+1>=this.resourceLength?this.effectIndex=0:this.effectIndex++,this.effectTimer=Date.now()}}},s.generateRandomUniqueID=function(e,t,s){if(!s){for(var i=!1;!i;){var n=r(t);i=!0;for(var a in e)n==e[a].objectID&&(i=!1)}return n}if(s){for(var o=[],l=0;l<s;l++)for(i=!1;!i;){n=r(t);i=!0;for(var a in e)n==e[a].objectID&&(i=!1);for(var c=0;c<o.length;c++)n==o[c]&&(i=!1);i&&o.push(n)}return o}},s.getElementsByClassName=function(e,t){for(var s=[],i=e.getElementsByTagName("div"),n=0;n<i.length;n++)for(var a=0;a<i[n].classList.length;a++)i[n].classList[a]===t&&s.push(i[n]);return s},s.calcForePosition=function(e,t,s,i){return{x:e.x+i*Math.cos(s*n)-t,y:e.y+i*Math.sin(s*n)-t}},s.interpolationSine=function(e,t){return t?i.SKILL_EFFECT_INTERPOLATION_FACTOR*Math.sin(Math.PI*e/t)+.5:i.CAST_EFFECT_INTERPOLATION_FACTOR*Math.sin(2*Math.PI*e/1e3)+1},s.isNumeric=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};function r(e){for(var t=e,s=0;s<6;s++)t+=Math.floor(16*Math.random()).toString(16);return t}s.makeCssClipStyle=function(e,t){return t?"rect("+e.top*t+"px,"+e.right*t+"px,"+e.bottom*t+"px,"+e.left*t+"px)":"rect("+e.top+"px,"+e.right+"px,"+e.bottom+"px,"+e.left+"px)"},s.setImgCssStyle=function(e,t,s){s?(e.style.position="absolute",e.style.top=-t.top*s+"px",e.style.left=-t.left*s+"px",e.style.width=i.IMAGE_SOURCE_SIZE.width*s+"px",e.style.height=i.IMAGE_SOURCE_SIZE.height*s+"px"):(e.style.position="absolute",e.style.top=-t.top+"px",e.style.left=-t.left+"px",e.style.width=i.IMAGE_SOURCE_SIZE.width+"px",e.style.height=i.IMAGE_SOURCE_SIZE.height+"px")},s.processMessage=function(e,t,s){var i=e.replace(/(<([^>]+)>)/gi,"").substring(0,t);return s?i.replace(/\s/gi,""):i},s.createDomSelectOptGroup=function(e,t){var s=document.createElement("optgroup");s.label=e,t.appendChild(s)},s.createDomSelectOption=function(e,t,s,i){var n=document.createElement("option");n.setAttribute("value",t),s&&(n.disabled=!0);var a=document.createTextNode(e);n.appendChild(a),i.appendChild(n)},s.createRequest=function(){var e;try{e=new XMLHttpRequest}catch(t){try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){e=new ActiveXObject("Microsoft.XMLHTTP")}}return e},s.getCookie=function(e,t){for(var s=e.split(";"),i=0;i<s.length;i++){for(var n=s[i];" "==n.charAt(0);)n=n.substring(1);if(0===n.indexOf(t)){var a=n.substring(t.length+1,n.length);return"true"===a||"false"!==a&&a}}return""},s.isRender=function(e,t,s){return!(t.center.x-e.center.x>900&&s.x-e.center.x>900)&&!(t.center.y-e.center.y>600&&s.y-e.center.y>600)}},{"../../modules/public/objectAssign.js":9,"./gameConfig.json":8}],13:[function(e,t,s){var i,n,a,r,o,l,c,d,u,p,h,E,m,g,f,I,S,_,T,C,L,b,A,D,v,y,R,P,k,O,M=e("../../modules/public/util.js"),N=(e("../../modules/client/CUser.js"),e("../../modules/client/CManager.js")),x=e("../../modules/public/gameConfig.json"),F=e("../../modules/public/objectAssign.js"),w=e("../../modules/public/csvjson.js"),B=e("../../modules/public/data.json"),U={delimiter:",",quote:'"'},j=w.toObject(B.userStatData,U),H=w.toObject(B.skillData,U),K=w.toObject(B.buffGroupData,U),X=w.toObject(B.resourceData,U),G=w.toObject(B.iconResourceData,U),Y=w.toObject(B.obstacleData,U),J=w.toObject(B.effectGroupData,U),z=e("../../modules/client/CUIManager.js"),V=Math.PI/180,W=(x.FPS,1e3/x.INTERVAL),q=0,Z=!1,Q=!1,$=Date.now(),ee=Date.now(),te=!1,se=!1,ie=!1,ne=!1,ae=!1,re=new Array(5),oe=!1,le=Date.now(),ce=[],de=new Array(5),ue=0,pe=!0,he=Date.now(),Ee=0,me=x.GAME_STATE_LOAD,ge=null,fe=null,Ie=null,Se=!1,_e=!1,Te=Date.now(),Ce=0,Le=0,be=!1,Ae=Date.now(),De=Date.now(),ve=Date.now(),ye=Date.now(),Re=null,Pe=x.DRAW_MODE_NORMAL,ke={x:0,y:0},Oe=null,Me=1,Ne=1,xe=1,Fe=1,we=1,Be=x.SKILL_INDEX_PYRO_BASE,Ue=x.SKILL_INDEX_PYRO_PASSIVE,je=new Array(4),He=x.SKILL_INDEX_FROST_BASE,Ke=x.SKILL_INDEX_FROST_PASSIVE,Xe=new Array(4),Ge=x.SKILL_INDEX_ARCANE_BASE,Ye=x.SKILL_INDEX_ARCANE_PASSIVE,Je=new Array(4),ze="",Ve=0,We=null,qe=0,Ze=null,Qe=new Array(4),$e=new Array(4),et=[],tt=null,st={gold:0,jewel:0},it=!1,nt=[];function at(e){switch(ge&&window.cancelAnimFrame(ge),clearInterval(be),ge=null,be=!1,e){case x.GAME_STATE_LOAD:me=e,fe=ot,Ie=lt;break;case x.GAME_STATE_START_SCENE:me=e,fe=null,Ie=ct;break;case x.GAME_STATE_GAME_START:me=e,fe=dt,Ie=ut;break;case x.GAME_STATE_GAME_ON:me=e,fe=pt,Ie=ht;break;case x.GAME_STATE_END:me=e,fe=Et,Ie=ht;break;case x.GAME_STATE_RESTART_SCENE:me=e,fe=null,Ie=mt;break;case x.GAME_STATE_RESTART:me=e,fe=gt,Ie=null}!function(){Ie&&rt();fe&&fe()}()}window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},window.cancelAnimFrame=window.cancelAnimationFrame||window.mozCancelAnimationFrame;function rt(){ge=window.requestAnimFrame(rt),Ie()}function ot(){!function(){a=document.getElementById("canvas"),r=a.getContext("2d"),(n=new z(H,K,G,j)).onSetRankers=function(e){nt=e},n.onLoadCompleteServerList=function(){te=!0},n.serverConditionOn=function(){se=!0},n.serverConditionOff=function(){se=!1,n.enableStartButton(),at(x.GAME_STATE_START_SCENE)},n.onStartBtnClick=function(e,t){De=Date.now(),Me=e,t===x.START_BUTTON?at(x.GAME_STATE_GAME_START):t===x.RESTART_BUTTON&&at(x.GAME_STATE_RESTART)},n.onSkillUpgrade=function(e){De=Date.now(),i.emit("upgradeSkill",e)},n.onExchangeSkill=function(e){if(Ot(e),o.getUserCurrentState(x.userID)===x.OBJECT_STATE_CAST){var t=o.getUserCurrentSkillIndex(x.userID);-1===Qe.indexOf(t)&&o.stopUser()}},n.onExchangePassive=function(e,t){i.emit("exchangePassive",e,t)},n.onEquipPassive=function(e){i.emit("equipPassive",e)},n.onUnequipPassive=function(e){i.emit("unequipPassive",e)},n.onSkillIconClick=function(e){if(De=Date.now(),e===x.SKILL_BASIC_INDEX)var t=F({},We);else e===x.SKILL_EQUIP1_INDEX?t=F({},$e[0]):e===x.SKILL_EQUIP2_INDEX?t=F({},$e[1]):e===x.SKILL_EQUIP3_INDEX?t=F({},$e[2]):e===x.SKILL_EQUIP4_INDEX&&(t=F({},$e[3]));yt(t)},n.onSelectSkillCancelBtnClick=function(){Rt(x.DRAW_MODE_NORMAL)},n.onSelectCharIcon=function(e){De=Date.now(),Me=e;var t=1;switch(e){case x.CHAR_TYPE_FIRE:t=xe,Ve=Be;for(var s=0;s<4;s++)Qe[s]=je[s];qe=Ue;break;case x.CHAR_TYPE_FROST:t=Fe,Ve=He;for(var s=0;s<4;s++)Qe[s]=Xe[s];qe=Ke;break;case x.CHAR_TYPE_ARCANE:t=we,Ve=Ge;for(var s=0;s<4;s++)Qe[s]=Je[s];qe=Ye}We=F({},M.findData(H,"index",Ve)),Ze=F({},M.findData(H,"index",qe));for(var s=0;s<4;s++)Qe[s]?$e[s]=F({},M.findData(H,"index",Qe[s])):$e[s]=void 0;n.syncSkills(Ve,We,Qe,$e,et,qe,Ze),n.setPopUpSkillChange(!0),n.updateCharInfoSelectedPanel(e,t)},n.onPopUpSkillChangeClick=function(){De=Date.now()},n.onSocialBtnClick=function(e,t){var s=ne,a=ae;e&&(ne=!0,n.completeTwitter()),t&&(ae=!0,n.completeFacebook()),ie&&i&&(s!==ne&&i.emit("completeTwitter"),a!==ae&&i.emit("completeFacebook"))},document.body.onmousedown=function(e){2===e.button&&Pe===x.DRAW_MODE_SKILL_RANGE&&Rt(x.DRAW_MODE_NORMAL)},M=e("../../modules/public/util.js"),e("../../modules/client/CUser.js"),N=e("../../modules/client/CManager.js"),x=e("../../modules/public/gameConfig.json"),(o=new N(x)).onSkillFire=It,o.onProjectileSkillFire=St,o.onUserLevelUp=function(e){Ne=e},Re=new Nt,l=new Image,c=new Image,d=new Image,u=new Image,p=new Image,re[0]=F({},M.findData(X,"index",x.RESOURCE_INDEX_USER_HAND_1)),re[1]=F({},M.findData(X,"index",x.RESOURCE_INDEX_USER_HAND_2)),re[2]=F({},M.findData(X,"index",x.RESOURCE_INDEX_USER_HAND_3)),re[3]=F({},M.findData(X,"index",x.RESOURCE_INDEX_USER_HAND_4)),re[4]=F({},M.findData(X,"index",x.RESOURCE_INDEX_USER_HAND_5)),de[0]=F({},M.findData(X,"index",x.RESOURCE_INDEX_PORTAL_1)),de[1]=F({},M.findData(X,"index",x.RESOURCE_INDEX_PORTAL_2)),de[2]=F({},M.findData(X,"index",x.RESOURCE_INDEX_PORTAL_3)),de[3]=F({},M.findData(X,"index",x.RESOURCE_INDEX_PORTAL_4)),de[4]=F({},M.findData(X,"index",x.RESOURCE_INDEX_PORTAL_5)),h=F({},M.findData(X,"index",x.RESOURCE_INDEX_OBSTACLE_TREE_INSIDE)),E=F({},M.findData(X,"index",x.RESOURCE_INDEX_OBJ_GOLD)),m=F({},M.findData(X,"index",x.RESOURCE_INDEX_OBJ_JEWEL)),g=F({},M.findData(X,"index",x.RESOURCE_INDEX_OBJ_BOX)),f=F({},M.findData(X,"index",x.RESOURCE_INDEX_OBJ_SKILL_FIRE)),I=F({},M.findData(X,"index",x.RESOURCE_INDEX_OBJ_SKILL_FROST)),S=F({},M.findData(X,"index",x.RESOURCE_INDEX_OBJ_SKILL_ARCANE)),_=F({},M.findData(X,"index",x.RESOURCE_INDEX_CASTING_FIRE)),T=F({},M.findData(X,"index",x.RESOURCE_INDEX_CASTING_FROST)),C=F({},M.findData(X,"index",x.RESOURCE_INDEX_CASTING_ARCANE)),L=F({},M.findData(X,"index",x.RESOURCE_INDEX_PROJECTILE_FIRE)),b=F({},M.findData(X,"index",x.RESOURCE_INDEX_PROJECTILE_FROST)),A=F({},M.findData(X,"index",x.RESOURCE_INDEX_PROJECTILE_ARCANE)),D=F({},M.findData(X,"index",x.RESOURCE_INDEX_SKILL_EFFECT_FIRE)),v=F({},M.findData(X,"index",x.RESOURCE_INDEX_SKILL_EFFECT_FROST)),y=F({},M.findData(X,"index",x.RESOURCE_INDEX_SKILL_EFFECT_ARCANE)),R=F({},M.findData(X,"index",x.RESOURCE_INDEX_RANK_1)),P=F({},M.findData(X,"index",x.RESOURCE_INDEX_RANK_2)),k=F({},M.findData(X,"index",x.RESOURCE_INDEX_RANK_3)),O=F({},M.findData(X,"index",x.RESOURCE_INDEX_PROJECTILE_SKILL_ARROW)),l.src=x.RESOURCE_SRC_OBJECT,l.onload=ft,c.src=x.RESOURCE_SRC_CHARACTER,c.onload=ft,u.src=x.RESOURCE_SRC_SKILL_EFFECT,u.onload=ft,p.src=x.RESOURCE_SRC_ENVIRONMENT,p.onload=ft,d.src=x.RESOURCE_SRC_UI,d.onload=ft,n.setSkillIconResource(d),n.initStartScene(),n.initHUD(),n.initPopUpSkillChanger(),n.setSkillChangeBtn();var t=M.getCookie(document.cookie,"twitter"),s=M.getCookie(document.cookie,"facebook");t&&(ne=!0,n.completeTwitter());s&&(ae=!0,n.completeFacebook());Q=!0}(),_t(),window.oncontextmenu=function(){return!1},window.onresize=function(){_t()},window.onblur=function(){me===x.GAME_STATE_GAME_ON&&o.stopUser()},window.onbeforeunload=function(e){return"Are you sure?"}}function lt(){Z&&Q&&Date.now()-$>=x.MINIMUM_LOADING_TIME&&te?(n.startSceneLoadingComplete(),at(x.GAME_STATE_START_SCENE)):Date.now()-ee>=x.CHANGE_LOADING_TEXT_TIME&&(ee=Date.now(),n.changeLoadingText())}function ct(){n.drawStartScene()}function dt(){n.setFeedbackBtn(),n.disableStartButton();var e=n.getSelectedServer();e&&n.checkServerCondition(e)}function ut(){if(!ie)if(se){ie=!0;var e=n.getSelectedServer();if(e){(i=io(e,{"connect timeout":1e3,forceNew:!1})).on("connect",function(){}),i.on("disconnect",function(){window.onbeforeunload="",window.location.href="/error"}),i.on("dontCheat",function(e){alert("Cheat usage was detected. ("+e+"/ 3)")}),i.on("disconnectCauseCheat",function(){alert("Disconnect the game because of cheat use."),window.onbeforeunload="",window.location.href="/error"}),i.on("adminMessage",function(e){n.makeAdminMessage(e)}),i.on("downServer",function(e,t){n.makeDownMessage(e,t)}),i.on("nowServerIsDown",function(){window.onbeforeunload="",window.location.href="/serverdown"}),i.on("cancelServerDown",function(){n.makeAdminMessage("Server down canceled."),n.cancelDown()}),i.on("firePong",function(e,t){Ce=Date.now()-e,Le=Date.now()-(t+Ce/2),i.emit("updateUserTimeDiff",Date.now(),Ce)}),i.on("syncAndSetSkills",function(e){Date.now(),x.userID=e.objectID,Ve=e.baseSkill,We=F({},M.findData(H,"index",e.baseSkill)),qe=e.inherentPassiveSkill,Ze=F({},M.findData(H,"index",e.inherentPassiveSkill));for(var t=0;t<4;t++)e.equipSkills[t]?Qe[t]=e.equipSkills[t]:Qe[t]=void 0;for(var t=0;t<4;t++)e.equipSkills[t]?$e[t]=F({},M.findData(H,"index",e.equipSkills[t])):$e[t]=void 0;et=e.possessSkills,n.syncSkills(Ve,We,Qe,$e,et,qe,Ze),n.setHUDSkills(),n.updateBuffIcon(),n.setHUDStats(e),n.updateCondition(e.conditions),n.setCooldownReduceRate(e.cooldownReduceRate),n.setPopUpSkillChange(),n.setUserPosition(e.position)}),i.on("resStartGame",function(e,t,s,i,a){o.start(j,X,Y),o.setUsers(e);for(var r=0;r<t.length;r++)Mt(t[r]);o.setObjs(s),o.setChests(i),o.synchronizeUser(x.userID),o.onMainUserMove=function(e){n.updateUserPosition(e.position)};var l=x.TUTORIAL_SKILL_FIRE_INDEX;switch(Me){case x.CHAR_TYPE_FIRE:l=x.TUTORIAL_SKILL_FIRE_INDEX;break;case x.CHAR_TYPE_FROST:l=x.TUTORIAL_SKILL_FROST_INDEX;break;case x.CHAR_TYPE_ARCANE:l=x.TUTORIAL_SKILL_ARCANE_INDEX}n.setNewSkill(l);var c=F({},M.findAllDatas(Y,"type",x.OBJ_TYPE_CHEST_GROUND)),d=F({},M.findAllDatas(Y,"type",x.ENV_TYPE_IMMORTAL_GROUND)),u=F({},M.findAllDatas(Y,"type",x.ENV_TYPE_PORTAL));n.setBoard(a,x.userID),n.setMiniMapChests(i,c),n.setMinimapZones(d,u),Ct(),Lt(),at(x.GAME_STATE_GAME_ON),be=setInterval(Tt,W)}),i.on("resRestartGame",function(e,t){switch(o.iamRestart(e),o.setUserData(e),o.changeUserStat(e,!0),n.updateCondition(e.conditions),n.updateMP(e),n.checkSkillsConditions(),Ct(),Lt(),Ve=e.baseSkill,We=F({},M.findData(H,"index",e.baseSkill)),qe=e.inherentPassiveSkill,Ze=F({},M.findData(H,"index",e.inherentPassiveSkill)),Me){case x.CHAR_TYPE_FIRE:for(var s=0;s<4;s++)Qe[s]=je[s];break;case x.CHAR_TYPE_FROST:for(var s=0;s<4;s++)Qe[s]=Xe[s];break;case x.CHAR_TYPE_ARCANE:for(var s=0;s<4;s++)Qe[s]=Je[s]}for(var s=0;s<4;s++)Qe[s]?$e[s]=F({},M.findData(H,"index",Qe[s])):$e[s]=void 0;et=e.possessSkills,n.syncSkills(Ve,We,Qe,$e,et,qe,Ze),n.setHUDSkills(),n.setHUDStats(e),n.setCooldownReduceRate(e.cooldownReduceRate),n.setPopUpSkillChange(),n.updateBoard(t,x.userID),n.updateHP(e),n.updateMP(e),n.setUserPosition(e.position),at(x.GAME_STATE_GAME_ON),o.setUserInitState(x.userID),be=setInterval(Tt,W)}),i.on("userJoined",function(e,t){e.imgData=o.setImgData(e),o.setUser(e),n.updateBoard(t,x.userID),o.setUserInitState(e.objectID)}),i.on("userDataUpdate",function(e){o.updateUserData(e)}),i.on("userDataSync",function(e){o.syncUserData(e)}),i.on("userMoveAndAttack",function(e){var t=F({},M.findData(H,"index",e.skillIndex));t.targetPosition=e.skillTargetPosition,o.moveAndAttackUser(e.objectID,e.targetPosition,t,e.moveBackward)}),i.on("userDataUpdateAndUseSkill",function(e){o.updateUserData(e);var t=F({},M.findData(H,"index",e.skillIndex));o.applyCastSpeed(e.objectID,t),t.targetPosition=e.skillTargetPosition,t.direction=e.skillDirection,t.type!==x.SKILL_TYPE_PROJECTILE&&t.type!==x.SKILL_TYPE_PROJECTILE_TICK&&t.type!==x.SKILL_TYPE_PROJECTILE_EXPLOSION&&t.type!==x.SKILL_TYPE_PROJECTILE_TICK_EXPLOSION&&t.type!==x.SKILL_TYPE_INSTANT_PROJECTILE||(t.projectileIDs=e.skillProjectileIDs),o.useSkill(e.objectID,t)}),i.on("skillFired",function(e,t){var s=e.syncFireTime+Le,i=s-Date.now();i<0&&(i=0),setTimeout(function(){var s=F({},M.findData(H,"index",e.skillIndex));if(s.targetPosition=e.skillTargetPosition,s.explosionEffectGroup){var i=F({},M.findData(J,"index",s.explosionEffectGroup));M.setResourceData(X,i)}o.applySkill(s,t,i)},i)}),i.on("projectilesFired",function(e,t,s){var i=t+Le,n=i-Date.now();n<0&&(n=0),setTimeout(function(){for(var t=0;t<e.length;t++){var i=F({},M.findData(H,"index",e[t].skillIndex));if(i.userID=s,i.objectID=e[t].objectID,i.position=e[t].position,i.speed=e[t].speed,i.startTime=Date.now(),i.projectileEffectGroup){var n=F({},M.findData(J,"index",i.projectileEffectGroup));M.setResourceData(X,n)}if(i.explosionEffectGroup){var a=F({},M.findData(J,"index",i.explosionEffectGroup));M.setResourceData(X,a)}o.applyProjectile(i,n,a)}},n)}),i.on("moveUserToNewPos",function(e,t){o.moveUserToNewPos(e,t)}),i.on("upgradeSkill",function(e,t,s){if(n.setResource(s),e===Ve)Ve=t,We=F({},M.findData(H,"index",t)),n.upgradeBaseSkill(Ve,We);else if(e===qe)qe=t,Ze=F({},M.findData(H,"index",t)),n.upgradeInherentSkill(qe,Ze);else{for(var i=0;i<4;i++){var a=F({},M.findData(H,"index",t));Qe[i]===e&&(Qe.splice(i,1,t),$e.splice(i,1,a)),je[i]===e&&je.splice(i,1,t),Xe[i]===e&&Xe.splice(i,1,t),Je[i]===e&&Je.splice(i,1,t)}for(var i=0;i<et.length;i++)if(et[i]===e){et.splice(i,1,t),n.upgradePossessionSkill(e,t);break}}n.playSkillUpgradeEffect(),Ot(Me)}),i.on("updateUserPrivateStat",function(e){n.setHUDStats(e),n.setCooldownReduceRate(e.cooldownReduceRate)}),i.on("deleteProjectile",function(e,t){o.deleteProjectile(e,t)}),i.on("explodeProjectile",function(e,t,s){o.explodeProjectile(e,t,s)}),i.on("createOBJs",function(e){o.createOBJs(e)}),i.on("deleteOBJ",function(e){o.deleteOBJ(e)}),i.on("createChest",function(e){o.createChest(e),n.createChest(e.locationID,e.grade)}),i.on("chestDamaged",function(e,t){o.updateChest(e,t),ce.indexOf(e)&&(ce.push(e),setTimeout(function(){var t=ce.indexOf(e);ce.splice(t,1)},x.SKILL_HIT_EFFECT_TIME))}),i.on("deleteChest",function(e){o.deleteChest(e),n.deleteChest(e)}),i.on("getResource",function(e,t){n.makeRisingMessage(t),n.setResource(e)}),i.on("getSkill",function(e){var t=F({},M.findData(H,"index",e));n.makeRisingMessageForSkill(t,!1)}),i.on("skillChangeToResource",function(e){var t=F({},M.findData(H,"index",e));n.addResource(t.exchangeToGold,t.exchangeToJewel),n.makeRisingMessageForSkill(t,!0)}),i.on("changeUserStat",function(e,t){if(e.objectID===x.userID&&(n.updateCondition(e.conditions),n.updateMP(e),n.checkSkillsConditions(),t&&n.makeRisingMessage(t)),o.changeUserStat(e),e.objectID===x.userID){n.updateHP(e),n.updateMP(e);var s=F({},M.findDataWithTwoColumns(j,"type",Me,"level",e.level)).needExp;n.updateExp(e,s)}}),i.on("userDamaged",function(e,t){if(t){var s=F({},M.findData(H,"index",t)).hitEffectGroup,i=F({},M.findData(J,"index",s)),a=M.setResourceData(X,i);a&&o.updateSkillHitImgData(e.objectID,i)}o.changeUserStat(e),e.objectID===x.userID&&(n.updateHP(e),n.updateMP(e),n.updateCondition(e.conditions),n.checkSkillsConditions())}),i.on("updateBuff",function(e){e.objectID===x.userID&&n.updateBuffIcon(e.passiveList,e.buffList,e.auraList,Le),Mt(e)}),i.on("updateSkillPossessions",function(e){o.updateSkillPossessions(x.userID,e);var t=[];if(et.length!==e.length)for(var s=0;s<e.length;s++)-1===et.indexOf(e[s])&&t.push(e[s]);et=e,t.length&&n.updateNewSkills(t),n.updatePossessionSkills(et),n.setPopUpSkillChange(!1,!0)}),i.on("updateRank",function(e){n.updateBoard(e,x.userID)}),i.on("chatting",function(e,t){o.setUserChatMsg(e,t)}),i.on("userDead",function(e,t,s,i,a,r){n.updateKillBoard(e,t),t.userID===x.userID&&(o.iamDead(),xe=i.pyroLevel,Fe=i.frosterLevel,we=i.mysterLevel,tt=e.userName,st={gold:a.goldLoseAmount,jewel:a.jewelLoseAmount},r?(function(e){Ve=e.baseSkill,qe=e.inherentPassiveSkill,et=e.possessSkills,n.updatePossessionSkills(et);for(var t=0;t<4;t++)for(var s=0;s<e.possessSkills.length;s++){var i=F({},M.findData(H,"index",e.possessSkills[s]));if($e[t]&&$e[t].groupIndex===i.groupIndex&&(Qe.splice(t,1,i.index),$e.splice(t,1,i)),je[t]){var a=F({},M.findData(H,"index",je[t]));a.groupIndex===i.groupIndex&&je.splice(t,1,i.index)}if(Xe[t]){var a=F({},M.findData(H,"index",Xe[t]));a.groupIndex===i.groupIndex&&Xe.splice(t,1,i.index)}if(Je[t]){var a=F({},M.findData(H,"index",Je[t]));a.groupIndex===i.groupIndex&&Je.splice(t,1,i.index)}}}(r),it=!0,r.lostSkills):([],it=!1),at(x.GAME_STATE_END)),o.kickUser(t.userID),n.updateBoard(s,x.userID)}),i.on("userLeave",function(e,t){o.kickUser(e),n.updateBoard(t,x.userID)}),ze=n.getStartUserName();var t=M.getCookie(document.cookie,"twitter"),s=M.getCookie(document.cookie,"facebook");i.emit("reqStartGame",Me,ze,t,s),ve=Date.now(),i.emit("firePing",ve)}else alert("Select available server."),ie=!1,n.enableStartButton(),at(x.GAME_STATE_START_SCENE)}else ie&&(ie=!1,n.enableStartButton(),at(x.GAME_STATE_START_SCENE))}function pt(){n.disableStartScene()}function ht(){Re.countFrames(),function(){Date.now()-ye>500&&(ye=Date.now(),n.drawGameScene(),n.drawFPSAndPing(Re.lastFrameCount,Ce));if(x.userOffset={x:o.user.center.x-x.canvasSize.width/(2*x.scaleFactor),y:o.user.center.y-x.canvasSize.height/(2*x.scaleFactor)},r.fillStyle="rgb(103, 124, 81)",r.fillRect(0,0,a.width,a.height),function(){r.fillStyle="rgb(96, 56, 19)";var e=-x.userOffset.x*x.scaleFactor,t=-x.userOffset.y*x.scaleFactor,s=x.CANVAS_MAX_SIZE.width*x.scaleFactor,i=x.CANVAS_MAX_SIZE.height*x.scaleFactor;r.fillRect(e,t,s,i),r.fillStyle="rgb(105, 147, 50)";var e=(200-x.userOffset.x)*x.scaleFactor,t=(200-x.userOffset.y)*x.scaleFactor,s=(x.CANVAS_MAX_SIZE.width-400)*x.scaleFactor,i=(x.CANVAS_MAX_SIZE.height-400)*x.scaleFactor;r.fillRect(e,t,s,i)}(),function(){r.lineWidth=3,r.strokeStyle="rgb(103, 124, 81)",r.beginPath();for(var e=-x.userOffset.x-800;e<x.canvasSize.width;e+=50){var t=e*x.scaleFactor;M.isXInCanvas(t,x)&&(r.moveTo(t,0),r.lineTo(t,x.canvasSize.height))}for(var s=-x.userOffset.y-500;s<x.canvasSize.height;s+=50){var i=s*x.scaleFactor;M.isYInCanvas(i,x)&&(r.moveTo(0,i),r.lineTo(x.canvasSize.width,i))}r.stroke(),r.closePath()}(),function(){for(var e=0;e<o.immortalGrounds.length;e++){var t=M.worldToLocalPosition(o.immortalGrounds[e].center,x.userOffset,x.scaleFactor);M.isObjInCanvas(t,o.immortalGrounds[e].size.width/2,x)&&r.drawImage(p,o.immortalGrounds[e].imgData.srcPosX,o.immortalGrounds[e].imgData.srcPosY,o.immortalGrounds[e].imgData.srcWidth,o.immortalGrounds[e].imgData.srcHeight,t.x-o.immortalGrounds[e].size.width/2*x.scaleFactor,t.y-o.immortalGrounds[e].size.height/2*x.scaleFactor,o.immortalGrounds[e].size.width*x.scaleFactor,o.immortalGrounds[e].size.height*x.scaleFactor)}}(),function(){for(var e=0;e<o.objGolds.length;e++){var t=M.worldXCoordToLocalX(o.objGolds[e].position.x,x.userOffset.x,x.scaleFactor),s=M.worldYCoordToLocalY(o.objGolds[e].position.y,x.userOffset.y,x.scaleFactor),i=2*o.objGolds[e].radius*x.scaleFactor;M.isObjInCanvas({x:t,y:s},i,x)&&r.drawImage(l,E.srcPosX,E.srcPosY,E.srcWidth,E.srcHeight,t,s,i,i)}for(var e=0;e<o.objJewels.length;e++)t=M.worldXCoordToLocalX(o.objJewels[e].position.x,x.userOffset.x,x.scaleFactor),s=M.worldYCoordToLocalY(o.objJewels[e].position.y,x.userOffset.y,x.scaleFactor),i=2*o.objJewels[e].radius*x.scaleFactor,M.isObjInCanvas({x:t,y:s},i,x)&&r.drawImage(l,m.srcPosX,m.srcPosY,m.srcWidth,m.srcHeight,t,s,i,i);for(var e=0;e<o.objBoxs.length;e++)t=M.worldXCoordToLocalX(o.objBoxs[e].position.x,x.userOffset.x,x.scaleFactor),s=M.worldYCoordToLocalY(o.objBoxs[e].position.y,x.userOffset.y,x.scaleFactor),i=2*o.objBoxs[e].radius*x.scaleFactor,M.isObjInCanvas({x:t,y:s},i,x)&&r.drawImage(l,g.srcPosX,g.srcPosY,g.srcWidth,g.srcHeight,t,s,i,i);for(var e=0;e<o.objSkills.length;e++){switch(t=M.worldXCoordToLocalX(o.objSkills[e].position.x,x.userOffset.x,x.scaleFactor),s=M.worldYCoordToLocalY(o.objSkills[e].position.y,x.userOffset.y,x.scaleFactor),o.objSkills[e].property){case x.SKILL_PROPERTY_FIRE:var n=f;break;case x.SKILL_PROPERTY_FROST:n=I;break;case x.SKILL_PROPERTY_ARCANE:n=S}r.drawImage(l,n.srcPosX,n.srcPosY,n.srcWidth,n.srcHeight,t,s,2*o.objSkills[e].radius*x.scaleFactor,2*o.objSkills[e].radius*x.scaleFactor)}}(),function(){for(var e=0;e<o.userEffects.length;e++){var t=o.userEffects[e]["resourceIndex"+(o.userEffects[e].effectIndex+1)],s=M.worldToLocalPosition(o.userEffects[e].center,x.userOffset,x.scaleFactor);r.drawImage(u,t.srcPosX,t.srcPosY,t.srcWidth,t.srcHeight,s.x-t.width/2*x.scaleFactor,s.y-t.height/2*x.scaleFactor,t.width*x.scaleFactor,t.height*x.scaleFactor)}}(),function(){for(var e in o.users){r.save();var t=M.worldToLocalPosition(o.users[e].center,x.userOffset,x.scaleFactor);if(M.isObjInCanvas(t,o.users[e].size.width/2,x)){var s=o.users[e].direction*V;r.translate(t.x,t.y),r.rotate(s);for(var i=0;i<o.users[e].buffImgDataList.length;i++)if(!o.users[e].buffImgDataList[i].isFront&&o.users[e].buffImgDataList[i].isAttach){var n=o.users[e].effectIndex%o.users[e].buffImgDataList[i].resourceLength+1,a=o.users[e].buffImgDataList[i]["resourceIndex"+n];if(o.users[e].buffImgDataList[i].isRotate){r.restore(),r.save(),r.translate(t.x,t.y);var l=(o.users[e].buffImgDataList[i].rotateStartDegree+o.users[e].effectRotateDegree)*V;r.rotate(l),r.drawImage(u,a.srcPosX,a.srcPosY,a.srcWidth,a.srcHeight,-a.width/2*x.scaleFactor,-a.height/2*x.scaleFactor,a.width*x.scaleFactor,a.height*x.scaleFactor),r.restore(),r.save(),r.translate(t.x,t.y),r.rotate(s)}else r.drawImage(u,a.srcPosX,a.srcPosY,a.srcWidth,a.srcHeight,-a.width/2*x.scaleFactor,-a.height/2*x.scaleFactor,a.width*x.scaleFactor,a.height*x.scaleFactor)}var a=re[o.users[e].imgHandIndex];if(r.drawImage(c,a.srcPosX,a.srcPosY,a.srcWidth,a.srcHeight,-a.width/2*x.scaleFactor,-a.height/2*x.scaleFactor,a.width*x.scaleFactor,a.height*x.scaleFactor),r.drawImage(c,o.users[e].imgData.srcPosX,o.users[e].imgData.srcPosY,o.users[e].imgData.srcWidth,o.users[e].imgData.srcHeight,-o.users[e].imgData.width/2*x.scaleFactor,-o.users[e].imgData.height/2*x.scaleFactor,o.users[e].imgData.width*x.scaleFactor,o.users[e].imgData.height*x.scaleFactor),o.users[e].skillCastEffectPlay&&o.users[e].currentSkill){switch(o.users[e].currentSkill.property){case x.SKILL_PROPERTY_FIRE:var a=_;break;case x.SKILL_PROPERTY_FROST:a=T;break;case x.SKILL_PROPERTY_ARCANE:a=C}var d=o.users[e].castEffectFactor;r.drawImage(c,a.srcPosX,a.srcPosY,a.srcWidth,a.srcHeight,-a.width/2*x.scaleFactor*d,-a.height/2*x.scaleFactor*d,a.width*x.scaleFactor*d,a.height*x.scaleFactor*d)}for(var i=0;i<o.users[e].hitImgDataList.length;i++)if(o.users[e].hitImgDataList[i].isAttach){var n=o.users[e].effectIndex%o.users[e].hitImgDataList[i].resourceLength+1,a=o.users[e].hitImgDataList[i]["resourceIndex"+n];if(o.users[e].hitImgDataList[i].isRotate){r.restore(),r.save(),r.translate(t.x,t.y);var l=(o.users[e].hitImgDataList[i].rotateStartDegree+o.users[e].effectRotateDegree)*V;r.rotate(l),r.drawImage(c,a.srcPosX,a.srcPosY,a.srcWidth,a.srcHeight,-a.width/2*x.scaleFactor,-a.height/2*x.scaleFactor,a.width*x.scaleFactor,a.height*x.scaleFactor),r.restore(),r.save(),r.translate(t.x,t.y),r.rotate(s)}else r.drawImage(u,a.srcPosX,a.srcPosY,a.srcWidth,a.srcHeight,-a.width/2*x.scaleFactor,-a.height/2*x.scaleFactor,a.width*x.scaleFactor,a.height*x.scaleFactor)}for(var i=0;i<o.users[e].buffImgDataList.length;i++)if(o.users[e].buffImgDataList[i].isFront&&o.users[e].buffImgDataList[i].isAttach){var n=o.users[e].effectIndex%o.users[e].buffImgDataList[i].resourceLength+1,a=o.users[e].buffImgDataList[i]["resourceIndex"+n];if(o.users[e].buffImgDataList[i].isRotate){r.restore(),r.save(),r.translate(t.x,t.y);var l=(o.users[e].buffImgDataList[i].rotateStartDegree+o.users[e].effectRotateDegree)*V;r.rotate(l),r.drawImage(u,a.srcPosX,a.srcPosY,a.srcWidth,a.srcHeight,-a.width/2*x.scaleFactor,-a.height/2*x.scaleFactor,a.width*x.scaleFactor,a.height*x.scaleFactor),r.restore(),r.save(),r.translate(t.x,t.y),r.rotate(s)}else r.drawImage(u,a.srcPosX,a.srcPosY,a.srcWidth,a.srcHeight,-a.width/2*x.scaleFactor,-a.height/2*x.scaleFactor,a.width*x.scaleFactor,a.height*x.scaleFactor)}r.restore();for(var p=M.worldToLocalPosition(o.users[e].position,x.userOffset,x.scaleFactor),h=!1,i=0;i<nt.length;i++)nt[i]===e&&(h=i+1);var E=void 0;if(h){switch(h){case 1:E=R;break;case 2:E=P;break;case 3:E=k}r.drawImage(c,E.srcPosX,E.srcPosY,E.srcWidth,E.srcHeight,t.x-15*x.scaleFactor,t.y-90*x.scaleFactor,30*x.scaleFactor,30*x.scaleFactor)}r.beginPath(),r.textAlign="center",r.fillStyle="black",r.font="bold 15px Arial",r.fillText("Lv."+o.users[e].level+" "+o.users[e].name,t.x,p.y-15*x.scaleFactor),r.closePath(),r.beginPath(),r.fillStyle="#ff0000";var m=p.x-7*x.scaleFactor,g=o.users[e].HP/o.users[e].maxHP*78*x.scaleFactor,f=7*x.scaleFactor;r.fillRect(m,p.y+80*x.scaleFactor,g,f),r.fillStyle="#0000ff",g=o.users[e].MP/o.users[e].maxMP*78*x.scaleFactor,f=4*x.scaleFactor,r.fillRect(m,p.y+87*x.scaleFactor,g,f),r.strokeStyle="rgb(15,15,15)",g=78*x.scaleFactor,f=10*x.scaleFactor,r.lineJoin="round",r.fillRect(m,p.y+86.25*x.scaleFactor,g,.75),r.strokeRect(m,p.y+80*x.scaleFactor,g,f),r.closePath()}}}(),function(){var e=!1;Date.now()-le>=x.IMG_COLLISION_CLEAR_TIME&&(e=!0,le=Date.now());for(var t=0;t<o.obstacles.length-o.treesCount;t++){var s=M.worldToLocalPosition(o.obstacles[t].center,x.userOffset,x.scaleFactor);M.isObjInCanvas(s,o.obstacles[t].imgData.width/2,x)&&(r.drawImage(l,o.obstacles[t].imgData.srcPosX,o.obstacles[t].imgData.srcPosY,o.obstacles[t].imgData.srcWidth,o.obstacles[t].imgData.srcHeight,s.x-o.obstacles[t].imgData.width/2*x.scaleFactor,s.y-o.obstacles[t].imgData.height/2*x.scaleFactor,o.obstacles[t].imgData.width*x.scaleFactor,o.obstacles[t].imgData.height*x.scaleFactor),o.obstacles[t].staticEle.isCollide&&(r.beginPath(),r.arc(s.x,s.y,o.obstacles[t].imgData.width/2*.9*x.scaleFactor,0,2*Math.PI),r.fillStyle="rgba(255, 0, 0, 0.5)",r.fill(),r.closePath()),e&&(o.obstacles[t].staticEle.isCollide=!1))}(function(){for(var e=0;e<o.projectiles.length;e++){if(o.projectiles[e].projectileImgData)var t=o.projectiles[e].projectileImgData.resourceIndex1,s=o.projectiles[e].projectileImgData.isRotate;else switch(o.projectiles[e].property){case x.SKILL_PROPERTY_FIRE:t=L;break;case x.SKILL_PROPERTY_FROST:t=b;break;case x.SKILL_PROPERTY_ARCANE:t=A}var i=M.worldXCoordToLocalX(o.projectiles[e].position.x,x.userOffset.x,x.scaleFactor),n=M.worldYCoordToLocalY(o.projectiles[e].position.y,x.userOffset.y,x.scaleFactor),a=o.projectiles[e].radius*x.scaleFactor;if(s){var l=i+a,c=n+a;r.save(),r.translate(l,c);var d=o.projectiles[e].effectRotateDegree*V;r.rotate(d),r.drawImage(u,t.srcPosX,t.srcPosY,t.srcWidth,t.srcHeight,-a,-a,2*a,2*a),r.restore()}else r.drawImage(u,t.srcPosX,t.srcPosY,t.srcWidth,t.srcHeight,i,n,2*a,2*a)}})(),function(){for(var e=0;e<o.chests.length;e++){r.beginPath();var t=M.worldToLocalPosition(o.chests[e].center,x.userOffset,x.scaleFactor);if(r.drawImage(l,o.chests[e].imgData.srcPosX,o.chests[e].imgData.srcPosY,o.chests[e].imgData.srcWidth,o.chests[e].imgData.srcHeight,t.x-o.chests[e].imgData.width/2*x.scaleFactor,t.y-o.chests[e].imgData.height/2*x.scaleFactor,o.chests[e].imgData.width*x.scaleFactor,o.chests[e].imgData.height*x.scaleFactor),-1!==ce.indexOf(o.chests[e].locationID)){var s=M.worldToLocalPosition(o.chests[e].position,x.userOffset,x.scaleFactor);r.fillStyle="rgba(255, 0, 0, 0.5)",r.fillRect(s.x,s.y-2.5,.85*o.chests[e].imgData.width*x.scaleFactor,.85*o.chests[e].imgData.height*x.scaleFactor)}r.fillStyle="#ff0000";var i=o.chests[e].HP/o.chests[e].maxHP*85*x.scaleFactor,n=10*x.scaleFactor,a=t.x-42.5*x.scaleFactor,c=t.y+60*x.scaleFactor;r.fillRect(a,c,i,n),r.strokeStyle="#000000",i=85*x.scaleFactor,r.strokeRect(a,c,i,n),r.closePath()}}(),function(){for(var e=0;e<o.portals.length;e++){var t=M.worldToLocalPosition(o.portals[e].center,x.userOffset,x.scaleFactor),s=de[ue];M.isObjInCanvas(t,o.portals[e].size.width/2,x)&&(r.save(),r.translate(t.x,t.y),r.rotate(Ee*V),r.drawImage(p,s.srcPosX,s.srcPosY,s.srcWidth,s.srcHeight,-o.portals[e].size.width/2*x.scaleFactor,-o.portals[e].size.height/2*x.scaleFactor,o.portals[e].size.width*x.scaleFactor,o.portals[e].size.height*x.scaleFactor),r.restore())}Date.now()-he>100&&(he=Date.now(),pe?ue>=4?(ue=3,pe=!1):ue++:ue<=0?(ue=1,pe=!0):ue--,Ee++)}();for(var t=o.obstacles.length-o.treesCount;t<o.obstacles.length;t++){var s=M.worldToLocalPosition(o.obstacles[t].center,x.userOffset,x.scaleFactor);M.isObjInCanvas(s,o.obstacles[t].imgData.width/2,x)&&(o.obstacles[t].treeImgEle.isCollide?r.drawImage(l,h.srcPosX,h.srcPosY,h.srcWidth,h.srcHeight,s.x-o.obstacles[t].imgData.width/2*x.scaleFactor,s.y-o.obstacles[t].imgData.height/2*x.scaleFactor,o.obstacles[t].imgData.width*x.scaleFactor,o.obstacles[t].imgData.height*x.scaleFactor):r.drawImage(l,o.obstacles[t].imgData.srcPosX,o.obstacles[t].imgData.srcPosY,o.obstacles[t].imgData.srcWidth,o.obstacles[t].imgData.srcHeight,s.x-o.obstacles[t].imgData.width/2*x.scaleFactor,s.y-o.obstacles[t].imgData.height/2*x.scaleFactor,o.obstacles[t].imgData.width*x.scaleFactor,o.obstacles[t].imgData.height*x.scaleFactor),e&&(o.obstacles[t].treeImgEle.isCollide=!1),o.obstacles[t].staticEle.isCollide&&(r.beginPath(),r.arc(s.x,s.y,o.obstacles[t].imgData.width/2*.9*x.scaleFactor,0,2*Math.PI),r.fillStyle="rgba(255, 0, 0, 0.5)",r.fill(),r.closePath()),e&&(o.obstacles[t].staticEle.isCollide=!1))}}(),function(){for(var e in o.users){var t=M.worldToLocalPosition(o.users[e].center,x.userOffset,x.scaleFactor);if(M.isObjInCanvas(t,o.users[e].size.width/2,x)){var s=M.worldToLocalPosition(o.users[e].position,x.userOffset,x.scaleFactor);if(o.users[e].chatMessage2){r.beginPath(),r.textAlign="center",r.font="20px normal",r.strokeStyle="#000000";var i=(12*o.users[e].chatMessage1.length+20)*x.scaleFactor;r.fillStyle="#ffffff",r.fillRect(t.x-i/2,s.y-55*x.scaleFactor,i,25*x.scaleFactor),r.strokeRect(t.x-i/2,s.y-55*x.scaleFactor,i,25*x.scaleFactor),r.fillStyle="#000000",r.fillText(o.users[e].chatMessage1,t.x,s.y-36*x.scaleFactor),i=(12*o.users[e].chatMessage2.length+20)*x.scaleFactor,r.fillStyle="#ffffff",r.fillRect(t.x-i/2,s.y-30*x.scaleFactor,i,25*x.scaleFactor),r.strokeRect(t.x-i/2,s.y-30*x.scaleFactor,i,25*x.scaleFactor),r.fillStyle="#000000",r.fillText(o.users[e].chatMessage2,t.x,s.y-11*x.scaleFactor),r.moveTo(t.x-8,s.y-5*x.scaleFactor),r.lineTo(t.x+8,s.y-5*x.scaleFactor),r.lineTo(t.x,s.y),r.fill(),r.closePath()}else if(o.users[e].chatMessage1){r.beginPath();var i=(12*o.users[e].chatMessage1.length+20)*x.scaleFactor;r.strokeStyle="#000000",r.fillStyle="#ffffff",r.fillRect(t.x-i/2,s.y-30*x.scaleFactor,i,25*x.scaleFactor),r.strokeRect(t.x-i/2,s.y-30*x.scaleFactor,i,25*x.scaleFactor),r.fillStyle="#000000",r.moveTo(t.x-8,s.y-5*x.scaleFactor),r.lineTo(t.x+8,s.y-5*x.scaleFactor),r.lineTo(t.x,s.y),r.fill(),r.textAlign="center",r.font="20px normal",r.fillText(o.users[e].chatMessage1,t.x,s.y-11*x.scaleFactor),r.closePath()}}}}(),function(){for(var e=0;e<o.effects.length;e++){if(r.beginPath(),r.fillStyle="#ff0000",o.effects[e].effectImgData)var t=o.effects[e].effectImgData.resourceIndex1;else switch(o.effects[e].property){case x.SKILL_PROPERTY_FIRE:t=D;break;case x.SKILL_PROPERTY_FROST:t=v;break;case x.SKILL_PROPERTY_ARCANE:t=y}var s=M.worldXCoordToLocalX(o.effects[e].position.x+o.effects[e].radius,x.userOffset.x,x.scaleFactor),i=M.worldYCoordToLocalY(o.effects[e].position.y+o.effects[e].radius,x.userOffset.y,x.scaleFactor),n=o.effects[e].radius*o.effects[e].scaleFactor;r.drawImage(u,t.srcPosX,t.srcPosY,t.srcWidth,t.srcHeight,s-n,i-n,2*n,2*n),r.closePath()}}(),Pe===x.DRAW_MODE_SKILL_RANGE)!function(){if(Oe.type===x.SKILL_TYPE_PROJECTILE||Oe.type===x.SKILL_TYPE_PROJECTILE_TICK||Oe.type===x.SKILL_TYPE_PROJECTILE_EXPLOSION||Oe.type===x.SKILL_TYPE_PROJECTILE_TICK_EXPLOSION){r.beginPath(),r.save();var e=M.worldToLocalPosition(o.users[x.userID].center,x.userOffset),t=ke.x-e.x,s=ke.y-e.y,i=Math.atan(s/t);isNaN(i)?i=0:t<0&&s>=0?i+=Math.PI:t<0&&s<0&&(i-=Math.PI),r.translate(e.x*x.scaleFactor,e.y*x.scaleFactor),r.rotate(i),r.drawImage(c,O.srcPosX,O.srcPosY,O.srcWidth,O.srcHeight,-O.width/2*x.scaleFactor,-O.height/2*x.scaleFactor,O.width*x.scaleFactor,O.height*x.scaleFactor),r.closePath(),r.restore()}else if(Oe.index===Ve)r.beginPath(),r.fillStyle="#ffffff",r.globalAlpha=.7,r.arc(ke.x*x.scaleFactor,ke.y*x.scaleFactor,Oe.explosionRadius*x.scaleFactor,0,2*Math.PI),r.fill(),r.closePath();else{r.beginPath(),r.fillStyle="#ffffff",r.globalAlpha=.5;var e=M.worldToLocalPosition(o.users[x.userID].center,x.userOffset);r.arc(e.x*x.scaleFactor,e.y*x.scaleFactor,Oe.range*x.scaleFactor,0,2*Math.PI),r.fill(),r.closePath(),r.beginPath(),r.globalAlpha=.7;var n=M.distanceSquare(e,ke);if(Math.pow(Oe.range,2)>n)r.arc(ke.x*x.scaleFactor,ke.y*x.scaleFactor,Oe.explosionRadius*x.scaleFactor,0,2*Math.PI);else{var t=ke.x-e.x,s=ke.y-e.y,i=Math.atan(s/t);isNaN(i)?i=0:t<0&&s>=0?i+=Math.PI:t<0&&s<0&&(i-=Math.PI);var a=Oe.range*Math.cos(i),l=Oe.range*Math.sin(i),d={x:e.x+a,y:e.y+l};r.arc(d.x*x.scaleFactor,d.y*x.scaleFactor,Oe.explosionRadius*x.scaleFactor,0,2*Math.PI)}r.fill()}r.globalAlpha=1}();else if(_e&&Date.now()-Te>=100&&!o.user.castingEndTime){Te=Date.now(),De=Date.now();var e=M.localToWorldPosition(ke,x.userOffset),t=M.setTargetPosition(e,o.users[x.userID]);o.moveUser(t);var s=o.processUserData();s.targetPosition=t,Ae=Date.now(),i.emit("userMoveStart",s)}}()}function Et(){var e=1;switch(Me){case x.CHAR_TYPE_FIRE:e=xe;break;case x.CHAR_TYPE_FROST:e=Fe;break;case x.CHAR_TYPE_ARCANE:e=we}_e=!1,a.removeEventListener("click",Dt),a.removeEventListener("mousemove",Pt),a.removeEventListener("mousedown",bt),a.removeEventListener("mouseup",At),document.removeEventListener("keydown",vt),Pe===x.DRAW_MODE_SKILL_RANGE&&Rt(x.DRAW_MODE_NORMAL),n.closePopUpSkillChange(),Ot(Me),n.playDeadScene(x.userID,tt,e,st,it,Ne),setTimeout(function(){n.closePopUpSkillChange(),n.disableDeadScene(),n.clearCooltime(),n.initStandingScene(Me,ze),n.setPopUpSkillChange(!0),at(x.GAME_STATE_RESTART_SCENE)},x.DEAD_SCENE_PLAY_TIME)}function mt(){n.drawRestartScene()}function gt(){n.disableStandingScene(),ze=n.getStandingUserName(),i.emit("reqRestartGame",ze,Me,Qe)}function ft(){++q>=x.RESOURCES_COUNT&&(Z=!0,n.setServerList())}function It(e,t){var s=o.processSkillData(e);s.syncFireTime=t,i.emit("skillFired",s),n.applySkill(s.skillIndex)}function St(e,t){var s=o.processProjectileData(e);n.applySkill(s[0].skillIndex),i.emit("projectilesFired",s,t)}function _t(){a.width=window.innerWidth,a.height=window.innerHeight,window.innerWidth<1200?n.bottomToRight():n.rightToBottom(),x.canvasSize={width:window.innerWidth,height:window.innerHeight},function(e){e.scaleX=1,e.scaleY=1,e.canvasSize.width>=e.CANVAS_MAX_LOCAL_SIZE.width&&(e.scaleX=e.canvasSize.width/e.CANVAS_MAX_LOCAL_SIZE.width);e.canvasSize.height>=e.CANVAS_MAX_LOCAL_SIZE.height&&(e.scaleY=e.canvasSize.height/e.CANVAS_MAX_LOCAL_SIZE.height);e.scaleX>e.scaleY?e.scaleFactor=e.scaleX:e.scaleFactor=e.scaleY}(x)}function Tt(){var e=o.processUserData(),t=!1;Date.now()-Ae>=1e3&&(t=!0,Ae=Date.now()),Date.now()-ve>=5e3&&(ve=Date.now(),i.emit("firePing",ve)),i.emit("userDataUpdate",e,t,Re.lastFrameCount)}function Ct(){a.addEventListener("click",Dt,!1),a.addEventListener("mousemove",Pt,!1),a.addEventListener("mousedown",bt,!1),a.addEventListener("mouseup",At,!1)}function Lt(){document.addEventListener("keydown",vt,!1)}function bt(){_e=!0}function At(){_e=!1}var Dt=function(e){Se&&(Se=!1,n.disableChatInput()),De=Date.now(),oe&&(clearTimeout(oe),oe=!1);var t=0;o.user.castingEndTime&&(t=o.user.castingEndTime-Date.now()+30),oe=setTimeout(function(){var t={x:e.clientX/x.scaleFactor,y:e.clientY/x.scaleFactor},s=M.localToWorldPosition(t,x.userOffset);if(Pe===x.DRAW_MODE_NORMAL){if(o.users[x.userID]){var n=M.setTargetPosition(s,o.users[x.userID]);o.moveUser(n);(l=o.processUserData()).targetPosition=n,Ae=Date.now(),i.emit("userMoveStart",l)}}else if(Pe===x.DRAW_MODE_SKILL_RANGE)if(Oe.index===Ve){var a={x:(n=M.setMoveAttackUserTargetPosition(s,Oe,o.users[x.userID])).x,y:n.y},r=F({},Oe);r.targetPosition=s,o.moveAndAttackUser(x.userID,a,r,n.moveBackward);var l;(l=o.processUserData()).targetPosition=a,l.moveBackward=n.moveBackward,l.skillIndex=Oe.index,l.skillTargetPosition=s,Rt(x.DRAW_MODE_NORMAL),Ae=Date.now(),i.emit("userMoveAndAttack",l)}else kt(Oe,s,o.users[x.userID]),Rt(x.DRAW_MODE_NORMAL)},t)},vt=function(e){De=Date.now();var t=e.keyCode||e.which||0;if(Pe===x.DRAW_MODE_NORMAL&&!Se){if(69===t||32===t){if(o.user.currentState!==x.OBJECT_STATE_ATTACK)var s=F({},We)}else 49===t?s=F({},$e[0]):50===t?s=F({},$e[1]):51===t?s=F({},$e[2]):52===t&&(s=F({},$e[3]));yt(s),65===t&&(s=F({},We),(a=s).index===Ve&&(o.user.conditions[x.USER_CONDITION_FREEZE]||o.user.conditions[x.USER_CONDITION_SILENCE]||o.user.conditions[x.USER_CONDITION_BLUR]||(o.applyCastSpeed(x.userID,a),Oe=a,Rt(x.DRAW_MODE_SKILL_RANGE))))}var a;if(71===t&&(Se||n.popChangeWithKey()),27===t&&(Pe===x.DRAW_MODE_SKILL_RANGE&&Rt(x.DRAW_MODE_NORMAL),Se?(Se=!1,n.disableChatInput()):n.popCloseWithKey()),83===t&&!Se){o.stopUser();var r=o.processUserData();Ae=Date.now(),i.emit("userStop",r)}if(13===t)if(Se){Se=!1;var l=M.processMessage(n.getChatMessage(),x.CHAT_MESSAGE_LENGTH,!1);n.disableChatInput(),n.clearChatInput(),l&&i.emit("chatting",l)}else Se=!0,n.showChatInput();36===t&&i.emit("killme")};function yt(e){oe&&(clearTimeout(oe),oe=!1);var t=0;o.user.castingEndTime&&(t=o.user.castingEndTime-Date.now()+30),oe=setTimeout(function(){e&&e.hasOwnProperty("index")&&e.type!==x.SKILL_TYPE_PASSIVE&&(o.user.conditions[x.USER_CONDITION_FREEZE]?(n.makeFlashMessage("FROZEN!!!"),Pe===x.DRAW_MODE_SKILL_RANGE&&Rt(x.DRAW_MODE_NORMAL)):o.user.conditions[x.USER_CONDITION_SILENCE]?(n.makeFlashMessage("SILENCED!!!"),Pe===x.DRAW_MODE_SKILL_RANGE&&Rt(x.DRAW_MODE_NORMAL)):o.user.conditions[x.USER_CONDITION_BLUR]?(n.makeFlashMessage("Using Portal!!!"),Pe===x.DRAW_MODE_SKILL_RANGE&&Rt(x.DRAW_MODE_NORMAL)):o.user.MP<e.consumeMP?(n.makeFlashMessage("Not enough Mana!!!"),Pe===x.DRAW_MODE_SKILL_RANGE&&Rt(x.DRAW_MODE_NORMAL)):n.checkCooltime(e.index)?(o.applyCastSpeed(x.userID,e),e.type===x.SKILL_TYPE_PROJECTILE||e.type===x.SKILL_TYPE_PROJECTILE_EXPLOSION||e.type===x.SKILL_TYPE_PROJECTILE_TICK||e.type===x.SKILL_TYPE_PROJECTILE_TICK_EXPLOSION||e.type===x.SKILL_TYPE_RANGE||e.type===x.SKILL_TYPE_TELEPORT?Pe===x.DRAW_MODE_NORMAL&&(Oe=e,Rt(x.DRAW_MODE_SKILL_RANGE)):kt(e,o.users[x.userID].center,o.users[x.userID])):(n.makeFlashMessage("Spell is not ready!!!"),Pe===x.DRAW_MODE_SKILL_RANGE&&Rt(x.DRAW_MODE_NORMAL)))},t)}function Rt(e){e===x.DRAW_MODE_NORMAL?(Pe=x.DRAW_MODE_NORMAL,Oe=null,n.disableSelectSkillInfo()):e===x.DRAW_MODE_SKILL_RANGE&&(Pe=x.DRAW_MODE_SKILL_RANGE,n.enableSelectSkillInfo(Oe))}function Pt(e){ke.x=e.clientX/x.scaleFactor,ke.y=e.clientY/x.scaleFactor}function kt(e,t,s){if(n.checkCooltime(e.index)&&!s.conditions[x.USER_CONDITION_FREEZE]&&!s.conditions[x.USER_CONDITION_SILENCE]&&!s.conditions[x.USER_CONDITION_BLUR]){if(e.targetPosition=M.calcSkillTargetPosition(e,t,s),e.type===x.SKILL_TYPE_TELEPORT)for(var a=!0,r=1;a;){r++;var l=o.checkCollisionWithObstacles(e.targetPosition,s);l.length?e.targetPosition=o.reCalcSkillTargetPosition(e.targetPosition,s,l):a=!1,r>=20&&(a=!1)}e.direction=M.calcSkillTargetDirection(e.type,e.targetPosition,s),e.type!==x.SKILL_TYPE_PROJECTILE&&e.type!==x.SKILL_TYPE_PROJECTILE_TICK&&e.type!==x.SKILL_TYPE_PROJECTILE_EXPLOSION&&e.type!==x.SKILL_TYPE_PROJECTILE_TICK_EXPLOSION&&e.type!==x.SKILL_TYPE_INSTANT_PROJECTILE||(e.projectileIDs=M.generateRandomUniqueID(o.projectiles,x.PREFIX_SKILL_PROJECTILE,e.projectileCount)),o.useSkill(x.userID,e);var c=o.processUserData();c.skillIndex=e.index,c.skillDirection=e.direction,c.skillTargetPosition=e.targetPosition,e.projectileIDs&&(c.projectileIDs=e.projectileIDs),Ae=Date.now(),i.emit("userUseSkill",c)}}function Ot(e){switch(e){case x.CHAR_TYPE_FIRE:Be=Ve,Ue=qe;for(var t=0;t<Qe.length;t++)je[t]=Qe[t];break;case x.CHAR_TYPE_FROST:He=Ve,Ke=qe;for(t=0;t<Qe.length;t++)Xe[t]=Qe[t];break;case x.CHAR_TYPE_ARCANE:Ge=Ve,Ye=qe;for(t=0;t<Qe.length;t++)Je[t]=Qe[t]}}function Mt(e){var t=[],s=F({},M.findData(H,"index",e.inherentPassive)).buffToSelf,i=F({},M.findData(K,"index",s)).buffEffectGroup,n=F({},M.findData(J,"index",i)),a=M.setResourceData(X,n);a&&t.push(n);for(var r=0;r<e.buffList.length;r++)i=F({},M.findData(K,"index",e.buffList[r].index)).buffEffectGroup,n=F({},M.findData(J,"index",i)),(a=M.setResourceData(X,n))&&t.push(n);for(r=0;r<e.passiveList.length;r++)i=F({},M.findData(K,"index",e.passiveList[r])).buffEffectGroup,n=F({},M.findData(J,"index",i)),(a=M.setResourceData(X,n))&&t.push(n);for(r=0;r<e.auraList.length;r++)i=F({},M.findData(K,"index",e.auraList[r])).buffEffectGroup,n=F({},M.findData(J,"index",i)),(a=M.setResourceData(X,n))&&t.push(n);o.updateUserBuffImgData(e.objectID,t)}function Nt(){this.lastFrameCount=0,this.lastFrameTime=Date.now(),this.frameCount=0}Nt.prototype.countFrames=function(){this.frameCount++,Date.now()>=this.lastFrameTime+1e3&&(this.lastFrameTime=Date.now(),this.lastFrameCount=this.frameCount,this.frameCount=0)},at(x.GAME_STATE_LOAD),setInterval(function(){Date.now()>=De+x.LIMIT_NO_ACTION_TIME&&(window.onbeforeunload="",window.location.href="/noaction")},x.LONG_TIME_INTERVAL)},{"../../modules/client/CManager.js":1,"../../modules/client/CUIManager.js":4,"../../modules/client/CUser.js":5,"../../modules/public/csvjson.js":6,"../../modules/public/data.json":7,"../../modules/public/gameConfig.json":8,"../../modules/public/objectAssign.js":9,"../../modules/public/util.js":12}]},{},[13]);