/* 2018-01-05 */

!function e(t,i,s){function n(r,o){if(!i[r]){if(!t[r]){var l="function"==typeof require&&require;if(!o&&l)return l(r,!0);if(a)return a(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var d=i[r]={exports:{}};t[r][0].call(d.exports,function(e){var i=t[r][1][e];return n(i||e)},d,d.exports,e,t,i,s)}return i[r].exports}for(var a="function"==typeof require&&require,r=0;r<s.length;r++)n(s[r]);return n}({1:[function(e,t,i){var s,n,a,r,o,l=e("./CUser.js"),c=e("../public/util.js"),d=e("../public/gameConfig.json"),u=e("../public/objectAssign.js"),h=e("../public/quadtree.js"),E=e("./CObstacle.js"),f=[],p=[],m=[],I=function(){this.user=null,this.users=[],this.chests=[],this.obstacles=[],this.treesCount=0,this.effects=[],this.userEffects=[],this.projectiles=[],this.riseText=[],this.userEffectTimer=Date.now(),this.objGolds=[],this.objJewels=[],this.objSkills=[],this.objBoxs=[],this.onMainUserMove=new Function,this.onSkillFire=new Function,this.onProjectileSkillFire=new Function,this.staticInterval=null,this.affectInterval=null};I.prototype={start:function(e,t,i){s=e,n=t,a=i,r=new h({width:d.CANVAS_MAX_SIZE.width,height:d.CANVAS_MAX_SIZE.height,maxElements:5}),o=new h({width:d.CANVAS_MAX_SIZE.width,height:d.CANVAS_MAX_SIZE.height,maxElements:5}),this.mapSetting(),this.updateGame()},mapSetting:function(){this.createObstacles()},updateGame:function(){var e=1e3/d.INTERVAL;null===this.staticInterval&&(this.staticInterval=setInterval(function(){for(var e=this.userEffects.length-1;e>=0;e--)Date.now()-this.userEffects[e].startTime>=this.userEffects[e].resourceLifeTime?this.userEffects.splice(e,1):Date.now()-this.userEffects[e].effectTimer>=d.USER_DETACH_EFFECT_CHANGE_TIME&&this.userEffects[e].changeIndex();if(Date.now()-this.userEffectTimer>=d.USER_DETACH_EFFECT_MAKE_TIME){for(var t in this.users)for(var e=0;e<this.users[t].buffImgDataList.length;e++)if(!this.users[t].buffImgDataList[e].isAttach){var i=c.makeUserEffect(this.users[t],this.users[t].buffImgDataList[e]);this.userEffects.push(i)}this.userEffectTimer=Date.now()}if(this.user){var s=c.checkCircleCollision(o,this.user.position.x,this.user.position.y,this.user.size.width/2,this.user.objectID);if(s.length)for(var e=0;e<s.length;e++)a=s[e],s[e].isCollide||(a.isCollide=!0)}var e=m.length;for(;e--;){var s=c.checkCircleCollision(r,m[e].position.x,m[e].position.y,m[e].radius,d.PREFIX_SKILL);if(s.length)for(var n=0;n<s.length;n++){var a=s[n];a.isCollide||(a.isCollide=!0)}m.splice(e,1)}for(var t in this.users)this.users[t].setEntityEle();var e=this.projectiles.length;for(;e--;)if(this.projectiles[e].isExpired())this.projectiles.splice(e,1);else if(this.projectiles[e].move(),this.projectiles[e].projectileImgData&&Date.now()-this.projectiles[e].effectTimer>=d.PROJECTILE_EFFECT_CHANGE_TIME&&(this.projectiles[e].effectTimer=Date.now(),this.projectiles[e].effectRotateDegree+=10),this.projectiles[e].type===d.SKILL_TYPE_INSTANT_PROJECTILE||this.projectiles[e].type===d.SKILL_TYPE_PROJECTILE||this.projectiles[e].type===d.SKILL_TYPE_PROJECTILE_TICK||this.projectiles[e].type===d.SKILL_TYPE_PROJECTILE_TICK_EXPLOSION){var s=c.checkCircleCollision(r,this.projectiles[e].position.x,this.projectiles[e].position.y,this.projectiles[e].radius,d.PREFIX_SKILL_PROJECTILE);if(s.length)for(var n=0;n<s.length;n++){var a=s[n];a.id.substr(0,3)===d.PREFIX_OBSTACLE_CHEST_GROUND||a.isCollide||(a.isCollide=!0)}}var e=this.effects.length;for(;e--;)this.effects[e].isCheckCollision||Date.now()-this.effects[e].startTime>this.effects[e].lifeTime/2&&(m.push(this.effects[e]),this.effects[e].isCheckCollision=!0),this.effects[e].startTime+this.effects[e].lifeTime<Date.now()?this.effects.splice(e,1):this.effects[e].scaleFactor=c.interpolationSine(Date.now()-this.effects[e].startTime,this.effects[e].lifeTime)}.bind(this),e))},createObstacles:function(){for(var e=u({},c.findAllDatas(a,"type",d.OBJ_TYPE_ROCK)),t=0;t<Object.keys(e).length;t++){var i=u({},c.findData(n,"index",e[t].imgData)),s=new E(e[t].posX,e[t].posY,e[t].radius,e[t].id,i);this.obstacles.push(s),f.push(s.staticEle)}var l=u({},c.findAllDatas(a,"type",d.OBJ_TYPE_CHEST_GROUND));for(t=0;t<Object.keys(l).length;t++){i=u({},c.findData(n,"index",l[t].imgData));var h=new E(l[t].posX,l[t].posY,l[t].radius,l[t].id,i);this.obstacles.push(h),f.push(h.staticEle)}var m=u({},c.findAllDatas(a,"type",d.OBJ_TYPE_TREE));this.treesCount=Object.keys(m).length;for(t=0;t<Object.keys(m).length;t++){i=u({},c.findData(n,"index",m[t].imgData));var I=new E(m[t].posX,m[t].posY,m[t].radius,m[t].id,i);I.setTreeImgEle(m[t].treeImgRadius),this.obstacles.push(I),f.push(I.staticEle),p.push(I.treeImgEle)}r.pushAll(f),o.pushAll(p)},setChests:function(e){for(var t=0;t<e.length;t++)this.createChest(e[t])},createChest:function(e){for(var t=u({},c.findAllDatas(a,"type",d.OBJ_TYPE_CHEST_GROUND)),i=0;i<Object.keys(t).length;i++)if(t[i].id===e.locationID){var s=t[i],r={x:t[i].posX,y:t[i].posY};break}if(s&&r){switch(e.grade){case 1:var o=d.RESOURCE_INDEX_CHEST_GRADE_1;break;case 2:o=d.RESOURCE_INDEX_CHEST_GRADE_2;break;case 3:o=d.RESOURCE_INDEX_CHEST_GRADE_3;break;case 4:o=d.RESOURCE_INDEX_CHEST_GRADE_4;break;case 5:o=d.RESOURCE_INDEX_CHEST_GRADE_5}var l=u({},c.findData(n,"index",o));this.chests.push({objectID:e.objectID,locationID:e.locationID,grade:e.grade,HP:e.HP,maxHP:e.maxHP,position:r,size:{width:2*s.radius,height:2*s.radius},center:{x:r.x+s.radius,y:r.y+s.radius},imgData:l})}},updateChest:function(e,t){for(var i=0;i<this.chests.length;i++)if(this.chests[i].locationID===e){this.chests[i].HP=t;break}},deleteChest:function(e){for(var t=0;t<this.chests.length;t++)if(this.chests[t].locationID===e){this.chests.splice(t,1);break}},setUser:function(e){if(!(e.objectID in this.users)){var t=new l(e);this.users[e.objectID]=t,this.users[e.objectID].onMove=S.bind(this),this.users[e.objectID].changeState(e.currentState)}},setUsers:function(e){for(var t=0;t<e.length;t++){e[t].imgData=this.setImgData(e[t],n,s);var i=new l(e[t]);this.users[e[t].objectID]=i,this.users[e[t].objectID].onMove=S.bind(this),this.users[e[t].objectID].changeState(e[t].currentState)}},setImgData:function(e){var t=c.findDataWithTwoColumns(s,"type",e.type,"level",e.level).imgData;return u({},c.findData(n,"index",t))},setUsersSkills:function(e){for(var t=0;t<e.length;t++)e[t].fireTime>0&&this.userSkill(e[t].userID,e[t])},setObjs:function(e){for(var t=0;t<e.length;t++)e[t].objectID.substr(0,3)===d.PREFIX_OBJECT_SKILL?this.objSkills.push(e[t]):e[t].objectID.substr(0,3)===d.PREFIX_OBJECT_GOLD?this.objGolds.push(e[t]):e[t].objectID.substr(0,3)===d.PREFIX_OBJECT_JEWEL?this.objJewels.push(e[t]):e[t].objectID.substr(0,3)===d.PREFIX_OBJECT_BOX&&this.objBoxs.push(e[t])},createOBJs:function(e){for(var t=0;t<e.length;t++)e[t].objectID.substr(0,3)===d.PREFIX_OBJECT_SKILL?this.objSkills.push(e[t]):e[t].objectID.substr(0,3)===d.PREFIX_OBJECT_GOLD?this.objGolds.push(e[t]):e[t].objectID.substr(0,3)===d.PREFIX_OBJECT_JEWEL?this.objJewels.push(e[t]):e[t].objectID.substr(0,3)===d.PREFIX_OBJECT_BOX&&this.objBoxs.push(e[t])},deleteOBJ:function(e){if(e.substr(0,3)===d.PREFIX_OBJECT_SKILL){for(var t=0;t<this.objSkills.length;t++)if(this.objSkills[t].objectID===e)return void this.objSkills.splice(t,1)}else if(e.substr(0,3)===d.PREFIX_OBJECT_GOLD){for(t=0;t<this.objGolds.length;t++)if(this.objGolds[t].objectID===e)return void this.objGolds.splice(t,1)}else if(e.substr(0,3)===d.PREFIX_OBJECT_JEWEL){for(t=0;t<this.objJewels.length;t++)if(this.objJewels[t].objectID===e)return void this.objJewels.splice(t,1)}else if(e.substr(0,3)===d.PREFIX_OBJECT_BOX)for(t=0;t<this.objBoxs.length;t++)if(this.objBoxs[t].objectID===e)return void this.objBoxs.splice(t,1)},iamRestart:function(e){this.users[this.user.objectID]=this.user,this.user.changeState(d.OBJECT_STATE_IDLE)},iamDead:function(){this.user.hitImgDataList=[],this.user.buffImgDataList=[],this.user.conditions=[],this.user.position={x:-2e3,y:-2e3},this.user.changeState(d.OBJECT_STATE_DEATH)},kickUser:function(e){e in this.users&&(this.users[e].stop(),delete this.users[e])},checkUserAtUsers:function(e){return e.objectID in this.users},moveUser:function(e){this.user.targetPosition=e,this.user.setCenter(),this.user.setTargetDirection(),this.user.setSpeed(),this.user.changeState(d.OBJECT_STATE_MOVE)},moveAndAttackUser:function(e,t,i,s){if(e in this.users){this.users[e].targetPosition=t,this.users[e].setCenter(),s?(this.users[e].setTargetDirection(s),this.users[e].setSpeed(d.MOVE_BACK_WARD_SPEED_DECREASE_RATE)):(this.users[e].setTargetDirection(),this.users[e].setSpeed()),i.direction=this.users[e].targetDirection;var n=this.users[e].makeSkillInstance(i),a=this.user,r=this.users[e],o=this.onSkillFire;n.onFire=function(e){a===r&&o(i,e),r.skillCastEffectPlay=!1},this.users[e].changeState(d.OBJECT_STATE_MOVE_AND_ATTACK),this.users[e].setSkill(n)}},useSkill:function(e,t){if(e in this.users){var i=this.users[e].makeSkillInstance(t),s=this.user,n=this.users[e],a=this.onSkillFire,r=this.onProjectileSkillFire;this.users[e].targetDirection=t.direction,t.type===d.SKILL_TYPE_INSTANT_RANGE?(i.onFire=function(e){s===n&&a(t,e),n.skillCastEffectPlay=!1},this.users[e].changeState(d.OBJECT_STATE_ATTACK)):t.type===d.SKILL_TYPE_INSTANT_PROJECTILE?(i.onFire=function(e){var a=n.makeProjectile(t.projectileIDs[0],i,t.direction);s===n&&r([a],e),n.skillCastEffectPlay=!1},this.users[e].changeState(d.OBJECT_STATE_ATTACK)):t.type===d.SKILL_TYPE_RANGE||t.type===d.SKILL_TYPE_SELF||t.type===d.SKILL_TYPE_SELF_EXPLOSION||t.type===d.SKILL_TYPE_TELEPORT?(i.onFire=function(e){s===n&&a(t,e),n.skillCastEffectPlay=!1},this.users[e].changeState(d.OBJECT_STATE_CAST)):t.type!==d.SKILL_TYPE_PROJECTILE&&t.type!==d.SKILL_TYPE_PROJECTILE_TICK&&t.type!==d.SKILL_TYPE_PROJECTILE_EXPLOSION&&t.type!==d.SKILL_TYPE_PROJECTILE_TICK_EXPLOSION||(i.onFire=function(e){for(var a=[],o=t.direction,l=0;l<t.projectileCount;l++){if(t.projectileCount%2==0){var c=l-(t.projectileCount/2-.5);o=t.direction+c*d.MULTI_PROJECTILE_DEGREE}else if(t.projectileCount%2==1){c=l-Math.floor(t.projectileCount/2),o=t.direction+c*d.MULTI_PROJECTILE_DEGREE}var u=n.makeProjectile(t.projectileIDs[l],i,o);a.push(u),s===n&&a.length===t.projectileCount&&r(a,e),n.skillCastEffectPlay=!1}},this.users[e].changeState(d.OBJECT_STATE_CAST)),this.users[e].setSkill(i)}},applySkill:function(e,t,i){if(e.type===d.SKILL_TYPE_TELEPORT){if(t in this.users){var s={x:e.targetPosition.x,y:e.targetPosition.y};this.users[t].changePosition(s)}}else this.effects.push({property:e.property,position:{x:e.targetPosition.x-e.explosionRadius,y:e.targetPosition.y-e.explosionRadius},radius:e.explosionRadius,startTime:Date.now(),lifeTime:e.effectLastTime,scaleFactor:1,effectImgData:i||0,isCheckCollision:!1})},applyProjectile:function(e,t,i){this.projectiles.push({userID:e.userID,objectID:e.objectID,type:e.type,property:e.property,position:e.position,speed:e.speed,startTime:e.startTime,radius:e.radius,lifeTime:2*e.lifeTime,projectileImgData:t||0,effectRotateDegree:0,effectTimer:Date.now(),timer:Date.now(),effect:{property:e.property,position:e.position,radius:e.explosionRadius,startTime:0,lifeTime:e.effectLastTime,effectImgData:i||0,scaleFactor:1},move:function(){var e=(Date.now()-this.timer)/1e3;this.position.x+=this.speed.x*e,this.position.y+=this.speed.y*e,this.timer=Date.now()},isExpired:function(){return!(this.lifeTime>Date.now()-this.startTime)},explode:function(e){this.setEffect(e)},setEffect:function(e){this.effect.position=e,this.effect.startTime=Date.now()}})},applyCastSpeed:function(e,t){e in this.users&&(t.fireTime=Math.floor(t.fireTime*(100/this.users[e].castSpeed)),t.totalTime=Math.floor(t.totalTime*(100/this.users[e].castSpeed)))},deleteProjectile:function(e,t){for(var i=0;i<this.projectiles.length;i++)if(this.projectiles[i].objectID===e&&this.projectiles[i].userID===t){this.projectiles.splice(i,1);break}},explodeProjectile:function(e,t,i){for(var s=0;s<this.projectiles.length;s++)if(this.projectiles[s].objectID===e&&this.projectiles[s].userID===t){this.projectiles[s].explode(i),this.effects.push(this.projectiles[s].effect),this.projectiles.splice(s,1);break}},changeUserStat:function(e,t){if(e.objectID in this.users)if((e.level!==this.users[e.objectID].level||t)&&(this.users[e.objectID].level=e.level,this.users[e.objectID].imgData=this.setImgData(e)),this.users[e.objectID].exp=e.exp,this.users[e.objectID].maxHP=e.maxHP,this.users[e.objectID].maxMP=e.maxMP,this.users[e.objectID].HP=e.HP,this.users[e.objectID].MP=e.MP,this.users[e.objectID].castSpeed=e.castSpeed,this.users[e.objectID].maxSpeed=e.maxSpeed,this.users[e.objectID].rotateSpeed=e.rotateSpeed,this.users[e.objectID].conditions=e.conditions,this.users[e.objectID].buffList=e.buffList,this.users[e.objectID].passiveList=e.passiveList,this.users[e.objectID].setSpeed(),this.users[e.objectID].currentState===d.OBJECT_STATE_CAST&&this.users[e.objectID].currentSkill){var i=this.users[e.objectID].currentSkill.consumeMP;(this.users[e.objectID].conditions[d.USER_CONDITION_FREEZE]||this.users[e.objectID].conditions[d.USER_CONDITION_SILENCE]||this.users[e.objectID].MP<i)&&this.users[e.objectID].changeState(d.OBJECT_STATE_IDLE)}else this.users[e.objectID].currentState===d.OBJECT_STATE_ATTACK&&(this.users[e.objectID].conditions[d.USER_CONDITION_FREEZE]||this.users[e.objectID].conditions[d.USER_CONDITION_SILENCE])&&this.users[e.objectID].changeState(d.OBJECT_STATE_IDLE)},updateSkillPossessions:function(e,t){e in this.users&&this.users[e].updateSkillPossessions(t)},updateUserData:function(e){e.objectID in this.users&&(this.users[e.objectID].position=e.position,this.users[e.objectID].targetPosition=e.targetPosition,this.users[e.objectID].direction=e.direction,this.users[e.objectID].maxSpeed=e.maxSpeed,this.users[e.objectID].rotateSpeed=e.rotateSpeed,this.users[e.objectID].setCenter(),this.users[e.objectID].setTargetDirection(),this.users[e.objectID].setSpeed(),this.users[e.objectID].changeState(e.currentState))},syncUserData:function(e){e.objectID in this.users&&(this.users[e.objectID].position=e.position,this.users[e.objectID].currentState!==d.OBJECT_STATE_ATTACK&&this.users[e.objectID].currentState!==d.OBJECT_STATE_CAST&&(this.users[e.objectID].targetPosition=e.targetPosition,this.users[e.objectID].direction=e.direction,this.users[e.objectID].maxSpeed=e.maxSpeed,this.users[e.objectID].rotateSpeed=e.rotateSpeed,this.users[e.objectID].setCenter(),this.users[e.objectID].setTargetDirection(),this.users[e.objectID].setSpeed()),this.users[e.objectID].currentState!==e.currentState&&this.users[e.objectID].currentState!==d.OBJECT_STATE_CAST&&this.users[e.objectID].currentState!==d.OBJECT_STATE_ATTACK&&this.users[e.objectID].currentState!==d.OBJECT_STATE_MOVE_AND_ATTACK&&this.users[e.objectID].changeState(e.currentState))},updateUserBuffImgData:function(e,t){e in this.users&&this.users[e].updateBuffImgData(t)},updateSkillHitImgData:function(e,t){e in this.users&&this.users[e].updateSkillHitImgData(t)},synchronizeUser:function(e){for(var t in this.users)this.users[t].objectID===e&&(this.user=this.users[t],this.user.onMainUserMove=g.bind(this,this.user));this.user},processUserData:function(){if(this.user.currentState===d.OBJECT_STATE);return{objectID:this.user.objectID,currentState:this.user.currentState,position:this.user.position,direction:this.user.direction,time:this.user.timer}},processSkillData:function(e){return{skillIndex:e.index,skillTargetPosition:e.targetPosition}},processProjectileData:function(e){for(var t=[],i=0;i<e.length;i++)t.push({objectID:e[i].objectID,skillIndex:e[i].index,position:e[i].position,speed:e[i].speed});return t},checkCollisionWithObstacles:function(e,t){return c.checkCircleCollision(r,e.x-t.size.width/2,e.y-t.size.height/2,t.size.width/2,t.objectID)},reCalcSkillTargetPosition:function(e,t,i){var s=[i[0]],n=c.calcCompelPos({x:e.x-t.size.width/2,y:e.y-t.size.height/2,width:t.size.width,height:t.size.height,id:t.objectID},s);return{x:e.x+n.x,y:e.y+n.y}},setUserChatMsg:function(e,t){e in this.users&&this.users[e].setChatMsg(t)}};var S=function(e){var t=c.checkCircleCollision(r,e.entityTreeEle.x,e.entityTreeEle.y,e.entityTreeEle.width/2,e.entityTreeEle.id);if(t.length>0)var i=c.calcCompelPos(e.entityTreeEle,t);return i},g=function(e){this.onMainUserMove(e)};t.exports=I},{"../public/gameConfig.json":8,"../public/objectAssign.js":9,"../public/quadtree.js":10,"../public/util.js":11,"./CObstacle.js":2,"./CUser.js":5}],2:[function(e,t,i){function s(e,t,i,s,n){this.objectID=s,this.imgData=n,this.position={x:e,y:t},this.size={width:2*i,height:2*i},this.center={x:this.position.x+this.size.width/2,y:this.position.y+this.size.height/2},this.staticEle={x:this.position.x,y:this.position.y,width:this.size.width,height:this.size.height,id:this.objectID,isCollide:!1}}s.prototype={setPosition:function(e,t){this.position.x=e,this.position.y=t,this.setCenter()},setSize:function(e,t){this.size.width=e,this.size.height=t},setCenter:function(){0==this.size.width||this.size.height,this.center.x=this.position.x+this.size.width/2,this.center.y=this.position.y+this.size.height/2},setTreeImgEle:function(e){this.treeImgEle={x:this.center.x-e,y:this.center.y-e,width:2*e,height:2*e,id:this.objectID,isCollide:!1}}},t.exports=s},{}],3:[function(e,t,i){var s=e("../public/util.js"),n=e("../public/gameConfig.json");function a(e,t){this.index=e.index,this.type=e.type,this.property=e.property,this.consumeMP=e.consumeMP,this.totalTime=e.totalTime,this.fireTime=e.fireTime,this.range=e.range,this.explosionRadius=e.explosionRadius,this.radius=e.radius,this.maxSpeed=e.maxSpeed,this.lifeTime=e.lifeTime,this.direction=e.direction,this.targetPosition=e.targetPosition,this.userAniStartTime=t,this.effectLastTime=e.effectLastTime,this.effect={position:this.targetPosition,radius:this.explosionRadius,startTime:0,lifeTime:this.effectLastTime},this.userAniTimeout=!1,this.fireTimeout=!1,this.totalTimeout=!1,this.onUserAniStart=new Function,this.onFire=new Function,this.onTimeOver=new Function}a.prototype={executeSkill:function(){this.userAniTimeout=setTimeout(function(){this.onUserAniStart()}.bind(this),this.userAniStartTime);var e=this.fireTime-n.SKILL_INFORM_TIME;e<0&&(e=0),this.userAniStartTime>e&&(e=this.userAniStartTime),this.syncFireTime=Date.now()+this.fireTime,this.fireTimeout=setTimeout(function(){this.onFire(this.syncFireTime)}.bind(this),e),this.totalTimeout=setTimeout(function(){this.onTimeOver()}.bind(this),this.totalTime)},startEffectTimer:function(){this.effect.startTime=Date.now()},destroy:function(){this.userAniTimeout&&clearTimeout(this.userAniTimeout),this.fireTimeout&&clearTimeout(this.fireTimeout),this.totalTimeout&&clearTimeout(this.totalTimeout)},makeProjectile:function(e,t,i){var a=s.calcForePosition(e,this.radius,i,n.PROJECTILE_FIRE_DISTANCE);return new r(this,a,t,i)}};var r=function(e,t,i,s){this.objectID=i,this.index=e.index,this.position={x:t.x,y:t.y},this.direction=s,this.speed={x:e.maxSpeed*Math.cos(this.direction*Math.PI/180),y:e.maxSpeed*Math.sin(this.direction*Math.PI/180)},this.radius=e.radius,this.lifeTime=e.lifeTime,this.explosionRadius=e.explosionRadius};t.exports=a},{"../public/gameConfig.json":8,"../public/util.js":11}],4:[function(e,t,i){var s,n,a,r,o,l,c,d,u,h,E=e("../public/util.js"),f=e("../public/gameConfig.json"),p=e("../../modules/public/objectAssign.js"),m=1,I="FROSTER",S="MYSTER",g=0,T=null,_=0,C=null,L=new Array(4),A=new Array(4),D=[],y=[f.TUTORIAL_SKILL_INDEX],v=[],R=0;v[f.USER_CONDITION_FREEZE]=!1,v[f.USER_CONDITION_SILENCE]=!1;var b,P,O,k,x,M,N,F,w,B,j,U,H,X,K,G,Y,J,z,W,q,V,Z,Q,$,ee,te,ie,se,ne,ae,re,oe,le,ce,de,ue,he,Ee,fe,pe,me,Ie,Se,ge,Te,_e,Ce,Le,Ae,De,ye,ve,Re,be,Pe,Oe,ke,xe,Me,Ne,Fe,we,Be,je,Ue,He,Xe,Ke,Ge,Ye,Je,ze,We,qe,Ve,Ze,Qe,$e,et,tt,it,st,nt,at,rt,ot,lt,ct,dt,ut,ht,Et,ft,pt,mt,It,St=0,gt=0,Tt=0,_t=0,Ct=1,Lt=!0,At=!0,Dt=!0,yt=!0,vt=!0,Rt=[],bt=[],Pt=Date.now(),Ot=!1,kt=!1,xt=null,Mt=null,Nt=null,Ft=null,wt=!0;function Bt(e,t,i,o){s=e,n=t,a=i,r=o,this.serverResponseTimeout=!1,this.onStartBtnClick=new Function,this.onSelectCharIcon=new Function,this.onSelectSkillCancelBtnClick=new Function,this.onSkillIconClick=new Function,this.onSkillUpgrade=new Function,this.onExchangeSkill=new Function,this.onExchangePassive=new Function,this.onEquipPassive=new Function,this.onUnequipPassive=new Function}Bt.prototype={initStartScene:function(){c=document.getElementById("startScene"),d=document.getElementById("gameScene"),u=document.getElementById("standingScene");var e=document.getElementById("startButton"),t=document.getElementById("startSceneSelectedCharName"),i=document.getElementById("startSceneSelectedCharStatPower"),s=document.getElementById("startSceneSelectedCharStatMagic"),n=document.getElementById("startSceneSelectedCharStatSpeed"),a=document.getElementById("startSceneSelectedCharDesc");h=document.getElementById("restartButton"),Ze=document.getElementById("standingSceneSelectedCharName"),Qe=document.getElementById("standingSceneSelectedCharStatPower"),$e=document.getElementById("standingSceneSelectedCharStatMagic"),et=document.getElementById("standingSceneSelectedCharStatSpeed"),tt=document.getElementById("standingSceneSelectedCharBaseSkill"),it=document.getElementById("standingSceneSelectedCharPassiveSkill"),st=document.getElementById("standingSceneSelectedCharEquipSkill1"),nt=document.getElementById("standingSceneSelectedCharEquipSkill2"),at=document.getElementById("standingSceneSelectedCharEquipSkill3"),rt=document.getElementById("standingSceneSelectedCharEquipSkill4"),tt.getElementsByTagName("img")[0].src=o,it.getElementsByTagName("img")[0].src=o,st.getElementsByTagName("img")[0].src=o,nt.getElementsByTagName("img")[0].src=o,at.getElementsByTagName("img")[0].src=o,rt.getElementsByTagName("img")[0].src=o,tt.onmouseover=zt.bind(tt),tt.onmouseout=Zt.bind(tt),it.onmouseover=zt.bind(it),it.onmouseout=Zt.bind(it),st.onmouseover=zt.bind(st),st.onmouseout=Zt.bind(st),nt.onmouseover=zt.bind(nt),nt.onmouseout=Zt.bind(nt),at.onmouseover=zt.bind(at),at.onmouseout=Zt.bind(at),rt.onmouseover=zt.bind(rt),rt.onmouseout=Zt.bind(rt),ot=document.getElementById("standingSceneSkillSettingBtn"),e.onclick=Ht.bind(this,e);for(var l=document.getElementById("startSceneHudCenterCenterCharSelect").children,g=0;g<l.length;g++)l[g].onclick=function(){var e=parseInt(this.getAttribute("type"));m=e;for(var o=0;o<l.length;o++)l[o].classList.remove("selectedChar");this.classList.add("selectedChar");var c="",d="",u="";switch(e){case f.CHAR_TYPE_FIRE:c="PYRO",d="PYRO is fa",u="red";break;case f.CHAR_TYPE_FROST:c=I,d="FROSTER is a",u="blue";break;case f.CHAR_TYPE_ARCANE:c=S,d="MYSTER is blabla",u="purple"}var h=p({},E.findDataWithTwoColumns(r,"type",m,"level",1));t.innerHTML="<span class='"+u+"'>"+c+"</span>",a.innerHTML=d,i.getElementsByTagName("span")[0].innerHTML=h.power,s.getElementsByTagName("span")[0].innerHTML=h.magic,n.getElementsByTagName("span")[0].innerHTML=h.speed,i.onmouseover=Wt.bind(i,f.STAT_POWER_INDEX,h.power),i.onmouseout=Zt.bind(i),s.onmouseover=Wt.bind(s,f.STAT_MAGIC_INDEX,h.magic),s.onmouseout=Zt.bind(s),n.onmouseover=Wt.bind(n,f.STAT_SPEED_INDEX,h.speed),n.onmouseout=Zt.bind(n)};l[0].onclick()},disableStartButton:function(){startButton.onclick=""},disableStartScene:function(){for(var e=document.getElementById("startSceneHudCenterCenterCharSelect").children,t=0;t<e.length;t++)e[t].onclick=new Function;c.classList.add("disappearSmoothAni"),c.classList.remove("enable"),setTimeout(function(){c.classList.add("disable")},1e3),d.classList.add("enable"),d.classList.remove("disable")},initStandingScene:function(e){var t=0;switch(e){case f.CHAR_TYPE_FIRE:t=0;break;case f.CHAR_TYPE_FROST:t=1;break;case f.CHAR_TYPE_ARCANE:t=2}h.onclick=Ht.bind(this,h);for(var i=this.onSelectCharIcon,s=document.getElementById("standingSceneHudCenterCenterCharSelect").children,n=0;n<s.length;n++){if(t===n){for(var a=0;a<s.length;a++)s[a].classList.remove("selectedChar");s[n].classList.add("selectedChar")}s[n].onclick=function(){var e=parseInt(this.getAttribute("type"));m=e;for(var t=0;t<s.length;t++)s[t].classList.remove("selectedChar");this.classList.add("selectedChar"),i(e)}}s[t].onclick(),ot.onclick=function(){Kt(),jt(Re),Ot?li():oi()}},updateCharInfoSelectedPanel:function(e,t){var i="",s="white";switch(e){case f.CHAR_TYPE_FIRE:i="PYRO",s="red";break;case f.CHAR_TYPE_FROST:i=I,s="blue";break;case f.CHAR_TYPE_ARCANE:i=S,s="purple"}var n=p({},E.findDataWithTwoColumns(r,"type",e,"level",t));Ze.innerHTML="<span class='yellow'>Lv "+t+" </span><span class='"+s+"'>"+i+"</span>",Qe.getElementsByTagName("span")[0].innerHTML=n.power,$e.getElementsByTagName("span")[0].innerHTML=n.magic,et.getElementsByTagName("span")[0].innerHTML=n.speed,Qe.onmouseover=Wt.bind(Qe,f.STAT_POWER_INDEX,n.power),Qe.onmouseout=Zt.bind(Qe),$e.onmouseover=Wt.bind($e,f.STAT_MAGIC_INDEX,n.magic),$e.onmouseout=Zt.bind($e),et.onmouseover=Wt.bind(et,f.STAT_SPEED_INDEX,n.speed),et.onmouseout=Zt.bind(et),$t()},disableStandingScene:function(){for(var e=document.getElementById("standingSceneHudCenterCenterCharSelect").children,t=0;t<e.length;t++)e[t].onclick="";u.classList.add("disappearSmoothAni"),u.classList.remove("enable"),setTimeout(function(){u.classList.add("disable"),u.classList.remove("disappearSmoothAni")},1e3),d.classList.add("enable"),d.classList.remove("disable"),h.onclick="",ot.onclick=""},initHUD:function(){b=document.getElementById("hudBaseSkillImg"),P=document.getElementById("hudEquipSkill1Img"),O=document.getElementById("hudEquipSkill2Img"),k=document.getElementById("hudEquipSkill3Img"),x=document.getElementById("hudEquipSkill4Img"),M=document.getElementById("hudPassiveSkillImg"),b.src=o,P.src=o,O.src=o,k.src=o,x.src=o,M.src=o,b.addEventListener("mouseover",Yt.bind(b,f.SKILL_BASIC_INDEX),!1),P.addEventListener("mouseover",Yt.bind(P,f.SKILL_EQUIP1_INDEX),!1),O.addEventListener("mouseover",Yt.bind(O,f.SKILL_EQUIP2_INDEX),!1),k.addEventListener("mouseover",Yt.bind(k,f.SKILL_EQUIP3_INDEX),!1),x.addEventListener("mouseover",Yt.bind(x,f.SKILL_EQUIP4_INDEX),!1),M.addEventListener("mouseover",Yt.bind(M,f.SKILL_PASSIVE_INDEX),!1),b.addEventListener("mouseout",Jt.bind(b),!1),P.addEventListener("mouseout",Jt.bind(P),!1),O.addEventListener("mouseout",Jt.bind(O),!1),k.addEventListener("mouseout",Jt.bind(k),!1),x.addEventListener("mouseout",Jt.bind(x),!1),M.addEventListener("mouseout",Jt.bind(M),!1),b.onclick=Qt.bind(this,f.SKILL_BASIC_INDEX),P.onclick=Qt.bind(this,f.SKILL_EQUIP1_INDEX),O.onclick=Qt.bind(this,f.SKILL_EQUIP2_INDEX),k.onclick=Qt.bind(this,f.SKILL_EQUIP3_INDEX),x.onclick=Qt.bind(this,f.SKILL_EQUIP4_INDEX),N=document.getElementById("hudBtnSkillChange"),F=document.getElementById("gameSceneBuffsContainer"),w=document.getElementById("userHPProgressBar"),j=document.getElementById("userExpProgressBar"),B=document.getElementById("userMPProgressBar"),U=document.getElementById("hudBaseSkillMask"),H=document.getElementById("hudEquipSkill1Mask"),X=document.getElementById("hudEquipSkill2Mask"),K=document.getElementById("hudEquipSkill3Mask"),G=document.getElementById("hudEquipSkill4Mask"),U.addEventListener("animationend",Xt.bind(U,f.SKILL_BASIC_INDEX,this.checkSkillsConditions),!1),H.addEventListener("animationend",Xt.bind(H,f.SKILL_EQUIP1_INDEX,this.checkSkillsConditions),!1),X.addEventListener("animationend",Xt.bind(X,f.SKILL_EQUIP2_INDEX,this.checkSkillsConditions),!1),K.addEventListener("animationend",Xt.bind(K,f.SKILL_EQUIP3_INDEX,this.checkSkillsConditions),!1),G.addEventListener("animationend",Xt.bind(G,f.SKILL_EQUIP4_INDEX,this.checkSkillsConditions),!1),Y=document.getElementById("hudBaseSkillBlockMask"),J=document.getElementById("hudEquipSkill1BlockMask"),z=document.getElementById("hudEquipSkill2BlockMask"),W=document.getElementById("hudEquipSkill3BlockMask"),q=document.getElementById("hudEquipSkill4BlockMask"),V=document.getElementById("hudPassiveSkillBlockMask"),Z=document.getElementById("hudBaseSkillConditionBlockMask"),Q=document.getElementById("hudEquipSkill1ConditionBlockMask"),$=document.getElementById("hudEquipSkill2ConditionBlockMask"),ee=document.getElementById("hudEquipSkill3ConditionBlockMask"),te=document.getElementById("hudEquipSkill4ConditionBlockMask"),ie=document.getElementById("gameSceneCharNameAndLevel"),se=document.getElementById("userStatOffence"),ne=document.getElementById("userStatDefence"),ae=document.getElementById("userStatPowerContainer"),re=document.getElementById("userStatMagicContainer"),oe=document.getElementById("userStatSpeedContainer"),lt=document.getElementById("miniMapUser"),ct=document.getElementById("miniMapChest1"),dt=document.getElementById("miniMapChest2"),ut=document.getElementById("miniMapChest3"),ht=document.getElementById("miniMapChest4"),Et=document.getElementById("miniMapChest5"),ft=document.getElementById("miniMapChest6"),pt=document.getElementById("miniMapChest7"),mt=document.getElementById("miniMapChest8"),It=document.getElementById("miniMapChest9"),le=document.getElementById("gameSceneHudTopCenter"),selectSkillImgContainer=document.getElementById("selectSkillImgContainer"),ce=document.getElementById("selectSkillInfo"),document.getElementById("btnSelectSkillCancel").onclick=function(){this.onSelectSkillCancelBtnClick()}.bind(this),de=document.getElementById("goldContainer"),ue=document.getElementById("jewelContainer"),he=document.getElementById("gameBoardRank"),Ee=document.getElementById("gameBoardName"),fe=document.getElementById("gameBoardLevel"),pe=document.getElementById("gameBoardKillScore"),me=document.getElementById("gameBoardTotalScore"),Ie=document.getElementById("gameSceneDeadScene"),Se=document.getElementById("deadSceneBackground"),ge=document.getElementById("deadSceneTextContainer"),Te=document.getElementById("deadSceneText"),_e=document.getElementById("deadSceneToLevel"),Ce=document.getElementById("deadSceneLoseGold"),Le=document.getElementById("deadSceneLoseJewel"),Ae=document.getElementById("chatInputContainer"),De=document.getElementById("chatInput"),ye=document.getElementById("flashMessageContainer"),ve=document.getElementById("risingMessageContainer")},changeLoadingText:function(){var e=document.getElementById("loadingText"),t="Loading ";switch(Ct){case 1:t+=".";break;case 2:t+="..";break;case 3:t+="..."}++Ct>3&&(Ct=1),e.innerHTML=t},drawStartScene:function(){var e=document.getElementById("loadingImgContainer"),t=document.getElementById("startSceneHudContent");e.classList.add("disable"),t.classList.remove("disable"),t.classList.add("appearSmoothAni")},drawGameScene:function(){},drawRestartScene:function(){d.classList.add("disable"),d.classList.remove("enable"),u.classList.add("enable"),u.classList.remove("disable")},enableSelectSkillInfo:function(e){var t=document.createElement("img"),i=p({},E.findData(a,"index",e.skillIcon));t.src=o;t.style.clip=E.makeCssClipStyle(i,80/72),E.setImgCssStyle(t,i,80/72),selectSkillImgContainer.appendChild(t);var s="white";switch(e.property){case f.SKILL_PROPERTY_FIRE:s="red";break;case f.SKILL_PROPERTY_FROST:s="blue";break;case f.SKILL_PROPERTY_ARCANE:s="purple"}switch(ce.getElementsByTagName("h4")[0].innerHTML="<span class='yellow'>Lv "+e.level+" </span><span class='"+s+"'>"+e.clientName+"</span>",ce.getElementsByTagName("div")[0].innerHTML="<span class='yellow'>Damage : </span><span class='"+s+"'>"+(e.fireDamage+e.frostDamage+e.arcaneDamage)+"</span>",ce.getElementsByTagName("div")[1].innerHTML="<span class='yellow'>ManaCost : </span>"+e.consumeMP,ce.getElementsByTagName("div")[2].innerHTML=e.clientDesc,le.classList.add("enable"),le.classList.remove("disable"),e.index){case g:J.classList.remove("disable"),z.classList.remove("disable"),W.classList.remove("disable"),q.classList.remove("disable"),V.classList.remove("disable");break;case L[0]:Y.classList.remove("disable"),z.classList.remove("disable"),W.classList.remove("disable"),q.classList.remove("disable"),V.classList.remove("disable");break;case L[1]:Y.classList.remove("disable"),J.classList.remove("disable"),W.classList.remove("disable"),q.classList.remove("disable"),V.classList.remove("disable");break;case L[2]:Y.classList.remove("disable"),J.classList.remove("disable"),z.classList.remove("disable"),q.classList.remove("disable"),V.classList.remove("disable");break;case L[3]:Y.classList.remove("disable"),J.classList.remove("disable"),z.classList.remove("disable"),W.classList.remove("disable"),V.classList.remove("disable")}},disableSelectSkillInfo:function(){for(;selectSkillImgContainer.firstChild;)selectSkillImgContainer.removeChild(selectSkillImgContainer.firstChild);ce.getElementsByTagName("h4")[0].innerHTML="",le.classList.add("disable"),le.classList.remove("enable"),Y.classList.add("disable"),J.classList.add("disable"),z.classList.add("disable"),W.classList.add("disable"),q.classList.add("disable"),V.classList.add("disable")},syncSkills:function(e,t,i,s,n,a,r){g=e,T=t,L=i,A=s,D=n,_=a,C=r},updatePossessionSkills:function(e){D=e},updateNewSkills:function(e){for(var t=0;t<e.length;t++)-1===y.indexOf(e[t])&&y.push(e[t]);var i=N.parentNode.getElementsByTagName("img");i[0].classList.add("disable");var s=ot.getElementsByTagName("img");s[0].classList.add("disable"),y.length&&(i[0].classList.remove("disable"),s[0].classList.remove("disable"))},updateHP:function(e){var t=e.HP/e.maxHP*100;t>100&&(t=100),w.style.height=t+"%";w.parentNode.getElementsByTagName("div")[1].innerHTML=Math.floor(e.HP)+"<br>/ "+Math.floor(e.maxHP)},updateMP:function(e){R=e.MP;var t=e.MP/e.maxMP*100;t>100&&(t=100),B.style.height=t+"%";B.parentNode.getElementsByTagName("div")[1].innerHTML=Math.floor(e.MP)+"<br>/ "+Math.floor(e.maxMP)},updateExp:function(e,t){var i=e.exp/t*100;i>100&&(i=100),j.style.width=i+"%"},updateCondition:function(e){v[f.USER_CONDITION_FREEZE]=e[f.USER_CONDITION_FREEZE],v[f.USER_CONDITION_SILENCE]=e[f.USER_CONDITION_SILENCE]},checkSkillsConditions:function(){var e=!1,t=!1,i=!1,s=!1,n=!1,a=!1;v[f.USER_CONDITION_FREEZE]||v[f.USER_CONDITION_SILENCE]?e=!0:(Lt||(t=!0),A[0]&&(A[0].consumeMP>R?i=!0:At?A[0].type===f.SKILL_TYPE_PASSIVE&&(i=!0):i=!0),A[1]&&(A[1].consumeMP>R?s=!0:Dt?A[1].type===f.SKILL_TYPE_PASSIVE&&(s=!0):s=!0),A[2]&&(A[2].consumeMP>R?n=!0:yt?A[2].type===f.SKILL_TYPE_PASSIVE&&(n=!0):n=!0),A[3]&&(A[3].consumeMP>R?a=!0:vt?A[3].type===f.SKILL_TYPE_PASSIVE&&(a=!0):a=!0)),e?(Z.classList.remove("disable"),Q.classList.remove("disable"),$.classList.remove("disable"),ee.classList.remove("disable"),te.classList.remove("disable")):(Z.classList.add("disable"),Q.classList.add("disable"),$.classList.add("disable"),ee.classList.add("disable"),te.classList.add("disable"),t&&Z.classList.remove("disable"),i&&Q.classList.remove("disable"),s&&$.classList.remove("disable"),n&&ee.classList.remove("disable"),a&&te.classList.remove("disable"))},applySkill:function(e,t){var i=null,n={};if(g===e?(i=U,Lt=!1,n.slot=f.SKILL_BASIC_INDEX):L[0]===e?(i=H,At=!1,n.slot=f.SKILL_EQUIP1_INDEX):L[1]===e?(i=X,Dt=!1,n.slot=f.SKILL_EQUIP2_INDEX):L[2]===e?(i=K,yt=!1,n.slot=f.SKILL_EQUIP3_INDEX):L[3]===e&&(i=G,vt=!1,n.slot=f.SKILL_EQUIP4_INDEX),i){var a=p({},E.findData(s,"index",e));if(t)var r=t/1e3;else r=a.cooldown*(100-_t)/1e5,n.skillIndex=a.index,n.startTime=Date.now(),n.cooldownTime=r,Rt.push(n);i.style.animationDuration=r+"s",i.classList.add("cooldownMaskAni")}},applySkillCooldown:function(e,t){for(var i=ti(t),s=0,n=0;n<Rt.length;n++)if(Rt[n].slot===i){var a=Date.now()-Rt[n].startTime;s=1e3*Rt[n].cooldownTime-a}for(n=0;n<Rt.length;n++)if(Rt[n].skillIndex===e){a=Date.now()-Rt[n].startTime;var r=1e3*Rt[n].cooldownTime-a;r>s&&r>=500&&this.applySkill(e,r)}},updateUnEquipSkillSlotCooldown:function(e){for(var t=ti(e),i=!0,s=0;s<Rt.length;s++)Rt[s].slot===t&&(i=!1);if(i){switch(t){case f.SKILL_EQUIP1_INDEX:At=!0,H.classList.remove("cooldownMaskAni"),H.style.opacity=0;break;case f.SKILL_EQUIP2_INDEX:Dt=!0,X.classList.remove("cooldownMaskAni"),X.style.opacity=0;break;case f.SKILL_EQUIP3_INDEX:yt=!0,K.classList.remove("cooldownMaskAni"),K.style.opacity=0;break;case f.SKILL_EQUIP4_INDEX:vt=!0,G.classList.remove("cooldownMaskAni"),G.style.opacity=0}this.checkSkillsConditions()}},checkCooltime:function(e){switch(e){case g:return Lt;case L[0]:return At;case L[1]:return Dt;case L[2]:return yt;case L[3]:return vt}},setHUDSkills:function(){var e=60/72;if(T){var t=p({},E.findData(a,"index",T.skillIcon));b.style.clip=E.makeCssClipStyle(t,e),E.setImgCssStyle(b,t,e)}else b.style.clip=E.makeCssClipStyle(l,e),E.setImgCssStyle(b,l,e);if(C){t=p({},E.findData(a,"index",C.skillIcon));M.style.clip=E.makeCssClipStyle(t,e),E.setImgCssStyle(M,t,e)}else M.style.clip=E.makeCssClipStyle(l,e),E.setImgCssStyle(M,l,e);if(e=80/72,A[0]){t=p({},E.findData(a,"index",A[0].skillIcon));P.style.clip=E.makeCssClipStyle(t,e),E.setImgCssStyle(P,t,e)}else P.style.clip=E.makeCssClipStyle(l,e),E.setImgCssStyle(P,l,e);if(A[1]){t=p({},E.findData(a,"index",A[1].skillIcon));O.style.clip=E.makeCssClipStyle(t,e),E.setImgCssStyle(O,t,e)}else O.style.clip=E.makeCssClipStyle(l,e),E.setImgCssStyle(O,l,e);if(A[2]){t=p({},E.findData(a,"index",A[2].skillIcon));k.style.clip=E.makeCssClipStyle(t,e),E.setImgCssStyle(k,t,e)}else k.style.clip=E.makeCssClipStyle(l,e),E.setImgCssStyle(k,l,e);if(A[3]){t=p({},E.findData(a,"index",A[3].skillIcon));x.style.clip=E.makeCssClipStyle(t,e),E.setImgCssStyle(x,t,e)}else x.style.clip=E.makeCssClipStyle(l,e),E.setImgCssStyle(x,l,e)},setHUDStats:function(e){var t="white";switch(m){case f.CHAR_TYPE_FIRE:var i="PYRO";t="red";break;case f.CHAR_TYPE_FROST:i=I,t="blue";break;case f.CHAR_TYPE_ARCANE:i=S,t="purple"}ie.innerHTML="<span class='yellow'>Lv "+e.level+"</span><span class='"+t+"'>"+i+"</span>";var s=Math.floor(10*(e.damageRate+(e.fireDamageRate+e.frostDamageRate+e.arcaneDamageRate)/3-200))/10,n=Math.floor(10*(e.resistAll+(e.resistFire+e.resistFrost+e.resistArcane)/3))/10;se.getElementsByTagName("span")[0].innerHTML=s+" %",se.onmouseover=qt.bind(se,f.STAT_OFFENCE_INDEX,e),se.onmouseout=Zt.bind(se),ne.getElementsByTagName("span")[0].innerHTML=n+" %",ne.onmouseover=qt.bind(ne,f.STAT_DEFENCE_INDEX,e),ne.onmouseout=Zt.bind(ne),ae.getElementsByTagName("span")[0].innerHTML=St=e.statPower,ae.onmouseover=Wt.bind(ae,f.STAT_POWER_INDEX,St),ae.onmouseout=Zt.bind(ae),re.getElementsByTagName("span")[0].innerHTML=gt=e.statMagic,re.onmouseover=Wt.bind(re,f.STAT_MAGIC_INDEX,gt),re.onmouseout=Zt.bind(re),oe.getElementsByTagName("span")[0].innerHTML=Tt=e.statSpeed,oe.onmouseover=Wt.bind(oe,f.STAT_SPEED_INDEX,Tt),oe.onmouseout=Zt.bind(oe)},setCooldownReduceRate:function(e){_t=e},setSkillChangeBtn:function(){N.onclick=function(){Kt(),jt(Re),Ot?li():oi()},be.onclick=function(){Kt(),jt(Re)},Oe.onclick=function(){Kt(),jt(Re)}},setSkillIconResource:function(e){o=e.src,l=p({},E.findData(a,"index",f.UI_RESOURCE_INDEX_BLANK))},setResource:function(e){de.innerHTML=e.gold,ue.innerHTML=e.jewel},addResource:function(e,t){var i=parseInt(de.innerHTML),s=parseInt(ue.innerHTML);E.isNumeric(e)&&E.isNumeric(i)&&(de.innerHTML=i+e),E.isNumeric(t)&&E.isNumeric(s)&&(ue.innerHTML=s+t)},makeFlashMessage:function(e){var t=document.createElement("p");t.innerHTML=e,t.classList.add("flashMessage"),setTimeout(function(){t.classList.add("flashMessageAni")},2e3),ye.appendChild(t),setTimeout(function(){ye.removeChild(t)},5e3)},makeRisingMessage:function(e){var t=0;Date.now()>Pt+300?(t=0,Pt=Date.now()):(t=Pt+300-Date.now(),Pt=Date.now()+t),setTimeout(function(){var t=document.createElement("div");if(t.classList.add("risingMessage"),e.type===f.GET_RESOURCE_TYPE_EXP){var i="<span class='yellow'>EXP + </span>"+e.amount;t.innerHTML=i}else if(e.type===f.GET_RESOURCE_TYPE_GOLD){(s=document.createElement("img")).src="../images/GoldIcon.png",t.appendChild(s);(n=document.createElement("span")).innerHTML="<span class='yellow'> + </span>"+e.amount,t.appendChild(n)}else if(e.type===f.GET_RESOURCE_TYPE_JEWEL){var s;(s=document.createElement("img")).src="../images/JewelIcon.png",t.appendChild(s);var n;(n=document.createElement("span")).innerHTML="<span class='yellow'> + </span>"+e.amount,t.appendChild(n)}ve.appendChild(t),setTimeout(function(){t.classList.add("risingMessageAni")},50),setTimeout(function(){ve.removeChild(t)},4e3)},t)},makeRisingMessageForSkill:function(e,t){var i=0;Date.now()>Pt+300?(i=0,Pt=Date.now()):(i=Pt+300-Date.now(),Pt=Date.now()+i),setTimeout(function(){var i=document.createElement("div");i.classList.add("risingMessageSkill");var s=document.createElement("div");(c=document.createElement("img")).src=o;var n=p({},E.findData(a,"index",e.skillIcon));if(c.style.clip=E.makeCssClipStyle(n,40/72),E.setImgCssStyle(c,n,40/72),s.appendChild(c),i.appendChild(s),t){s.classList.add("risingMessageSkillImgToChange");var r=document.createElement("div");r.classList.add("risingMessageArrow"),i.appendChild(r);var l=document.createElement("div");l.classList.add("risingMessageResource");var c=document.createElement("img");if(e.exchangeToGold){c.src="../images/GoldIcon.png";var d=e.exchangeToGold}else e.exchangeToJewel&&(c.src="../images/JewelIcon.png",d=e.exchangeToJewel);l.appendChild(c);var u=document.createElement("span");u.innerHTML="<span class='yellow'> : </span>"+d,l.appendChild(u),i.appendChild(l)}else s.classList.add("risingMessageSkillImg");ve.appendChild(i),setTimeout(function(){i.classList.add("risingMessageAniForSkill")},50),setTimeout(function(){ve.removeChild(i)},4e3)},i)},updateBuffIcon:function(e,t){for(;F.firstChild;)F.removeChild(F.firstChild);F.innerHTML="";if(C){var i=p({},E.findData(n,"index",C.buffToSelf));(c=document.createElement("div")).setAttribute("buffGroupIndex",C.buffToSelf);(m=document.createElement("div")).classList.add("buffImgContainer");(I=document.createElement("img")).src=o;var s=p({},E.findData(a,"index",i.buffIcon));I.style.clip=E.makeCssClipStyle(s,.625),E.setImgCssStyle(I,s,.625),m.appendChild(I),c.appendChild(m),F.appendChild(c),c.addEventListener("mouseover",Vt.bind(c),!1),c.addEventListener("mouseout",Zt.bind(c),!1)}if(e)for(var r=0;r<e.length;r++){var l=p({},E.findData(n,"index",e[r])),c=document.createElement("div");(m=document.createElement("div")).classList.add("buffImgContainer"),c.setAttribute("buffGroupIndex",l.index);(I=document.createElement("img")).src=o;s=p({},E.findData(a,"index",l.buffIcon));I.style.clip=E.makeCssClipStyle(s,.625),E.setImgCssStyle(I,s,.625),m.appendChild(I),c.appendChild(m),F.appendChild(c),c.addEventListener("mouseover",Vt.bind(c),!1),c.addEventListener("mouseout",Zt.bind(c),!1)}if(t)for(r=0;r<t.length;r++){var d=p({},E.findData(n,"index",t[r].index)),u=d.buffLifeTime,h=Date.now()-t[r].startTime,f=t[r];(c=document.createElement("div")).setAttribute("buffGroupIndex",d.index);var m;(m=document.createElement("div")).classList.add("buffImgContainer");var I;(I=document.createElement("img")).src=o;s=p({},E.findData(a,"index",d.buffIcon));I.style.clip=E.makeCssClipStyle(s,.625),E.setImgCssStyle(I,s,.625),m.appendChild(I),c.appendChild(m),F.appendChild(c),c.addEventListener("mouseover",Vt.bind(c),!1),c.addEventListener("mouseout",Zt.bind(c),!1);var S=function(){h=Date.now()-f.startTime,u-h<=5e3?c.classList.add("buffBeforeEndAni"):setTimeout(S,100)};setTimeout(S,100)}},initPopUpSkillChanger:function(){Re=document.getElementById("popUpSkillChange"),be=document.getElementById("popUpCloseBtn"),Pe=document.getElementById("popUpSkillContainer"),Oe=document.getElementById("popUpBackground"),ke=document.getElementById("popUpSkillInfoAndBtn"),(xe=document.getElementById("popUpSkillInfoIcon")).onclick=Kt,Me=document.getElementById("popUpSkillInfoDesc"),Ne=document.getElementById("skillUpgradeEffect"),Fe=document.getElementById("popUpSkillUpgradeCostGold"),we=document.getElementById("popUpSkillUpgradeCostJewel"),Be=document.getElementById("popUpSkillUpgradeBtn"),Ue=document.getElementById("popUpSkillTutorialClickText1"),He=document.getElementById("popUpSkillTutorialClickText2"),Xe=document.getElementById("popUpSkillTutorialArrow"),Ke=document.getElementById("popUpSkillTextSkillInfo"),(je=document.getElementById("popUpCancelSkillSelectBtn")).onclick=Kt,Ge=document.getElementById("popUpEquipBaseSkill"),Ye=document.getElementById("popUpEquipSkillsContainer"),Je=document.getElementById("popUpEquipSkill1"),ze=document.getElementById("popUpEquipSkill2"),We=document.getElementById("popUpEquipSkill3"),qe=document.getElementById("popUpEquipSkill4"),Ve=document.getElementById("popUpEquipPassiveSkill")},checkPopUpSkillChange:function(){var e=!1,t=parseInt(Je.getAttribute("skillIndex")),i=parseInt(ze.getAttribute("skillIndex")),s=parseInt(We.getAttribute("skillIndex")),n=parseInt(qe.getAttribute("skillIndex"));t&&t!==L[0]&&(e=!0),i&&i!==L[1]&&(e=!0),s&&s!==L[2]&&(e=!0),n&&n!==L[3]&&(e=!0);for(var a=Pe.children,r=0;r<a.length;r++){for(var o=!1,l=parseInt(a[r].getAttribute("skillIndex")),c=0;c<D.length;c++)if(l===D[c]){o=!0;break}o||(e=!0)}return e},upgradeBaseSkill:function(e,t){var i=g;g=e,T=t,Ft===i&&this.updateSelectedPanel(e),this.updateDOMElementsSkillIndex(i,e),wt=!0,this.serverResponseTimeout&&(clearTimeout(this.serverResponseTimeout),this.serverResponseTimeout=!1)},upgradeInherentSkill:function(e,t){var i=_;_=e,C=t,Ft===i&&this.updateSelectedPanel(e),this.updateDOMElementsSkillIndex(i,e),wt=!0,this.serverResponseTimeout&&(clearTimeout(this.serverResponseTimeout),this.serverResponseTimeout=!1)},upgradePossessionSkill:function(e,t){for(var i=0;i<D.length;i++)if(D[i]===e){var n=D.indexOf(e);D.splice(n,1,t);break}for(i=0;i<L.length;i++)if(L[i]===e){n=L.indexOf(e);L.splice(n,1,t);var a=p({},E.findData(s,"index",t));A.splice(n,1,a);break}Ft===e&&this.updateSelectedPanel(t),this.updateDOMElementsSkillIndex(e,t),wt=!0,this.serverResponseTimeout&&(clearTimeout(this.serverResponseTimeout),this.serverResponseTimeout=!1)},playSkillUpgradeEffect:function(){Ne.classList.remove("skillUpgradeEffectAni"),setTimeout(function(){Ne.classList.add("skillUpgradeEffectAni")},50)},updateDOMElementsSkillIndex:function(e,t){for(var i=document.querySelectorAll('[skillIndex="'+e+'"]'),n=(p({},E.findData(s,"index",t)),0);n<i.length;n++)i[n].setAttribute("skillIndex",t);this.setHUDSkills()},setPopUpSkillChange:function(e){for(;Pe.firstChild;)Pe.removeChild(Pe.firstChild);for(;Ge.firstChild;)Ge.removeChild(Ge.firstChild);for(;Je.firstChild;)Je.removeChild(Je.firstChild);for(;ze.firstChild;)ze.removeChild(ze.firstChild);for(;We.firstChild;)We.removeChild(We.firstChild);for(;qe.firstChild;)qe.removeChild(qe.firstChild);for(;Ve.firstChild;)Ve.removeChild(Ve.firstChild);Je.removeAttribute("skillIndex"),ze.removeAttribute("skillIndex"),We.removeAttribute("skillIndex"),qe.removeAttribute("skillIndex");(v=document.createElement("div")).classList.add("popUpskillImgContainer");var t=document.createElement("img");t.src=o;var i=75/72,n=p({},E.findData(a,"index",T.skillIcon));t.style.clip=E.makeCssClipStyle(n,i),E.setImgCssStyle(t,n,i),Ge.setAttribute("skillIndex",g),v.appendChild(t),Ge.appendChild(v),Ge.onclick=Ut.bind(this,Ge,f.SKILL_CHANGE_PANEL_EQUIP,e);(v=document.createElement("div")).classList.add("popUpskillImgContainer");var r=document.createElement("img");r.src=o;n=p({},E.findData(a,"index",C.skillIcon));r.style.clip=E.makeCssClipStyle(n,i),E.setImgCssStyle(r,n,i),Ve.setAttribute("skillIndex",_),v.appendChild(r),Ve.appendChild(v),Ve.onclick=Ut.bind(this,Ve,f.SKILL_CHANGE_PANEL_EQUIP,e);i=85/72;if(A[0]){var l=document.createElement("img");(v=document.createElement("div")).classList.add("popUpskillImgContainer"),l.src=o;n=p({},E.findData(a,"index",A[0].skillIcon));l.style.clip=E.makeCssClipStyle(n,i),E.setImgCssStyle(l,n,i),Je.setAttribute("skillIndex",A[0].index),v.appendChild(l),Je.appendChild(v)}if(A[1]){(v=document.createElement("div")).classList.add("popUpskillImgContainer");var c=document.createElement("img");c.src=o;n=p({},E.findData(a,"index",A[1].skillIcon));c.style.clip=E.makeCssClipStyle(n,i),E.setImgCssStyle(c,n,i),ze.setAttribute("skillIndex",A[1].index),v.appendChild(c),ze.appendChild(v)}if(A[2]){(v=document.createElement("div")).classList.add("popUpskillImgContainer");var d=document.createElement("img");d.src=o;n=p({},E.findData(a,"index",A[2].skillIcon));d.style.clip=E.makeCssClipStyle(n,i),E.setImgCssStyle(d,n,i),We.setAttribute("skillIndex",A[2].index),v.appendChild(d),We.appendChild(v)}if(A[3]){(v=document.createElement("div")).classList.add("popUpskillImgContainer");var u=document.createElement("img");u.src=o;n=p({},E.findData(a,"index",A[3].skillIcon));u.style.clip=E.makeCssClipStyle(n,i),E.setImgCssStyle(u,n,i),qe.setAttribute("skillIndex",A[3].index),v.appendChild(u),qe.appendChild(v)}Je.onclick=Ut.bind(this,Je,f.SKILL_CHANGE_PANEL_EQUIP,e),ze.onclick=Ut.bind(this,ze,f.SKILL_CHANGE_PANEL_EQUIP,e),We.onclick=Ut.bind(this,We,f.SKILL_CHANGE_PANEL_EQUIP,e),qe.onclick=Ut.bind(this,qe,f.SKILL_CHANGE_PANEL_EQUIP,e);for(var h=[],m=0;m<L.length;m++)h.push(L[m]);for(m=0;m<D.length;m++){var I=!1;if(-1!==h.indexOf(D[m])&&(I=!0),!I){var S=!1;-1!==y.indexOf(D[m])&&(S=!0);var v,R=p({},E.findData(s,"index",D[m])),b=document.createElement("div");(v=document.createElement("div")).classList.add("popUpskillImgContainer");var P=document.createElement("img");b.setAttribute("skillIndex",D[m]);var O=document.createElement("img");O.src="../images/newIcon.png",S||O.classList.add("disable"),b.appendChild(O),b.classList.add("popUpSkillContainerItem"),P.src=o;n=p({},E.findData(a,"index",R.skillIcon));P.style.clip=E.makeCssClipStyle(n,i),E.setImgCssStyle(P,n,i),v.appendChild(P),b.appendChild(v),Pe.appendChild(b),b.onclick=Ut.bind(this,b,f.SKILL_CHANGE_PANEL_CONTAINER,e)}}},updateSelectedPanel:function(e){for(;xe.firstChild;)xe.removeChild(xe.firstChild);for(;Me.firstChild;)Me.removeChild(Me.firstChild);if(Fe.innerHTML="",we.innerHTML="",je.classList.add("disable"),e){Ft=e;var t=p({},E.findData(s,"index",e)),i=document.createElement("img"),n=ei(t);Me.innerHTML=n,i.src=o;var r=p({},E.findData(a,"index",t.skillIcon));i.style.clip=E.makeCssClipStyle(r,85/72),E.setImgCssStyle(i,r,85/72);var l=parseInt(de.innerHTML),c=parseInt(ue.innerHTML),d="white";d=l>=t.upgradeGoldAmount?"green":"red",Fe.innerHTML="<span class='"+d+"'>"+t.upgradeGoldAmount+"<br>/ "+l,d=c>=t.upgradeJewelAmount?"green":"red",we.innerHTML="<span class='"+d+"'>"+t.upgradeJewelAmount+"<br>/ "+c,xe.appendChild(i),Be.onclick=function(e){if(wt&&Ft)if(-1!==e.nextSkillIndex){var t=parseInt(de.innerHTML),i=parseInt(ue.innerHTML);t>=e.upgradeGoldAmount&&i>=e.upgradeJewelAmount?(this.onSkillUpgrade(Ft),wt=!1,this.serverResponseTimeout=setTimeout(function(){wt||(wt=!0)},f.MAX_SERVER_RESPONSE_TIME)):this.makeFlashMessage("Not enough resource!!!")}else this.makeFlashMessage("Spell reach max level!!!")}.bind(this,t),je.classList.remove("disable"),-1!==t.nextSkillIndex?(Be.innerHTML="Upgrade",skillUpgradeBlockMask.classList.add("disable")):(Be.innerHTML="Max Level",skillUpgradeBlockMask.classList.remove("disable"),Fe.innerHTML="",we.innerHTML="")}else Be.onclick=new Function,Be.innerHTML=" ",skillUpgradeBlockMask.classList.remove("disable")},closePopUpSkillChange:function(){Re.classList.contains("enable")&&(Kt(),jt(Re))},setBoard:function(e,t){var i=[],s=0,n="",a=0;e.sort(function(e,t){return t.totalScore-e.totalScore});for(var r=0;r<e.length;r++)t===e[r].name&&(s=r+1,n=e[r].name,userLevel=e[r].level,a=e[r].killScore,userScore=e[r].totalScore),i.push({rank:r+1,name:e[r].name,level:e[r].level,kill:e[r].killScore,score:e[r].totalScore});var o="<h3>Rank</h3><hr>",l="<h3>Name</h3><hr>",c="<h3>Level</h3><hr>",d="<h3>Kills</h3><hr>",u="<h3>Score</h3><hr>",h=i.length>10?10:i.length;for(r=0;r<h;r++)s<=10&&s===r+1?(o+="<p class='user'>"+i[r].rank+"</p>",l+="<p class='user'>"+i[r].name+"</p>",c+="<p class='user'>"+i[r].level+"</p>",d+="<p class='user'>"+i[r].kill+"</p>",u+="<p class='user'>"+i[r].score+"</p>"):(o+="<p>"+i[r].rank+"</p>",l+="<p>"+i[r].name+"</p>",c+="<p>"+i[r].level+"</p>",d+="<p>"+i[r].kill+"</p>",u+="<p>"+i[r].score+"</p>");s>10&&(o+="<p class='user' style='font-size: 13px'>"+s+"</p>",l+="<p class='user' style='font-size: 13px'>"+n+"</p>",c+="<p class='user' style='font-size: 13px'>"+userLevel+"</p>",d+="<p class='user' style='font-size: 13px'>"+a+"</p>",u+="<p class='user' style='font-size: 13px'>"+a+"</p>"),he.innerHTML=o,Ee.innerHTML=l,fe.innerHTML=c,pe.innerHTML=d,me.innerHTML=u},updateBoard:function(e,t){this.setBoard(e,t)},setMiniMapChests:function(e,t){ct.setAttribute("locationID",t[0].id),ct.style.left=Math.floor(100*t[0].posX/f.CANVAS_MAX_SIZE.width)+"%",ct.style.top=Math.floor(100*t[0].posY/f.CANVAS_MAX_SIZE.height)+"%",dt.setAttribute("locationID",t[1].id),dt.style.left=Math.floor(100*t[1].posX/f.CANVAS_MAX_SIZE.width)+"%",dt.style.top=Math.floor(100*t[1].posY/f.CANVAS_MAX_SIZE.height)+"%",ut.setAttribute("locationID",t[2].id),ut.style.left=Math.floor(100*t[2].posX/f.CANVAS_MAX_SIZE.width)+"%",ut.style.top=Math.floor(100*t[2].posY/f.CANVAS_MAX_SIZE.height)+"%",ht.setAttribute("locationID",t[3].id),ht.style.left=Math.floor(100*t[3].posX/f.CANVAS_MAX_SIZE.width)+"%",ht.style.top=Math.floor(100*t[3].posY/f.CANVAS_MAX_SIZE.height)+"%",Et.setAttribute("locationID",t[4].id),Et.style.left=Math.floor(100*t[4].posX/f.CANVAS_MAX_SIZE.width)+"%",Et.style.top=Math.floor(100*t[4].posY/f.CANVAS_MAX_SIZE.height)+"%",ft.setAttribute("locationID",t[5].id),ft.style.left=Math.floor(100*t[5].posX/f.CANVAS_MAX_SIZE.width)+"%",ft.style.top=Math.floor(100*t[5].posY/f.CANVAS_MAX_SIZE.height)+"%",pt.setAttribute("locationID",t[6].id),pt.style.left=Math.floor(100*t[6].posX/f.CANVAS_MAX_SIZE.width)+"%",pt.style.top=Math.floor(100*t[6].posY/f.CANVAS_MAX_SIZE.height)+"%",mt.setAttribute("locationID",t[7].id),mt.style.left=Math.floor(100*t[7].posX/f.CANVAS_MAX_SIZE.width)+"%",mt.style.top=Math.floor(100*t[7].posY/f.CANVAS_MAX_SIZE.height)+"%",It.setAttribute("locationID",t[8].id),It.style.left=Math.floor(100*t[8].posX/f.CANVAS_MAX_SIZE.width)+"%",It.style.top=Math.floor(100*t[8].posY/f.CANVAS_MAX_SIZE.height)+"%";for(var i=ct.parentNode.getElementsByTagName("div"),s=0;s<i.length-1;s++){(r=i[s].getElementsByTagName("img"))[0].src=f.MINIMAP_CHEST_GROUND_SRC}for(s=0;s<e.length;s++)for(var n=0;n<i.length-1;n++){var a=i[n].getAttribute("locationID");if(e[s].locationID===a){var r=i[n].getElementsByTagName("img");1===e[s].grade||2===e[s].grade?r[0].src=f.MINIMAP_CHEST_SRC_1:3===e[s].grade||4===e[s].grade?r[0].src=f.MINIMAP_CHEST_SRC_2:5===e[s].grade&&(r[0].src=f.MINIMAP_CHEST_SRC_3);break}}},createChest:function(e,t){for(var i=ct.parentNode.getElementsByTagName("div"),s=0;s<i.length;s++)if(e===i[s].getAttribute("locationID")){var n=i[s].getElementsByTagName("img");1===t||2===t?(n[0].src=f.MINIMAP_CHEST_SRC_1,n[0].classList.add("chestAni1"),n[1].classList.add("chestAni1")):3===t||4===t?(n[0].src=f.MINIMAP_CHEST_SRC_2,n[0].classList.add("chestAni2"),n[1].classList.add("chestAni2")):5===t&&(n[0].src=f.MINIMAP_CHEST_SRC_3,n[0].classList.add("chestAni3"),n[1].classList.add("chestAni3")),n[0].classList.add("chestAni"),n[1].classList.add("chestAni")}},deleteChest:function(e){for(var t=ct.parentNode.getElementsByTagName("div"),i=0;i<t.length;i++)if(e===t[i].getAttribute("locationID")){var s=t[i].getElementsByTagName("img");s[0].src=f.MINIMAP_CHEST_GROUND_SRC,s[0].classList.remove("chestAni"),s[1].classList.remove("chestAni"),s[0].classList.remove("chestAni1"),s[1].classList.remove("chestAni1"),s[0].classList.remove("chestAni2"),s[1].classList.remove("chestAni2"),s[0].classList.remove("chestAni3"),s[1].classList.remove("chestAni3")}},setUserPosition:function(e){lt.style.left=Math.floor(100*e.x/f.CANVAS_MAX_SIZE.width)+"%",lt.style.top=Math.floor(100*e.y/f.CANVAS_MAX_SIZE.height)+"%"},updateUserPosition:function(e){lt.style.left=Math.floor(100*e.x/f.CANVAS_MAX_SIZE.width)+"%",lt.style.top=Math.floor(100*e.y/f.CANVAS_MAX_SIZE.height)+"%"},showChatInput:function(){Ae.classList.remove("disable"),De.select()},getChatMessage:function(){return De.value},disableChatInput:function(){Ae.classList.add("disable")},clearChatInput:function(){De.value=""},playDeadScene:function(e,t,i,s){if(Ie.style.width="100%",Ie.style.height="100%",Se.classList.remove("deadSceneBackgroundDefault"),Se.classList.add("deadSceneBackgroundAni"),e)var n="You were slain by <span class='yellow'>"+e+"</span>";else n="You are dead";Te.innerHTML=n;var a="";switch(m){case f.CHAR_TYPE_FIRE:a+="<span class='red'>PYRO</span> level down to <span class='yellow'>"+t+"</span>";break;case f.CHAR_TYPE_FROST:a+="<span class='blue'>FROSTER</span> level down to <span class='yellow'>"+t+"</span>";break;case f.CHAR_TYPE_ARCANE:a+="<span class='purple'>MYSTER</span> level down to <span class='yellow'>"+t+"</span>"}if(s&&(a+="<br><span class='red'>Some knowledges have lost...<span class='smallFont'>[Some skills level down]</span></span>"),_e.innerHTML=a,i.gold)var r="<span class='red'> -"+i.gold+"</span>";else r=i.gold;if(i.jewel)var o="<span class='red'> -"+i.jewel+"</span>";else o=i.jewel;Ce.innerHTML=r,Le.innerHTML=o,setTimeout(function(){ge.classList.remove("deadSceneTextDefault"),ge.classList.add("deadSceneTextAni")},f.DEAD_SCENE_TEXT_ANI_PLAY_DELAY_TIME);var l=E.isNumeric(parseInt(de.innerHTML)-i.gold)?parseInt(de.innerHTML)-i.gold:0,c=E.isNumeric(parseInt(ue.innerHTML)-i.jewel)?parseInt(ue.innerHTML)-i.jewel:0;this.setResource({gold:l,jewel:c})},disableDeadScene:function(){Te.innerHTML="",Se.classList.remove("deadSceneBackgroundAni"),Se.classList.add("deadSceneBackgroundDefault"),ge.classList.remove("deadSceneTextAni"),ge.classList.add("deadSceneTextDefault"),Ie.style.width="0%",Ie.style.height="0%"}};function jt(e){e.classList.contains("disable")?(e.classList.add("enable"),e.classList.remove("disable"),Oe.classList.add("enable"),Oe.classList.remove("disable")):e.classList.contains("enable")&&(e.classList.add("disable"),e.classList.remove("enable"),Oe.classList.add("disable"),Oe.classList.remove("enable"))}function Ut(e,t,i){Gt();var n=null,r=null;t===f.SKILL_CHANGE_PANEL_EQUIP&&(e===Ge?n=-1:e===Je?n=0:e===ze?n=1:e===We?n=2:e===qe?n=3:e===Ve&&(n=-1));var l=parseInt(e.getAttribute("skillIndex"));if(t===f.SKILL_CHANGE_PANEL_CONTAINER){var c=y.indexOf(l);-1!==c&&y.splice(c,1),e.getElementsByTagName("img")[0].classList.add("disable");var d=N.parentNode.getElementsByTagName("img");d[0].classList.add("disable");var u=ot.getElementsByTagName("img");u[0].classList.add("disable"),y.length&&(d[0].classList.remove("disable"),u[0].classList.remove("disable"))}if(xt){if(xt!==t){if(xt===f.SKILL_CHANGE_PANEL_CONTAINER)if(-1===n)this.makeFlashMessage("Can not change character spell!!!");else{for(var h=0,I=0;I<Pe.childNodes.length;I++)if(Pe.childNodes[I]===Mt){h=I;break}if(Pe.removeChild(Mt),l){var S=p({},E.findData(s,"index",l)),g=document.createElement("div");(P=document.createElement("div")).classList.add("popUpskillImgContainer");var T=document.createElement("img");g.setAttribute("skillIndex",l);(O=document.createElement("img")).classList.add("disable"),g.appendChild(O),g.classList.add("popUpSkillContainerItem"),T.src=o;var _=p({},E.findData(a,"index",S.skillIcon));T.style.clip=E.makeCssClipStyle(_,85/72),E.setImgCssStyle(T,_,85/72),P.appendChild(T),g.appendChild(P),Pe.insertBefore(g,Pe.childNodes[h]),g.onclick=Ut.bind(this,g,f.SKILL_CHANGE_PANEL_CONTAINER)}for(;e.firstChild;)e.removeChild(e.firstChild);r=ti(n),L.splice(n,1),A.splice(n,1),L.splice(n,0,Ft);var C=p({},E.findData(s,"index",Ft));A.splice(n,0,C);(P=document.createElement("div")).classList.add("popUpskillImgContainer");(T=document.createElement("img")).src=o;_=p({},E.findData(a,"index",C.skillIcon));T.style.clip=E.makeCssClipStyle(_,85/72),E.setImgCssStyle(T,_,85/72),e.setAttribute("skillIndex",C.index),P.appendChild(T),e.appendChild(P),this.applySkillCooldown(C.index,n)}else if(-1===Nt)this.makeFlashMessage("Can not change character spell!!!");else{for(h=0,I=0;I<Pe.childNodes.length;I++)if(Pe.childNodes[I]===e){h=I;break}if(Pe.removeChild(e),Ft){S=p({},E.findData(s,"index",Ft)),g=document.createElement("div");(P=document.createElement("div")).classList.add("popUpskillImgContainer");T=document.createElement("img");(O=document.createElement("img")).classList.add("disable"),g.appendChild(O),g.setAttribute("skillIndex",Ft),g.classList.add("popUpSkillContainerItem"),T.src=o;_=p({},E.findData(a,"index",S.skillIcon));T.style.clip=E.makeCssClipStyle(_,85/72),E.setImgCssStyle(T,_,85/72),P.appendChild(T),g.appendChild(P),Pe.insertBefore(g,Pe.childNodes[h]),g.onclick=Ut.bind(this,g,f.SKILL_CHANGE_PANEL_CONTAINER)}for(;Mt.firstChild;)Mt.removeChild(Mt.firstChild);r=ti(Nt),L.splice(Nt,1),A.splice(Nt,1),L.splice(Nt,0,l);C=p({},E.findData(s,"index",l));A.splice(Nt,0,C);(P=document.createElement("div")).classList.add("popUpskillImgContainer");(T=document.createElement("img")).src=o;_=p({},E.findData(a,"index",C.skillIcon));T.style.clip=E.makeCssClipStyle(_,85/72),E.setImgCssStyle(T,_,85/72),Mt.setAttribute("skillIndex",C.index),P.appendChild(T),Mt.appendChild(P),this.applySkillCooldown(C.index,Nt)}if(this.onExchangeSkill(m),!i){var D=ii(r);if(C&&S)if(C.type===f.SKILL_TYPE_PASSIVE&&S.type===f.SKILL_TYPE_PASSIVE){var v=p({},E.findData(s,"index",S.index)).buffToSelf,R=p({},E.findData(s,"index",C.index)).buffToSelf;D?si(v)?(ai(v),ni(R),setTimeout(ri.bind(this.onEquipPassive,R),D)):(this.onUnequipPassive(v),ni(R),setTimeout(ri.bind(this.onEquipPassive,R),D)):this.onExchangePassive(v,R)}else if(C.type===f.SKILL_TYPE_PASSIVE){var b=p({},E.findData(s,"index",C.index)).buffToSelf;D?(ni(b),setTimeout(ri.bind(this.onEquipPassive,b),D)):this.onEquipPassive(b)}else S.type===f.SKILL_TYPE_PASSIVE&&(b=p({},E.findData(s,"index",S.index)).buffToSelf,D&&si(b)?ai(b):this.onUnequipPassive(b));else C?C.type===f.SKILL_TYPE_PASSIVE&&(b=p({},E.findData(s,"index",C.index)).buffToSelf,D?(ni(b),setTimeout(ri.bind(this.onEquipPassive,b),D)):this.onEquipPassive(b)):S&&S.type===f.SKILL_TYPE_PASSIVE&&(b=p({},E.findData(s,"index",S.index)).buffToSelf,D&&si(b)?ai(b):this.onUnequipPassive(b))}this.setHUDSkills(),$t(),Ft=null,xt=null,Mt=null,Nt=null}else if(l===Ft){if(t===f.SKILL_CHANGE_PANEL_EQUIP&&-1!==n){var P;C=p({},E.findData(s,"index",Ft)),g=document.createElement("div");(P=document.createElement("div")).classList.add("popUpskillImgContainer");var O;T=document.createElement("img");(O=document.createElement("img")).classList.add("disable"),g.appendChild(O),g.setAttribute("skillIndex",Ft),g.classList.add("popUpSkillContainerItem"),T.src=o;_=p({},E.findData(a,"index",C.skillIcon));for(T.style.clip=E.makeCssClipStyle(_,85/72),E.setImgCssStyle(T,_,85/72),P.appendChild(T),g.appendChild(P),Pe.appendChild(g),g.onclick=Ut.bind(this,g,f.SKILL_CHANGE_PANEL_CONTAINER);Mt.firstChild;)Mt.removeChild(Mt.firstChild),Mt.setAttribute("skillIndex","");if(L[Nt]&&(L.splice(Nt,1),A.splice(Nt,1)),L.splice(Nt,0,void 0),A.splice(Nt,0,void 0),this.updateUnEquipSkillSlotCooldown(Nt),C.type===f.SKILL_TYPE_PASSIVE){b=p({},E.findData(s,"index",C.index)).buffToSelf;(D=ii(r=ti(Nt)))&&si(b)?ai(b):this.onUnequipPassive(b)}}this.setHUDSkills(),$t(),Ft=null,xt=null,Mt=null,Nt=null}else if(Mt===e)Kt();else if(Ft=l||null,xt=t,Mt=e,Nt=n,e.classList.add("selected"),t===f.SKILL_CHANGE_PANEL_CONTAINER)Je.classList.add("equipable"),ze.classList.add("equipable"),We.classList.add("equipable"),qe.classList.add("equipable");else if(t===f.SKILL_CHANGE_PANEL_EQUIP&&-1!==n)for(I=0;I<Pe.children.length;I++)Pe.children[I].classList.add("equipable")}else if(Ft=l||null,xt=t,Mt=e,Nt=n,e.classList.add("selected"),t===f.SKILL_CHANGE_PANEL_CONTAINER)Je.classList.add("equipable"),ze.classList.add("equipable"),We.classList.add("equipable"),qe.classList.add("equipable");else if(t===f.SKILL_CHANGE_PANEL_EQUIP)switch(n){case-1:break;default:for(I=0;I<Pe.children.length;I++)Pe.children[I].classList.add("equipable")}if(this.checkPopUpSkillChange()?(this.setPopUpSkillChange(i),Ft=null,xt=null,Mt=null,Nt=null,Gt(),this.updateSelectedPanel()):this.updateSelectedPanel(Ft),this.checkSkillsConditions(),!Ot){var k=0;for(I=0;I<L.length;I++)L[I]&&k++;k>=2?Ot=!0:L[0]!==f.SKILL_INDEX_PYRO_GIVEN&&L[0]!==f.SKILL_INDEX_FROST_GIVEN&&L[0]!==f.SKILL_INDEX_ARCANE_GIVEN&&(Ot=!0)}}function Ht(e){if(e===startButton)var t=f.START_BUTTON;else e===h&&(t=f.RESTART_BUTTON);this.onStartBtnClick(m,t)}function Xt(e,t,i){switch(this.classList.remove("cooldownMaskAni"),this.style.opacity=0,e){case f.SKILL_BASIC_INDEX:Lt=!0;break;case f.SKILL_EQUIP1_INDEX:At=!0;break;case f.SKILL_EQUIP2_INDEX:Dt=!0;break;case f.SKILL_EQUIP3_INDEX:yt=!0;break;case f.SKILL_EQUIP4_INDEX:vt=!0}for(var s=0;s<Rt.length;s++)if(Rt[s].slot===e){Rt.splice(s,1);break}t()}function Kt(){for(;xe.firstChild;)xe.removeChild(xe.firstChild);for(;Me.firstChild;)Me.removeChild(Me.firstChild);Fe.innerHTML="",we.innerHTML="",Ft=null,Be.onclick=new Function,xt=null,Mt=null,Nt=null,je.classList.add("disable"),Ne.classList.remove("skillUpgradeEffectAni"),Gt()}function Gt(){Ge.classList.remove("selected"),Ve.classList.remove("selected"),Je.classList.remove("selected"),ze.classList.remove("selected"),We.classList.remove("selected"),qe.classList.remove("selected"),Je.classList.remove("equipable"),ze.classList.remove("equipable"),We.classList.remove("equipable"),qe.classList.remove("equipable");for(var e=0;e<Pe.children.length;e++)Pe.children[e].classList.remove("equipable"),Pe.children[e].classList.remove("selected")}function Yt(e){switch(e){case f.SKILL_BASIC_INDEX:if(T)var t=T;break;case f.SKILL_EQUIP1_INDEX:A[0]&&(t=A[0]);break;case f.SKILL_EQUIP2_INDEX:A[1]&&(t=A[1]);break;case f.SKILL_EQUIP3_INDEX:A[2]&&(t=A[2]);break;case f.SKILL_EQUIP4_INDEX:A[3]&&(t=A[3]);break;case f.SKILL_PASSIVE_INDEX:C&&(t=C)}if(t){var i=ei(t).replace(/&nbsp;/g,"<br>"),s=document.createElement("div");s.innerHTML=i,s.classList.add("bottomTooltip");this.parentNode.parentNode.appendChild(s)}}function Jt(){for(var e=this.parentNode.parentNode,t=e.getElementsByClassName("bottomTooltip"),i=0;t.length;i++)e.removeChild(t[i])}function zt(){var e=parseInt(this.getAttribute("skillIndex"));if(e&&E.isNumeric(e)){var t=ei(p({},E.findData(s,"index",e))).replace(/&nbsp;/g,"<br>"),i=document.createElement("div");i.innerHTML=t,i.classList.add("bottomTooltip"),this.appendChild(i)}}function Wt(e,t){var i=document.createElement("div"),s="";switch(e){case f.STAT_POWER_INDEX:s+="Damage Rate <span class='green'>+"+Math.floor(t*f.STAT_CALC_FACTOR_POWER_TO_DAMAGE_RATE*100)/100+"%</span><br>",s+="Max HP <span class='green'>+"+Math.floor(t*f.STAT_CALC_FACTOR_POWER_TO_HP*100)/100+"</span><br>",s+="HP Regen <span class='green'>+"+Math.floor(t*f.STAT_CALC_FACTOR_POWER_TO_HP_REGEN*100)/100+"</span><br>";break;case f.STAT_MAGIC_INDEX:s+="All Resistance <span class='green'>+"+Math.floor(t*f.STAT_CALC_FACTOR_MAGIC_TO_RESISTANCE*100)/100+"%</span><br>",s+="Max MP <span class='green'>+"+Math.floor(t*f.STAT_CALC_FACTOR_MAGIC_TO_MP*100)/100+"</span><br>",s+="MP Regen <span class='green'>+"+Math.floor(t*f.STAT_CALC_FACTOR_MAGIC_TO_MP_REGEN*100)/100+"</span><br>";break;case f.STAT_SPEED_INDEX:s+="Casting Speed <span class='green'>+"+Math.floor(t*f.STAT_CALC_FACTOR_SPEED_TO_CAST_SPEED*100)/100+"%</span><br>",s+="Cooldown Reduce <span class='green'>+"+Math.floor(t*f.STAT_CALC_FACTOR_SPEED_TO_COOLDOWN_REDUCE_RATE*100)/100+"%</span><br>"}i.innerHTML=s,i.classList.add("bottomTooltip"),this.appendChild(i)}function qt(e,t){var i=document.createElement("div"),s="";e===f.STAT_OFFENCE_INDEX?(s+="<p><strong>All Damage <span class='green'>+"+Math.floor(10*(t.damageRate-100))/10+"%</span></strong></p>",s+="<p>Fire Damage <span class='green'>+"+Math.floor(10*(t.fireDamageRate-100))/10+"%</span></p>",s+="<p>Frost Damage <span class='green'>+"+Math.floor(10*(t.frostDamageRate-100))/10+"%</span></p>",s+="<p>Arcane Damage <span class='green'>+"+Math.floor(10*(t.arcaneDamageRate-100))/10+"%</span></p>"):e===f.STAT_DEFENCE_INDEX&&(s+="<p><strong>All Resistance <span class='green'>+"+Math.floor(10*t.resistAll)/10+"%</span></strong></p>",s+="<p>Fire Resistance <span class='green'>+"+Math.floor(10*t.resistFire)/10+"%</span></p>",s+="<p>Frost Resistance <span class='green'>+"+Math.floor(10*t.resistFrost)/10+"%</span></p>",s+="<p>Arcane Resistance <span class='green'>+"+Math.floor(10*t.resistArcane)/10+"%</span></p>"),i.innerHTML=s,i.classList.add("bottomTooltip"),this.appendChild(i)}function Vt(){var e=document.createElement("div"),t=parseInt(this.getAttribute("buffGroupIndex")),i=p({},E.findData(n,"index",t)),s="<h4 class='yellow'>"+i.clientName+"</h4><hr>"+i.clientDesc.replace(/&nbsp;/g,"<br>");e.innerHTML=s,e.classList.add("bottomTooltip"),this.appendChild(e)}function Zt(){for(var e=E.getElementsByClassName(this,"bottomTooltip"),t=0;t<e.length;t++)this.removeChild(e[t])}function Qt(e){this.onSkillIconClick(e)}function $t(){var e=.625,t=p({},E.findData(a,"index",T.skillIcon));tt.getElementsByTagName("img")[0].style.clip=E.makeCssClipStyle(t,e),tt.setAttribute("skillIndex",T.index),E.setImgCssStyle(tt.getElementsByTagName("img")[0],t,e),t=p({},E.findData(a,"index",C.skillIcon)),it.getElementsByTagName("img")[0].style.clip=E.makeCssClipStyle(t,e),it.setAttribute("skillIndex",C.index),E.setImgCssStyle(it.getElementsByTagName("img")[0],t,e),e=55/72,A[0]?(t=p({},E.findData(a,"index",A[0].skillIcon)),st.getElementsByTagName("img")[0].style.clip=E.makeCssClipStyle(t,e),st.setAttribute("skillIndex",A[0].index),E.setImgCssStyle(st.getElementsByTagName("img")[0],t,e)):(st.getElementsByTagName("img")[0].style.clip=E.makeCssClipStyle(l,e),st.setAttribute("skillIndex",0),E.setImgCssStyle(st.getElementsByTagName("img")[0],l,e)),A[1]?(t=p({},E.findData(a,"index",A[1].skillIcon)),nt.getElementsByTagName("img")[0].style.clip=E.makeCssClipStyle(t,e),nt.setAttribute("skillIndex",A[1].index),E.setImgCssStyle(nt.getElementsByTagName("img")[0],t,e)):(nt.getElementsByTagName("img")[0].style.clip=E.makeCssClipStyle(l,e),nt.setAttribute("skillIndex",0),E.setImgCssStyle(nt.getElementsByTagName("img")[0],l,e)),A[2]?(t=p({},E.findData(a,"index",A[2].skillIcon)),at.getElementsByTagName("img")[0].style.clip=E.makeCssClipStyle(t,e),at.setAttribute("skillIndex",A[2].index),E.setImgCssStyle(at.getElementsByTagName("img")[0],t,e)):(at.getElementsByTagName("img")[0].style.clip=E.makeCssClipStyle(l,e),at.setAttribute("skillIndex",0),E.setImgCssStyle(at.getElementsByTagName("img")[0],l,e)),A[3]?(t=p({},E.findData(a,"index",A[3].skillIcon)),rt.getElementsByTagName("img")[0].style.clip=E.makeCssClipStyle(t,e),rt.setAttribute("skillIndex",A[3].index),E.setImgCssStyle(rt.getElementsByTagName("img")[0],t,e)):(rt.getElementsByTagName("img")[0].style.clip=E.makeCssClipStyle(l,e),rt.setAttribute("skillIndex",0),E.setImgCssStyle(rt.getElementsByTagName("img")[0],l,e))}function ei(e){var t="",i="white";switch(e.property){case f.SKILL_PROPERTY_FIRE:i="red";break;case f.SKILL_PROPERTY_FROST:i="blue";break;case f.SKILL_PROPERTY_ARCANE:i="purple"}if(t+="<h4 class='"+i+"'><span class='yellow'>Lv "+e.level+"</span> "+e.clientName+"</h4><hr>",t+="<div class='tierLavel'><span class='green'>Tier : </span>"+e.tier+"</span></div>",e.type!==f.SKILL_TYPE_PASSIVE){switch(t+="<div class='titleLabel'><span class='green'>Active</span></div>",e.type){case f.SKILL_TYPE_INSTANT_RANGE:e.fireDamage+e.frostDamage+e.arcaneDamage?(t+="<div><span class='yellow'>Damage : </span><span class='"+i+"'>"+(e.fireDamage+e.frostDamage+e.arcaneDamage)+"</span></div>",t+="<div><span class='yellow'>Range : </span>"+e.explosionRadius+"</div>"):t+="<div><span class='yellow'>Range : </span>"+e.explosionRadius+"</div>";break;case f.SKILL_TYPE_INSTANT_PROJECTILE:case f.SKILL_TYPE_PROJECTILE:t+="<div><span class='yellow'>Damage : </span><span class='"+i+"'>"+(e.fireDamage+e.frostDamage+e.arcaneDamage)+"</span></div>",t+="<div><span class='yellow'>Radius : </span>"+e.radius+"</div>";break;case f.SKILL_TYPE_PROJECTILE_EXPLOSION:t+="<div><span class='yellow'>Damage : </span><span class='"+i+"'>"+(e.fireDamage+e.frostDamage+e.arcaneDamage)+"</span></div>",t+="<div><span class='yellow'>Range : </span>"+e.explosionRadius+"</div>";break;case f.SKILL_TYPE_PROJECTILE_TICK:case f.SKILL_TYPE_PROJECTILE_TICK_EXPLOSION:t+="<div><span class='yellow'>Damage : </span><span class='"+i+"'>"+(e.fireDamage+e.frostDamage+e.arcaneDamage)+"</span></div>",t+="<div><span class='yellow'>Radius : </span>"+e.radius+"</div>";break;case f.SKILL_TYPE_RANGE:t+="<div><span class='yellow'>Damage : </span><span class='"+i+"'>"+(e.fireDamage+e.frostDamage+e.arcaneDamage)+"</span></div>",t+="<div><span class='yellow'>Range : </span>"+e.explosionRadius+"</div>";break;case f.SKILL_TYPE_SELF:var s=p({},E.findData(n,"index",e.buffToSelf)),a=Math.floor(10*s.buffLifeTime)/1e4;isNaN(a)||a<=.1||(t+="<div><span class='yellow'>Buff Duration : </span>"+a+"(s)</div>",t+="<div></div>");break;case f.SKILL_TYPE_SELF_EXPLOSION:t+="<div><span class='yellow'>Damage : </span><span class='"+i+"'>"+(e.fireDamage+e.frostDamage+e.arcaneDamage)+"</span></div>",t+="<div><span class='yellow'>Range : </span>"+e.explosionRadius+"</div>";break;case f.SKILL_TYPE_TELEPORT:t+="<div><span class='yellow'>Range : </span>"+e.range+"</div>",t+="<div></div>"}t+="<div><span class='yellow'>MP Cost : </span>"+e.consumeMP+"</div>";t+="<div><span class='yellow'>Cooldown : </span>"+Math.floor(10*e.cooldown)/1e4+"(s)</div>",t+="<hr>"}else t+="<div class='titleLabel'><span class='green'>Passive</span></div>",t+="<div></div><div></div><hr>";return t+="<p>"+e.clientDesc+"</p>"}function ti(e){switch(e){case 0:return f.SKILL_EQUIP1_INDEX;case 1:return f.SKILL_EQUIP2_INDEX;case 2:return f.SKILL_EQUIP3_INDEX;case 3:return f.SKILL_EQUIP4_INDEX}}function ii(e){for(var t=0,i=0;i<Rt.length;i++)if(e===Rt[i].slot){var s=Date.now()-Rt[i].startTime;t=1e3*Rt[i].cooldownTime-s;break}return t}function si(e){for(var t=0;t<bt.length;t++)if(bt[t]===e)return!0;return!1}function ni(e){for(var t=bt.length-1;t>=0;t--)bt[t]===e&&bt.splice(t,1);bt.push(e)}function ai(e){var t=bt.indexOf(e);-1!==t&&bt.splice(t,1)}function ri(e){for(var t=bt.length-1;t>=0;t--)if(bt[t]===e){bt.splice(t,1),this(e);break}}function oi(){kt||(kt=!0,ke.classList.add("disable"),Ke.classList.add("disable"),setTimeout(function(){Ot?li():Pe.classList.add("skillEquipTutorialHighlight")},200),setTimeout(function(){Ot?li():(He.classList.add("disable"),Ue.classList.remove("disable"),Ue.classList.add("skillEquipTutorialAni"))},500),setTimeout(function(){Ot?li():(Ue.classList.add("disable"),Xe.classList.remove("disable"),Xe.classList.add("skillEquipTutorialAni"),Xe.style.animationIterationCount=1),Pe.classList.remove("skillEquipTutorialHighlight")},2500),setTimeout(function(){Ot?li():Ye.classList.add("skillEquipTutorialHighlight")},3500),setTimeout(function(){Ot?li():(He.classList.remove("disable"),Xe.classList.add("disable"),He.classList.add("skillEquipTutorialAni"))},3800),setTimeout(function(){Ye.classList.remove("skillEquipTutorialHighlight"),kt=!1,li(),Ot||(He.classList.add("disable"),oi())},5800))}function li(){ke.classList.remove("disable"),Ke.classList.remove("disable"),Pe.classList.remove("skillEquipTutorialHighlight"),Ye.classList.remove("skillEquipTutorialHighlight"),Ue.classList.add("disable"),He.classList.add("disable"),Xe.classList.add("disable")}t.exports=Bt},{"../../modules/public/objectAssign.js":9,"../public/gameConfig.json":8,"../public/util.js":11}],5:[function(e,t,i){var s=e("../public/util.js"),n=e("./CSkill.js"),a=e("../public/gameConfig.json"),r=1e3/a.INTERVAL,o=function(e){this.objectID=e.objectID,this.type=e.type,this.imgData=e.imgData,this.hitImgDataList=[],this.buffImgDataList=[],this.imgHandIndex=0,this.level=e.level,this.exp=e.exp,this.maxHP=e.maxHP,this.maxMP=e.maxMP,this.HP=e.HP,this.MP=e.MP,this.castSpeed=e.castSpeed,this.conditions=e.conditions,this.currentState=null,this.currentSkill=void 0,this.isExecutedSkill=!1,this.skillCastEffectPlay=!1,this.castEffectFactor=1,this.effectTimer=Date.now(),this.effectRotateDegree=0,this.effectIndex=0,this.size=e.size,this.position=e.position,this.targetPosition=e.targetPosition,this.direction=e.direction,this.rotateSpeed=e.rotateSpeed,this.maxSpeed=e.maxSpeed,this.center={x:0,y:0},this.speed={x:0,y:0},this.targetDirection=0,this.timer=Date.now(),this.castingEndTime=!1,this.setCenter(),this.setSpeed(),this.setTargetDirection(),this.chatMessage="",this.updateInterval=!1,this.imgHandTimeout=!1,this.chatMessageTimeout=!1,this.updateFunction=null,this.entityTreeEle={x:this.position.x,y:this.position.y,width:this.size.width,height:this.size.height,id:this.objectID},this.onMove=new Function,this.onMainUserMove=new Function};o.prototype={changeState:function(e){switch(this.currentState=e,this.stop(),this.currentState){case a.OBJECT_STATE_IDLE:this.updateFunction=this.idle.bind(this);break;case a.OBJECT_STATE_MOVE:this.updateFunction=this.rotate.bind(this);break;case a.OBJECT_STATE_ATTACK:this.updateFunction=this.attack.bind(this);break;case a.OBJECT_STATE_CAST:this.updateFunction=this.rotate.bind(this);break;case a.OBJECT_STATE_DEATH:this.updateFunction=this.idle.bind(this);break;case a.OBJECT_STATE_MOVE_AND_ATTACK:this.updateFunction=this.rotate.bind(this)}this.update()},update:function(){this.updateInterval=setInterval(this.updateFunction,r)},setCenter:function(){this.center.x=this.position.x+this.size.width/2,this.center.y=this.position.y+this.size.height/2},idle:function(){this.doEveryTick()},rotate:function(){var e=(Date.now()-this.timer)/1e3;s.rotate.call(this,e),this.doEveryTick()},move:function(e,t){t?s.move.call(this,e,t):s.move.call(this,e),this.onMainUserMove()},setTargetDirection:function(e){s.setTargetDirection.call(this,e)},setSpeed:function(e){s.setSpeed.call(this,e)},moveOffset:function(){s.moveOffset.call(this)},attack:function(){this.executeSkill(),this.doEveryTick()},doEveryTick:function(){this.timer=Date.now(),Date.now()-this.effectTimer>=a.USER_ATTACH_EFFECT_CHANGE_TIME&&(this.effectTimer=Date.now(),this.effectRotateDegree+=10,this.effectIndex>100?this.effectIndex=0:this.effectIndex+=1);for(var e=this.hitImgDataList.length-1;e>=0;e--)Date.now()-this.hitImgDataList[e].startTime>=this.hitImgDataList[e].resourceLifeTime&&this.hitImgDataList.splice(e,1)},updateBuffImgData:function(e){this.buffImgDataList=[];for(var t=0;t<e.length;t++)this.buffImgDataList.push(e[t])},updateSkillHitImgData:function(e){e.startTime=Date.now(),this.hitImgDataList.push(e)},addPosAndTargetPos:function(e,t){this.position.x+=e,this.position.y+=t,this.targetPosition.x+=e,this.targetPosition.y+=t,this.setCenter()},stop:function(){this.updateInterval&&(clearInterval(this.updateInterval),this.updateInterval=!1),this.currentSkill&&(this.currentSkill.destroy(),this.currentSkill=void 0,this.isExecutedSkill=!1,this.skillCastEffectPlay=!1),this.imgHandTimeout&&(clearTimeout(this.imgHandTimeout),this.imgHandTimeout=!1),this.imgHandIndex=0,this.castingEndTime=!1},setEntityEle:function(){this.entityTreeEle={x:this.position.x,y:this.position.y,width:this.size.width,height:this.size.height,id:this.objectID}},makeSkillInstance:function(e){var t=Math.floor(a.USER_ANI_TIME*(100/this.castSpeed)),i=new n(e,e.fireTime-t);return i.onUserAniStart=function(e,t){var i=t/5;this.castingEndTime=Date.now()+t,this.imgHandTimeout=setTimeout(function e(t){this.imgHandIndex<4?(this.imgHandIndex++,this.imgHandTimeout=setTimeout(e.bind(this,t),t)):(this.imgHandIndex=0,this.castingEndTime=!1)}.bind(this,i),i)}.bind(this,i,t),i.onTimeOver=function(e){e.destroy(),this.currentSkill=void 0,this.isExecutedSkill=!1,this.skillCastEffectPlay=!1,this.changeState(a.OBJECT_STATE_IDLE)}.bind(this,i),i},setSkill:function(e){this.currentSkill=e},executeSkill:function(){this.isExecutedSkill||(this.skillCastEffectPlay=!0,this.skillCastEffectStartTime=Date.now(),this.isExecutedSkill=!0,this.currentSkill.executeSkill()),this.setCastEffectFactor()},setCastEffectFactor:function(){var e=Date.now()-this.skillCastEffectStartTime;this.castEffectFactor=s.interpolationSine(e)},updateSkillPossessions:function(e){this.possessSkills=e},makeProjectile:function(e,t,i){return t.makeProjectile(this.center,e,i)},changePosition:function(e){this.position.x=e.x-this.size.width/2,this.position.y=e.y-this.size.height/2,this.setCenter()},setChatMsg:function(e){this.chatMessageTimeout&&(clearTimeout(this.chatMessageTimeout),this.chatMessageTimeout=!1),this.chatMessage=e;var t=this;this.chatMessageTimeout=setTimeout(function(){t.chatMessageTimeout=!1,t.chatMessage=""},a.CHAT_MESSAGE_TIME)}};t.exports=o},{"../public/gameConfig.json":8,"../public/util.js":11,"./CSkill.js":3}],6:[function(e,t,i){t.exports={toObject:function(e,t){var i=(t=t||{}).delimiter||",",n=s(t.quote),a=e,r=null;if("string"!=typeof a)throw new Error("Invalid input, input data should be a string");a=a.split(/[\n\r]+/gi),"string"==typeof t.headers?(r=t.headers.split(/[\n\r]+/gi),r=n?l(r.shift(),i,n):r.shift().split(i)):r=n?l(a.shift(),i,n):a.shift().split(i);var c=[];return a.forEach(function(e){if(e){e=n?l(e,i,n):e.split(i);var t={};r.forEach(function(i,s){var n=o(e[s]);parseInt(n)||0===parseInt(n)?t[i]=parseInt(n):parseFloat(n)?t[i]=parseFloat(n):t[i]=n}),c.push(t)}}),c},toArray:function(e,t){var i=(t=t||{}).delimiter||",",n=s(t.quote),a=e;if("string"!=typeof a)throw new Error("Invalid input, input data should be a string");var r=[];return(a=a.split(/[\n\r]+/gi)).forEach(function(e){e&&(e=(e=n?l(e,i,n):e.split(i)).map(function(e){return o(e)}),r.push(e))}),r},toColumnArray:function(e,t){var i=(t=t||{}).delimiter||",",n=s(t.quote),a=e,r=null;if("string"!=typeof a)throw new Error("Invalid input, input data should be a string");a=a.split(/[\n\r]+/gi),"string"==typeof t.headers?(r=t.headers.split(/[\n\r]+/gi),r=n?l(r.shift(),i,n):r.shift().split(i)):r=n?l(a.shift(),i,n):a.shift().split(i);var c={};return r.forEach(function(e){c[e]=[]}),a.forEach(function(e){e&&(e=n?l(e,i,n):e.split(i)).forEach(function(e,t){c[r[t]].push(o(e))})}),c},toSchemaObject:function(e,t){var i=(t=t||{}).delimiter||",",n=s(t.quote),a=e,r=null;if("string"!=typeof a)throw new Error("Invalid input, input should be a string");a=a.split(/[\n\r]+/gi),"string"==typeof t.headers?(r=t.headers.split(/[\n\r]+/gi),r=n?l(r.shift(),i,n):r.shift().split(i)):r=n?l(a.shift(),i,n):a.shift().split(i);var c=[];return a.forEach(function(e){if(e){var t={};(e=n?l(e,i,n):e.split(i)).forEach(function(e,s){!function e(t,i,s,n,a){var r,c,d=t.match(/\[*[\d]\]\.(\w+)|\.|\[\]|\[(.)\]|-|\+/gi);if(d){var u=d[0];if(-1!==d.indexOf("-"))return!0;if(-1!==d.indexOf(".")){var h=t.split(".");c=h.shift(),s[c]=s[c]||{},e(h.join("."),i,s[c],n,a)}else if(-1!==d.indexOf("[]"))r=t.replace(/\[\]/gi,""),s[r]||(s[r]=[]),s[r].push(i);else if(/\[*[\d]\]\.(\w+)/.test(u)){r=t.split("[").shift();var E=parseInt(u.match(/\[(.)\]/).pop(),10);c=t.split(".").pop(),s[r]=s[r]||[],s[r][E]=s[r][E]||{},s[r][E][c]=i}else if(/\[(.)\]/.test(u)){var n=u.match(/\[(.)\]/).pop();r=t.replace(/\[(.)\]/gi,""),s[r]=l(i,n,a)}else-1!==d.indexOf("+")&&(r=t.replace(/\+/gi,""),s[r]=Number(i))}else s[t]=o(i);return s}(r[s],e,t,i,n)}),c.push(t)}}),c},toCSV:function(e,t){(t=t||{}).delimiter=t.delimiter||",",t.wrap=t.wrap||"",t.arrayDenote=t.arrayDenote&&String(t.arrayDenote).trim()?t.arrayDenote:"[]",t.objectDenote=t.objectDenote&&String(t.objectDenote).trim()?t.objectDenote:".",t.detailedOutput="boolean"!=typeof t.detailedOutput||t.detailedOutput,t.headers=String(t.headers).toLowerCase();var i={},s="";t.headers.match(/none|full|relative|key/)?t.headers=t.headers.match(/none|full|relative|key/)[0]:t.headers="full";!0===t.wrap&&(t.wrap='"');"string"==typeof e&&(e=JSON.parse(e));a(e,i,"",0,t);var n=function(e,t,i){var s=/([^\[\]\.]+)$/,n=/\[\]\.?([^\[\]]+)$/;switch(e){case"none":return null;case"full":return Object.keys(t);case"key":return Object.keys(t).map(function(e){var t=e.match(s);return t&&2===t.length?t[1]:e});case"relative":return Object.keys(t).map(function(e){var t=e.match(n);return t&&2===t.length?t[1]:e})}}(t.headers,i);n&&(t.wrap&&(n=n.map(function(e){return t.wrap+e+t.wrap})),s=n.join(t.delimiter));var r=function(e){var t=0;return Object.keys(e).forEach(function(i){Array.isArray(e[i])&&e[i].length>t&&(t=e[i].length)}),t}(i),o=Object.keys(i),l=[],c=/\n|\r/g;t.wrap||(c=new RegExp("\n|\r|"+t.delimiter,"g"));for(var d=0;d<r;d++){l=[];for(var u=0;u<o.length;u++)i[o[u]][d]?(i[o[u]][d]=i[o[u]][d].replace(c,"\t"),t.wrap&&(i[o[u]][d]=t.wrap+i[o[u]][d]+t.wrap),l[l.length]=i[o[u]][d]):l[l.length]="";s+="\n"+l.join(t.delimiter)}return s}};function s(e){return"string"==typeof e?e:!0===e?'"':null}function n(e){if(null===e)return"null";if(e&&(1===e.nodeType||9===e.nodeType))return"element";var t=Object.prototype.toString.call(e).match(/\[object (.*?)\]/)[1].toLowerCase();if("number"===t){if(isNaN(e))return"nan";if(!isFinite(e))return"infinity"}return t}function a(e,t,i,s,o){return"undefined"===n(e)?r("",t,i,s,o):"null"===n(e)?r("null",t,i,s,o):Array.isArray(e)?function(e,t,i,s,o){if(l=e,l.every(function(e){var t=n(e);return!t.match(/array|object/)}))return r(e.join(";"),t,i+o.arrayDenote,s,o);var l;e.forEach(function(e,s){return a(e,t,i+o.arrayDenote,s,o)})}(e,t,i,s,o):"object"==typeof e?(l=e,c=t,d=i,u=s,h=o,void Object.keys(l).forEach(function(e){return a(l[e],c,d+h.objectDenote+e,u,h)})):r(String(e),t,i,s,o);var l,c,d,u,h}function r(e,t,i,s,n){return t&&t[i]||(t[i]=[]),s<t[i].length&&(s=t[i].length),t[i][s]=e,t}function o(e){return e?String(e).trim().replace(/^["|'](.*)["|']$/,"$1"):""}function l(e,t,i){if(i&&-1!==e.indexOf(i))return function(e,t,i){t=t||",",i=i||'"';var s=new RegExp("(?!\\s*$)\\s*(?:"+i+"([^"+i+"\\\\]*(?:\\\\[\\S\\s][^"+i+"\\\\]*)*)"+i+"|([^"+t+i+"\\s\\\\]*(?:\\s+[^"+t+i+"\\s\\\\]+)*))\\s*(?:"+t+"|$)","g"),n=[];e.replace(s,function(e,t,i){return void 0!==t?n.push(t.replace(/\\'/g,"'")):void 0!==i&&n.push(i),""}),/,\s*$/.test(e)&&n.push("");return n}(e,t,i);var s=[];return e.split(t).forEach(function(e){var t=e.trim();s.push(t)}),s}},{}],7:[function(e,t,i){t.exports={userStatData:"index,level,needExp,type,power,magic,speed,imgData\n1,1,150,1,22,14,19,1\n2,2,225,1,24,15,21,1\n3,3,300,1,27,17,23,1\n4,4,375,1,29,18,25,1\n5,5,450,1,32,20,27,1\n6,6,525,1,34,21,29,2\n7,7,600,1,37,23,31,2\n8,8,675,1,39,24,33,2\n9,9,750,1,42,26,35,2\n10,10,825,1,44,27,37,2\n11,11,900,1,47,29,39,3\n12,12,1000,1,49,30,41,3\n13,13,1100,1,52,32,43,3\n14,14,1200,1,54,33,45,3\n15,15,1300,1,57,35,47,3\n16,16,1450,1,59,36,49,4\n17,17,1550,1,62,38,51,4\n18,18,1750,1,64,39,53,4\n19,19,1850,1,67,41,55,4\n20,20,-1,1,69,42,57,5\n101,1,150,2,17,21,17,6\n102,2,225,2,19,23,18,6\n103,3,300,2,21,26,20,6\n104,4,375,2,23,28,21,6\n105,5,450,2,25,31,23,6\n106,6,525,2,27,33,24,7\n107,7,600,2,29,36,26,7\n108,8,675,2,31,38,27,7\n109,9,750,2,33,41,29,7\n110,10,825,2,35,43,30,7\n111,11,900,2,37,46,32,8\n112,12,1000,2,39,48,33,8\n113,13,1100,2,41,51,35,8\n114,14,1200,2,43,53,36,8\n115,15,1300,2,45,56,38,8\n116,16,1450,2,47,58,39,9\n117,17,1550,2,49,61,41,9\n118,18,1750,2,51,63,42,9\n119,19,1850,2,53,66,44,9\n120,20,-1,2,55,68,45,10\n201,1,150,3,18,15,22,11\n202,2,225,3,20,16,24,11\n203,3,300,3,22,18,27,11\n204,4,375,3,24,19,29,11\n205,5,450,3,26,21,32,11\n206,6,525,3,28,22,34,12\n207,7,600,3,30,24,37,12\n208,8,675,3,32,25,39,12\n209,9,750,3,34,27,42,12\n210,10,825,3,36,28,44,12\n211,11,900,3,38,30,47,13\n212,12,1000,3,40,31,49,13\n213,13,1100,3,42,33,52,13\n214,14,1200,3,44,34,54,13\n215,15,1300,3,46,36,57,13\n216,16,1450,3,48,37,59,14\n217,17,1550,3,50,39,62,14\n218,18,1750,3,52,40,64,14\n219,19,1850,3,54,42,67,14\n220,20,-1,3,56,43,69,15\n",skillData:"index,name,level,type,property,tier,groupIndex,nextSkillIndex,totalTime,fireTime,cooldown,range,explosionRadius,explosionDamageRate,consumeMP,fireDamage,frostDamage,arcaneDamage,doDamageToMP,damageToMPRate,doDamageToSelf,damageToSelfRate,healHP,healHPRate,healMP,healMPRate,repeatLifeTime,repeatTime,buffToSelf,buffToTarget,projectileCount,radius,maxSpeed,lifeTime,tickTime,upgradeGoldAmount,upgradeJewelAmount,clientName,clientDesc,effectLastTime,skillIcon,hitEffectGroup,explosionEffectGroup,projectileEffectGroup,exchangeToGold,exchangeToJewel\n11,PyroBaseAttack1,1,1,1,1,10,12,800,500,150,80,40,0,0,125,0,0,0,0,0,0,0,0,0,0,0,0,,1,0,0,0,0,0,300,0,Pyro Attack,화염 기본 공격,300,1,6,,,200,\n12,PyroBaseAttack2,2,1,1,1,10,13,800,500,150,80,42,0,0,150,0,0,0,0,0,0,0,0,0,0,0,0,,1,0,0,0,0,0,600,0,Pyro Attack,화염 기본 공격,300,1,6,,,200,\n13,PyroBaseAttack3,3,1,1,1,10,14,800,500,150,80,45,0,0,175,0,0,0,0,0,0,0,0,0,0,0,0,,1,0,0,0,0,0,1200,1,Pyro Attack,화염 기본 공격,300,1,6,,,200,\n14,PyroBaseAttack4,4,1,1,1,10,15,800,500,150,80,47,0,0,200,0,0,0,0,0,0,0,0,0,0,0,0,,1,0,0,0,0,0,2100,3,Pyro Attack,화염 기본 공격,300,1,6,,,200,\n15,PyroBaseAttack5,5,1,1,1,10,-1,800,500,150,80,50,0,0,225,0,0,0,0,0,0,0,0,0,0,0,0,,1,0,0,0,0,0,0,0,Pyro Attack,화염 기본 공격,300,1,6,,,200,\n21,FireBolt1,1,3,1,1,20,22,800,500,1500,0,0,0,40,150,0,0,0,0,0,0,0,0,0,0,0,0,,1,1,25,550,2000,0,300,0,Fire Bolt,파이어 볼트,0,2,6,,,200,\n22,FireBolt2,2,3,1,1,20,23,800,500,1500,0,0,0,50,175,0,0,0,0,0,0,0,0,0,0,0,0,,1,1,25,550,2000,0,600,0,Fire Bolt,파이어 볼트,0,2,6,,,200,\n23,FireBolt3,3,3,1,1,20,24,800,500,2000,0,0,0,60,175,0,0,0,0,0,0,0,0,0,0,0,0,,1,2,25,550,2000,0,1200,1,Fire Bolt,파이어 볼트,0,2,6,,,200,\n24,FireBolt4,4,3,1,1,20,25,800,500,2000,0,0,0,70,200,0,0,0,0,0,0,0,0,0,0,0,0,,1,2,25,550,2000,0,2100,3,Fire Bolt,파이어 볼트,0,2,6,,,200,\n25,FireBolt5,5,3,1,1,20,-1,800,500,2500,0,0,0,80,225,0,0,0,0,0,0,0,0,0,0,0,0,,1,3,25,550,2000,0,0,0,Fire Bolt,파이어 볼트,0,2,6,,,200,\n31,BurningSoul1,1,11,1,1,30,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,,0,0,0,0,0,300,0,Burning Soul,초당 체력 회복 + 4,0,3,,,,200,\n32,BurningSoul2,2,11,1,1,30,33,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,,0,0,0,0,0,600,0,Burning Soul,초당 체력 회복 + 6,0,3,,,,200,\n33,BurningSoul3,3,11,1,1,30,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,,0,0,0,0,0,1200,1,Burning Soul,초당 체력 회복 + 8,0,3,,,,200,\n34,BurningSoul4,4,11,1,1,30,35,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,,0,0,0,0,0,2100,3,Burning Soul,초당 체력 회복 + 10,0,3,,,,200,\n35,BurningSoul5,5,11,1,1,30,-1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,,0,0,0,0,0,0,0,Burning Soul,초당 체력 회복 + 12,0,3,,,,200,\n41,FireBall1,1,4,1,2,40,42,1500,1000,10000,0,110,0,100,260,0,0,0,0,0,0,0,0,0,0,0,0,,1,1,30,500,2000,0,500,0,Fire Ball,충돌하면 폭발하는 구체를 발사,300,4,6,,,400,\n42,FireBall2,2,4,1,2,40,43,1500,1000,10000,0,115,0,120,320,0,0,0,0,0,0,0,0,0,0,0,0,,1,1,30,500,2000,0,1000,0,Fire Ball,충돌하면 폭발하는 구체를 발사,300,4,6,,,400,\n43,FireBall3,3,4,1,2,40,44,1500,1000,10000,0,120,0,140,380,0,0,0,0,0,0,0,0,0,0,0,0,,1,1,30,500,2000,0,2000,3,Fire Ball,충돌하면 폭발하는 구체를 발사,300,4,6,,,400,\n44,FireBall4,4,4,1,2,40,45,1500,1000,10000,0,125,0,160,440,0,0,0,0,0,0,0,0,0,0,0,0,,1,1,30,500,2000,0,3500,5,Fire Ball,충돌하면 폭발하는 구체를 발사,300,4,6,,,400,\n45,FireBall5,5,4,1,2,40,-1,1500,1000,10000,0,130,0,180,500,0,0,0,0,0,0,0,0,0,0,0,0,,1,1,30,500,2000,0,0,0,Fire Ball,충돌하면 폭발하는 구체를 발사,300,4,6,,,400,\n51,InnerFire1,1,8,1,2,50,52,800,500,30000,0,0,0,100,0,0,0,0,0,1,100,0,0,0,0,0,0,7,22,0,0,0,0,0,500,0,Inner Fire,자신을 ignite 상태로 만들며 공격력을 14% 증가 시킨다.,0,5,,,,400,\n52,InnerFire2,2,8,1,2,50,53,800,500,30000,0,0,0,120,0,0,0,0,0,1,100,0,0,0,0,0,0,8,22,0,0,0,0,0,1000,0,Inner Fire,자신을 ignite 상태로 만들며 공격력을 18% 증가 시킨다.,0,5,,,,400,\n53,InnerFire3,3,8,1,2,50,54,800,500,30000,0,0,0,140,0,0,0,0,0,1,100,0,0,0,0,0,0,9,22,0,0,0,0,0,2000,3,Inner Fire,자신을 ignite 상태로 만들며 공격력을 22% 증가 시킨다.,0,5,,,,400,\n54,InnerFire4,4,8,1,2,50,55,800,500,30000,0,0,0,160,0,0,0,0,0,1,100,0,0,0,0,0,0,10,22,0,0,0,0,0,3500,5,Inner Fire,자신을 ignite 상태로 만들며 공격력을 26% 증가 시킨다.,0,5,,,,400,\n55,InnerFire5,5,8,1,2,50,-1,800,500,30000,0,0,0,180,0,0,0,0,0,1,100,0,0,0,0,0,0,11,22,0,0,0,0,0,0,0,Inner Fire,자신을 ignite 상태로 만들며 공격력을 30% 증가 시킨다.,0,5,,,,400,\n61,RollingFire1,1,5,1,3,60,62,1500,1000,15000,0,0,0,130,62,0,0,0,0,0,0,0,0,0,0,0,0,,1,1,51,280,3000,60,700,0,Rolling Fire,매 틱(0.1초)당 30의 데미지를 가하는 구체를 발사,0,6,6,,1007,,1\n62,RollingFire2,2,5,1,3,60,63,1500,1000,15000,0,0,0,160,74,0,0,0,0,0,0,0,0,0,0,0,0,,1,1,52,280,3000,60,1400,2,Rolling Fire,매 틱(0.1초)당 32의 데미지를 가하는 구체를 발사,0,6,6,,1007,,1\n63,RollingFire3,3,5,1,3,60,64,1500,1000,15000,0,0,0,190,86,0,0,0,0,0,0,0,0,0,0,0,0,,1,1,53,280,3000,60,2800,4,Rolling Fire,매 틱(0.1초)당 33의 데미지를 가하는 구체를 발사,0,6,6,,1007,,1\n64,RollingFire4,4,5,1,3,60,65,1500,1000,15000,0,0,0,220,98,0,0,0,0,0,0,0,0,0,0,0,0,,1,1,54,280,3000,60,4900,7,Rolling Fire,매 틱(0.1초)당 34의 데미지를 가하는 구체를 발사,0,6,6,,1007,,1\n65,RollingFire5,5,5,1,3,60,-1,1500,1000,15000,0,0,0,250,110,0,0,0,0,0,0,0,0,0,0,0,0,,1,1,55,280,3000,60,0,0,Rolling Fire,매 틱(0.1초)당 35의 데미지를 가하는 구체를 발사,0,6,6,,1007,,1\n71,Fury1,1,11,1,3,70,72,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,,0,0,0,0,0,700,0,Fury,이동 속도와 캐스팅 속도 7% 증가. 자신이 ignite 상태일 경우 추가로 7%증가,0,7,,,,,1\n72,Fury2,2,11,1,3,70,73,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,13,,0,0,0,0,0,1400,2,Fury,이동 속도와 캐스팅 속도 9% 증가. 자신이 ignite 상태일 경우 추가로 9%증가,0,7,,,,,1\n73,Fury3,3,11,1,3,70,74,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,14,,0,0,0,0,0,2800,4,Fury,이동 속도와 캐스팅 속도 11% 증가. 자신이 ignite 상태일 경우 추가로 11%증가,0,7,,,,,1\n74,Fury4,4,11,1,3,70,75,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,15,,0,0,0,0,0,4900,7,Fury,이동 속도와 캐스팅 속도 13% 증가. 자신이 ignite 상태일 경우 추가로 13%증가,0,7,,,,,1\n75,Fury5,5,11,1,3,70,-1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16,,0,0,0,0,0,0,0,Fury,이동 속도와 캐스팅 속도 15% 증가. 자신이 ignite 상태일 경우 추가로 15%증가,0,7,,,,,1\n81,Explosion1,1,9,1,4,80,82,1500,1300,20000,0,260,0,130,300,0,0,0,0,1,60,0,0,0,0,0,0,,22,0,0,0,0,0,900,0,Explosion,자신과 주변에 광역 데미지 100%확률로 ignite 시킴,300,8,6,,,,2\n82,Explosion2,2,9,1,4,80,83,1500,1300,20000,0,270,0,160,375,0,0,0,0,1,55,0,0,0,0,0,0,,22,0,0,0,0,0,1800,3,Explosion,자신과 주변에 광역 데미지 100%확률로 ignite 시킴,300,8,6,,,,2\n83,Explosion3,3,9,1,4,80,84,1500,1300,20000,0,280,0,190,450,0,0,0,0,1,50,0,0,0,0,0,0,,22,0,0,0,0,0,3600,6,Explosion,자신과 주변에 광역 데미지 100%확률로 ignite 시킴,300,8,6,,,,2\n84,Explosion4,4,9,1,4,80,85,1500,1300,20000,0,290,0,220,525,0,0,0,0,1,45,0,0,0,0,0,0,,22,0,0,0,0,0,6300,10,Explosion,자신과 주변에 광역 데미지 100%확률로 ignite 시킴,300,8,6,,,,2\n85,Explosion5,5,9,1,4,80,-1,1500,1300,20000,0,300,0,250,600,0,0,0,0,1,40,0,0,0,0,0,0,,22,0,0,0,0,0,0,0,Explosion,자신과 주변에 광역 데미지 100%확률로 ignite 시킴,300,8,6,,,,2\n91,Pyromaniac1,1,11,1,4,90,92,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,,0,0,0,0,0,900,0,Pyromaniac,◈ Power +5 &nbsp;  ◈ Fire Damage +10%,0,9,,,,,2\n92,Pyromaniac2,2,11,1,4,90,93,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,18,,0,0,0,0,0,1800,3,Pyromaniac,◈ Power +8 &nbsp;  ◈ Fire Damage +14%,0,9,,,,,2\n93,Pyromaniac3,3,11,1,4,90,94,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,19,,0,0,0,0,0,3600,6,Pyromaniac,◈ Power +10 &nbsp;  ◈ Fire Damage +17% &nbsp; ◈ 2% Damage Rate Per 10% Life,0,9,,,,,2\n94,Pyromaniac4,4,11,1,4,90,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,20,,0,0,0,0,0,6300,10,Pyromaniac,◈ Power +13 &nbsp;  ◈ Fire Damage +21% &nbsp; ◈ 3% Damage Rate Per 10% Life,0,9,,,,,2\n95,Pyromaniac5,5,11,1,4,90,-1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,21,,0,0,0,0,0,0,0,Pyromaniac,◈ Power +15 &nbsp;  ◈ Fire Damage +25% &nbsp; ◈ Cast Speed +15% &nbsp; ◈ +4% Damage Rate Per 10% Life,0,9,,,,,2\n1001,FrosterBaseAttack1,1,1,2,1,1000,1002,800,500,150,80,40,0,0,0,100,0,0,0,0,0,0,0,0,0,0,0,,101,0,0,0,0,0,300,0,Froster Attack,냉기 기본 공격,300,101,7,,,200,\n1002,FrosterBaseAttack2,2,1,2,1,1000,1003,800,500,150,80,42,0,0,0,125,0,0,0,0,0,0,0,0,0,0,0,,101,0,0,0,0,0,600,0,Froster Attack,냉기 기본 공격,300,101,7,,,200,\n1003,FrosterBaseAttack3,3,1,2,1,1000,1004,800,500,150,80,45,0,0,0,150,0,0,0,0,0,0,0,0,0,0,0,,101,0,0,0,0,0,1200,1,Froster Attack,냉기 기본 공격,300,101,7,,,200,\n1004,FrosterBaseAttack4,4,1,2,1,1000,1005,800,500,150,80,47,0,0,0,175,0,0,0,0,0,0,0,0,0,0,0,,101,0,0,0,0,0,2100,3,Froster Attack,냉기 기본 공격,300,101,7,,,200,\n1005,FrosterBaseAttack5,5,1,2,1,1000,-1,800,500,150,80,50,0,0,0,200,0,0,0,0,0,0,0,0,0,0,0,,101,0,0,0,0,0,0,0,Froster Attack,냉기 기본 공격,300,101,7,,,200,\n1011,IceBolt1,1,3,2,1,1010,1012,800,500,1500,0,0,0,50,0,125,0,0,0,0,0,0,0,0,0,0,0,,101,1,25,550,2000,0,300,0,Ice Bolt,아이스 볼트,300,102,7,,,200,\n1012,IceBolt2,2,3,2,1,1010,1013,800,500,1500,0,0,0,60,0,150,0,0,0,0,0,0,0,0,0,0,0,,101,1,25,550,2000,0,600,0,Ice Bolt,아이스 볼트,300,102,7,,,200,\n1013,IceBolt3,3,3,2,1,1010,1014,800,500,2000,0,0,0,70,0,150,0,0,0,0,0,0,0,0,0,0,0,,101,2,25,550,2000,0,1200,1,Ice Bolt,아이스 볼트,300,102,7,,,200,\n1014,IceBolt4,4,3,2,1,1010,1015,800,500,2000,0,0,0,80,0,175,0,0,0,0,0,0,0,0,0,0,0,,101,2,25,550,2000,0,2100,3,Ice Bolt,아이스 볼트,300,102,7,,,200,\n1015,IceBolt5,5,3,2,1,1010,-1,800,500,2500,0,0,0,90,0,200,0,0,0,0,0,0,0,0,0,0,0,,101,3,25,550,2000,0,0,0,Ice Bolt,아이스 볼트,300,102,7,,,200,\n1021,Healing1,1,8,2,1,1020,1022,800,500,9000,0,0,0,80,0,0,0,0,0,0,0,250,0,0,0,0,0,2000,,0,0,0,0,0,300,0,Healing,Heal 270,300,103,,,,200,\n1022,Healing2,2,8,2,1,1020,1023,800,500,9000,0,0,0,95,0,0,0,0,0,0,0,325,0,0,0,0,0,2000,,0,0,0,0,0,600,0,Healing,Heal 324,300,103,,,,200,\n1023,Healing3,3,8,2,1,1020,1024,800,500,9000,0,0,0,110,0,0,0,0,0,0,0,400,0,0,0,0,0,2000,,0,0,0,0,0,1200,1,Healing,Heal 389,300,103,,,,200,\n1024,Healing4,4,8,2,1,1020,1025,800,500,9000,0,0,0,125,0,0,0,0,0,0,0,475,0,0,0,0,0,2000,,0,0,0,0,0,2100,3,Healing,Heal 467,300,103,,,,200,\n1025,Healing5,5,8,2,1,1020,-1,800,500,9000,0,0,0,140,0,0,0,0,0,0,0,550,0,0,0,0,0,2000,,0,0,0,0,0,0,0,Healing,Heal 560,300,103,,,,200,\n1031,FrozenSoul1,1,11,2,1,1030,1032,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,102,,0,0,0,0,0,300,0,Frozen Soul,초당 마나 회복 2,300,104,,,,200,\n1032,FrozenSoul2,2,11,2,1,1030,1033,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,103,,0,0,0,0,0,600,0,Frozen Soul,초당 마나 회복 3,300,104,,,,200,\n1033,FrozenSoul3,3,11,2,1,1030,1034,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,104,,0,0,0,0,0,1200,1,Frozen Soul,초당 마나 회복 4,300,104,,,,200,\n1034,FrozenSoul4,4,11,2,1,1030,1035,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,105,,0,0,0,0,0,2100,3,Frozen Soul,초당 마나 회복 5,300,104,,,,200,\n1035,FrozenSoul5,5,11,2,1,1030,-1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,106,,0,0,0,0,0,0,0,Frozen Soul,초당 마나 회복 6,300,104,,,,200,\n1041,Purify1,1,8,2,2,1040,1042,800,500,9000,0,0,0,80,0,0,0,0,0,0,0,100,0,0,0,0,0,107,,0,0,0,0,0,500,0,Purify,자신에게 걸린 해로운 효과를 제거하고 체력을 20 회복,300,105,,,,400,\n1042,Purify2,2,8,2,2,1040,1043,800,500,8000,0,0,0,95,0,0,0,0,0,0,0,125,0,0,0,0,0,107,,0,0,0,0,0,1000,0,Purify,자신에게 걸린 해로운 효과를 제거하고 체력을 30 회복,300,105,,,,400,\n1043,Purify3,3,8,2,2,1040,1044,800,500,7000,0,0,0,110,0,0,0,0,0,0,0,150,0,0,0,0,0,107,,0,0,0,0,0,2000,3,Purify,자신에게 걸린 해로운 효과를 제거하고 체력을 40 회복,300,105,,,,400,\n1044,Purify4,4,8,2,2,1040,1045,800,500,6000,0,0,0,125,0,0,0,0,0,0,0,175,0,0,0,0,0,107,,0,0,0,0,0,3500,5,Purify,자신에게 걸린 해로운 효과를 제거하고 체력을 50 회복,300,105,,,,400,\n1045,Purify5,5,8,2,2,1040,-1,800,500,5000,0,0,0,140,0,0,0,0,0,0,0,200,0,0,0,0,0,107,,0,0,0,0,0,0,0,Purify,자신에게 걸린 해로운 효과를 제거하고 체력을 60 회복,300,105,,,,400,\n1051,IceBlock1,1,8,2,2,1050,1052,800,500,9000,0,0,0,80,0,0,0,0,0,1,100,0,0,0,0,0,0,108,122,0,0,0,0,0,500,0,Ice Block,화염 저항력 34% 증가 냉기 저항 17% 증가. 자신을 chill 상태로 만듬,300,106,,,,400,\n1052,IceBlock2,2,8,2,2,1050,1053,800,500,9000,0,0,0,95,0,0,0,0,0,1,100,0,0,0,0,0,0,109,122,0,0,0,0,0,1000,0,Ice Block,화염 저항력 38% 증가 냉기 저항 19% 증가. 자신을 chill 상태로 만듬,300,106,,,,400,\n1053,IceBlock3,3,8,2,2,1050,1054,800,500,9000,0,0,0,110,0,0,0,0,0,1,100,0,0,0,0,0,0,110,122,0,0,0,0,0,2000,3,Ice Block,화염 저항력 42% 증가 냉기 저항 21% 증가. 자신을 chill 상태로 만듬,300,106,,,,400,\n1054,IceBlock4,4,8,2,2,1050,1055,800,500,9000,0,0,0,125,0,0,0,0,0,1,100,0,0,0,0,0,0,111,122,0,0,0,0,0,3500,5,Ice Block,화염 저항력 46% 증가 냉기 저항 23% 증가. 자신을 chill 상태로 만듬,300,106,,,,400,\n1055,IceBlock5,5,8,2,2,1050,-1,800,500,9000,0,0,0,140,0,0,0,0,0,1,100,0,0,0,0,0,0,112,122,0,0,0,0,0,0,0,Ice Block,화염 저항력 50% 증가 냉기 저항 25% 증가. 자신을 chill 상태로 만듬,300,106,,,,400,\n1061,ColdSnap1,1,7,2,3,1060,1062,1500,1000,15000,370,120,0,140,0,250,0,0,0,0,0,0,0,0,0,0,0,,121,0,0,0,0,0,700,0,Cold Snap,소용돌이,300,107,7,,,,1\n1062,ColdSnap2,2,7,2,3,1060,1063,1500,1000,15000,390,125,0,165,0,300,0,0,0,0,0,0,0,0,0,0,0,,121,0,0,0,0,0,1400,2,Cold Snap,소용돌이,300,107,7,,,,1\n1063,ColdSnap3,3,7,2,3,1060,1064,1500,1000,15000,410,130,0,190,0,350,0,0,0,0,0,0,0,0,0,0,0,,121,0,0,0,0,0,2800,4,Cold Snap,소용돌이,300,107,7,,,,1\n1064,ColdSnap4,4,7,2,3,1060,1065,1500,1000,15000,430,135,0,215,0,400,0,0,0,0,0,0,0,0,0,0,0,,121,0,0,0,0,0,4900,7,Cold Snap,소용돌이,300,107,7,,,,1\n1065,ColdSnap5,5,7,2,3,1060,-1,1500,1000,15000,450,140,0,240,0,450,0,0,0,0,0,0,0,0,0,0,0,,121,0,0,0,0,0,0,0,Cold Snap,소용돌이,300,107,7,,,,1\n1071,FrozenOrb1,1,6,2,4,1070,1072,1500,1000,20000,0,110,800,160,0,52,0,0,0,0,0,0,0,0,0,0,0,,101,1,51,280,2500,60,900,0,Frozen Orb,매 틱(0.1초)당 30의 데미지를 가하는 구체를 발사. 구체는 폭발하여 주위에 틱 데미지의 10배를 가함.,300,108,7,1008,1008,,2\n1072,FrozenOrb2,2,6,2,4,1070,1073,1500,1000,20000,0,115,800,190,0,64,0,0,0,0,0,0,0,0,0,0,0,,101,1,52,280,2500,60,1800,3,Frozen Orb,매 틱(0.1초)당 32의 데미지를 가하는 구체를 발사. 구체는 폭발하여 주위에 틱 데미지의 10배를 가함.,300,108,7,1008,1008,,2\n1073,FrozenOrb3,3,6,2,4,1070,1074,1500,1000,20000,0,120,800,220,0,76,0,0,0,0,0,0,0,0,0,0,0,,101,1,53,280,2500,60,3600,6,Frozen Orb,매 틱(0.1초)당 33의 데미지를 가하는 구체를 발사. 구체는 폭발하여 주위에 틱 데미지의 10배를 가함.,300,108,7,1008,1008,,2\n1074,FrozenOrb4,4,6,2,4,1070,1075,1500,1000,20000,0,125,800,250,0,88,0,0,0,0,0,0,0,0,0,0,0,,101,1,54,280,2500,60,6300,10,Frozen Orb,매 틱(0.1초)당 34의 데미지를 가하는 구체를 발사. 구체는 폭발하여 주위에 틱 데미지의 10배를 가함.,300,108,7,1008,1008,,2\n1075,FrozenOrb5,5,6,2,4,1070,-1,1500,1000,20000,0,130,800,280,0,100,0,0,0,0,0,0,0,0,0,0,0,,101,1,55,280,2500,60,0,0,Frozen Orb,매 틱(0.1초)당 35의 데미지를 가하는 구체를 발사. 구체는 폭발하여 주위에 틱 데미지의 10배를 가함.,300,108,7,1008,1008,,2\n1081,Freezer1,1,11,2,4,1080,1082,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,113,,0,0,0,0,0,900,0,Freezer,◈ Magic +5 &nbsp;  ◈ Frost Damage +10%,0,109,,,,,2\n1082,Freezer2,2,11,2,4,1080,1083,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,114,,0,0,0,0,0,1800,3,Freezer,◈ Magic +8 &nbsp;  ◈ Frost Damage +14%,0,109,,,,,2\n1083,Freezer3,3,11,2,4,1080,1084,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,115,,0,0,0,0,0,3600,6,Freezer,◈ Magic +10 &nbsp;  ◈ Frost Damage +17% &nbsp; ◈ Can Make Freezing,0,109,,,,,2\n1084,Freezer4,4,11,2,4,1080,1085,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,116,,0,0,0,0,0,6300,10,Freezer,◈ Magic +13 &nbsp;  ◈ Frost Damage +21% &nbsp; ◈ Can Make Freezing,0,109,,,,,2\n1085,Freezer5,5,11,2,4,1080,-1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,117,,0,0,0,0,0,0,0,Freezer,◈ Magic +15 &nbsp;  ◈ Frost Damage +25% &nbsp; ◈ Move Speed +15% &nbsp; ◈ Can Make Freezing,0,109,,,,,2\n2001,MysterBaseAttack1,1,1,3,1,2000,2002,800,500,150,80,40,0,0,0,0,125,1,30,0,0,0,0,0,0,0,0,,,0,0,0,0,0,300,0,Myster Attack,아케인 기본 공격. 적의 마나에도 데미지를 가한다,300,201,8,,,200,\n2002,MysterBaseAttack2,2,1,3,1,2000,2003,800,500,150,80,42,0,0,0,0,150,1,30,0,0,0,0,0,0,0,0,,,0,0,0,0,0,600,0,Myster Attack,아케인 기본 공격. 적의 마나에도 데미지를 가한다,300,201,8,,,200,\n2003,MysterBaseAttack3,3,1,3,1,2000,2004,800,500,150,80,45,0,0,0,0,175,1,30,0,0,0,0,0,0,0,0,,,0,0,0,0,0,1200,1,Myster Attack,아케인 기본 공격. 적의 마나에도 데미지를 가한다,300,201,8,,,200,\n2004,MysterBaseAttack4,4,1,3,1,2000,2005,800,500,150,80,47,0,0,0,0,200,1,30,0,0,0,0,0,0,0,0,,,0,0,0,0,0,2100,3,Myster Attack,아케인 기본 공격. 적의 마나에도 데미지를 가한다,300,201,8,,,200,\n2005,MysterBaseAttack5,5,1,3,1,2000,-1,800,500,150,80,50,0,0,0,0,225,1,30,0,0,0,0,0,0,0,0,,,0,0,0,0,0,0,0,Myster Attack,아케인 기본 공격. 적의 마나에 30% 데미지,300,201,8,,,200,\n2011,ArcaneBolt1,1,3,3,1,2010,2012,800,500,1500,0,0,0,40,0,0,150,1,30,0,0,0,0,0,0,0,0,,,1,25,550,2000,0,300,0,Arcane Bolt,아케인 볼트. 적의 마나에 30%데미지,300,202,8,,,200,\n2012,ArcaneBolt2,2,3,3,1,2010,2013,800,500,1500,0,0,0,50,0,0,175,1,30,0,0,0,0,0,0,0,0,,,1,25,550,2000,0,600,0,Arcane Bolt,아케인 볼트. 적의 마나에 30%데미지,300,202,8,,,200,\n2013,ArcaneBolt3,3,3,3,1,2010,2014,800,500,2000,0,0,0,60,0,0,175,1,30,0,0,0,0,0,0,0,0,,,2,25,550,2000,0,1200,1,Arcane Bolt,아케인 볼트. 적의 마나에 30%데미지,300,202,8,,,200,\n2014,ArcaneBolt4,4,3,3,1,2010,2015,800,500,2000,0,0,0,70,0,0,200,1,30,0,0,0,0,0,0,0,0,,,2,25,550,2000,0,2100,3,Arcane Bolt,아케인 볼트. 적의 마나에 30%데미지,300,202,8,,,200,\n2015,ArcaneBolt5,5,3,3,1,2010,-1,800,500,2500,0,0,0,80,0,0,225,1,30,0,0,0,0,0,0,0,0,,,3,25,550,2000,0,0,0,Arcane Bolt,아케인 볼트. 적의 마나에 30%데미지,300,202,8,,,200,\n2021,ArcaneCloak1,1,11,3,1,2020,2022,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,201,,0,0,0,0,0,300,0,Arcane Cloak,All resistance 7%,0,203,,,,200,\n2022,ArcaneCloak2,2,11,3,1,2020,2023,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,202,,0,0,0,0,0,600,0,Arcane Cloak,All resistance 9%,0,203,,,,200,\n2023,ArcaneCloak3,3,11,3,1,2020,2024,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,203,,0,0,0,0,0,1200,1,Arcane Cloak,All resistance 11%,0,203,,,,200,\n2024,ArcaneCloak4,4,11,3,1,2020,2025,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,204,,0,0,0,0,0,2100,3,Arcane Cloak,All resistance 13%,0,203,,,,200,\n2025,ArcaneCloak5,5,11,3,1,2020,-1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,205,,0,0,0,0,0,0,0,Arcane Cloak,All resistance 15%,0,203,,,,200,\n2031,ArcaneMissile1,1,3,3,2,2030,2032,800,500,9000,0,0,0,100,0,0,200,1,30,0,0,0,0,0,0,0,0,,,1,30,600,2000,0,500,0,Arcane Missile,아케인 볼트를 3방향으로 발사. 적의 마나에 30%데미지,300,204,8,,,400,\n2032,ArcaneMissile2,2,3,3,2,2030,2033,800,500,9000,0,0,0,120,0,0,220,1,30,0,0,0,0,0,0,0,0,,,2,30,600,2000,0,1000,0,Arcane Missile,아케인 볼트를 3방향으로 발사. 적의 마나에 30%데미지,300,204,8,,,400,\n2033,ArcaneMissile3,3,3,3,2,2030,2034,800,500,9000,0,0,0,140,0,0,240,1,30,0,0,0,0,0,0,0,0,,,3,30,600,2000,0,2000,3,Arcane Missile,아케인 볼트를 3방향으로 발사. 적의 마나에 30%데미지,300,204,8,,,400,\n2034,ArcaneMissile4,4,3,3,2,2030,2035,800,500,9000,0,0,0,160,0,0,260,1,30,0,0,0,0,0,0,0,0,,,4,30,600,2000,0,3500,5,Arcane Missile,아케인 볼트를 3방향으로 발사. 적의 마나에 30%데미지,300,204,8,,,400,\n2035,ArcaneMissile5,5,3,3,2,2030,-1,800,500,9000,0,0,0,180,0,0,280,1,30,0,0,0,0,0,0,0,0,,,5,30,600,2000,0,0,0,Arcane Missile,아케인 볼트를 3방향으로 발사. 적의 마나에 30%데미지,300,204,8,,,400,\n2041,Silence1,1,7,3,2,2040,2042,800,500,10000,320,110,0,100,0,0,0,0,0,0,0,0,0,0,0,0,0,,206,0,0,0,0,0,500,0,Silence,적을 침묵 시킨다.,300,205,,1009,,400,\n2042,Silence2,2,7,3,2,2040,2043,800,500,10000,340,115,0,120,0,0,0,0,0,0,0,0,0,0,0,0,0,,206,0,0,0,0,0,1000,0,Silence,적을 침묵 시킨다.,300,205,,1009,,400,\n2043,Silence3,3,7,3,2,2040,2044,800,500,10000,360,120,0,140,0,0,0,0,0,0,0,0,0,0,0,0,0,,206,0,0,0,0,0,2000,3,Silence,적을 침묵 시킨다.,300,205,,1009,,400,\n2044,Silence4,4,7,3,2,2040,2045,800,500,10000,380,125,0,160,0,0,0,0,0,0,0,0,0,0,0,0,0,,206,0,0,0,0,0,3500,5,Silence,적을 침묵 시킨다.,300,205,,1009,,400,\n2045,Silence5,5,7,3,2,2040,-1,800,500,10000,400,130,0,180,0,0,0,0,0,0,0,0,0,0,0,0,0,,206,0,0,0,0,0,0,0,Silence,적을 침묵 시킨다.,300,205,,1009,,400,\n2051,Dispel1,1,7,3,2,2050,2052,800,500,8000,320,110,0,100,0,0,0,0,0,0,0,0,0,0,0,0,0,,207,0,0,0,0,0,500,0,Dispel,적의 버프를 제거한다.,300,206,,1009,,400,\n2052,Dispel2,2,7,3,2,2050,2053,800,500,8000,340,115,0,120,0,0,0,0,0,0,0,0,0,0,0,0,0,,207,0,0,0,0,0,1000,0,Dispel,적의 버프를 제거한다.,300,206,,1009,,400,\n2053,Dispel3,3,7,3,2,2050,2054,800,500,8000,360,120,0,140,0,0,0,0,0,0,0,0,0,0,0,0,0,,207,0,0,0,0,0,2000,3,Dispel,적의 버프를 제거한다.,300,206,,1009,,400,\n2054,Dispel4,4,7,3,2,2050,2055,800,500,8000,380,125,0,160,0,0,0,0,0,0,0,0,0,0,0,0,0,,207,0,0,0,0,0,3500,5,Dispel,적의 버프를 제거한다.,300,206,,1009,,400,\n2055,Dispel5,5,7,3,2,2050,-1,800,500,8000,400,130,0,180,0,0,0,0,0,0,0,0,0,0,0,0,0,,207,0,0,0,0,0,0,0,Dispel,적의 버프를 제거한다.,300,206,,1009,,400,\n2061,Blink1,1,10,3,3,2060,2062,800,500,8000,320,40,0,100,0,0,0,0,0,0,0,0,0,0,0,0,0,,,0,0,0,0,0,700,0,Blink,지정 위치로 이동,300,207,,,,,1\n2062,Blink2,2,10,3,3,2060,2063,800,500,7500,340,40,0,120,0,0,0,0,0,0,0,0,0,0,0,0,0,,,0,0,0,0,0,1400,2,Blink,지정 위치로 이동,300,207,,,,,1\n2063,Blink3,3,10,3,3,2060,2064,800,500,7000,360,40,0,140,0,0,0,0,0,0,0,0,0,0,0,0,0,,,0,0,0,0,0,2800,4,Blink,지정 위치로 이동,300,207,,,,,1\n2064,Blink4,4,10,3,3,2060,2065,800,500,6500,380,40,0,160,0,0,0,0,0,0,0,0,0,0,0,0,0,,,0,0,0,0,0,4900,7,Blink,지정 위치로 이동,300,207,,,,,1\n2065,Blink5,5,10,3,3,2060,-1,800,500,6000,400,40,0,180,0,0,0,0,0,0,0,0,0,0,0,0,0,,,0,0,0,0,0,0,0,Blink,지정 위치로 이동,300,207,,,,,1\n2071,ArcaneBlast1,1,7,3,3,2070,2072,1500,1000,15000,370,120,0,100,0,0,260,1,30,0,0,0,0,0,0,0,0,,,0,0,0,0,0,700,0,Arcane Blast,범위 공격. 적의 마나에 30%데미지,300,208,8,,,,1\n2072,ArcaneBlast2,2,7,3,3,2070,2073,1500,1000,15000,390,125,0,125,0,0,320,1,30,0,0,0,0,0,0,0,0,,,0,0,0,0,0,1400,2,Arcane Blast,범위 공격. 적의 마나에 30%데미지,300,208,8,,,,1\n2073,ArcaneBlast3,3,7,3,3,2070,2074,1500,1000,15000,410,130,0,150,0,0,380,1,30,0,0,0,0,0,0,0,0,,,0,0,0,0,0,2800,4,Arcane Blast,범위 공격. 적의 마나에 30%데미지,300,208,8,,,,1\n2074,ArcaneBlast4,4,7,3,3,2070,2075,1500,1000,15000,430,135,0,175,0,0,440,1,30,0,0,0,0,0,0,0,0,,,0,0,0,0,0,4900,7,Arcane Blast,범위 공격. 적의 마나에 30%데미지,300,208,8,,,,1\n2075,ArcaneBlast5,5,7,3,3,2070,-1,1500,1000,15000,450,140,0,200,0,0,500,1,30,0,0,0,0,0,0,0,0,,,0,0,0,0,0,0,0,Arcane Blast,범위 공격. 적의 마나에 30%데미지,300,208,8,,,,1\n2081,Haste1,1,8,3,3,2080,2082,800,500,30000,0,0,0,100,0,0,0,0,0,0,0,0,0,0,0,0,0,208,,0,0,0,0,0,700,0,Haste,이동속도 12% 캐스팅 속도 14% 증가.,300,209,,,,,1\n2082,Haste2,2,8,3,3,2080,2083,800,500,30000,0,0,0,125,0,0,0,0,0,0,0,0,0,0,0,0,0,209,,0,0,0,0,0,1400,2,Haste,이동속도 14% 캐스팅 속도 18% 증가.,300,209,,,,,1\n2083,Haste3,3,8,3,3,2080,2084,800,500,30000,0,0,0,150,0,0,0,0,0,0,0,0,0,0,0,0,0,210,,0,0,0,0,0,2800,4,Haste,이동속도 16% 캐스팅 속도 22% 증가.,300,209,,,,,1\n2084,Haste4,4,8,3,3,2080,2085,800,500,30000,0,0,0,175,0,0,0,0,0,0,0,0,0,0,0,0,0,211,,0,0,0,0,0,4900,7,Haste,이동속도 18% 캐스팅 속도 26% 증가.,300,209,,,,,1\n2085,Haste5,5,8,3,3,2080,-1,800,500,30000,0,0,0,200,0,0,0,0,0,0,0,0,0,0,0,0,0,212,,0,0,0,0,0,0,0,Haste,이동속도 20% 캐스팅 속도 30% 증가.,300,209,,,,,1\n2091,Mystic1,1,11,3,4,2090,2092,0,0,8000,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,213,,0,0,0,0,0,900,0,Mystic,◈ All Stat +2 &nbsp;  ◈ All Damage +10%,0,210,,,,,2\n2092,Mystic2,2,11,3,4,2090,2093,0,0,8000,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,214,,0,0,0,0,0,1800,3,Mystic,◈ All Stat +4 &nbsp;  ◈ All Damage +13%,0,210,,,,,2\n2093,Mystic3,3,11,3,4,2090,2094,0,0,8000,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,215,,0,0,0,0,0,3600,6,Mystic,◈ All Stat +5 &nbsp;  ◈ All Damage +15% &nbsp; ◈ Add Random Buff When Use Arcane Spell ,0,210,,,,,2\n2094,Mystic4,4,11,3,4,2090,2095,0,0,8000,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,216,,0,0,0,0,0,6300,10,Mystic,◈ All Stat +7 &nbsp;  ◈ All Damage +18% &nbsp; ◈ Add Random Buff When Use Arcane Spell,0,210,,,,,2\n2095,Mystic5,5,11,3,4,2090,-1,0,0,8000,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,217,,0,0,0,0,0,0,0,Mystic,◈ All Stat +8 &nbsp;  ◈ All Damage +20% &nbsp; ◈ Cooldown Reduce +15% &nbsp; ◈ Add Random Buff When Use Arcane Spell,0,210,,,,,2\n",buffGroupData:"index,name,clientName,clientDesc,isBuff,buff1,buff2,buff3,buff4,buff5,buff6,buff7,buff8,buff9,buff10,buffLifeTime,buffApplyRate,buffIcon,buffEffectGroup\n1,Ignite,Ignite,매 초당 최대 체력의 4%의 피해를 받음.,0,1,,,,,,,,,,10000,30,513,5\n2,BurningSoul1,BurningSoul,초당 체력 회복 + 4,1,3,,,,,,,,,,0,100,501,1010\n3,BurningSoul2,BurningSoul,초당 체력 회복 + 6,1,4,,,,,,,,,,0,100,501,1010\n4,BurningSoul3,BurningSoul,초당 체력 회복 + 8,1,5,,,,,,,,,,0,100,501,1010\n5,BurningSoul4,BurningSoul,초당 체력 회복 + 10,1,6,,,,,,,,,,0,100,501,1010\n6,BurningSoul5,BurningSoul,초당 체력 회복 + 12,1,7,,,,,,,,,,0,100,501,1010\n7,InnerFire1,InnerFire,공격력을 14% 증가,1,69,,,,,,,,,,10000,100,502,1001\n8,InnerFire2,InnerFire,공격력을 18% 증가,1,71,,,,,,,,,,10000,100,502,1001\n9,InnerFire3,InnerFire,공격력을 22% 증가,1,73,,,,,,,,,,10000,100,502,1001\n10,InnerFire4,InnerFire,공격력을 26% 증가,1,74,,,,,,,,,,10000,100,502,1001\n11,InnerFire5,InnerFire,공격력을 30% 증가,1,75,,,,,,,,,,10000,100,502,1001\n12,Fury1,Fury,이동 속도와 캐스팅 속도 7% 증가. 자신이 ignite 상태일 경우 추가로 7%증가,1,13,24,36,41,,,,,,,0,100,503,1002\n13,Fury2,Fury,이동 속도와 캐스팅 속도 9% 증가. 자신이 ignite 상태일 경우 추가로 9%증가,1,14,25,37,42,,,,,,,0,100,503,1002\n14,Fury3,Fury,이동 속도와 캐스팅 속도 11% 증가. 자신이 ignite 상태일 경우 추가로 11%증가,1,16,27,38,43,,,,,,,0,100,503,1002\n15,Fury4,Fury,이동 속도와 캐스팅 속도 13% 증가. 자신이 ignite 상태일 경우 추가로 13%증가,1,18,28,39,44,,,,,,,0,100,503,1002\n16,Fury5,Fury,이동 속도와 캐스팅 속도 15% 증가. 자신이 ignite 상태일 경우 추가로 15%증가,1,20,30,40,45,,,,,,,0,100,503,1002\n17,Pyromaniac1,Pyromaniac,◈ Power +5 &nbsp;  ◈ Fire Damage +10%,1,48,76,,,,,,,,,0,100,504,101\n18,Pyromaniac2,Pyromaniac,◈ Power +8 &nbsp;  ◈ Fire Damage +14%,1,50,77,,,,,,,,,0,100,504,101\n19,Pyromaniac3,Pyromaniac,◈ Power +10 &nbsp;  ◈ Fire Damage +17% &nbsp; ◈ 2% Damage Rate Per 10% Life,1,51,78,86,,,,,,,,0,100,504,101\n20,Pyromaniac4,Pyromaniac,◈ Power +13 &nbsp;  ◈ Fire Damage +21% &nbsp; ◈ 3% Damage Rate Per 10% Life,1,52,79,87,,,,,,,,0,100,504,101\n21,Pyromaniac5,Pyromaniac,◈ Power +15 &nbsp;  ◈ Fire Damage +25% &nbsp; ◈ Cast Speed +15% &nbsp; ◈ +4% Damage Rate Per 10% Life,1,53,80,88,30,,,,,,,0,100,504,101\n22,Ignite100,Ignite,매 초당 최대 체력의 4%의 피해를 받음.,0,1,,,,,,,,,,10000,100,513,5\n101,Chill,Chill,이동 속도와 캐스팅 속도가 30% 감소.,0,2,,,,,,,,,,5000,30,514,2\n102,FrozenSoul1,FrozenSoul,초당 마나 회복 2,1,8,,,,,,,,,,0,100,505,1011\n103,FrozenSoul2,FrozenSoul,초당 마나 회복 3,1,9,,,,,,,,,,0,100,505,1011\n104,FrozenSoul3,FrozenSoul,초당 마나 회복 4,1,10,,,,,,,,,,0,100,505,1011\n105,FrozenSoul4,FrozenSoul,초당 마나 회복 5,1,11,,,,,,,,,,0,100,505,1011\n106,FrozenSoul5,FrozenSoul,초당 마나 회복 6,1,12,,,,,,,,,,0,100,505,1011\n107,Purify,Purify,자신에게 걸린 해로운 효과를 제거,1,95,,,,,,,,,,500,100,506,1012\n108,IceBlock1,IceBlock,화염 저항력 34% 증가 냉기 저항 17% 증가.,1,103,108,,,,,,,,,3000,100,507,1004\n109,IceBlock2,IceBlock,화염 저항력 38% 증가 냉기 저항 19% 증가.,1,104,109,,,,,,,,,3000,100,507,1004\n110,IceBlock3,IceBlock,화염 저항력 42% 증가 냉기 저항 21% 증가.,1,105,110,,,,,,,,,3000,100,507,1004\n111,IceBlock4,IceBlock,화염 저항력 46% 증가 냉기 저항 23% 증가.,1,106,111,,,,,,,,,3000,100,507,1004\n112,IceBlock5,IceBlock,화염 저항력 50% 증가 냉기 저항 25% 증가.,1,107,112,,,,,,,,,3000,100,507,1004\n113,Freezer1,Freezer,◈ Magic +5 &nbsp;  ◈ Frost Damage +10%,1,56,81,,,,,,,,,0,100,508,102\n114,Freezer2,Freezer,◈ Magic +8 &nbsp;  ◈ Frost Damage +14%,1,58,82,,,,,,,,,0,100,508,102\n115,Freezer3,Freezer,◈ Magic +10 &nbsp;  ◈ Frost Damage +17% &nbsp; ◈ Can Make Freezing,1,59,83,89,,,,,,,,0,100,508,102\n116,Freezer4,Freezer,◈ Magic +13 &nbsp;  ◈ Frost Damage +21% &nbsp; ◈ Can Make Freezing,1,60,84,90,,,,,,,,0,100,508,102\n117,Freezer5,Freezer,◈ Magic +15 &nbsp;  ◈ Frost Damage +25% &nbsp; ◈ Move Speed +15% &nbsp; ◈ Can Make Freezing,1,61,85,91,20,,,,,,,0,100,508,102\n118,Freeze1,Freeze,얼었다,0,92,,,,,,,,,,1000,20,515,3\n119,Freeze2,Freeze,얼었다,0,93,,,,,,,,,,1000,25,515,3\n120,Freeze3,Freeze,얼었다,0,94,,,,,,,,,,1000,30,515,3\n121,Chill100,Chill,이동 속도와 캐스팅 속도가 30% 감소.,0,2,,,,,,,,,,5000,100,514,2\n122,IceBolockChill,Chill,이동 속도와 캐스팅 속도가 30% 감소.,0,2,,,,,,,,,,3000,100,514,2\n201,ArcaneCloak1,ArcaneCloak,All resistance 7%,1,98,,,,,,,,,,0,100,509,1005\n202,ArcaneCloak2,ArcaneCloak,All resistance 9%,1,99,,,,,,,,,,0,100,509,1005\n203,ArcaneCloak3,ArcaneCloak,All resistance 11%,1,100,,,,,,,,,,0,100,509,1005\n204,ArcaneCloak4,ArcaneCloak,All resistance 13%,1,101,,,,,,,,,,0,100,509,1005\n205,ArcaneCloak5,ArcaneCloak,All resistance 15%,1,102,,,,,,,,,,0,100,509,1005\n206,Silence,Silence,적을 침묵 시킨다.,0,113,,,,,,,,,,5000,100,516,4\n207,Dispel,Dispel,적의 버프를 제거한다.,0,96,,,,,,,,,,500,100,517,1013\n208,Haste1,Haste,이동속도 12% 캐스팅 속도 14% 증가.,1,17,29,,,,,,,,,20000,100,510,1006\n209,Haste2,Haste,이동속도 14% 캐스팅 속도 18% 증가.,1,19,31,,,,,,,,,20000,100,510,1006\n210,Haste3,Haste,이동속도 16% 캐스팅 속도 22% 증가.,1,21,33,,,,,,,,,20000,100,510,1006\n211,Haste4,Haste,이동속도 18% 캐스팅 속도 26% 증가.,1,22,34,,,,,,,,,20000,100,510,1006\n212,Haste5,Haste,이동속도 20% 캐스팅 속도 30% 증가.,1,23,35,,,,,,,,,20000,100,510,1006\n213,Mystic1,Mystic,◈ All Stat +2 &nbsp;  ◈ All Damage +10%,1,46,54,62,67,,,,,,,0,100,511,103\n214,Mystic2,Mystic,◈ All Stat +4 &nbsp;  ◈ All Damage +13%,1,47,55,63,68,,,,,,,0,100,511,103\n215,Mystic3,Mystic,◈ All Stat +5 &nbsp;  ◈ All Damage +15% &nbsp; ◈ Add Random Buff When Use Arcane Spell ,1,48,56,64,70,114,,,,,,0,100,511,103\n216,Mystic4,Mystic,◈ All Stat +7 &nbsp;  ◈ All Damage +18% &nbsp; ◈ Add Random Buff When Use Arcane Spell,1,49,57,65,71,115,,,,,,0,100,511,103\n217,Mystic5,Mystic,◈ All Stat +8 &nbsp;  ◈ All Damage +20% &nbsp; ◈ Cooldown Reduce +15% &nbsp; ◈ Add Random Buff When Use Arcane Spell,1,50,58,66,72,116,97,,,,,0,100,511,103\n218,RandomBuff1-1,MysticBuff1,매초 HP + 50,1,117,,,,,,,,,,7000,100,511,1010\n219,RandomBuff1-2,MysticBuff1,매초 MP + 30,1,118,,,,,,,,,,7000,100,511,1011\n220,RandomBuff1-3,MysticBuff1,공격력 20% 증가,1,119,,,,,,,,,,7000,100,511,1001\n221,RandomBuff1-4,MysticBuff1,저항력 10% 증가,1,120,,,,,,,,,,7000,100,511,1005\n222,RandomBuff1-5,MysticBuff1,이동 속도 10% 캐스팅 속도 10% 증가.,1,15,26,,,,,,,,,7000,100,511,1006\n223,RandomBuff2-1,MysticBuff2,매초 HP + 75,1,121,,,,,,,,,,8500,100,511,1010\n224,RandomBuff2-2,MysticBuff2,매초 MP + 40,1,122,,,,,,,,,,8500,100,511,1011\n225,RandomBuff2-3,MysticBuff2,공격력 35% 증가,1,123,,,,,,,,,,8500,100,511,1001\n226,RandomBuff2-4,MysticBuff2,저항력 15% 증가,1,124,,,,,,,,,,8500,100,511,1005\n227,RandomBuff2-5,MysticBuff2,이동 속도 15% 캐스팅 속도 15% 증가.,1,20,30,,,,,,,,,8500,100,511,1006\n228,RandomBuff3-1,MysticBuff3,매초 HP + 100,1,125,,,,,,,,,,10000,100,511,1010\n229,RandomBuff3-2,MysticBuff3,매초 MP + 50,1,126,,,,,,,,,,10000,100,511,1011\n230,RandomBuff3-3,MysticBuff3,공격력 50% 증가,1,127,,,,,,,,,,10000,100,511,1001\n231,RandomBuff3-4,MysticBuff3,저항력 20% 증가,1,128,,,,,,,,,,10000,100,511,1005\n232,RandomBuff3-5,MysticBuff3,이동 속도 20% 캐스팅 속도 20% 증가.,1,23,32,,,,,,,,,10000,100,511,1006\n1000,StartBuff,Immortal,무적,1,129,,,,,,,,,,5000,100,512,1\n1001,LevelUPBuff,,,1,130,131,,,,,,,,,1000,100,512,1\n2000,onlyForEffect,,,1,132,,,,,,,,,,500,100,1002,1012\n",chestData:"index,grade,HP,imgData,provideExp,provideGold,provideJewel,provideScore,minGoldCount,maxGoldCount,minGoldAmount,maxGoldAmount,minJewelCount,maxJewelCount,minJewelAmount,maxJewelAmount,minSkillCount,maxSkillCount,SkillIndex1,SkillDropRate1,SkillIndex2,SkillDropRate2,SkillIndex3,SkillDropRate3,SkillIndex4,SkillDropRate4,SkillIndex5,SkillDropRate5,SkillIndex6,SkillDropRate6,SkillIndex7,SkillDropRate7,SkillIndex7,SkillDropRate7,SkillIndex8,SkillDropRate8,SkillIndex9,SkillDropRate9,SkillIndex10,SkillDropRate10,SkillIndex11,SkillDropRate11,SkillIndex12,SkillDropRate12,SkillIndex13,SkillDropRate13,SkillIndex14,SkillDropRate14,SkillIndex15,SkillDropRate15,SkillIndex16,SkillDropRate16,SkillIndex17,SkillDropRate17,SkillIndex18,SkillDropRate18,SkillIndex19,SkillDropRate19,SkillIndex20,SkillDropRate20\n1,1,2000,108,150,50,0,100,2,4,50,150,0,1,1,1,1,1,21,50,31,100,41,75,51,75,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\n2,1,2000,108,150,50,0,100,2,4,50,150,0,1,1,1,1,1,1011,50,1021,100,1031,100,1041,75,1051,75,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\n3,1,2000,108,150,50,0,100,2,4,50,150,0,1,1,1,1,1,2011,50,2021,50,2031,75,2041,75,2051,75,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\n4,2,2500,109,200,100,0,150,2,4,75,200,0,1,1,1,1,1,21,50,31,100,41,75,51,75,61,50,71,50,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\n5,2,2500,109,200,100,0,150,2,4,75,200,0,1,1,1,1,1,1011,50,1021,100,1031,100,1041,75,1051,75,1061,50,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\n6,2,2500,109,200,100,0,150,2,4,75,200,0,1,1,1,1,1,2011,50,2021,50,2031,75,2041,75,2051,75,2061,50,2071,50,2081,50,,,,,,,,,,,,,,,,,,,,,,,,,,\n7,3,3500,110,300,150,0,200,3,5,100,250,0,2,1,1,1,1,41,75,51,75,61,50,71,50,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\n8,3,3500,110,300,150,0,200,3,5,100,250,0,2,1,1,1,1,1041,75,1051,75,1061,50,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\n9,3,3500,110,300,150,0,200,3,5,100,250,0,2,1,1,1,1,2031,75,2041,75,2051,75,2061,50,2071,50,2081,50,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\n10,4,4500,111,400,200,0,350,3,5,125,300,1,2,1,1,1,1,41,75,51,75,61,50,71,50,81,25,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\n11,4,4500,111,400,200,0,350,3,5,125,300,1,2,1,1,1,1,1041,75,1051,75,1061,50,1071,25,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\n12,4,4500,111,400,200,0,350,3,5,125,300,1,2,1,1,1,1,2031,75,2041,75,2051,75,2061,50,2071,50,2081,50,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\n13,5,6000,112,500,250,0,500,4,6,150,350,1,3,1,1,1,2,41,75,51,75,61,50,71,50,81,25,1041,75,1051,75,1061,50,1071,25,,,,,,,,,,,,,,,,,,,,,,,,\n14,5,6000,112,500,250,0,500,4,6,150,350,1,3,1,1,1,2,1041,75,1051,75,1061,50,1071,25,2031,75,2041,75,2051,75,2061,50,2071,50,2081,50,,,,,,,,,,,,,,,,,,,,,,\n15,5,6000,112,500,250,0,500,4,6,150,350,1,3,1,1,1,2,2031,75,2041,75,2051,75,2061,50,2071,50,2081,50,41,75,51,75,61,50,71,50,81,25,,,,,,,,,,,,,,,,,,,,\n",obstacleData:"index,type,id,posX,posY,radius,treeImgRadius,imgData\n1,1,OTT1,1813,5287,15,45,103\n2,1,OTT2,2916,4689,15,45,103\n3,1,OTT3,3534,5217,15,45,103\n4,1,OTT4,2659,2268,15,45,103\n5,1,OTT5,2205,4811,15,45,103\n6,1,OTT6,4255,5123,15,45,103\n7,1,OTT7,911,5296,15,45,103\n8,1,OTT8,5019,847,15,45,103\n9,1,OTT9,3650,3575,15,45,103\n10,1,OTT10,2442,5525,15,45,103\n11,1,OTT11,4170,1353,15,45,103\n12,1,OTT12,2703,3846,15,45,103\n13,1,OTT13,1050,5250,15,45,103\n14,1,OTT14,5747,3310,15,45,103\n15,1,OTT15,1155,5825,15,45,103\n16,1,OTT16,3538,3638,25,75,102\n17,1,OTT17,5915,2959,25,75,102\n18,1,OTT18,1326,2446,25,75,102\n19,1,OTT19,2381,1937,25,75,102\n20,1,OTT20,5638,4165,25,75,102\n21,1,OTT21,4779,1984,25,75,102\n22,1,OTT22,4577,3139,25,75,102\n23,1,OTT23,5046,3716,25,75,102\n24,1,OTT24,4318,5169,25,75,102\n25,1,OTT25,4394,933,25,75,102\n26,1,OTT26,1539,3673,25,75,102\n27,1,OTT27,2505,1130,25,75,102\n28,1,OTT28,3130,420,25,75,102\n29,1,OTT29,1619,5102,25,75,102\n30,1,OTT30,1495,471,25,75,102\n31,1,OTT31,5776,3131,25,75,102\n32,1,OTT32,5713,5996,25,75,102\n33,1,OTT33,5333,5525,25,75,102\n34,1,OTT34,713,5955,25,75,102\n35,1,OTT35,1487,2343,25,75,102\n36,1,OTT36,3320,2989,25,75,102\n37,1,OTT37,4549,5696,25,75,102\n38,1,OTT38,1885,1192,25,75,102\n39,1,OTT39,620,3401,25,75,102\n40,1,OTT40,1365,1602,25,75,102\n41,1,OTT41,4259,5741,25,75,102\n42,1,OTT42,3759,2736,25,75,102\n43,1,OTT43,2441,2818,25,75,102\n44,1,OTT44,1297,2105,25,75,102\n45,1,OTT45,2790,1331,25,75,102\n46,1,OTT46,1056,1944,25,75,102\n47,1,OTT47,3698,1095,25,75,102\n48,1,OTT48,2627,3504,25,75,102\n49,1,OTT49,3488,1280,25,75,102\n50,1,OTT50,5526,4258,25,75,102\n51,1,OTT51,2504,1595,25,75,102\n52,1,OTT52,4500,1250,25,75,102\n53,1,OTT53,2582,749,30,90,101\n54,1,OTT54,5811,4682,30,90,101\n55,1,OTT55,1681,1557,30,90,101\n56,1,OTT56,5229,4733,30,90,101\n57,1,OTT57,2955,3093,30,90,101\n58,1,OTT58,3779,2909,30,90,101\n59,1,OTT59,5111,2341,30,90,101\n60,1,OTT60,3025,4827,30,90,101\n61,1,OTT61,1756,2445,30,90,101\n62,1,OTT62,4879,1238,30,90,101\n63,1,OTT63,3044,1209,30,90,101\n64,1,OTT64,2502,5932,30,90,101\n65,1,OTT65,3481,1035,30,90,101\n66,1,OTT66,3321,4427,30,90,101\n67,1,OTT67,5508,1295,30,90,101\n68,1,OTT68,650,728,30,90,101\n69,1,OTT69,1030,5347,30,90,101\n70,1,OTT70,5296,5735,30,90,101\n71,1,OTT71,5335,4911,30,90,101\n72,1,OTT72,4424,756,30,90,101\n73,1,OTT73,3617,3077,30,90,101\n74,1,OTT74,2067,3735,30,90,101\n75,1,OTT75,5656,1688,30,90,101\n76,1,OTT76,2026,3498,30,90,101\n77,1,OTT77,4142,5665,30,90,101\n78,1,OTT78,2142,1107,30,90,101\n79,1,OTT79,421,1652,30,90,101\n80,1,OTT80,5672,5072,30,90,101\n81,1,OTT81,2898,3001,30,90,101\n82,1,OTT82,5229,5102,30,90,101\n83,1,OTT83,1712,5196,30,90,101\n84,1,OTT84,844,4561,30,90,101\n85,1,OTT85,3324,2013,30,90,101\n86,1,OTT86,5427,1796,30,90,101\n87,1,OTT87,1800,1100,30,90,101\n88,1,OTT88,1900,1850,30,90,101\n89,1,OTT89,4350,4650,30,90,101\n90,1,OTT90,4450,4600,30,90,101\n91,1,OTT91,4600,1350,30,90,101\n101,2,OTR1,2908,4747,50,,106\n102,2,OTR2,5515,1649,50,,106\n103,2,OTR3,2290,5083,50,,106\n104,2,OTR4,3017,1005,50,,106\n105,2,OTR5,5004,4010,50,,106\n106,2,OTR6,1866,2244,50,,106\n107,2,OTR7,591,879,50,,106\n108,2,OTR8,3546,5294,50,,106\n109,2,OTR9,638,2656,50,,106\n110,2,OTR10,5974,3515,50,,106\n111,2,OTR11,5355,1263,50,,106\n112,2,OTR12,3815,716,50,,106\n113,2,OTR13,1121,2027,50,,106\n114,2,OTR14,3565,2288,50,,106\n115,2,OTR15,1075,5062,50,,106\n116,2,OTR16,4508,425,50,,106\n117,2,OTR17,4486,3926,50,,106\n118,2,OTR18,4685,3434,50,,106\n119,2,OTR19,3495,2151,50,,106\n120,2,OTR20,664,461,50,,106\n121,2,OTR21,4250,914,50,,106\n122,2,OTR22,3419,933,50,,106\n123,2,OTR23,3913,5340,50,,106\n124,2,OTR24,3886,5790,50,,106\n125,2,OTR25,3154,4025,50,,106\n126,2,OTR26,2000,1200,50,,106\n127,2,OTR27,4963,3212,70,,105\n128,2,OTR28,1190,5523,70,,105\n129,2,OTR29,3644,4896,70,,105\n130,2,OTR30,5263,886,70,,105\n131,2,OTR31,3689,3554,70,,105\n132,2,OTR32,2274,2461,70,,105\n133,2,OTR33,1310,1804,70,,105\n134,2,OTR34,1144,5225,70,,105\n135,2,OTR35,814,1889,70,,105\n136,2,OTR36,2152,3749,70,,105\n137,2,OTR37,4610,1118,70,,105\n138,2,OTR38,2968,782,70,,105\n139,2,OTR39,1476,1488,70,,105\n140,2,OTR40,651,3039,70,,105\n141,2,OTR41,2017,1779,70,,105\n142,2,OTR42,5493,5642,70,,105\n143,2,OTR43,4557,1479,70,,105\n144,2,OTR44,3271,4796,70,,105\n145,2,OTR45,1643,4767,70,,105\n146,2,OTR46,5339,3605,70,,105\n147,2,OTR47,666,2321,70,,105\n148,2,OTR48,3681,2011,70,,105\n149,2,OTR49,5014,5235,70,,105\n150,2,OTR50,2958,1974,70,,105\n151,2,OTR51,1758,3574,70,,105\n152,2,OTR52,3550,2900,70,,105\n201,3,OCG1,2090,920,35,,113\n202,3,OCG2,4480,1400,35,,113\n203,3,OCG3,2060,2000,35,,113\n204,3,OCG4,5520,2400,35,,113\n205,3,OCG5,3160,3160,35,,113\n206,3,OCG6,800,3920,35,,113\n207,3,OCG7,4260,4320,35,,113\n208,3,OCG8,1840,4920,35,,113\n209,3,OCG9,4230,5400,35,,113\n",resourceData:"index,name,srcPosX,srcPosY,srcWidth,srcHeight,width,height\n1,pyroNovice,0,0,70,70,60,60\n2,pyroApprentice,70,0,70,70,61,61\n3,pyroAdept,140,0,70,70,63,63\n4,pyroExpert,210,0,70,70,64,64\n5,pyroMaster,280,0,70,70,65,65\n6,frosterNovice,0,70,70,70,60,60\n7,frosterApprentice,70,70,70,70,61,61\n8,frosterAdept,140,70,70,70,63,63\n9,frosterExpert,210,70,70,70,64,64\n10,frosterMaster,280,70,70,70,65,65\n11,mysterNovice,0,140,70,70,60,60\n12,mysterApprentice,70,140,70,70,61,61\n13,mysterAdept,140,140,70,70,63,63\n14,mysterExpert,210,140,70,70,64,64\n15,mysterMaster,280,140,70,70,65,65\n16,charHandIdle,0,210,120,100,120,100\n17,charHandCast1,120,210,120,100,120,100\n18,charHandCast2,240,210,120,100,120,100\n19,charHandCast3,360,210,120,100,120,100\n20,charHandCast4,480,210,120,100,120,100\n21,castEffectFire,0,310,120,100,120,100\n22,castEffectFrost,120,310,120,100,120,100\n23,castEffectArcane,240,310,120,100,120,100\n24,projectileFire,0,220,70,70,65,65\n25,projectileFrost,70,220,70,70,65,65\n26,projectileArcane,140,220,70,70,65,65\n27,skillEffectFire,0,290,160,160,155,155\n28,skillEffectFrost,160,290,160,160,155,155\n29,skillEffectArcane,320,290,160,160,155,155\n100,projectileSkillArrow,0,410,240,80,240,80\n101,objTreeLarge,210,0,210,210,225,225\n102,objTreeMedium,210,0,210,210,185,185\n103,objTreeSmall,210,0,210,210,145,145\n104,objTreeInside,420,0,210,210,0,0\n105,objStoneLarge,0,0,210,210,165,165\n106,objStoneMedium,0,0,210,210,125,125\n107,objStoneSmall,0,0,210,210,85,85\n108,objChest1,0,210,90,90,85,85\n109,objChest2,90,210,90,90,85,85\n110,objChest3,180,210,90,90,85,85\n111,objChest4,270,210,90,90,85,85\n112,objChest5,360,210,90,90,85,85\n113,objChestGround,450,210,90,90,85,85\n200,objGold,0,300,70,70,65,65\n201,objJewel,70,300,70,70,65,65\n202,objSkillFire,0,370,70,70,65,65\n203,objSkillFrost,70,370,70,70,65,65\n204,objSkillArcane,140,370,70,70,65,65\n205,objBox,140,300,70,70,65,65\n1001,conditionEffectFreeze,0,0,80,80,75,75\n1002,conditionEffectChill,80,0,80,80,75,75\n1003,conditionEffectImmortal,160,0,80,80,75,75\n1004,conditionEffectSilence,240,0,80,80,75,75\n1005,conditionEffectIgnite1,0,80,60,60,55,55\n1006,conditionEffectIgnite2,60,80,60,60,55,55\n1007,conditionEffectIgnite3,120,80,60,60,55,55\n1008,conditionEffectIgnite4,180,80,60,60,55,55\n1009,conditionEffectIgnite5,240,80,60,60,55,55\n1010,conditionEffectIgnite6,300,80,60,60,55,55\n1011,fireHitEffect,210,220,70,70,65,65\n1012,frostHitEffect,280,220,70,70,65,65\n1013,arcaneHitEffect,350,220,70,70,65,65\n1014,blankImg,0,450,60,60,55,55\n1015,passiveEffectFire1,60,450,60,60,60,60\n1016,passiveEffectFire2,120,450,60,60,65,65\n1017,passiveEffectFire3,180,450,60,60,70,70\n1018,passiveEffectFire4,240,450,60,60,75,75\n1019,passiveEffectFire5,300,450,60,60,80,80\n1020,passiveEffectFire6,360,450,60,60,85,85\n1021,passiveEffectFire7,420,450,60,60,90,90\n1022,passiveEffectFrost1,0,510,60,60,60,60\n1023,passiveEffectFrost2,60,510,60,60,65,65\n1024,passiveEffectFrost3,120,510,60,60,70,70\n1025,passiveEffectFrost4,180,510,60,60,75,75\n1026,passiveEffectFrost5,240,510,60,60,80,80\n1027,passiveEffectFrost6,300,510,60,60,85,85\n1028,passiveEffectFrost7,360,510,60,60,90,90\n1029,passiveEffectArcane1,480,450,60,60,60,60\n1030,passiveEffectArcane2,420,510,60,60,65,65\n1031,passiveEffectArcane3,480,510,60,60,70,70\n1032,passiveEffectArcane4,540,510,60,60,75,75\n1033,passiveEffectArcane5,600,510,60,60,80,80\n1034,passiveEffectArcane6,660,510,60,60,85,85\n1035,passiveEffectArcane7,720,510,60,60,90,90\n1036,fireSkillEffectInnerFire,0,140,80,80,80,80\n1037,fireSkillEffectFury1,80,140,80,80,80,80\n1038,fireSkillEffectFury2,80,140,80,80,83,83\n1039,fireSkillEffectFury3,80,140,80,80,86,86\n1040,fireSkillEffectFury4,80,140,80,80,90,90\n1041,fireSkillEffectFury5,80,140,80,80,85,88\n1042,frostSkillEffectPurify,160,140,80,80,70,70\n1043,frostSkillEffectIceBlock,240,140,80,80,90,90\n1044,arcaneSkillEffectCloak,320,140,80,80,90,90\n1045,arcaneSkillEffectHaste1,400,140,80,80,80,80\n1046,arcaneSkillEffectHaste2,400,140,80,80,83,83\n1047,arcaneSkillEffectHaste3,400,140,80,80,86,86\n1048,arcaneSkillEffectHaste4,400,140,80,80,90,90\n1049,arcaneSkillEffectHaste5,400,140,80,80,85,88\n1050,fireProjectileRollingFire,480,290,90,90,90,90\n1051,frostProjectileFrostOrb,570,290,90,90,90,90\n1052,arcaneSkillNoDamageExplosion,660,290,90,90,90,90\n1053,regenHP1,360,80,60,60,55,55\n1054,regenHP2,420,80,60,60,55,55\n1055,regenHP3,480,80,60,60,55,55\n1056,regenHP4,540,80,60,60,55,55\n1057,regenHP5,600,80,60,60,55,55\n1058,regenMP1,360,20,60,60,55,55\n1059,regenMP2,420,20,60,60,55,55\n1060,regenMP3,480,20,60,60,55,55\n1061,regenMP4,540,20,60,60,55,55\n1062,regenMP5,600,20,60,60,55,55\n1063,purifyAndHeal1,660,20,60,60,55,55\n1064,purifyAndHeal2,720,20,60,60,55,55\n1065,dispel1,480,140,60,60,55,55\n1066,dispel2,540,140,60,60,55,55\n1067,dispel3,600,140,60,60,55,55\n1068,dispel4,660,140,60,60,55,55\n",iconResourceData:"index,name,top,right,bottom,left\n1,Pyro Attack,0,72,72,0\n2,Fire Bolt,0,144,72,72\n3,Burning Soul,0,216,72,144\n4,Fire Ball,0,288,72,216\n5,Inner Fire,0,360,72,288\n6,Rolling Fire,0,432,72,360\n7,Fury,0,504,72,432\n8,Explosion,0,576,72,504\n9,Pyromaniac,0,648,72,576\n101,Froster Attack,72,72,144,0\n102,Ice Bolt,72,144,144,72\n103,Healing,72,216,144,144\n104,Frozen Soul,72,288,144,216\n105,Purify,72,360,144,288\n106,Ice Block,72,432,144,360\n107,Vortex,72,504,144,432\n108,Frozen Orb,72,576,144,504\n109,Freezer,72,648,144,576\n201,Myster Attack,144,72,216,0\n202,Arcane Bolt,144,144,216,72\n203,Arcane Cloak,144,216,216,144\n204,Arcane Missile,144,288,216,216\n205,Silence,144,360,216,288\n206,Dispel,144,432,216,360\n207,Blink,144,504,216,432\n208,Arcane Blast,144,576,216,504\n209,Haste,144,648,216,576\n210,Mystic,144,720,216,648\n501,Buff_Burning Soul,360,72,432,0\n502,Buff_Inner Fire,360,144,432,72\n503,Buff_Fury,360,216,432,144\n504,Buff_Pyromaniac,360,288,432,216\n505,Buff_Frozen Soul,360,360,432,288\n506,Buff_Purify,360,432,432,360\n507,Buff_Ice Block,360,504,432,432\n508,Buff_Freezer,360,576,432,504\n509,Buff_Arcane Cloak,432,72,504,0\n510,Buff_Haste,432,144,504,72\n511,Buff_Mystic,432,216,504,144\n512,Buff_Immortal,432,288,504,216\n513,Debuff_Ignite,288,72,360,0\n514,Debuff_Chill,288,144,360,72\n515,Debuff_Freeze,288,216,360,144\n516,Debuff_Silence,288,288,360,216\n517,Debuff_Dispel,288,360,360,288\n1001,blankImg,216,72,288,0\n1002,whiteBlankImg,216,144,288,72\n",effectGroupData:"index,name,isRotate,rotateStartDegree,isAttach,isFront,resourceLifeTime,resourceIndex1,resourceIndex2,resourceIndex3,resourceIndex4,resourceIndex5,resourceIndex6,resourceIndex7,resourceIndex8,resourceIndex9,resourceIndex10\n1,Immortal,1,0,1,1,,1003,,,,,,,,,\n2,Chill,0,,1,1,,1002,,,,,,,,,\n3,Freeze,0,,1,1,,1001,,,,,,,,,\n4,Silence,0,,1,1,,1004,,,,,,,,,\n5,Ignite,0,,0,0,300,1005,1006,1007,1008,1009,1010,,,,\n6,fireHitEffect,0,,1,1,100,1011,,,,,,,,,\n7,frostHitEffect,0,,1,1,100,1012,,,,,,,,,\n8,arcaneHitEffect,0,,1,1,100,1013,,,,,,,,,\n101,firePassive,0,,1,0,,1014,1014,1014,1015,1016,1017,1018,1019,1020,1021\n102,frostPassive,0,,1,0,,1014,1014,1014,1022,1023,1024,1025,1026,1027,1028\n103,arcanePassive,1,0,1,0,,1014,1014,1014,1029,1030,1031,1032,1033,1034,1035\n1001,fireSkillEffectInnerFire,1,0,1,0,,1036,,,,,,,,,\n1002,fireSkillEffectFury,0,,1,0,,1037,1038,1039,1040,1041,1040,1039,1038,1037,1037\n1003,frostSkillEffectPurify,1,0,1,1,,1042,,,,,,,,,\n1004,frostSkillEffectIceBlock,1,0,1,1,,1043,,,,,,,,,\n1005,arcaneSkillEffectCloak,1,0,1,0,,1044,,,,,,,,,\n1006,arcaneSkillEffectHaste,1,0,1,0,,1048,1047,1046,1045,1045,1045,1046,1047,1048,1049\n1007,fireProjectileRollingFire,1,0,0,1,,1050,,,,,,,,,\n1008,frostProjectileFrostOrb,1,0,0,1,,1051,,,,,,,,,\n1009,arcaneSkillNoDamageExplosion,0,,0,1,,1052,,,,,,,,,\n1010,regenHP,0,,1,1,,1054,1053,1054,1055,1056,1057,1014,1014,1014,1014\n1011,regenMP,0,,1,1,,1014,1014,1014,1014,1059,1058,1059,1060,1061,1062\n1012,purifyAndHeal,0,,1,1,,1063,1064,1063,1058,1059,,,,,\n1013,dispel,0,,1,1,,1066,1065,1066,1067,1068,,,,,\n"}},{}],8:[function(e,t,i){t.exports={MAX_SERVER_RESPONSE_TIME:5e3,INTERVAL:60,FPS:60,RESOURCES_COUNT:4,RESOURCE_SRC_CHARACTER:"../images/Character.png",RESOURCE_SRC_OBJECT:"../images/Objects.png",RESOURCE_SRC_SKILL_EFFECT:"../images/SkillEffect.png",RESOURCE_SRC_UI:"../images/UI.png",MINIMAP_CHEST_GROUND_SRC:"../images/chestGround.png",MINIMAP_CHEST_SRC_1:"../images/chest1.png",MINIMAP_CHEST_SRC_2:"../images/chest2.png",MINIMAP_CHEST_SRC_3:"../images/chest3.png",MINIMAP_VOID_SRC:"../images/void.png",START_BUTTON:1,RESTART_BUTTON:2,MINIMUM_LOADING_TIME:2e3,CHANGE_LOADING_TEXT_TIME:500,SKILL_INFORM_TIME:150,SKILL_HIT_EFFECT_TIME:100,USER_ATTACH_EFFECT_CHANGE_TIME:150,USER_DETACH_EFFECT_CHANGE_TIME:50,USER_DETACH_EFFECT_MAKE_TIME:200,RISE_TEXT_LIFE_TIME:3e3,PROJECTILE_EFFECT_CHANGE_TIME:150,CHAT_MESSAGE_TIME:5e3,DEAD_SCENE_TEXT_ANI_PLAY_DELAY_TIME:1e3,DEAD_SCENE_PLAY_TIME:5e3,CAST_EFFECT_INTERPOLATION_FACTOR:.1,SKILL_EFFECT_INTERPOLATION_FACTOR:.6,USER_ANI_TIME:500,IMG_COLLISION_CLEAR_TIME:200,CANVAS_MAX_SIZE:{width:6400,height:6400},CANVAS_MAX_LOCAL_SIZE:{width:1600,height:1e3},IMAGE_SOURCE_SIZE:{width:800,height:600},DRAW_MODE_NORMAL:1,DRAW_MODE_SKILL_RANGE:2,SKILL_CHANGE_PANEL_CONTAINER:1,SKILL_CHANGE_PANEL_EQUIP:2,OBJECT_STATE_IDLE:1,OBJECT_STATE_MOVE:2,OBJECT_STATE_ATTACK:3,OBJECT_STATE_CAST:4,OBJECT_STATE_DEATH:5,OBJECT_STATE_MOVE_AND_ATTACK:6,MOVE_SLIGHT_RATE:.6,MOVE_BACK_WARD_SPEED_DECREASE_RATE:.5,GAME_STATE_LOAD:1,GAME_STATE_START_SCENE:2,GAME_STATE_GAME_START:3,GAME_STATE_GAME_ON:4,GAME_STATE_GAME_END:5,GAME_STATE_RESTART_SCENE:6,GAME_STATE_RESTART:7,CHAR_TYPE_FIRE:1,CHAR_TYPE_FROST:2,CHAR_TYPE_ARCANE:3,PREFIX_USER:"USR",PREFIX_SKILL:"SKL",PREFIX_SKILL_PROJECTILE:"SKP",PREFIX_CHEST:"CHT",PREFIX_OBSTACLE_TREE:"OTT",PREFIX_OBSTACLE_ROCK:"OTR",PREFIX_OBSTACLE_CHEST_GROUND:"OCG",PREFIX_OBJECT_EXP:"OXP",PREFIX_OBJECT_SKILL:"OSK",PREFIX_OBJECT_GOLD:"OGD",PREFIX_OBJECT_JEWEL:"OJW",PREFIX_OBJECT_BOX:"OBX",USER_CONDITION_IMMORTAL:1,USER_CONDITION_CHILL:2,USER_CONDITION_FREEZE:3,USER_CONDITION_SILENCE:4,USER_CONDITION_IGNITE:5,USER_CONDITION_BLUR:6,SKILL_PROPERTY_FIRE:1,SKILL_PROPERTY_FROST:2,SKILL_PROPERTY_ARCANE:3,SKILL_INDEX_PYRO_BASE:11,SKILL_INDEX_PYRO_PASSIVE:91,SKILL_INDEX_PYRO_GIVEN:21,SKILL_INDEX_FROST_BASE:1001,SKILL_INDEX_FROST_PASSIVE:1081,SKILL_INDEX_FROST_GIVEN:1011,SKILL_INDEX_ARCANE_BASE:2001,SKILL_INDEX_ARCANE_PASSIVE:2091,SKILL_INDEX_ARCANE_GIVEN:2011,TUTORIAL_SKILL_INDEX:2021,SKILL_TYPE_INSTANT_RANGE:1,SKILL_TYPE_INSTANT_PROJECTILE:2,SKILL_TYPE_PROJECTILE:3,SKILL_TYPE_PROJECTILE_EXPLOSION:4,SKILL_TYPE_PROJECTILE_TICK:5,SKILL_TYPE_PROJECTILE_TICK_EXPLOSION:6,SKILL_TYPE_RANGE:7,SKILL_TYPE_SELF:8,SKILL_TYPE_SELF_EXPLOSION:9,SKILL_TYPE_TELEPORT:10,SKILL_TYPE_PASSIVE:11,SKILL_BASIC_INDEX:1,SKILL_EQUIP1_INDEX:2,SKILL_EQUIP2_INDEX:3,SKILL_EQUIP3_INDEX:4,SKILL_EQUIP4_INDEX:5,SKILL_PASSIVE_INDEX:6,STAT_POWER_INDEX:1,STAT_MAGIC_INDEX:2,STAT_SPEED_INDEX:3,STAT_OFFENCE_INDEX:4,STAT_DEFENCE_INDEX:5,PROJECTILE_FIRE_DISTANCE:20,MULTI_PROJECTILE_DEGREE:15,OBJ_SKILL_RADIUS:20,OBJ_JEWEL_RADIUS:20,OBJ_BOX_RADIUS:23,GET_RESOURCE_TYPE_GOLD:1,GET_RESOURCE_TYPE_JEWEL:2,GET_RESOURCE_TYPE_EXP:3,OBJ_TYPE_TREE:1,OBJ_TYPE_ROCK:2,OBJ_TYPE_CHEST_GROUND:3,RESOURCE_INDEX_USER_HAND_1:16,RESOURCE_INDEX_USER_HAND_2:17,RESOURCE_INDEX_USER_HAND_3:18,RESOURCE_INDEX_USER_HAND_4:19,RESOURCE_INDEX_USER_HAND_5:20,RESOURCE_INDEX_CASTING_FIRE:21,RESOURCE_INDEX_CASTING_FROST:22,RESOURCE_INDEX_CASTING_ARCANE:23,RESOURCE_INDEX_PROJECTILE_FIRE:24,RESOURCE_INDEX_PROJECTILE_FROST:25,RESOURCE_INDEX_PROJECTILE_ARCANE:26,RESOURCE_INDEX_SKILL_EFFECT_FIRE:27,RESOURCE_INDEX_SKILL_EFFECT_FROST:28,RESOURCE_INDEX_SKILL_EFFECT_ARCANE:29,RESOURCE_INDEX_PROJECTILE_SKILL_ARROW:100,RESOURCE_INDEX_OBSTACLE_TREE_INSIDE:104,RESOURCE_INDEX_OBJ_GOLD:200,RESOURCE_INDEX_OBJ_JEWEL:201,RESOURCE_INDEX_OBJ_BOX:205,RESOURCE_INDEX_OBJ_SKILL_FIRE:202,RESOURCE_INDEX_OBJ_SKILL_FROST:203,RESOURCE_INDEX_OBJ_SKILL_ARCANE:204,RESOURCE_INDEX_CHEST_GRADE_1:108,RESOURCE_INDEX_CHEST_GRADE_2:109,RESOURCE_INDEX_CHEST_GRADE_3:110,RESOURCE_INDEX_CHEST_GRADE_4:111,RESOURCE_INDEX_CHEST_GRADE_5:112,UI_RESOURCE_INDEX_BLANK:1001,STAT_CALC_FACTOR_POWER_TO_DAMAGE_RATE:.5,STAT_CALC_FACTOR_POWER_TO_HP:25,STAT_CALC_FACTOR_POWER_TO_HP_REGEN:.05,STAT_CALC_FACTOR_MAGIC_TO_RESISTANCE:.5,STAT_CALC_FACTOR_MAGIC_TO_MP:15,STAT_CALC_FACTOR_MAGIC_TO_MP_REGEN:.03,STAT_CALC_FACTOR_SPEED_TO_CAST_SPEED:.25,STAT_CALC_FACTOR_SPEED_TO_COOLDOWN_REDUCE_RATE:.25}},{}],9:[function(e,t,i){"use strict";var s=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},i=0;i<10;i++)t["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var s={};return"abcdefghijklmnopqrst".split("").forEach(function(e){s[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},s)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var i,r,o=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){i=Object(arguments[l]);for(var c in i)n.call(i,c)&&(o[c]=i[c]);if(s){r=s(i);for(var d=0;d<r.length;d++)a.call(i,r[d])&&(o[r[d]]=i[r[d]])}}return o}},{}],10:[function(e,t,i){s=this,n=function(){var e=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};return function(){var t,i,s,n,a,r,o,l;function c(t){var i,s;if(this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this.maxElements=t.maxElements,null==this.width||null==this.height)throw new Error("Missing quadtree dimensions.");if(null==this.x&&(this.x=0),null==this.y&&(this.y=0),null==this.maxElements&&(this.maxElements=1),this.contents=[],this.oversized=[],this.size=0,this.width<1||this.height<1)throw new Error("Dimensions must be positive integers.");if(!e(this.x)||!e(this.y))throw new Error("Coordinates must be integers");if(this.maxElements<1)throw new Error("The maximum number of elements before a split must be a positive integer.");s=this,this.children={NW:{create:function(){return new c({x:s.x,y:s.y,width:Math.max(Math.floor(s.width/2),1),height:Math.max(Math.floor(s.height/2),1),maxElements:s.maxElements})},tree:null},NE:{create:function(){return new c({x:s.x+Math.max(Math.floor(s.width/2),1),y:s.y,width:Math.ceil(s.width/2),height:Math.max(Math.floor(s.height/2),1),maxElements:s.maxElements})},tree:null},SW:{create:function(){return new c({x:s.x,y:s.y+Math.max(Math.floor(s.height/2),1),width:Math.max(Math.floor(s.width/2),1),height:Math.ceil(s.height/2),maxElements:s.maxElements})},tree:null},SE:{create:function(){return new c({x:s.x+Math.max(Math.floor(s.width/2),1),y:s.y+Math.max(Math.floor(s.height/2),1),width:Math.ceil(s.width/2),height:Math.ceil(s.height/2),maxElements:s.maxElements})},tree:null}};for(i in this.children)this.children[i].get=function(){return null!=this.tree?this.tree:(this.tree=this.create(),this.tree)}}return n=function(e){var t,i;return{x:Math.floor((null!=(t=e.width)?t:1)/2)+e.x,y:Math.floor((null!=(i=e.height)?i:1)/2)+e.y}},t=function(e,t){var i,s,n,a;return!(e.x>=t.x+(null!=(i=t.width)?i:1)||e.x+(null!=(s=e.width)?s:1)<=t.x||e.y>=t.y+(null!=(n=t.height)?n:1)||e.y+(null!=(a=e.height)?a:1)<=t.y)},i=function(e,t){var i;return i=n(t),e.x<i.x?e.y<i.y?"NW":"SW":e.y<i.y?"NE":"SE"},l=function(e){if("object"!=typeof e)throw new Error("Element must be an Object.");if(null==e.x||null==e.y)throw new Error("Coordinates properties are missing.");if((null!=e?e.width:void 0)<0||(null!=e?e.height:void 0)<0)throw new Error("Width and height must be positive integers.")},r=function(e){var t,i,s,n;return i=Math.max(Math.floor(e.width/2),1),s=Math.ceil(e.width/2),n=Math.max(Math.floor(e.height/2),1),t=Math.ceil(e.height/2),{NW:{x:e.x,y:e.y,width:i,height:n},NE:{x:e.x+i,y:e.y,width:s,height:n},SW:{x:e.x,y:e.y+n,width:i,height:t},SE:{x:e.x+i,y:e.y+n,width:s,height:t}}},s=function(e,i){var s,n,a,o;o=[],a=r(i);for(n in a)s=a[n],t(e,s)&&o.push(n);return o},a=function(e,t){var i;return(i=function(i){return e["_"+i]=e[i],Object.defineProperty(e,i,{set:function(e){return t.remove(this,!0),this["_"+i]=e,t.push(this)},get:function(){return this["_"+i]},configurable:!0})})("x"),i("y"),i("width"),i("height")},o=function(e){var t;return(t=function(t){if(null!=e["_"+t])return delete e[t],e[t]=e["_"+t],delete e["_"+t]})("x"),t("y"),t("width"),t("height")},c.prototype.push=function(e,t){return this.pushAll([e],t)},c.prototype.pushAll=function(e,t){var i,n,r,o,c,d,u,h,E,f,p,m,I,S,g,T,_,C,L,A;for(p=0,S=e.length;p<S;p++)f=e[p],l(f),t&&a(f,this);for(u=[{tree:this,elements:e}];u.length>0;){for(A=(_=u.shift()).tree,h={NW:null,NE:null,SW:null,SE:null},m=0,g=(d=_.elements).length;m<g;m++)if(c=d[m],A.size++,1!==(E=s(c,A)).length||1===A.width||1===A.height)A.oversized.push(c);else if(A.size-A.oversized.length<=A.maxElements)A.contents.push(c);else{for(o=E[0],L=A.children[o],null==h[o]&&(h[o]={tree:L.get(),elements:[]}),h[o].elements.push(c),I=0,T=(C=A.contents).length;I<T;I++)n=C[I],null==h[r=s(n,A)[0]]&&(h[r]={tree:A.children[r].get(),elements:[]}),h[r].elements.push(n);A.contents=[]}for(o in h)null!=(i=h[o])&&u.push(i)}return this},c.prototype.remove=function(e,t){var s,n;return l(e),(s=this.oversized.indexOf(e))>-1?(this.oversized.splice(s,1),this.size--,t||o(e),!0):(s=this.contents.indexOf(e))>-1?(this.contents.splice(s,1),this.size--,t||o(e),!0):!(null==(n=this.children[i(e,this)]).tree||!n.tree.remove(e,t))&&(this.size--,0===n.tree.size&&(n.tree=null),!0)},c.prototype.colliding=function(e,i){var n,a,r,o,c,d,u,h,E,f,p,m,I,S;for(null==i&&(i=t),l(e),c=[],r=[this];r.length>0;){for(d=0,E=(m=(S=r.shift()).oversized).length;d<E;d++)(a=m[d])!==e&&i(e,a)&&c.push(a);for(u=0,f=(I=S.contents).length;u<f;u++)(a=I[u])!==e&&i(e,a)&&c.push(a);for(0===(o=s(e,S)).length&&(o=[],e.x>=S.x+S.width&&o.push("NE"),e.y>=S.y+S.height&&o.push("SW"),o.length>0&&(1===o.length?o.push("SE"):o=["SE"])),h=0,p=o.length;h<p;h++)n=o[h],null!=S.children[n].tree&&r.push(S.children[n].tree)}return c},c.prototype.onCollision=function(e,i,n){var a,r,o,c,d,u,h,E,f,p,m,I,S;for(null==n&&(n=t),l(e),o=[this];o.length>0;){for(d=0,E=(m=(S=o.shift()).oversized).length;d<E;d++)(r=m[d])!==e&&n(e,r)&&i(r);for(u=0,f=(I=S.contents).length;u<f;u++)(r=I[u])!==e&&n(e,r)&&i(r);for(0===(c=s(e,S)).length&&(c=[],e.x>=S.x+S.width&&c.push("NE"),e.y>=S.y+S.height&&c.push("SW"),c.length>0&&(1===c.length?c.push("SE"):c=["SE"])),h=0,p=c.length;h<p;h++)a=c[h],null!=S.children[a].tree&&o.push(S.children[a].tree)}return null},c.prototype.get=function(e){return this.where(e)},c.prototype.where=function(e){var t,s,n,a,r,o,c,d,u,h,E,f,p;if("object"==typeof e&&(null==e.x||null==e.y))return this.find(function(t){var i,s;i=!0;for(s in e)e[s]!==t[s]&&(i=!1);return i});for(l(e),a=[],n=[this];n.length>0;){for(r=0,d=(h=(p=n.shift()).oversized).length;r<d;r++){s=h[r],t=!0;for(c in e)e[c]!==s[c]&&(t=!1);t&&a.push(s)}for(o=0,u=(E=p.contents).length;o<u;o++){s=E[o],t=!0;for(c in e)e[c]!==s[c]&&(t=!1);t&&a.push(s)}null!=(f=p.children[i(e,p)]).tree&&n.push(f.tree)}return a},c.prototype.each=function(e){var t,i,s,n,a,r,o,l,c,d;for(i=[this];i.length>0;){for(n=0,r=(l=(d=i.shift()).oversized).length;n<r;n++)s=l[n],"function"==typeof e&&e(s);for(a=0,o=(c=d.contents).length;a<o;a++)s=c[a],"function"==typeof e&&e(s);for(t in d.children)null!=d.children[t].tree&&i.push(d.children[t].tree)}return this},c.prototype.find=function(e){var t,i,s,n,a,r,o,l,c,d,u;for(i=[this],n=[];i.length>0;){for(a=0,o=(c=(u=i.shift()).oversized).length;a<o;a++)s=c[a],("function"==typeof e?e(s):void 0)&&n.push(s);for(r=0,l=(d=u.contents).length;r<l;r++)s=d[r],("function"==typeof e?e(s):void 0)&&n.push(s);for(t in u.children)null!=u.children[t].tree&&i.push(u.children[t].tree)}return n},c.prototype.filter=function(e){var t;return(t=function(i){var s,n,a,r,o,l,d,u,h,E,f;(n=new c({x:i.x,y:i.y,width:i.width,height:i.height,maxElements:i.maxElements})).size=0;for(s in i.children)null!=i.children[s].tree&&(n.children[s].tree=t(i.children[s].tree),n.size+=null!=(u=null!=(h=n.children[s].tree)?h.size:void 0)?u:0);for(r=0,l=(E=i.oversized).length;r<l;r++)a=E[r],(null==e||("function"==typeof e?e(a):void 0))&&n.oversized.push(a);for(o=0,d=(f=i.contents).length;o<d;o++)a=f[o],(null==e||("function"==typeof e?e(a):void 0))&&n.contents.push(a);return n.size+=n.oversized.length+n.contents.length,0===n.size?null:n})(this)},c.prototype.reject=function(e){return this.filter(function(t){return!("function"==typeof e?e(t):void 0)})},c.prototype.visit=function(e){var t,i,s;for(i=[this];i.length>0;){s=i.shift(),e.bind(s)();for(t in s.children)null!=s.children[t].tree&&i.push(s.children[t].tree)}return this},c.prototype.pretty=function(){var e,t,i,s,n,a,r;for(a="",i=function(e){var t,i,s;for(s="",t=i=e;i<=0?t<0:t>0;i<=0?++t:--t)s+="   ";return s},t=[{label:"ROOT",tree:this,level:0}];t.length>0;){a+=(s=i((r=t.shift()).level))+"| "+r.label+"\n"+s+"| ------------\n",r.tree.oversized.length>0&&(a+=s+"| * Oversized elements *\n"+s+"|   "+r.tree.oversized+"\n"),r.tree.contents.length>0&&(a+=s+"| * Leaf content *\n"+s+"|   "+r.tree.contents+"\n"),n=!1;for(e in r.tree.children)null!=r.tree.children[e].tree&&(n=!0,t.unshift({label:e,tree:r.tree.children[e].tree,level:r.level+1}));n&&(a+=s+"└──┐\n")}return a},c}()},"function"==typeof define&&define.amd?define([],n):"object"==typeof i&&t.exports?t.exports=n():s.Quadtree=n();var s,n},{}],11:[function(e,t,i){var s=e("./gameConfig.json"),n=Math.PI/180,a=e("../../modules/public/objectAssign.js");i.rotate=function(e){this.targetDirection===this.direction?this.currentState===s.OBJECT_STATE_MOVE||this.currentState===s.OBJECT_STATE_MOVE_AND_ATTACK?this.move(e):this.currentState===s.OBJECT_STATE_ATTACK||this.currentState===s.OBJECT_STATE_CAST&&this.executeSkill():(this.direction>0&&this.targetDirection<0?180-this.direction+180+this.targetDirection<this.direction-this.targetDirection?Math.abs(this.targetDirection-this.direction)<this.rotateSpeed*e?this.direction+=Math.abs(this.targetDirection-this.direction):this.direction+=this.rotateSpeed*e:this.targetDirection<this.direction&&(Math.abs(this.targetDirection-this.direction)<this.rotateSpeed*e?this.direction-=Math.abs(this.targetDirection-this.direction):this.direction-=this.rotateSpeed*e):this.direction<0&&this.targetDirection>0?180+this.direction+180-this.targetDirection<this.targetDirection-this.direction?Math.abs(this.targetDirection-this.direction)<this.rotateSpeed*e?this.direction-=Math.abs(this.targetDirection-this.direction):this.direction-=this.rotateSpeed*e:this.targetDirection>this.direction&&(Math.abs(this.targetDirection-this.direction)<this.rotateSpeed*e?this.direction+=Math.abs(this.targetDirection-this.direction):this.direction+=this.rotateSpeed*e):this.targetDirection>this.direction?Math.abs(this.targetDirection-this.direction)<this.rotateSpeed*e?this.direction+=Math.abs(this.targetDirection-this.direction):this.direction+=this.rotateSpeed*e:this.targetDirection<this.direction&&(Math.abs(this.targetDirection-this.direction)<this.rotateSpeed*e?this.direction-=Math.abs(this.targetDirection-this.direction):this.direction-=this.rotateSpeed*e),this.currentState!==s.OBJECT_STATE_MOVE&&this.currentState!==s.OBJECT_STATE_MOVE_AND_ATTACK||this.move(e,!0)),this.direction>=180?this.direction-=360:this.direction<=-180&&(this.direction+=360)},i.move=function(e,t){var n=this.targetPosition.x-this.center.x,a=this.targetPosition.y-this.center.y,r=Math.pow(n,2)+Math.pow(a,2);r<100&&this.currentState===s.OBJECT_STATE_MOVE_AND_ATTACK?this.executeSkill():r<100&&(this.stop(),this.changeState(s.OBJECT_STATE_IDLE)),Math.abs(n)<Math.abs(this.speed.x)*e&&(this.speed.x=n/e),Math.abs(a)<Math.abs(this.speed.y)*e&&(this.speed.y=a/e);var o=this.onMove(this);o&&i.isNumeric(o.x)&&i.isNumeric(o.y)&&(this.position.x+=o.x,this.position.y+=o.y),t?(this.position.x+=this.speed.x*e*s.MOVE_SLIGHT_RATE,this.position.y+=this.speed.y*e*s.MOVE_SLIGHT_RATE):(this.position.x+=this.speed.x*e,this.position.y+=this.speed.y*e),this.position.x<0?this.position.x=0:this.position.x>s.CANVAS_MAX_SIZE.width-this.size.width&&(this.position.x=s.CANVAS_MAX_SIZE.width-this.size.width),this.position.y<0?this.position.y=0:this.position.y>s.CANVAS_MAX_SIZE.height-this.size.height&&(this.position.y=s.CANVAS_MAX_SIZE.height-this.size.height),this.setCenter(),o&&(this.setTargetDirection(),this.setSpeed())},i.setSpeed=function(e){var t=this.targetPosition.x-this.center.x,i=this.targetPosition.y-this.center.y,s=Math.pow(t,2),n=Math.pow(i,2);0==t&&0==i?(this.speed.x=0,this.speed.y=0):s+n<100?(this.speed.x=t,this.speed.y=i):(this.speed.x=(t>=0?1:-1)*this.maxSpeed*Math.sqrt(s/(s+n)),this.speed.y=(i>=0?1:-1)*this.maxSpeed*Math.sqrt(n/(s+n))),e&&(this.speed.x*=1-e,this.speed.y*=1-e)},i.setTargetDirection=function(e){var t=this.targetPosition.x-this.center.x,i=this.targetPosition.y-this.center.y,s=180*Math.atan(i/t)/Math.PI;isNaN(s)?this.targetDirection=this.direction:this.targetDirection=t<0&&i>=0?s+180:t<0&&i<0?s-180:s,e&&(this.targetDirection>=0?this.targetDirection-=180:this.targetDirection+=180)},i.setTargetPosition=function(e,t){var i=e.x,n=e.y;return i<t.size.width/2?i=t.size.width/2:i>s.CANVAS_MAX_SIZE.width-t.size.width/2&&(i=s.CANVAS_MAX_SIZE.width-t.size.width/2),n<t.size.height/2?n=t.size.height/2:n>s.CANVAS_MAX_SIZE.height-t.size.height/2&&(n=s.CANVAS_MAX_SIZE.height-t.size.height/2),{x:i,y:n}},i.setMoveAttackUserTargetPosition=function(e,t,i){var s=e.x-i.center.x,n=e.y-i.center.y,a=s/Math.sqrt(Math.pow(s,2)+Math.pow(n,2)),r=n/Math.sqrt(Math.pow(s,2)+Math.pow(n,2)),o=t.range,l=s-a*o,c=n-r*o;if(Math.sqrt(Math.pow(s,2)+Math.pow(n,2))<o)var d=!0;else d=!1;return{x:i.center.x+l,y:i.center.y+c,moveBackward:d}},i.checkCircleCollision=function(e,t,i,s,n){var a=[],r={x:t,y:i,width:2*s,height:2*s,id:n};return e.onCollision(r,function(e){if(r.id!==e.id){var t=r.x+s,i=r.y+s,n=e.x+e.width/2,o=e.y+e.height/2;Math.pow(s+e.width/2,2)-Math.pow(n-t,2)-Math.pow(o-i,2)>0&&(a.collisionPosition={x:(t+n)/2,y:(i+o)/2},a.push(e))}}),a},i.calcCompelPos=function(e,t){for(var i={x:0,y:0},s=0;s<t.length;s++){var n=e.x+e.width/2,a=e.y+e.height/2,r=n-(t[s].x+t[s].width/2),o=a-(t[s].y+t[s].height/2),l=e.width/2+t[s].width/2-Math.sqrt(Math.pow(r,2)+Math.pow(o,2)),c=Math.pow(o/r,2),d=l*Math.sqrt(1/(1+c)),u=l*Math.sqrt(c/(1+c));i.x+=(r>0?1:-1)*d*1.1,i.y+=(o>0?1:-1)*u*1.1}return i},i.checkAndCalcCompelPos=function(e,t,i,s,n,a){var r=[];a={x:t,y:i,width:2*s,height:2*s,id:n};e.onCollision(a,function(e){if(a.id!==e.id){var t=a.x+a.width/2,i=a.y+a.height/2,s=e.x+e.width/2,n=e.y+e.height/2;Math.pow(a.width/2+e.width/2,2)-Math.pow(s-t,2)-Math.pow(n-i,2)>0&&r.push(e)}});var o={x:0,y:0};for(var l in r){var c=a.y+a.height/2,d=a.x+a.width/2-(r[l].x+r[l].width/2),u=c-(r[l].y+r[l].height/2),h=a.width/2+r[l].width/2-Math.sqrt(Math.pow(d,2)+Math.pow(u,2)),E=Math.pow(u/d,2),f=h*Math.sqrt(1/(1+E)),p=h*Math.sqrt(E/(1+E));o.x+=(d>0?1:-1)*f*1,o.y+=(u>0?1:-1)*p*1}return o},i.localToWorldPosition=function(e,t){return{x:e.x+t.x,y:e.y+t.y}},i.worldToLocalPosition=function(e,t,i){return i?{x:(e.x-t.x)*i,y:(e.y-t.y)*i}:{x:e.x-t.x,y:e.y-t.y}},i.worldXCoordToLocalX=function(e,t,i){return(e-t)*i},i.worldYCoordToLocalY=function(e,t,i){return(e-t)*i},i.isXInCanvas=function(e,t){return e>0&&e<t.canvasSize.width},i.isYInCanvas=function(e,t){return e>0&&e<t.canvasSize.height},i.isObjInCanvas=function(e,t,i){return e.x-t<=i.canvasSize.width&&e.x+t>=0&&e.y-t<=i.canvasSize.height&&e.y+t>=0},i.distanceSquare=function(e,t){var i=e.x-t.x,s=e.y-t.y;return Math.pow(i,2)+Math.pow(s,2)},i.distance=function(e,t){var s=i.distanceSpuare(e,t);return Math.sqrt(s)},i.calcSkillTargetPosition=function(e,t,a){switch(e.type){case s.SKILL_TYPE_INSTANT_RANGE:var r=e.range*Math.cos(a.direction*n),o=e.range*Math.sin(a.direction*n);return{x:a.center.x+r,y:a.center.y+o};case s.SKILL_TYPE_INSTANT_PROJECTILE:return{x:t.x,y:t.y};case s.SKILL_TYPE_RANGE:var l=i.distanceSquare(a.center,t);if(Math.pow(e.range,2)>l)return{x:t.x,y:t.y};var c=t.x-a.center.x,d=t.y-a.center.y,u=Math.atan(d/c);isNaN(u)?u=a.direction:c<0&&d>=0?u+=Math.PI:c<0&&d<0&&(u-=Math.PI);r=e.range*Math.cos(u),o=e.range*Math.sin(u);return{x:a.center.x+r,y:a.center.y+o};case s.SKILL_TYPE_SELF:case s.SKILL_TYPE_SELF_EXPLOSION:return{x:a.center.x,y:a.center.y};case s.SKILL_TYPE_TELEPORT:l=i.distanceSquare(a.center,t);if(Math.pow(e.range,2)>l)return{x:t.x,y:t.y};c=t.x-a.center.x,d=t.y-a.center.y,u=Math.atan(d/c);isNaN(u)?u=a.direction:c<0&&d>=0?u+=Math.PI:c<0&&d<0&&(u-=Math.PI);r=e.range*Math.cos(u),o=e.range*Math.sin(u);return{x:a.center.x+r,y:a.center.y+o};case s.SKILL_TYPE_PROJECTILE:case s.SKILL_TYPE_PROJECTILE_TICK:case s.SKILL_TYPE_PROJECTILE_EXPLOSION:case s.SKILL_TYPE_PROJECTILE_TICK_EXPLOSION:return{x:t.x,y:t.y}}},i.calcSkillTargetDirection=function(e,t,n){switch(e){case s.SKILL_TYPE_INSTANT_RANGE:case s.SKILL_TYPE_INSTANT_PROJECTILE:return n.direction;case s.SKILL_TYPE_RANGE:return i.calcTargetDirection(t,n.center,n.direction);case s.SKILL_TYPE_SELF:case s.SKILL_TYPE_SELF_EXPLOSION:return n.direction;case s.SKILL_TYPE_TELEPORT:case s.SKILL_TYPE_PROJECTILE:case s.SKILL_TYPE_PROJECTILE_TICK:case s.SKILL_TYPE_PROJECTILE_EXPLOSION:case s.SKILL_TYPE_PROJECTILE_TICK_EXPLOSION:return i.calcTargetDirection(t,n.center,n.direction)}},i.calcTargetDirection=function(e,t,i){var s=e.x-t.x,n=e.y-t.y,a=180*Math.atan(n/s)/Math.PI;return isNaN(a)?i:s<0&&n>=0?a+180:s<0&&n<0?a-180:a},i.calcTargetPosition=function(e,t,i){return{x:i*Math.cos(t*n),y:i*Math.sin(t*n)}},i.findData=function(e,t,i){for(var s=void 0,n=0;n<e.length;n++)if(e[n][t]==i){s=e[n];break}return s},i.findAllDatas=function(e,t,i){for(var s=[],n=0;n<e.length;n++)e[n][t]==i&&s.push(e[n]);return s},i.findDataWithTwoColumns=function(e,t,i,s,n){for(var a=[],r=null,o=0;o<e.length;o++)e[o][t]==i&&a.push(e[o]);if(a.length>0)for(o=0;o<a.length;o++)if(a[o][s]==n){r=a[o];break}return r},i.findAndSetBuffs=function(e,t,s){for(var n=[],r=0;r<10;r++){var o=e["buff"+(r+1)];if(!o)return n;var l=a({},i.findData(t,"index",o));l.actorID=s,n.push(l)}return n},i.getBuffs=function(e){for(var t=[],i=0;i<10;i++)e["buff"+(i+1)]&&t.push(e["buff"+(i+1)]);return t},i.setResourceData=function(e,t){t.resourceLength=0;for(var s=0;s<10;s++){var n=t["resourceIndex"+(s+1)];if(!n)break;var r=a({},i.findData(e,"index",n));t["resourceIndex"+(s+1)]=r,t.resourceLength=s+1}return!!t.resourceLength},i.makeUserEffect=function(e,t){var i={x:e.center.x,y:e.center.y};return{index:t.index,isRotate:t.isRotate,resourceIndex1:t.resourceIndex1,resourceIndex2:t.resourceIndex2,resourceIndex3:t.resourceIndex3,resourceIndex4:t.resourceIndex4,resourceIndex5:t.resourceIndex5,resourceIndex6:t.resourceIndex6,resourceIndex7:t.resourceIndex7,resourceIndex8:t.resourceIndex8,resourceIndex9:t.resourceIndex9,resourceIndex10:t.resourceIndex10,resourceLength:t.resourceLength,resourceLifeTime:t.resourceLifeTime,startTime:Date.now(),effectTimer:Date.now(),effectIndex:0,center:i,changeIndex:function(){this.effectIndex+1>=this.resourceLength?this.effectIndex=0:this.effectIndex++,this.effectTimer=Date.now()}}},i.generateRandomUniqueID=function(e,t,i){if(!i){for(var s=!1;!s;){var n=r(t);s=!0;for(var a in e)n==e[a].objectID&&(s=!1)}return n}if(i){for(var o=[],l=0;l<i;l++)for(s=!1;!s;){n=r(t);s=!0;for(var a in e)n==e[a].objectID&&(s=!1);for(var c=0;c<o.length;c++)n==o[c]&&(s=!1);s&&o.push(n)}return o}},i.getElementsByClassName=function(e,t){for(var i=[],s=e.getElementsByTagName("div"),n=0;n<s.length;n++)for(var a=0;a<s[n].classList.length;a++)s[n].classList[a]===t&&i.push(s[n]);return i},i.calcForePosition=function(e,t,i,s){return{x:e.x+s*Math.cos(i*n)-t,y:e.y+s*Math.sin(i*n)-t}},i.interpolationSine=function(e,t){return t?s.SKILL_EFFECT_INTERPOLATION_FACTOR*Math.sin(Math.PI*e/t)+.5:s.CAST_EFFECT_INTERPOLATION_FACTOR*Math.sin(2*Math.PI*e/1e3)+1},i.isNumeric=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};function r(e){for(var t=e,i=0;i<6;i++)t+=Math.floor(16*Math.random()).toString(16);return t}i.makeCssClipStyle=function(e,t){return t?"rect("+e.top*t+"px,"+e.right*t+"px,"+e.bottom*t+"px,"+e.left*t+"px)":"rect("+e.top+"px,"+e.right+"px,"+e.bottom+"px,"+e.left+"px)"},i.setImgCssStyle=function(e,t,i){i?(e.style.position="absolute",e.style.top=-t.top*i+"px",e.style.left=-t.left*i+"px",e.style.width=s.IMAGE_SOURCE_SIZE.width*i+"px",e.style.height=s.IMAGE_SOURCE_SIZE.height*i+"px"):(e.style.position="absolute",e.style.top=-t.top+"px",e.style.left=-t.left+"px",e.style.width=s.IMAGE_SOURCE_SIZE.width+"px",e.style.height=s.IMAGE_SOURCE_SIZE.height+"px")},i.processMessage=function(e){return e.replace(/(<([^>]+)>)/gi,"").substring(0,25)}},{"../../modules/public/objectAssign.js":9,"./gameConfig.json":8}],12:[function(e,t,i){var s,n,a,r,o,l,c,d,u,h,E,f,p,m,I,S,g,T,_,C,L,A,D,y,v,R,b=e("../../modules/public/util.js"),P=(e("../../modules/client/CUser.js"),e("../../modules/client/CManager.js")),O=e("../../modules/public/gameConfig.json"),k=e("../../modules/public/objectAssign.js"),x=e("../../modules/public/csvjson.js"),M=e("../../modules/public/data.json"),N={delimiter:",",quote:'"'},F=x.toObject(M.userStatData,N),w=x.toObject(M.skillData,N),B=x.toObject(M.buffGroupData,N),j=x.toObject(M.resourceData,N),U=x.toObject(M.iconResourceData,N),H=x.toObject(M.obstacleData,N),X=x.toObject(M.effectGroupData,N),K=e("../../modules/client/CUIManager.js"),G=Math.PI/180,Y=1e3/O.FPS,J=1e3/O.INTERVAL,z=0,W=!1,q=!1,V=Date.now(),Z=Date.now(),Q=new Array(5),$=!1,ee=Date.now(),te=[],ie=(O.GAME_STATE_LOAD,null),se=null,ne=!1,ae=0,re=!1,oe=!1,le=Date.now(),ce=Date.now(),de=O.DRAW_MODE_NORMAL,ue={x:0,y:0},he=null,Ee=1,fe=1,pe=1,me=1,Ie=O.SKILL_INDEX_PYRO_BASE,Se=O.SKILL_INDEX_PYRO_PASSIVE,ge=new Array(4),Te=O.SKILL_INDEX_FROST_BASE,_e=O.SKILL_INDEX_FROST_PASSIVE,Ce=new Array(4),Le=O.SKILL_INDEX_ARCANE_BASE,Ae=O.SKILL_INDEX_ARCANE_PASSIVE,De=new Array(4),ye=0,ve=null,Re=0,be=null,Pe=new Array(4),Oe=new Array(4),ke=[],xe=null,Me={gold:0,jewel:0},Ne=!1;function Fe(e){switch(clearInterval(re),clearInterval(oe),re=!1,oe=!1,e){case O.GAME_STATE_LOAD:e,ie=we,se=Be;break;case O.GAME_STATE_START_SCENE:e,ie=null,se=je;break;case O.GAME_STATE_GAME_START:e,ie=Ue,se=null;break;case O.GAME_STATE_GAME_ON:e,ie=He,se=Xe;break;case O.GAME_STATE_END:e,ie=Ke,se=Xe;break;case O.GAME_STATE_RESTART_SCENE:e,ie=null,se=Ge;break;case O.GAME_STATE_RESTART:e,ie=Ye,se=null}!function(){se&&(re=setInterval(se,Y));ie&&ie()}()}function we(){a=document.getElementById("canvas"),r=a.getContext("2d"),a.onfocusout=function(e){alert("focusout")},(n=new K(w,B,U,F)).onStartBtnClick=function(e,t){Ee=e,t===O.START_BUTTON?Fe(O.GAME_STATE_GAME_START):t===O.RESTART_BUTTON&&Fe(O.GAME_STATE_RESTART)},n.onSkillUpgrade=function(e){s.emit("upgradeSkill",e)},n.onExchangeSkill=function(e){at(e)},n.onExchangePassive=function(e,t){s.emit("exchangePassive",e,t)},n.onEquipPassive=function(e){s.emit("equipPassive",e)},n.onUnequipPassive=function(e){s.emit("unequipPassive",e)},n.onSkillIconClick=function(e){if(e===O.SKILL_BASIC_INDEX)var t=k({},ve);else e===O.SKILL_EQUIP1_INDEX?t=k({},Oe[0]):e===O.SKILL_EQUIP2_INDEX?t=k({},Oe[1]):e===O.SKILL_EQUIP3_INDEX?t=k({},Oe[2]):e===O.SKILL_EQUIP4_INDEX&&(t=k({},Oe[3]));tt(t)},n.onSelectSkillCancelBtnClick=function(){it(O.DRAW_MODE_NORMAL)},n.onSelectCharIcon=function(e){Ee=e;var t=1;switch(e){case O.CHAR_TYPE_FIRE:t=fe,ye=Ie;for(var i=0;i<4;i++)Pe[i]=ge[i];Re=Se;break;case O.CHAR_TYPE_FROST:t=pe,ye=Te;for(var i=0;i<4;i++)Pe[i]=Ce[i];Re=_e;break;case O.CHAR_TYPE_ARCANE:t=me,ye=Le;for(var i=0;i<4;i++)Pe[i]=De[i];Re=Ae}ve=k({},b.findData(w,"index",ye)),be=k({},b.findData(w,"index",Re));for(var i=0;i<4;i++)Pe[i]?Oe[i]=k({},b.findData(w,"index",Pe[i])):Oe[i]=void 0;n.syncSkills(ye,ve,Pe,Oe,ke,Re,be),n.setPopUpSkillChange(!0),n.updateCharInfoSelectedPanel(e,t)},document.body.onmousedown=function(e){2===e.button&&de===O.DRAW_MODE_SKILL_RANGE&&it(O.DRAW_MODE_NORMAL)},b=e("../../modules/public/util.js"),e("../../modules/client/CUser.js"),P=e("../../modules/client/CManager.js"),O=e("../../modules/public/gameConfig.json"),(o=new P(O)).onSkillFire=ze,o.onProjectileSkillFire=We,l=new Image,c=new Image,d=new Image,u=new Image,Q[0]=k({},b.findData(j,"index",O.RESOURCE_INDEX_USER_HAND_1)),Q[1]=k({},b.findData(j,"index",O.RESOURCE_INDEX_USER_HAND_2)),Q[2]=k({},b.findData(j,"index",O.RESOURCE_INDEX_USER_HAND_3)),Q[3]=k({},b.findData(j,"index",O.RESOURCE_INDEX_USER_HAND_4)),Q[4]=k({},b.findData(j,"index",O.RESOURCE_INDEX_USER_HAND_5)),h=k({},b.findData(j,"index",O.RESOURCE_INDEX_OBSTACLE_TREE_INSIDE)),E=k({},b.findData(j,"index",O.RESOURCE_INDEX_OBJ_GOLD)),f=k({},b.findData(j,"index",O.RESOURCE_INDEX_OBJ_JEWEL)),p=k({},b.findData(j,"index",O.RESOURCE_INDEX_OBJ_BOX)),m=k({},b.findData(j,"index",O.RESOURCE_INDEX_OBJ_SKILL_FIRE)),I=k({},b.findData(j,"index",O.RESOURCE_INDEX_OBJ_SKILL_FROST)),S=k({},b.findData(j,"index",O.RESOURCE_INDEX_OBJ_SKILL_ARCANE)),g=k({},b.findData(j,"index",O.RESOURCE_INDEX_CASTING_FIRE)),T=k({},b.findData(j,"index",O.RESOURCE_INDEX_CASTING_FROST)),_=k({},b.findData(j,"index",O.RESOURCE_INDEX_CASTING_ARCANE)),C=k({},b.findData(j,"index",O.RESOURCE_INDEX_PROJECTILE_FIRE)),L=k({},b.findData(j,"index",O.RESOURCE_INDEX_PROJECTILE_FROST)),A=k({},b.findData(j,"index",O.RESOURCE_INDEX_PROJECTILE_ARCANE)),D=k({},b.findData(j,"index",O.RESOURCE_INDEX_SKILL_EFFECT_FIRE)),y=k({},b.findData(j,"index",O.RESOURCE_INDEX_SKILL_EFFECT_FROST)),v=k({},b.findData(j,"index",O.RESOURCE_INDEX_SKILL_EFFECT_ARCANE)),R=k({},b.findData(j,"index",O.RESOURCE_INDEX_PROJECTILE_SKILL_ARROW)),l.src=O.RESOURCE_SRC_OBJECT,l.onload=Je,c.src=O.RESOURCE_SRC_CHARACTER,c.onload=Je,u.src=O.RESOURCE_SRC_SKILL_EFFECT,u.onload=Je,d.src=O.RESOURCE_SRC_UI,d.onload=Je,n.setSkillIconResource(d),n.initStartScene(),n.initHUD(),n.initPopUpSkillChanger(),n.setSkillChangeBtn(),q=!0,qe(),window.oncontextmenu=function(){return!1},window.onresize=function(){qe()}}function Be(){W&&q&&Date.now()-V>=O.MINIMUM_LOADING_TIME?Fe(O.GAME_STATE_START_SCENE):Date.now()-Z>=O.CHANGE_LOADING_TEXT_TIME&&(Z=Date.now(),n.changeLoadingText())}function je(){n.drawStartScene()}function Ue(){n.disableStartButton(),(s=io("/",{forceNew:!1})).on("connect",function(){}),s.on("disconnect",function(){window.location.href="http://localhost/error"}),s.on("firePong",function(e,t){ae=Date.now()-e,timeDiff=Date.now()-(t+ae/2),s.emit("updateUserTimeDiff",Date.now(),ae)}),s.on("syncAndSetSkills",function(e){Date.now(),O.userID=e.objectID,ye=e.baseSkill,ve=k({},b.findData(w,"index",e.baseSkill)),Re=e.inherentPassiveSkill,be=k({},b.findData(w,"index",e.inherentPassiveSkill));for(var t=0;t<4;t++)e.equipSkills[t]?Pe[t]=e.equipSkills[t]:Pe[t]=void 0;for(var t=0;t<4;t++)e.equipSkills[t]?Oe[t]=k({},b.findData(w,"index",e.equipSkills[t])):Oe[t]=void 0;ke=e.possessSkills,n.syncSkills(ye,ve,Pe,Oe,ke,Re,be),n.setHUDSkills(),n.updateBuffIcon(),n.setHUDStats(e),n.updateCondition(e.conditions),n.setCooldownReduceRate(e.cooldownReduceRate),n.setPopUpSkillChange(),n.setUserPosition(e.position)}),s.on("resStartGame",function(e,t,i){o.start(F,j,H),o.setUsers(e),o.setObjs(t),o.setChests(i),o.synchronizeUser(O.userID),o.onMainUserMove=function(e){n.updateUserPosition(e.position)};var s=k({},b.findAllDatas(H,"type",O.OBJ_TYPE_CHEST_GROUND));n.setBoard(e,O.userID),n.setMiniMapChests(i,s),Ze(),Qe(),Fe(O.GAME_STATE_GAME_ON),oe=setInterval(Ve,J)}),s.on("resRestartGame",function(e,t){switch(o.iamRestart(e),o.updateUserData(e),o.changeUserStat(e,!0),n.updateCondition(e.conditions),n.updateMP(e),n.checkSkillsConditions(),Ze(),Qe(),ye=e.baseSkill,ve=k({},b.findData(w,"index",e.baseSkill)),Re=e.inherentPassiveSkill,be=k({},b.findData(w,"index",e.inherentPassiveSkill)),Ee){case O.CHAR_TYPE_FIRE:for(var i=0;i<4;i++)Pe[i]=ge[i];break;case O.CHAR_TYPE_FROST:for(var i=0;i<4;i++)Pe[i]=Ce[i];break;case O.CHAR_TYPE_ARCANE:for(var i=0;i<4;i++)Pe[i]=De[i]}for(var i=0;i<4;i++)Pe[i]?Oe[i]=k({},b.findData(w,"index",Pe[i])):Oe[i]=void 0;ke=e.possessSkills,n.syncSkills(ye,ve,Pe,Oe,ke,Re,be),n.setHUDSkills(),n.setHUDStats(e),n.setCooldownReduceRate(e.cooldownReduceRate),n.setPopUpSkillChange(),n.updateBoard(t,O.userID),n.updateHP(e),n.updateMP(e),Fe(O.GAME_STATE_GAME_ON),oe=setInterval(Ve,J)}),s.on("userJoined",function(e,t){e.imgData=o.setImgData(e),o.setUser(e),n.updateBoard(t,O.userID)}),s.on("userDataUpdate",function(e){o.updateUserData(e)}),s.on("userDataSync",function(e){o.syncUserData(e)}),s.on("userMoveAndAttack",function(e){var t=k({},b.findData(w,"index",e.skillIndex));t.targetPosition=e.skillTargetPosition,o.moveAndAttackUser(e.objectID,e.targetPosition,t,e.moveBackward)}),s.on("userDataUpdateAndUseSkill",function(e){o.updateUserData(e);var t=k({},b.findData(w,"index",e.skillIndex));o.applyCastSpeed(e.objectID,t),t.targetPosition=e.skillTargetPosition,t.direction=e.skillDirection,t.type!==O.SKILL_TYPE_PROJECTILE&&t.type!==O.SKILL_TYPE_PROJECTILE_TICK&&t.type!==O.SKILL_TYPE_PROJECTILE_EXPLOSION&&t.type!==O.SKILL_TYPE_PROJECTILE_TICK_EXPLOSION&&t.type!==O.SKILL_TYPE_INSTANT_PROJECTILE||(t.projectileIDs=e.skillProjectileIDs),o.useSkill(e.objectID,t)}),s.on("skillFired",function(e,t){var i=e.syncFireTime+timeDiff,s=i-Date.now();s<0&&(s=0),setTimeout(function(){var i=k({},b.findData(w,"index",e.skillIndex));if(i.targetPosition=e.skillTargetPosition,i.explosionEffectGroup){var s=k({},b.findData(X,"index",i.explosionEffectGroup));b.setResourceData(j,s)}o.applySkill(i,t,s)},s)}),s.on("projectilesFired",function(e,t,i){var s=t+timeDiff,n=s-Date.now();n<0&&(n=0),setTimeout(function(){for(var t=0;t<e.length;t++){var s=k({},b.findData(w,"index",e[t].skillIndex));if(s.userID=i,s.objectID=e[t].objectID,s.position=e[t].position,s.speed=e[t].speed,s.startTime=Date.now(),s.projectileEffectGroup){var n=k({},b.findData(X,"index",s.projectileEffectGroup));b.setResourceData(j,n)}if(s.explosionEffectGroup){var a=k({},b.findData(X,"index",s.explosionEffectGroup));b.setResourceData(j,a)}o.applyProjectile(s,n,a)}},n)}),s.on("upgradeSkill",function(e,t,i){if(n.setResource(i),e===ye)ye=t,ve=k({},b.findData(w,"index",t)),n.upgradeBaseSkill(ye,ve);else if(e===Re)Re=t,be=k({},b.findData(w,"index",t)),n.upgradeInherentSkill(Re,be);else{for(var s=0;s<4;s++){var a=k({},b.findData(w,"index",t));Pe[s]===e&&(Pe.splice(s,1,t),Oe.splice(s,1,a)),ge[s]===e&&ge.splice(s,1,t),Ce[s]===e&&Ce.splice(s,1,t),De[s]===e&&De.splice(s,1,t)}for(var s=0;s<ke.length;s++)if(ke[s]===e){ke.splice(s,1,t),n.upgradePossessionSkill(e,t);break}}n.playSkillUpgradeEffect(),at(Ee)}),s.on("updateUserPrivateStat",function(e){n.setHUDStats(e),n.setCooldownReduceRate(e.cooldownReduceRate)}),s.on("deleteProjectile",function(e,t){o.deleteProjectile(e,t)}),s.on("explodeProjectile",function(e,t,i){o.explodeProjectile(e,t,i)}),s.on("createOBJs",function(e){o.createOBJs(e)}),s.on("deleteOBJ",function(e){o.deleteOBJ(e)}),s.on("createChest",function(e){o.createChest(e),n.createChest(e.locationID,e.grade)}),s.on("chestDamaged",function(e,t){o.updateChest(e,t),te.indexOf(e)&&(te.push(e),setTimeout(function(){var t=te.indexOf(e);te.splice(t,1)},O.SKILL_HIT_EFFECT_TIME))}),s.on("deleteChest",function(e){o.deleteChest(e),n.deleteChest(e)}),s.on("getResource",function(e,t){n.makeRisingMessage(t),n.setResource(e)}),s.on("getSkill",function(e){var t=k({},b.findData(w,"index",e));n.makeRisingMessageForSkill(t,!1)}),s.on("skillChangeToResource",function(e){var t=k({},b.findData(w,"index",e));n.addResource(t.exchangeToGold,t.exchangeToJewel),n.makeRisingMessageForSkill(t,!0)}),s.on("changeUserStat",function(e,t){if(e.objectID===O.userID&&(n.updateCondition(e.conditions),n.updateMP(e),n.checkSkillsConditions(),t&&n.makeRisingMessage(t)),o.changeUserStat(e),e.objectID===O.userID){n.updateHP(e),n.updateMP(e);var i=k({},b.findDataWithTwoColumns(F,"type",Ee,"level",e.level)).needExp;n.updateExp(e,i)}}),s.on("userDamaged",function(e,t){if(t){var i=k({},b.findData(w,"index",t)).hitEffectGroup,s=k({},b.findData(X,"index",i)),a=b.setResourceData(j,s);a&&o.updateSkillHitImgData(e.objectID,s)}o.changeUserStat(e),e.objectID===O.userID&&(n.updateHP(e),n.updateMP(e),n.updateCondition(e.conditions),n.checkSkillsConditions())}),s.on("updateBuff",function(e){e.objectID===O.userID&&n.updateBuffIcon(e.passiveList,e.buffList);var t=[],i=k({},b.findData(w,"index",e.inherentPassive)).buffToSelf,s=k({},b.findData(B,"index",i)).buffEffectGroup,a=k({},b.findData(X,"index",s)),r=b.setResourceData(j,a);r&&t.push(a);for(var l=0;l<e.buffList.length;l++)s=k({},b.findData(B,"index",e.buffList[l].index)).buffEffectGroup,a=k({},b.findData(X,"index",s)),(r=b.setResourceData(j,a))&&t.push(a);for(var l=0;l<e.passiveList.length;l++)s=k({},b.findData(B,"index",e.passiveList[l])).buffEffectGroup,a=k({},b.findData(X,"index",s)),(r=b.setResourceData(j,a))&&t.push(a);o.updateUserBuffImgData(e.objectID,t)}),s.on("updateSkillPossessions",function(e){o.updateSkillPossessions(O.userID,e);var t=[];if(ke.length!==e.length)for(var i=0;i<e.length;i++)-1===ke.indexOf(e[i])&&t.push(e[i]);ke=e,t.length&&n.updateNewSkills(t),n.updatePossessionSkills(ke),n.setPopUpSkillChange()}),s.on("updateRank",function(e){n.updateBoard(e,O.userID)}),s.on("chatting",function(e,t){o.setUserChatMsg(e,t)}),s.on("userDead",function(e,t,i,s,a,r){t===O.userID&&(o.iamDead(),fe=s.pyroLevel,pe=s.frosterLevel,me=s.mysterLevel,xe=e,Me={gold:a.goldLoseAmount,jewel:a.jewelLoseAmount},r?(function(e){ye=e.baseSkill,Re=e.inherentPassiveSkill;for(var t=0;t<4;t++)for(var i=0;i<e.possessSkills.length;i++){var s=k({},b.findData(w,"index",e.possessSkills[i]));if(Oe[t]&&Oe[t].groupIndex===s.groupIndex){Pe.splice(t,1,s.index),Oe.splice(t,1,s);break}}}(r),Ne=!0):Ne=!1,Fe(O.GAME_STATE_END)),o.kickUser(t),n.updateBoard(i,O.userID)}),s.on("userLeave",function(e,t){o.kickUser(e),n.updateBoard(t,O.userID)}),s.emit("reqStartGame",Ee),ce=Date.now(),s.emit("firePing",ce)}function He(){n.disableStartScene()}function Xe(){n.drawGameScene(),O.userOffset={x:o.user.center.x-O.canvasSize.width/(2*O.scaleFactor),y:o.user.center.y-O.canvasSize.height/(2*O.scaleFactor)},r.fillStyle="rgb(103, 124, 81)",r.fillRect(0,0,a.width,a.height),function(){r.fillStyle="rgb(96, 56, 19)";var e=-O.userOffset.x*O.scaleFactor,t=-O.userOffset.y*O.scaleFactor,i=O.CANVAS_MAX_SIZE.width*O.scaleFactor,s=O.CANVAS_MAX_SIZE.height*O.scaleFactor;r.fillRect(e,t,i,s),r.fillStyle="rgb(105, 147, 50)";var e=(200-O.userOffset.x)*O.scaleFactor,t=(200-O.userOffset.y)*O.scaleFactor,i=(O.CANVAS_MAX_SIZE.width-400)*O.scaleFactor,s=(O.CANVAS_MAX_SIZE.height-400)*O.scaleFactor;r.fillRect(e,t,i,s)}(),function(){r.lineWidth=3,r.strokeStyle="rgb(103, 124, 81)",r.beginPath();for(var e=-O.userOffset.x-800;e<O.canvasSize.width;e+=O.CANVAS_MAX_LOCAL_SIZE.width/32){var t=e*O.scaleFactor;b.isXInCanvas(t,O)&&(r.moveTo(t,0),r.lineTo(t,O.canvasSize.height))}for(var i=-O.userOffset.y-500;i<O.canvasSize.height;i+=O.CANVAS_MAX_LOCAL_SIZE.height/20){var s=i*O.scaleFactor;b.isYInCanvas(s,O)&&(r.moveTo(0,s),r.lineTo(O.canvasSize.width,s))}r.stroke(),r.globalAlpha=1,r.closePath()}(),function(){for(var e=0;e<o.objGolds.length;e++){var t=b.worldXCoordToLocalX(o.objGolds[e].position.x,O.userOffset.x,O.scaleFactor),i=b.worldYCoordToLocalY(o.objGolds[e].position.y,O.userOffset.y,O.scaleFactor);r.drawImage(l,E.srcPosX,E.srcPosY,E.srcWidth,E.srcHeight,t,i,2*o.objGolds[e].radius*O.scaleFactor,2*o.objGolds[e].radius*O.scaleFactor)}for(var e=0;e<o.objJewels.length;e++)t=b.worldXCoordToLocalX(o.objJewels[e].position.x,O.userOffset.x,O.scaleFactor),i=b.worldYCoordToLocalY(o.objJewels[e].position.y,O.userOffset.y,O.scaleFactor),r.drawImage(l,f.srcPosX,f.srcPosY,f.srcWidth,f.srcHeight,t,i,2*o.objJewels[e].radius*O.scaleFactor,2*o.objJewels[e].radius*O.scaleFactor);for(var e=0;e<o.objBoxs.length;e++)t=b.worldXCoordToLocalX(o.objBoxs[e].position.x,O.userOffset.x,O.scaleFactor),i=b.worldYCoordToLocalY(o.objBoxs[e].position.y,O.userOffset.y,O.scaleFactor),r.drawImage(l,p.srcPosX,p.srcPosY,p.srcWidth,p.srcHeight,t,i,2*o.objBoxs[e].radius*O.scaleFactor,2*o.objBoxs[e].radius*O.scaleFactor);for(var e=0;e<o.objSkills.length;e++){switch(t=b.worldXCoordToLocalX(o.objSkills[e].position.x,O.userOffset.x,O.scaleFactor),i=b.worldYCoordToLocalY(o.objSkills[e].position.y,O.userOffset.y,O.scaleFactor),o.objSkills[e].property){case O.SKILL_PROPERTY_FIRE:var s=m;break;case O.SKILL_PROPERTY_FROST:s=I;break;case O.SKILL_PROPERTY_ARCANE:s=S}r.drawImage(l,s.srcPosX,s.srcPosY,s.srcWidth,s.srcHeight,t,i,2*o.objSkills[e].radius*O.scaleFactor,2*o.objSkills[e].radius*O.scaleFactor)}}(),function(){for(var e=0;e<o.userEffects.length;e++){var t=o.userEffects[e]["resourceIndex"+(o.userEffects[e].effectIndex+1)],i=b.worldToLocalPosition(o.userEffects[e].center,O.userOffset,O.scaleFactor);r.drawImage(u,t.srcPosX,t.srcPosY,t.srcWidth,t.srcHeight,i.x-t.width/2*O.scaleFactor,i.y-t.height/2*O.scaleFactor,t.width*O.scaleFactor,t.height*O.scaleFactor)}}(),function(){for(var e in o.users){r.save();var t=b.worldToLocalPosition(o.users[e].center,O.userOffset,O.scaleFactor);if(b.isObjInCanvas(t,o.users[e].size.width/2,O)){var i=o.users[e].direction*G;r.translate(t.x,t.y),r.rotate(i);for(var s=0;s<o.users[e].buffImgDataList.length;s++)if(!o.users[e].buffImgDataList[s].isFront&&o.users[e].buffImgDataList[s].isAttach){var n=o.users[e].effectIndex%o.users[e].buffImgDataList[s].resourceLength+1,a=o.users[e].buffImgDataList[s]["resourceIndex"+n];if(o.users[e].buffImgDataList[s].isRotate){r.restore(),r.save(),r.translate(t.x,t.y);var l=(o.users[e].buffImgDataList[s].rotateStartDegree+o.users[e].effectRotateDegree)*G;r.rotate(l),r.drawImage(u,a.srcPosX,a.srcPosY,a.srcWidth,a.srcHeight,-a.width/2*O.scaleFactor,-a.height/2*O.scaleFactor,a.width*O.scaleFactor,a.height*O.scaleFactor),r.restore(),r.save(),r.translate(t.x,t.y),r.rotate(i)}else r.drawImage(u,a.srcPosX,a.srcPosY,a.srcWidth,a.srcHeight,-a.width/2*O.scaleFactor,-a.height/2*O.scaleFactor,a.width*O.scaleFactor,a.height*O.scaleFactor)}var a=Q[o.users[e].imgHandIndex];if(r.drawImage(c,a.srcPosX,a.srcPosY,a.srcWidth,a.srcHeight,-a.width/2*O.scaleFactor,-a.height/2*O.scaleFactor,a.width*O.scaleFactor,a.height*O.scaleFactor),r.drawImage(c,o.users[e].imgData.srcPosX,o.users[e].imgData.srcPosY,o.users[e].imgData.srcWidth,o.users[e].imgData.srcHeight,-o.users[e].imgData.width/2*O.scaleFactor,-o.users[e].imgData.height/2*O.scaleFactor,o.users[e].imgData.width*O.scaleFactor,o.users[e].imgData.height*O.scaleFactor),o.users[e].skillCastEffectPlay&&o.users[e].currentSkill){switch(o.users[e].currentSkill.property){case O.SKILL_PROPERTY_FIRE:var a=g;break;case O.SKILL_PROPERTY_FROST:a=T;break;case O.SKILL_PROPERTY_ARCANE:a=_}var d=o.users[e].castEffectFactor;r.drawImage(c,a.srcPosX,a.srcPosY,a.srcWidth,a.srcHeight,-a.width/2*O.scaleFactor*d,-a.height/2*O.scaleFactor*d,a.width*O.scaleFactor*d,a.height*O.scaleFactor*d)}for(var s=0;s<o.users[e].hitImgDataList.length;s++)if(o.users[e].hitImgDataList[s].isAttach){var n=o.users[e].effectIndex%o.users[e].hitImgDataList[s].resourceLength+1,a=o.users[e].hitImgDataList[s]["resourceIndex"+n];if(o.users[e].hitImgDataList[s].isRotate){r.restore(),r.save(),r.translate(t.x,t.y);var l=(o.users[e].hitImgDataList[s].rotateStartDegree+o.users[e].effectRotateDegree)*G;r.rotate(l),r.drawImage(c,a.srcPosX,a.srcPosY,a.srcWidth,a.srcHeight,-a.width/2*O.scaleFactor,-a.height/2*O.scaleFactor,a.width*O.scaleFactor,a.height*O.scaleFactor),r.restore(),r.save(),r.translate(t.x,t.y),r.rotate(i)}else r.drawImage(u,a.srcPosX,a.srcPosY,a.srcWidth,a.srcHeight,-a.width/2*O.scaleFactor,-a.height/2*O.scaleFactor,a.width*O.scaleFactor,a.height*O.scaleFactor)}for(var s=0;s<o.users[e].buffImgDataList.length;s++)if(o.users[e].buffImgDataList[s].isFront&&o.users[e].buffImgDataList[s].isAttach){var n=o.users[e].effectIndex%o.users[e].buffImgDataList[s].resourceLength+1,a=o.users[e].buffImgDataList[s]["resourceIndex"+n];if(o.users[e].buffImgDataList[s].isRotate){r.restore(),r.save(),r.translate(t.x,t.y);var l=(o.users[e].buffImgDataList[s].rotateStartDegree+o.users[e].effectRotateDegree)*G;r.rotate(l),r.drawImage(u,a.srcPosX,a.srcPosY,a.srcWidth,a.srcHeight,-a.width/2*O.scaleFactor,-a.height/2*O.scaleFactor,a.width*O.scaleFactor,a.height*O.scaleFactor),r.restore(),r.save(),r.translate(t.x,t.y),r.rotate(i)}else r.drawImage(u,a.srcPosX,a.srcPosY,a.srcWidth,a.srcHeight,-a.width/2*O.scaleFactor,-a.height/2*O.scaleFactor,a.width*O.scaleFactor,a.height*O.scaleFactor)}r.restore();var h=b.worldToLocalPosition(o.users[e].position,O.userOffset,O.scaleFactor);if(o.users[e].chatMessageTimeout){r.beginPath();var E=(12*o.users[e].chatMessage.length+20)*O.scaleFactor;r.strokeStyle="#000000",r.fillStyle="#ffffff",r.fillRect(t.x-E/2,h.y-30*O.scaleFactor,E,25*O.scaleFactor),r.strokeRect(t.x-E/2,h.y-30*O.scaleFactor,E,25*O.scaleFactor),r.fillStyle="#000000",r.moveTo(t.x-8,h.y-5*O.scaleFactor),r.lineTo(t.x+8,h.y-5*O.scaleFactor),r.lineTo(t.x,h.y),r.fill(),r.textAlign="center",r.font="20px Comic Sans MS",r.fillText(o.users[e].chatMessage,t.x,h.y-10.5*O.scaleFactor),r.closePath()}r.beginPath(),r.fillStyle="#ff0000";var f=h.x-7*O.scaleFactor,E=o.users[e].HP/o.users[e].maxHP*79*O.scaleFactor,p=7*O.scaleFactor;r.fillRect(f,h.y+80*O.scaleFactor,E,p),r.fillStyle="#0000ff",E=o.users[e].MP/o.users[e].maxMP*79*O.scaleFactor,p=4*O.scaleFactor,r.fillRect(f,h.y+87*O.scaleFactor,E,p),r.strokeStyle="rgb(15,15,15)",E=79*O.scaleFactor,p=10*O.scaleFactor,r.lineJoin="round",r.fillRect(f,h.y+86.25*O.scaleFactor,E,.75),r.strokeRect(f,h.y+80*O.scaleFactor,E,p),r.closePath()}}r.globalAlpha=1}(),function(){var e=!1;Date.now()-ee>=O.IMG_COLLISION_CLEAR_TIME&&(e=!0,ee=Date.now());for(var t=0;t<o.obstacles.length-o.treesCount;t++){var i=b.worldToLocalPosition(o.obstacles[t].center,O.userOffset,O.scaleFactor);b.isObjInCanvas(i,o.obstacles[t].imgData.width/2,O)&&(r.drawImage(l,o.obstacles[t].imgData.srcPosX,o.obstacles[t].imgData.srcPosY,o.obstacles[t].imgData.srcWidth,o.obstacles[t].imgData.srcHeight,i.x-o.obstacles[t].imgData.width/2*O.scaleFactor,i.y-o.obstacles[t].imgData.height/2*O.scaleFactor,o.obstacles[t].imgData.width*O.scaleFactor,o.obstacles[t].imgData.height*O.scaleFactor),o.obstacles[t].staticEle.isCollide&&(r.beginPath(),r.arc(i.x,i.y,o.obstacles[t].imgData.width/2*.9*O.scaleFactor,0,2*Math.PI),r.fillStyle="rgba(255, 0, 0, 0.5)",r.fill(),r.closePath()),e&&(o.obstacles[t].staticEle.isCollide=!1))}(function(){for(var e=0;e<o.projectiles.length;e++){if(o.projectiles[e].projectileImgData)var t=o.projectiles[e].projectileImgData.resourceIndex1,i=o.projectiles[e].projectileImgData.isRotate;else switch(o.projectiles[e].property){case O.SKILL_PROPERTY_FIRE:t=C;break;case O.SKILL_PROPERTY_FROST:t=L;break;case O.SKILL_PROPERTY_ARCANE:t=A}var s=b.worldXCoordToLocalX(o.projectiles[e].position.x,O.userOffset.x,O.scaleFactor),n=b.worldYCoordToLocalY(o.projectiles[e].position.y,O.userOffset.y,O.scaleFactor),a=o.projectiles[e].radius*O.scaleFactor;if(i){var l=s+a,c=n+a;r.save(),r.translate(l,c);var d=o.projectiles[e].effectRotateDegree*G;r.rotate(d),r.drawImage(u,t.srcPosX,t.srcPosY,t.srcWidth,t.srcHeight,-a*O.scaleFactor,-a*O.scaleFactor,t.width*O.scaleFactor,t.height*O.scaleFactor),r.restore()}else r.drawImage(u,t.srcPosX,t.srcPosY,t.srcWidth,t.srcHeight,s,n,2*a,2*a)}})(),function(){for(var e=0;e<o.chests.length;e++){r.beginPath();var t=b.worldToLocalPosition(o.chests[e].center,O.userOffset,O.scaleFactor);if(r.drawImage(l,o.chests[e].imgData.srcPosX,o.chests[e].imgData.srcPosY,o.chests[e].imgData.srcWidth,o.chests[e].imgData.srcHeight,t.x-o.chests[e].imgData.width/2*O.scaleFactor,t.y-o.chests[e].imgData.height/2*O.scaleFactor,o.chests[e].imgData.width*O.scaleFactor,o.chests[e].imgData.height*O.scaleFactor),-1!==te.indexOf(o.chests[e].locationID)){var i=b.worldToLocalPosition(o.chests[e].position,O.userOffset,O.scaleFactor);r.fillStyle="rgba(255, 0, 0, 0.5)",r.fillRect(i.x,i.y-2.5,.85*o.chests[e].imgData.width*O.scaleFactor,.85*o.chests[e].imgData.height*O.scaleFactor)}r.fillStyle="#ff0000";var s=o.chests[e].HP/o.chests[e].maxHP*85*O.scaleFactor,n=10*O.scaleFactor,a=t.x-42.5*O.scaleFactor,c=t.y+60*O.scaleFactor;r.fillRect(a,c,s,n),r.strokeStyle="#000000",s=85*O.scaleFactor,r.strokeRect(a,c,s,n),r.closePath()}}();for(var t=o.obstacles.length-o.treesCount;t<o.obstacles.length;t++){var i=b.worldToLocalPosition(o.obstacles[t].center,O.userOffset,O.scaleFactor);b.isObjInCanvas(i,o.obstacles[t].imgData.width/2,O)&&(o.obstacles[t].treeImgEle.isCollide?r.drawImage(l,h.srcPosX,h.srcPosY,h.srcWidth,h.srcHeight,i.x-o.obstacles[t].imgData.width/2*O.scaleFactor,i.y-o.obstacles[t].imgData.height/2*O.scaleFactor,o.obstacles[t].imgData.width*O.scaleFactor,o.obstacles[t].imgData.height*O.scaleFactor):r.drawImage(l,o.obstacles[t].imgData.srcPosX,o.obstacles[t].imgData.srcPosY,o.obstacles[t].imgData.srcWidth,o.obstacles[t].imgData.srcHeight,i.x-o.obstacles[t].imgData.width/2*O.scaleFactor,i.y-o.obstacles[t].imgData.height/2*O.scaleFactor,o.obstacles[t].imgData.width*O.scaleFactor,o.obstacles[t].imgData.height*O.scaleFactor),e&&(o.obstacles[t].treeImgEle.isCollide=!1),o.obstacles[t].staticEle.isCollide&&(r.beginPath(),r.arc(i.x,i.y,o.obstacles[t].imgData.width/2*.9*O.scaleFactor,0,2*Math.PI),r.fillStyle="rgba(255, 0, 0, 0.5)",r.fill(),r.closePath()),e&&(o.obstacles[t].staticEle.isCollide=!1))}}(),function(){for(var e=0;e<o.effects.length;e++){if(r.beginPath(),r.fillStyle="#ff0000",o.effects[e].effectImgData)var t=o.effects[e].effectImgData.resourceIndex1;else switch(o.effects[e].property){case O.SKILL_PROPERTY_FIRE:t=D;break;case O.SKILL_PROPERTY_FROST:t=y;break;case O.SKILL_PROPERTY_ARCANE:t=v}var i=b.worldXCoordToLocalX(o.effects[e].position.x+o.effects[e].radius,O.userOffset.x,O.scaleFactor),s=b.worldYCoordToLocalY(o.effects[e].position.y+o.effects[e].radius,O.userOffset.y,O.scaleFactor),n=o.effects[e].radius*o.effects[e].scaleFactor;r.drawImage(u,t.srcPosX,t.srcPosY,t.srcWidth,t.srcHeight,i-n,s-n,2*n,2*n),r.closePath()}}(),de===O.DRAW_MODE_SKILL_RANGE&&function(){if(he.type===O.SKILL_TYPE_PROJECTILE||he.type===O.SKILL_TYPE_PROJECTILE_TICK||he.type===O.SKILL_TYPE_PROJECTILE_EXPLOSION||he.type===O.SKILL_TYPE_PROJECTILE_TICK_EXPLOSION){r.beginPath(),r.save();var e=b.worldToLocalPosition(o.users[O.userID].center,O.userOffset),t=ue.x-e.x,i=ue.y-e.y,s=Math.atan(i/t);isNaN(s)?s=0:t<0&&i>=0?s+=Math.PI:t<0&&i<0&&(s-=Math.PI),r.translate(e.x*O.scaleFactor,e.y*O.scaleFactor),r.rotate(s),r.drawImage(c,R.srcPosX,R.srcPosY,R.srcWidth,R.srcHeight,-R.width/2*O.scaleFactor,-R.height/2*O.scaleFactor,R.width*O.scaleFactor,R.height*O.scaleFactor),r.closePath(),r.restore()}else if(he.index===ye)r.beginPath(),r.fillStyle="#ffffff",r.globalAlpha=.8,r.arc(ue.x*O.scaleFactor,ue.y*O.scaleFactor,he.explosionRadius*O.scaleFactor,0,2*Math.PI),r.fill(),r.closePath();else{r.beginPath(),r.fillStyle="#ffffff",r.globalAlpha=.8;var e=b.worldToLocalPosition(o.users[O.userID].center,O.userOffset);r.arc(e.x*O.scaleFactor,e.y*O.scaleFactor,he.range*O.scaleFactor,0,2*Math.PI),r.fill(),r.closePath(),r.beginPath(),r.globalAlpha=.9;var n=b.distanceSquare(e,ue);if(Math.pow(he.range,2)>n)r.arc(ue.x*O.scaleFactor,ue.y*O.scaleFactor,he.explosionRadius*O.scaleFactor,0,2*Math.PI);else{var t=ue.x-e.x,i=ue.y-e.y,s=Math.atan(i/t);isNaN(s)?s=0:t<0&&i>=0?s+=Math.PI:t<0&&i<0&&(s-=Math.PI);var a=he.range*Math.cos(s),l=he.range*Math.sin(s),d={x:e.x+a,y:e.y+l};r.arc(d.x*O.scaleFactor,d.y*O.scaleFactor,he.explosionRadius*O.scaleFactor,0,2*Math.PI)}r.fill(),r.globalAlpha=1}}()}function Ke(){var e=1;switch(Ee){case O.CHAR_TYPE_FIRE:e=fe;break;case O.CHAR_TYPE_FROST:e=pe;break;case O.CHAR_TYPE_ARCANE:e=me}a.removeEventListener("click",$e),a.removeEventListener("mousemove",st),document.removeEventListener("keydown",et),de===O.DRAW_MODE_SKILL_RANGE&&it(O.DRAW_MODE_NORMAL),n.closePopUpSkillChange(),at(Ee),n.playDeadScene(xe,e,Me,Ne),setTimeout(function(){n.closePopUpSkillChange(),n.disableDeadScene(),n.initStandingScene(Ee),n.setPopUpSkillChange(!0),Fe(O.GAME_STATE_RESTART_SCENE)},O.DEAD_SCENE_PLAY_TIME)}function Ge(){n.drawRestartScene()}function Ye(){n.disableStandingScene(),s.emit("reqRestartGame",Ee,Pe)}function Je(){++z>=O.RESOURCES_COUNT&&(W=!0)}function ze(e,t){var i=o.processSkillData(e);i.syncFireTime=t,n.applySkill(i.skillIndex),s.emit("skillFired",i)}function We(e,t){var i=o.processProjectileData(e);n.applySkill(i[0].skillIndex),s.emit("projectilesFired",i,t)}function qe(){a.width=window.innerWidth,a.height=window.innerHeight,O.canvasSize={width:window.innerWidth,height:window.innerHeight},function(e){e.scaleX=1,e.scaleY=1,e.canvasSize.width>=e.CANVAS_MAX_LOCAL_SIZE.width&&(e.scaleX=e.canvasSize.width/e.CANVAS_MAX_LOCAL_SIZE.width);e.canvasSize.height>=e.CANVAS_MAX_LOCAL_SIZE.height&&(e.scaleY=e.canvasSize.height/e.CANVAS_MAX_LOCAL_SIZE.height);e.scaleX>e.scaleY?e.scaleFactor=e.scaleX:e.scaleFactor=e.scaleY}(O)}function Ve(){var e=o.processUserData(),t=!1;Date.now()-le>=1e3&&(t=!0,le=Date.now()),Date.now()-ce>=5e3&&(ce=Date.now(),s.emit("firePing",ce)),s.emit("userDataUpdate",e,t)}function Ze(){a.addEventListener("click",$e,!1),a.addEventListener("mousemove",st,!1)}function Qe(){document.addEventListener("keydown",et,!1)}var $e=function(e){$&&(clearTimeout($),$=!1);var t=0;o.user.castingEndTime&&(t=o.user.castingEndTime-Date.now()),$=setTimeout(function(){var t={x:e.clientX/O.scaleFactor,y:e.clientY/O.scaleFactor},i=b.localToWorldPosition(t,O.userOffset);if(de===O.DRAW_MODE_NORMAL){var n=b.setTargetPosition(i,o.users[O.userID]);o.moveUser(n);(l=o.processUserData()).targetPosition=n,le=Date.now(),s.emit("userMoveStart",l)}else if(de===O.DRAW_MODE_SKILL_RANGE)if(he.index===ye){var a={x:(n=b.setMoveAttackUserTargetPosition(i,he,o.users[O.userID])).x,y:n.y},r=k({},he);r.targetPosition=i,o.moveAndAttackUser(O.userID,a,r,n.moveBackward);var l;(l=o.processUserData()).targetPosition=a,l.moveBackward=n.moveBackward,l.skillIndex=he.index,l.skillTargetPosition=i,it(O.DRAW_MODE_NORMAL),le=Date.now(),s.emit("userMoveAndAttack",l)}else nt(he,i,o.users[O.userID]),it(O.DRAW_MODE_NORMAL)},t)},et=function(e){var t=e.keyCode;if(de===O.DRAW_MODE_NORMAL&&!ne){if(69===t||32===t){if(o.user.currentState!==O.OBJECT_STATE_ATTACK)var i=k({},ve)}else 49===t?i=k({},Oe[0]):50===t?i=k({},Oe[1]):51===t?i=k({},Oe[2]):52===t&&(i=k({},Oe[3]));tt(i),65===t&&(i=k({},ve),(a=i).index===ye&&(o.user.conditions[O.USER_CONDITION_FREEZE]||o.user.conditions[O.USER_CONDITION_SILENCE]||(o.applyCastSpeed(O.userID,a),he=a,it(O.DRAW_MODE_SKILL_RANGE))))}var a;if(27===t&&(de===O.DRAW_MODE_SKILL_RANGE&&it(O.DRAW_MODE_NORMAL),ne&&(ne=!1,n.disableChatInput())),13===t)if(ne){ne=!1;var r=b.processMessage(n.getChatMessage());n.disableChatInput(),n.clearChatInput(),r&&s.emit("chatting",r)}else ne=!0,n.showChatInput();36===t&&s.emit("killme"),33===t&&s.emit("giveExp"),45===t&&s.emit("giveResources")};function tt(e){$&&(clearTimeout($),$=!1);var t=0;o.user.castingEndTime&&(t=o.user.castingEndTime-Date.now()),$=setTimeout(function(){e&&e.hasOwnProperty("index")&&e.type!==O.SKILL_TYPE_PASSIVE&&(o.user.conditions[O.USER_CONDITION_FREEZE]?(n.makeFlashMessage("FROZEN!!!"),de===O.DRAW_MODE_SKILL_RANGE&&it(O.DRAW_MODE_NORMAL)):o.user.conditions[O.USER_CONDITION_SILENCE]?(n.makeFlashMessage("SILENCED!!!"),de===O.DRAW_MODE_SKILL_RANGE&&it(O.DRAW_MODE_NORMAL)):o.user.MP<e.consumeMP?(n.makeFlashMessage("Not enough Mana!!!"),de===O.DRAW_MODE_SKILL_RANGE&&it(O.DRAW_MODE_NORMAL)):n.checkCooltime(e.index)?(o.applyCastSpeed(O.userID,e),e.type===O.SKILL_TYPE_PROJECTILE||e.type===O.SKILL_TYPE_PROJECTILE_EXPLOSION||e.type===O.SKILL_TYPE_PROJECTILE_TICK||e.type===O.SKILL_TYPE_PROJECTILE_TICK_EXPLOSION||e.type===O.SKILL_TYPE_RANGE||e.type===O.SKILL_TYPE_TELEPORT?de===O.DRAW_MODE_NORMAL&&(he=e,it(O.DRAW_MODE_SKILL_RANGE)):nt(e,o.users[O.userID].center,o.users[O.userID])):(n.makeFlashMessage("Spell is not ready!!!"),de===O.DRAW_MODE_SKILL_RANGE&&it(O.DRAW_MODE_NORMAL)))},t)}function it(e){e===O.DRAW_MODE_NORMAL?(de=O.DRAW_MODE_NORMAL,he=null,n.disableSelectSkillInfo()):e===O.DRAW_MODE_SKILL_RANGE&&(de=O.DRAW_MODE_SKILL_RANGE,n.enableSelectSkillInfo(he))}function st(e){ue.x=e.clientX/O.scaleFactor,ue.y=e.clientY/O.scaleFactor}function nt(e,t,i){if(n.checkCooltime(e.index)&&!i.conditions[O.USER_CONDITION_FREEZE]&&!i.conditions[O.USER_CONDITION_SILENCE]){if(e.targetPosition=b.calcSkillTargetPosition(e,t,i),e.type===O.SKILL_TYPE_TELEPORT)for(var a=!0,r=1;a;){r++;var l=o.checkCollisionWithObstacles(e.targetPosition,i);l.length?e.targetPosition=o.reCalcSkillTargetPosition(e.targetPosition,i,l):a=!1,r>=20&&(a=!1)}e.direction=b.calcSkillTargetDirection(e.type,e.targetPosition,i),e.type!==O.SKILL_TYPE_PROJECTILE&&e.type!==O.SKILL_TYPE_PROJECTILE_TICK&&e.type!==O.SKILL_TYPE_PROJECTILE_EXPLOSION&&e.type!==O.SKILL_TYPE_PROJECTILE_TICK_EXPLOSION&&e.type!==O.SKILL_TYPE_INSTANT_PROJECTILE||(e.projectileIDs=b.generateRandomUniqueID(o.projectiles,O.PREFIX_SKILL_PROJECTILE,e.projectileCount)),o.useSkill(O.userID,e);var c=o.processUserData();c.skillIndex=e.index,c.skillDirection=e.direction,c.skillTargetPosition=e.targetPosition,e.projectileIDs&&(c.projectileIDs=e.projectileIDs),le=Date.now(),s.emit("userUseSkill",c)}}function at(e){switch(e){case O.CHAR_TYPE_FIRE:Ie=ye,Se=Re;for(var t=0;t<Pe.length;t++)ge[t]=Pe[t];break;case O.CHAR_TYPE_FROST:Te=ye,_e=Re;for(t=0;t<Pe.length;t++)Ce[t]=Pe[t];break;case O.CHAR_TYPE_ARCANE:Le=ye,Ae=Re;for(t=0;t<Pe.length;t++)De[t]=Pe[t]}}Fe(O.GAME_STATE_LOAD)},{"../../modules/client/CManager.js":1,"../../modules/client/CUIManager.js":4,"../../modules/client/CUser.js":5,"../../modules/public/csvjson.js":6,"../../modules/public/data.json":7,"../../modules/public/gameConfig.json":8,"../../modules/public/objectAssign.js":9,"../../modules/public/util.js":11}]},{},[12]);