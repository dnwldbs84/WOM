/* 2018-12-17 */

!function a(r,o,l){function c(s,e){if(!o[s]){if(!r[s]){var t="function"==typeof require&&require;if(!e&&t)return t(s,!0);if(d)return d(s,!0);var n=new Error("Cannot find module '"+s+"'");throw n.code="MODULE_NOT_FOUND",n}var i=o[s]={exports:{}};r[s][0].call(i.exports,function(e){var t=r[s][1][e];return c(t||e)},i,i.exports,a,r,o,l)}return o[s].exports}for(var d="function"==typeof require&&require,e=0;e<l.length;e++)c(l[e]);return c}({1:[function(e,t,s){"use strict";s.byteLength=function(e){return 3*e.length/4-u(e)},s.toByteArray=function(e){var t,s,n,i,a,r=e.length;i=u(e),a=new d(3*r/4-i),s=0<i?r-4:r;var o=0;for(t=0;t<s;t+=4)n=l[e.charCodeAt(t)]<<18|l[e.charCodeAt(t+1)]<<12|l[e.charCodeAt(t+2)]<<6|l[e.charCodeAt(t+3)],a[o++]=n>>16&255,a[o++]=n>>8&255,a[o++]=255&n;2===i?(n=l[e.charCodeAt(t)]<<2|l[e.charCodeAt(t+1)]>>4,a[o++]=255&n):1===i&&(n=l[e.charCodeAt(t)]<<10|l[e.charCodeAt(t+1)]<<4|l[e.charCodeAt(t+2)]>>2,a[o++]=n>>8&255,a[o++]=255&n);return a},s.fromByteArray=function(e){for(var t,s=e.length,n=s%3,i="",a=[],r=16383,o=0,l=s-n;o<l;o+=r)a.push(f(e,o,l<o+r?l:o+r));1===n?(t=e[s-1],i+=c[t>>2],i+=c[t<<4&63],i+="=="):2===n&&(t=(e[s-2]<<8)+e[s-1],i+=c[t>>10],i+=c[t>>4&63],i+=c[t<<2&63],i+="=");return a.push(i),a.join("")};for(var c=[],l=[],d="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,a=n.length;i<a;++i)c[i]=n[i],l[n.charCodeAt(i)]=i;function u(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function f(e,t,s){for(var n,i,a=[],r=t;r<s;r+=3)n=(e[r]<<16&16711680)+(e[r+1]<<8&65280)+(255&e[r+2]),a.push(c[(i=n)>>18&63]+c[i>>12&63]+c[i>>6&63]+c[63&i]);return a.join("")}l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63},{}],2:[function(e,t,s){"use strict";var n=e("base64-js"),a=e("ieee754");s.Buffer=u,s.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},s.INSPECT_MAX_BYTES=50;var i=2147483647;function r(e){if(i<e)throw new RangeError("Invalid typed array length");var t=new Uint8Array(e);return t.__proto__=u.prototype,t}function u(e,t,s){if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return c(e)}return o(e,t,s)}function o(e,t,s){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return O(e)||e&&O(e.buffer)?function(e,t,s){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(s||0))throw new RangeError('"length" is outside of buffer bounds');var n;n=void 0===t&&void 0===s?new Uint8Array(e):void 0===s?new Uint8Array(e,t):new Uint8Array(e,t,s);return n.__proto__=u.prototype,n}(e,t,s):"string"==typeof e?function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!u.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var s=0|h(e,t),n=r(s),i=n.write(e,t);i!==s&&(n=n.slice(0,i));return n}(e,t):function(e){if(u.isBuffer(e)){var t=0|f(e.length),s=r(t);return 0===s.length||e.copy(s,0,0,t),s}if(e){if(ArrayBuffer.isView(e)||"length"in e)return"number"!=typeof e.length||N(e.length)?r(0):d(e);if("Buffer"===e.type&&Array.isArray(e.data))return d(e.data)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object.")}(e)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('"size" argument must not be negative')}function c(e){return l(e),r(e<0?0:0|f(e))}function d(e){for(var t=e.length<0?0:0|f(e.length),s=r(t),n=0;n<t;n+=1)s[n]=255&e[n];return s}function f(e){if(i<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|e}function h(e,t){if(u.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||O(e))return e.byteLength;"string"!=typeof e&&(e=""+e);var s=e.length;if(0===s)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return s;case"utf8":case"utf-8":case void 0:return w(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*s;case"hex":return s>>>1;case"base64":return x(e).length;default:if(n)return w(e).length;t=(""+t).toLowerCase(),n=!0}}function p(e,t,s){var n=e[t];e[t]=e[s],e[s]=n}function E(e,t,s,n,i){if(0===e.length)return-1;if("string"==typeof s?(n=s,s=0):2147483647<s?s=2147483647:s<-2147483648&&(s=-2147483648),N(s=+s)&&(s=i?0:e.length-1),s<0&&(s=e.length+s),s>=e.length){if(i)return-1;s=e.length-1}else if(s<0){if(!i)return-1;s=0}if("string"==typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:m(e,t,s,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,s):Uint8Array.prototype.lastIndexOf.call(e,t,s):m(e,[t],s,n,i);throw new TypeError("val must be string, number or Buffer")}function m(e,t,s,n,i){var a,r=1,o=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o/=r=2,l/=2,s/=2}function c(e,t){return 1===r?e[t]:e.readUInt16BE(t*r)}if(i){var d=-1;for(a=s;a<o;a++)if(c(e,a)===c(t,-1===d?0:a-d)){if(-1===d&&(d=a),a-d+1===l)return d*r}else-1!==d&&(a-=a-d),d=-1}else for(o<s+l&&(s=o-l),a=s;0<=a;a--){for(var u=!0,f=0;f<l;f++)if(c(e,a+f)!==c(t,f)){u=!1;break}if(u)return a}return-1}function g(e,t,s,n){s=Number(s)||0;var i=e.length-s;n?i<(n=Number(n))&&(n=i):n=i;var a=t.length;a/2<n&&(n=a/2);for(var r=0;r<n;++r){var o=parseInt(t.substr(2*r,2),16);if(N(o))return r;e[s+r]=o}return r}function I(e,t,s,n){return B(function(e){for(var t=[],s=0;s<e.length;++s)t.push(255&e.charCodeAt(s));return t}(t),e,s,n)}function _(e,t,s){return 0===t&&s===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,s))}function S(e,t,s){s=Math.min(e.length,s);for(var n=[],i=t;i<s;){var a,r,o,l,c=e[i],d=null,u=239<c?4:223<c?3:191<c?2:1;if(i+u<=s)switch(u){case 1:c<128&&(d=c);break;case 2:128==(192&(a=e[i+1]))&&127<(l=(31&c)<<6|63&a)&&(d=l);break;case 3:a=e[i+1],r=e[i+2],128==(192&a)&&128==(192&r)&&2047<(l=(15&c)<<12|(63&a)<<6|63&r)&&(l<55296||57343<l)&&(d=l);break;case 4:a=e[i+1],r=e[i+2],o=e[i+3],128==(192&a)&&128==(192&r)&&128==(192&o)&&65535<(l=(15&c)<<18|(63&a)<<12|(63&r)<<6|63&o)&&l<1114112&&(d=l)}null===d?(d=65533,u=1):65535<d&&(d-=65536,n.push(d>>>10&1023|55296),d=56320|1023&d),n.push(d),i+=u}return function(e){var t=e.length;if(t<=T)return String.fromCharCode.apply(String,e);var s="",n=0;for(;n<t;)s+=String.fromCharCode.apply(String,e.slice(n,n+=T));return s}(n)}s.kMaxLength=i,!(u.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}())&&"undefined"!=typeof console&&console.error,Object.defineProperty(u.prototype,"parent",{get:function(){if(this instanceof u)return this.buffer}}),Object.defineProperty(u.prototype,"offset",{get:function(){if(this instanceof u)return this.byteOffset}}),"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),u.poolSize=8192,u.from=function(e,t,s){return o(e,t,s)},u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,u.alloc=function(e,t,s){return i=t,a=s,l(n=e),n<=0?r(n):void 0!==i?"string"==typeof a?r(n).fill(i,a):r(n).fill(i):r(n);var n,i,a},u.allocUnsafe=function(e){return c(e)},u.allocUnsafeSlow=function(e){return c(e)},u.isBuffer=function(e){return null!=e&&!0===e._isBuffer},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var s=e.length,n=t.length,i=0,a=Math.min(s,n);i<a;++i)if(e[i]!==t[i]){s=e[i],n=t[i];break}return s<n?-1:n<s?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var s;if(void 0===t)for(s=t=0;s<e.length;++s)t+=e[s].length;var n=u.allocUnsafe(t),i=0;for(s=0;s<e.length;++s){var a=e[s];if(ArrayBuffer.isView(a)&&(a=u.from(a)),!u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,i),i+=a.length}return n},u.byteLength=h,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)p(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)p(this,t,t+3),p(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)p(this,t,t+7),p(this,t+1,t+6),p(this,t+2,t+5),p(this,t+3,t+4);return this},u.prototype.toLocaleString=u.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?S(this,0,e):function(e,t,s){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===s||s>this.length)&&(s=this.length),s<=0)return"";if((s>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return C(this,t,s);case"utf8":case"utf-8":return S(this,t,s);case"ascii":return b(this,t,s);case"latin1":case"binary":return y(this,t,s);case"base64":return _(this,t,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v(this,t,s);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",t=s.INSPECT_MAX_BYTES;return 0<this.length&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,s,n,i){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===s&&(s=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||s>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(i<=n&&s<=t)return 0;if(i<=n)return-1;if(s<=t)return 1;if(this===e)return 0;for(var a=(i>>>=0)-(n>>>=0),r=(s>>>=0)-(t>>>=0),o=Math.min(a,r),l=this.slice(n,i),c=e.slice(t,s),d=0;d<o;++d)if(l[d]!==c[d]){a=l[d],r=c[d];break}return a<r?-1:r<a?1:0},u.prototype.includes=function(e,t,s){return-1!==this.indexOf(e,t,s)},u.prototype.indexOf=function(e,t,s){return E(this,e,t,s,!0)},u.prototype.lastIndexOf=function(e,t,s){return E(this,e,t,s,!1)},u.prototype.write=function(e,t,s,n){if(void 0===t)n="utf8",s=this.length,t=0;else if(void 0===s&&"string"==typeof t)n=t,s=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(s)?(s>>>=0,void 0===n&&(n="utf8")):(n=s,s=void 0)}var i=this.length-t;if((void 0===s||i<s)&&(s=i),0<e.length&&(s<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var a,r,o,l,c,d,u,f,h,p=!1;;)switch(n){case"hex":return g(this,e,t,s);case"utf8":case"utf-8":return f=t,h=s,B(w(e,(u=this).length-f),u,f,h);case"ascii":return I(this,e,t,s);case"latin1":case"binary":return I(this,e,t,s);case"base64":return l=this,c=t,d=s,B(x(e),l,c,d);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r=t,o=s,B(function(e,t){for(var s,n,i,a=[],r=0;r<e.length&&!((t-=2)<0);++r)s=e.charCodeAt(r),n=s>>8,i=s%256,a.push(i),a.push(n);return a}(e,(a=this).length-r),a,r,o);default:if(p)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),p=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var T=4096;function b(e,t,s){var n="";s=Math.min(e.length,s);for(var i=t;i<s;++i)n+=String.fromCharCode(127&e[i]);return n}function y(e,t,s){var n="";s=Math.min(e.length,s);for(var i=t;i<s;++i)n+=String.fromCharCode(e[i]);return n}function C(e,t,s){var n=e.length;(!t||t<0)&&(t=0),(!s||s<0||n<s)&&(s=n);for(var i="",a=t;a<s;++a)i+=k(e[a]);return i}function v(e,t,s){for(var n=e.slice(t,s),i="",a=0;a<n.length;a+=2)i+=String.fromCharCode(n[a]+256*n[a+1]);return i}function L(e,t,s){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(s<e+t)throw new RangeError("Trying to access beyond buffer length")}function D(e,t,s,n,i,a){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<t||t<a)throw new RangeError('"value" argument is out of bounds');if(s+n>e.length)throw new RangeError("Index out of range")}function A(e,t,s,n,i,a){if(s+n>e.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("Index out of range")}function R(e,t,s,n,i){return t=+t,s>>>=0,i||A(e,0,s,4),a.write(e,t,s,n,23,4),s+4}function P(e,t,s,n,i){return t=+t,s>>>=0,i||A(e,0,s,8),a.write(e,t,s,n,52,8),s+8}u.prototype.slice=function(e,t){var s=this.length;(e=~~e)<0?(e+=s)<0&&(e=0):s<e&&(e=s),(t=void 0===t?s:~~t)<0?(t+=s)<0&&(t=0):s<t&&(t=s),t<e&&(t=e);var n=this.subarray(e,t);return n.__proto__=u.prototype,n},u.prototype.readUIntLE=function(e,t,s){e>>>=0,t>>>=0,s||L(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return n},u.prototype.readUIntBE=function(e,t,s){e>>>=0,t>>>=0,s||L(e,t,this.length);for(var n=this[e+--t],i=1;0<t&&(i*=256);)n+=this[e+--t]*i;return n},u.prototype.readUInt8=function(e,t){return e>>>=0,t||L(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return e>>>=0,t||L(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return e>>>=0,t||L(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return e>>>=0,t||L(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return e>>>=0,t||L(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,s){e>>>=0,t>>>=0,s||L(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return(i*=128)<=n&&(n-=Math.pow(2,8*t)),n},u.prototype.readIntBE=function(e,t,s){e>>>=0,t>>>=0,s||L(e,t,this.length);for(var n=t,i=1,a=this[e+--n];0<n&&(i*=256);)a+=this[e+--n]*i;return(i*=128)<=a&&(a-=Math.pow(2,8*t)),a},u.prototype.readInt8=function(e,t){return e>>>=0,t||L(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){e>>>=0,t||L(e,2,this.length);var s=this[e]|this[e+1]<<8;return 32768&s?4294901760|s:s},u.prototype.readInt16BE=function(e,t){e>>>=0,t||L(e,2,this.length);var s=this[e+1]|this[e]<<8;return 32768&s?4294901760|s:s},u.prototype.readInt32LE=function(e,t){return e>>>=0,t||L(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return e>>>=0,t||L(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return e>>>=0,t||L(e,4,this.length),a.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return e>>>=0,t||L(e,4,this.length),a.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return e>>>=0,t||L(e,8,this.length),a.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return e>>>=0,t||L(e,8,this.length),a.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,s,n){(e=+e,t>>>=0,s>>>=0,n)||D(this,e,t,s,Math.pow(2,8*s)-1,0);var i=1,a=0;for(this[t]=255&e;++a<s&&(i*=256);)this[t+a]=e/i&255;return t+s},u.prototype.writeUIntBE=function(e,t,s,n){(e=+e,t>>>=0,s>>>=0,n)||D(this,e,t,s,Math.pow(2,8*s)-1,0);var i=s-1,a=1;for(this[t+i]=255&e;0<=--i&&(a*=256);)this[t+i]=e/a&255;return t+s},u.prototype.writeUInt8=function(e,t,s){return e=+e,t>>>=0,s||D(this,e,t,1,255,0),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,s){return e=+e,t>>>=0,s||D(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeUInt16BE=function(e,t,s){return e=+e,t>>>=0,s||D(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeUInt32LE=function(e,t,s){return e=+e,t>>>=0,s||D(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},u.prototype.writeUInt32BE=function(e,t,s){return e=+e,t>>>=0,s||D(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeIntLE=function(e,t,s,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*s-1);D(this,e,t,s,i-1,-i)}var a=0,r=1,o=0;for(this[t]=255&e;++a<s&&(r*=256);)e<0&&0===o&&0!==this[t+a-1]&&(o=1),this[t+a]=(e/r>>0)-o&255;return t+s},u.prototype.writeIntBE=function(e,t,s,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*s-1);D(this,e,t,s,i-1,-i)}var a=s-1,r=1,o=0;for(this[t+a]=255&e;0<=--a&&(r*=256);)e<0&&0===o&&0!==this[t+a+1]&&(o=1),this[t+a]=(e/r>>0)-o&255;return t+s},u.prototype.writeInt8=function(e,t,s){return e=+e,t>>>=0,s||D(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,s){return e=+e,t>>>=0,s||D(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeInt16BE=function(e,t,s){return e=+e,t>>>=0,s||D(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeInt32LE=function(e,t,s){return e=+e,t>>>=0,s||D(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},u.prototype.writeInt32BE=function(e,t,s){return e=+e,t>>>=0,s||D(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeFloatLE=function(e,t,s){return R(this,e,t,!0,s)},u.prototype.writeFloatBE=function(e,t,s){return R(this,e,t,!1,s)},u.prototype.writeDoubleLE=function(e,t,s){return P(this,e,t,!0,s)},u.prototype.writeDoubleBE=function(e,t,s){return P(this,e,t,!1,s)},u.prototype.copy=function(e,t,s,n){if(!u.isBuffer(e))throw new TypeError("argument should be a Buffer");if(s||(s=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),0<n&&n<s&&(n=s),n===s)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(s<0||s>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-s&&(n=e.length-t+s);var i=n-s;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,s,n);else if(this===e&&s<t&&t<n)for(var a=i-1;0<=a;--a)e[a+t]=this[a+s];else Uint8Array.prototype.set.call(e,this.subarray(s,n),t);return i},u.prototype.fill=function(e,t,s,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,s=this.length):"string"==typeof s&&(n=s,s=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){var i=e.charCodeAt(0);("utf8"===n&&i<128||"latin1"===n)&&(e=i)}}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<s)throw new RangeError("Out of range index");if(s<=t)return this;var a;if(t>>>=0,s=void 0===s?this.length:s>>>0,e||(e=0),"number"==typeof e)for(a=t;a<s;++a)this[a]=e;else{var r=u.isBuffer(e)?e:new u(e,n),o=r.length;if(0===o)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<s-t;++a)this[a+t]=r[a%o]}return this};var M=/[^+/0-9A-Za-z-_]/g;function k(e){return e<16?"0"+e.toString(16):e.toString(16)}function w(e,t){var s;t=t||1/0;for(var n=e.length,i=null,a=[],r=0;r<n;++r){if(55295<(s=e.charCodeAt(r))&&s<57344){if(!i){if(56319<s){-1<(t-=3)&&a.push(239,191,189);continue}if(r+1===n){-1<(t-=3)&&a.push(239,191,189);continue}i=s;continue}if(s<56320){-1<(t-=3)&&a.push(239,191,189),i=s;continue}s=65536+(i-55296<<10|s-56320)}else i&&-1<(t-=3)&&a.push(239,191,189);if(i=null,s<128){if((t-=1)<0)break;a.push(s)}else if(s<2048){if((t-=2)<0)break;a.push(s>>6|192,63&s|128)}else if(s<65536){if((t-=3)<0)break;a.push(s>>12|224,s>>6&63|128,63&s|128)}else{if(!(s<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(s>>18|240,s>>12&63|128,s>>6&63|128,63&s|128)}}return a}function x(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(M,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function B(e,t,s,n){for(var i=0;i<n&&!(i+s>=t.length||i>=e.length);++i)t[i+s]=e[i];return i}function O(e){return e instanceof ArrayBuffer||null!=e&&null!=e.constructor&&"ArrayBuffer"===e.constructor.name&&"number"==typeof e.byteLength}function N(e){return e!=e}},{"base64-js":1,ieee754:3}],3:[function(e,t,s){s.read=function(e,t,s,n,i){var a,r,o=8*i-n-1,l=(1<<o)-1,c=l>>1,d=-7,u=s?i-1:0,f=s?-1:1,h=e[t+u];for(u+=f,a=h&(1<<-d)-1,h>>=-d,d+=o;0<d;a=256*a+e[t+u],u+=f,d-=8);for(r=a&(1<<-d)-1,a>>=-d,d+=n;0<d;r=256*r+e[t+u],u+=f,d-=8);if(0===a)a=1-c;else{if(a===l)return r?NaN:1/0*(h?-1:1);r+=Math.pow(2,n),a-=c}return(h?-1:1)*r*Math.pow(2,a-n)},s.write=function(e,t,s,n,i,a){var r,o,l,c=8*a-i-1,d=(1<<c)-1,u=d>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:a-1,p=n?1:-1,E=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,r=d):(r=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-r))<1&&(r--,l*=2),2<=(t+=1<=r+u?f/l:f*Math.pow(2,1-u))*l&&(r++,l/=2),d<=r+u?(o=0,r=d):1<=r+u?(o=(t*l-1)*Math.pow(2,i),r+=u):(o=t*Math.pow(2,u-1)*Math.pow(2,i),r=0));8<=i;e[s+h]=255&o,h+=p,o/=256,i-=8);for(r=r<<i|o,c+=i;0<c;e[s+h]=255&r,h+=p,r/=256,c-=8);e[s+h-p]|=128*E}},{}],4:[function(e,t,s){var l,c,i=e("./CUser.js"),a=e("./CMonster.js"),u=e("../public/util.js"),f=e("../public/gameConfig.json"),d=e("../public/objectAssign.js"),n=e("../public/data.json"),r=e("../public/csvjson.js"),o={delimiter:",",quote:'"'},h=r.toObject(n.userStatData,o),p=r.toObject(n.resourceData,o),E=r.toObject(n.obstacleData,o),m=r.toObject(n.mobData,o),g=e("../public/quadtree.js"),I=e("./CObstacle.js"),_=[],S=[],T=[],b=function(){this.user=null,this.users=[],this.monsters=[],this.chests=[],this.obstacles=[],this.immortalGrounds=[],this.portals=[],this.treesCount=0,this.effects=[],this.userEffects=[],this.projectiles=[],this.riseText=[],this.userEffectTimer=Date.now(),this.objGolds=[],this.objJewels=[],this.objSkills=[],this.objBoxs=[],this.objBuffs=[],this.onUserLevelUp=new Function,this.onMainUserMove=new Function,this.onSkillFire=new Function,this.onProjectileSkillFire=new Function,this.staticInterval=null};b.prototype={start:function(){l=new g({width:f.CANVAS_MAX_SIZE.width,height:f.CANVAS_MAX_SIZE.height,maxElements:5}),c=new g({width:f.CANVAS_MAX_SIZE.width,height:f.CANVAS_MAX_SIZE.height,maxElements:5}),this.mapSetting(),this.updateGame()},mapSetting:function(){this.createObstacles(),this.setEnvironments()},updateGame:function(){var e=1e3/f.INTERVAL;null===this.staticInterval&&(this.staticInterval=setInterval(function(){for(var e=this.userEffects.length-1;0<=e;e--)Date.now()-this.userEffects[e].startTime>=this.userEffects[e].resourceLifeTime?this.userEffects.splice(e,1):Date.now()-this.userEffects[e].effectTimer>=f.USER_DETACH_EFFECT_CHANGE_TIME&&this.userEffects[e].changeIndex();if(Date.now()-this.userEffectTimer>=f.USER_DETACH_EFFECT_MAKE_TIME){for(var t in this.users)if(this.users[t].isRender)for(var e=0;e<this.users[t].buffImgDataList.length;e++)if(!this.users[t].buffImgDataList[e].isAttach){var s=u.makeUserEffect(this.users[t],this.users[t].buffImgDataList[e]);this.userEffects.push(s)}for(var t in this.monsters)for(var e=0;e<this.monsters[t].buffImgDataList.length;e++)if(!this.monsters[t].buffImgDataList[e].isAttach){var s=u.makeUserEffect(this.monsters[t],this.monsters[t].buffImgDataList[e]);this.userEffects.push(s)}this.userEffectTimer=Date.now()}if(this.user){var n=u.checkCircleCollision(c,this.user.position.x,this.user.position.y,this.user.size.width/2,this.user.objectID);if(n.length)for(var e=0;e<n.length;e++)a=n[e],n[e].isCollide||(a.isCollide=!0)}var e=T.length;for(;e--;){var n=u.checkCircleCollision(l,T[e].position.x,T[e].position.y,T[e].radius,f.PREFIX_SKILL);if(n.length)for(var i=0;i<n.length;i++){var a=n[i];a.isCollide||(a.isCollide=!0)}T.splice(e,1)}for(var t in this.users)this.users[t].setEntityEle();for(var t in this.monsters)this.monsters[t].setEntityEle();var e=this.projectiles.length;for(;e--;)if(this.projectiles[e].isExpired())this.projectiles.splice(e,1);else if(this.projectiles[e].move(),this.projectiles[e].projectileImgData&&Date.now()-this.projectiles[e].effectTimer>=f.PROJECTILE_EFFECT_CHANGE_TIME&&(this.projectiles[e].effectTimer=Date.now(),this.projectiles[e].effectRotateDegree+=10),this.projectiles[e].type===f.SKILL_TYPE_INSTANT_PROJECTILE||this.projectiles[e].type===f.SKILL_TYPE_PROJECTILE||this.projectiles[e].type===f.SKILL_TYPE_PROJECTILE_TICK||this.projectiles[e].type===f.SKILL_TYPE_PROJECTILE_TICK_EXPLOSION){var n=u.checkCircleCollision(l,this.projectiles[e].position.x,this.projectiles[e].position.y,this.projectiles[e].radius,f.PREFIX_SKILL_PROJECTILE);if(n.length)for(var i=0;i<n.length;i++){var a=n[i];a.id.substr(0,1)===f.PREFIX_OBSTACLE_CHEST_GROUND||a.isCollide||(a.isCollide=!0)}}var e=this.effects.length;for(;e--;)this.effects[e].isCheckCollision||Date.now()-this.effects[e].startTime>this.effects[e].lifeTime/2&&(T.push(this.effects[e]),this.effects[e].isCheckCollision=!0),this.effects[e].startTime+this.effects[e].lifeTime<Date.now()?this.effects.splice(e,1):this.effects[e].scaleFactor=u.interpolationSine(Date.now()-this.effects[e].startTime,this.effects[e].lifeTime)}.bind(this),e))},createObstacles:function(){for(var e=d({},u.findAllDatas(E,"type",f.OBJ_TYPE_ROCK)),t=0;t<Object.keys(e).length;t++){var s=d({},u.findData(p,"index",e[t].imgData)),n=new I(e[t].posX,e[t].posY,e[t].radius,e[t].id,s);this.obstacles.push(n),_.push(n.staticEle)}var i=d({},u.findAllDatas(E,"type",f.OBJ_TYPE_CHEST_GROUND));for(t=0;t<Object.keys(i).length;t++){s=d({},u.findData(p,"index",i[t].imgData));var a=new I(i[t].posX,i[t].posY,i[t].radius,i[t].id,s);this.obstacles.push(a),_.push(a.staticEle)}var r=d({},u.findAllDatas(E,"type",f.OBJ_TYPE_TREE));this.treesCount=Object.keys(r).length;for(t=0;t<Object.keys(r).length;t++){s=d({},u.findData(p,"index",r[t].imgData));var o=new I(r[t].posX,r[t].posY,r[t].radius,r[t].id,s);o.setTreeImgEle(r[t].treeImgRadius),this.obstacles.push(o),_.push(o.staticEle),S.push(o.treeImgEle)}l.pushAll(_),c.pushAll(S)},setEnvironments:function(){for(var e=d({},u.findAllDatas(E,"type",f.ENV_TYPE_IMMORTAL_GROUND)),t=0;t<Object.keys(e).length;t++){var s=d({},u.findData(p,"index",e[t].imgData));(i=new I(e[t].posX,e[t].posY,e[t].radius,e[t].id,s)).size.width=2*(e[t].radius+30),i.size.height=2*(e[t].radius+30),this.immortalGrounds.push(i)}var n=d({},u.findAllDatas(E,"type",f.ENV_TYPE_PORTAL));for(t=0;t<Object.keys(n).length;t++){var i;s=d({},u.findData(p,"index",n[t].imgData));(i=new I(n[t].posX,n[t].posY,n[t].radius,n[t].id,s)).size.width=2*(n[t].radius+60),i.size.height=2*(n[t].radius+60),this.portals.push(i)}},setChests:function(e){for(var t=0;t<e.length;t++)this.createChest(e[t])},createChest:function(e){for(var t=d({},u.findAllDatas(E,"type",f.OBJ_TYPE_CHEST_GROUND)),s=0;s<Object.keys(t).length;s++)if(t[s].id===e.lID){var n=t[s],i={x:t[s].posX,y:t[s].posY};break}if(n&&i){switch(e.gd){case 1:var a=f.RESOURCE_INDEX_CHEST_GRADE_1;break;case 2:a=f.RESOURCE_INDEX_CHEST_GRADE_2;break;case 3:a=f.RESOURCE_INDEX_CHEST_GRADE_3;break;case 4:a=f.RESOURCE_INDEX_CHEST_GRADE_4;break;case 5:a=f.RESOURCE_INDEX_CHEST_GRADE_5}var r=d({},u.findData(p,"index",a));this.chests.push({objectID:e.oID,locationID:e.lID,grade:e.gd,HP:e.HP,maxHP:e.mHP,position:i,size:{width:2*n.radius,height:2*n.radius},center:{x:i.x+n.radius,y:i.y+n.radius},imgData:r})}},updateChest:function(e,t){for(var s=0;s<this.chests.length;s++)if(this.chests[s].locationID===e){this.chests[s].HP=t;break}},deleteChest:function(e){for(var t=0;t<this.chests.length;t++)if(this.chests[t].locationID===e){this.chests.splice(t,1);break}},setUser:function(e,t){if(!(e.oID in this.users)){var s=u.makeCacheCanvas(e.lv,e.nm,t);e.imgData=this.setImgData(e);var n=new i(e,s,t);this.users[e.oID]=n,this.users[e.oID].onMove=y.bind(n),this.users[e.oID].changeState(e.cs)}},setUsers:function(e,t){for(var s=0;s<e.length;s++)this.setUser(e[s],t)},setImgData:function(e){var t=u.findDataWithTwoColumns(h,"type",e.tp,"level",e.lv).imgData;return d({},u.findData(p,"index",t))},setUsersSkills:function(e){for(var t=0;t<e.length;t++)0<e[t].fireTime&&this.userSkill(e[t].userID,e[t])},setMobs:function(e){if(e)for(var t=0;t<e.length;t++){var s=u.findData(m,"index",e[t].id),n=u.findData(p,"index",s.resourceIndex),i=new a(e[t],n,s);(this.monsters[i.objectID]=i).onMove=y.bind(i),i.setCenter(),i.setTargetDirection(),i.setSpeed(),i.changeState(i.currentState)}},changeStateMob:function(e){if(e.oID in this.monsters){var t=u.isRender(this.user,this.monsters[e.oID],e.tpos,2e3,1500);this.monsters[e.oID].direction=e.dir,this.monsters[e.oID].rotateSpeed=e.rsp,this.monsters[e.oID].maxSpeed=e.msp,this.monsters[e.oID].attackTime=e.at,this.monsters[e.oID].conditions=e.cdt,t?(this.monsters[e.oID].position=e.pos,this.monsters[e.oID].targetPosition=e.tpos,this.monsters[e.oID].setCenter(),this.monsters[e.oID].setTargetDirection(),this.monsters[e.oID].setSpeed(),this.monsters[e.oID].changeState(e.cs)):(this.monsters[e.oID].position=e.tpos,this.monsters[e.oID].setCenter(),this.monsters[e.oID].changeState(f.OBJECT_STATE_IDLE))}},updateMob:function(e){e.oID in this.monsters&&(this.monsters[e.oID].HP=e.HP,this.monsters[e.oID].position=e.pos,this.monsters[e.oID].direction=e.dir)},updateMobBuffImgData:function(e,t){e in this.monsters&&this.monsters[e].updateBuffImgData(t)},updateMobHitImgData:function(e,t){e in this.monsters&&this.monsters[e].updateSkillHitImgData(t)},deleteMob:function(e){e in this.monsters&&(this.monsters[e].stop(),delete this.monsters[e])},setObjs:function(e){for(var t=0;t<e.length;t++)e[t].oID.substr(0,1)===f.PREFIX_OBJECT_SKILL?this.objSkills.push(e[t]):e[t].oID.substr(0,1)===f.PREFIX_OBJECT_GOLD?this.objGolds.push(e[t]):e[t].oID.substr(0,1)===f.PREFIX_OBJECT_JEWEL?this.objJewels.push(e[t]):e[t].oID.substr(0,1)===f.PREFIX_OBJECT_BOX?this.objBoxs.push(e[t]):e[t].oID.substr(0,1)===f.PREFIX_OBJECT_BUFF&&(this.onNeedToGetObjBuffResource(e[t]),this.objBuffs.push(e[t]))},deleteOBJ:function(e){if(e.substr(0,1)===f.PREFIX_OBJECT_SKILL){for(var t=0;t<this.objSkills.length;t++)if(this.objSkills[t].oID===e)return void this.objSkills.splice(t,1)}else if(e.substr(0,1)===f.PREFIX_OBJECT_GOLD){for(t=0;t<this.objGolds.length;t++)if(this.objGolds[t].oID===e)return void this.objGolds.splice(t,1)}else if(e.substr(0,1)===f.PREFIX_OBJECT_JEWEL){for(t=0;t<this.objJewels.length;t++)if(this.objJewels[t].oID===e)return void this.objJewels.splice(t,1)}else if(e.substr(0,1)===f.PREFIX_OBJECT_BOX){for(t=0;t<this.objBoxs.length;t++)if(this.objBoxs[t].oID===e)return void this.objBoxs.splice(t,1)}else if(e.substr(0,1)===f.PREFIX_OBJECT_BUFF)for(t=0;t<this.objBuffs.length;t++)if(this.objBuffs[t].oID===e)return void this.objBuffs.splice(t,1)},iamRestart:function(e,t){this.users[this.user.objectID]=this.user;var s=u.makeCacheCanvas(e.lv,e.nm,t);this.user.updateTextCanvas(s),this.user.changeState(f.OBJECT_STATE_IDLE)},setUserInitState:function(e){e in this.users&&this.users[e].changeState(f.OBJECT_STATE_IDLE)},iamDead:function(){this.user.hitImgDataList=[],this.user.buffImgDataList=[],this.user.conditions=[],this.user.changeState(f.OBJECT_STATE_DEATH)},kickUser:function(e){e in this.users&&(this.users[e].stop(),delete this.users[e])},checkUserAtUsers:function(e){return e.objectID in this.users},moveUser:function(e){this.user.targetPosition=e,this.user.setCenter(),this.user.setTargetDirection(),this.user.setSpeed(),this.user.changeState(f.OBJECT_STATE_MOVE)},stopUser:function(){this.user.changeState(f.OBJECT_STATE_IDLE)},moveAndAttackUser:function(e,t,s,n){var i=!1;if(i=e===this.user.objectID||e in this.users&&u.isRender(this.user,this.users[e],t),e in this.users&&i){this.users[e].setRenderVar(i),this.users[e].targetPosition=t,this.users[e].setCenter(),n?(this.users[e].setTargetDirection(n),this.users[e].setSpeed(f.MOVE_BACK_WARD_SPEED_DECREASE_RATE)):(this.users[e].setTargetDirection(),this.users[e].setSpeed()),s.direction=this.users[e].targetDirection;var a=this.users[e].makeSkillInstance(s),r=this.user,o=this.users[e],l=this.onSkillFire;a.onFire=function(e){r===o&&l(s,e),o.skillCastEffectPlay=!1},this.users[e].changeState(f.OBJECT_STATE_MOVE_AND_ATTACK),this.users[e].setSkill(a),n&&(this.users[e].isMoveBackward=!0)}},useSkill:function(e,r){var t=!1;if(!this.user)return!0;if(t=e===this.user.objectID||e in this.users&&u.isRender(this.user,this.users[e],r.targetPosition),e in this.users&&t){this.users[e].setRenderVar(t);var o=this.users[e].makeSkillInstance(r),l=this.user,c=this.users[e],s=this.onSkillFire,d=this.onProjectileSkillFire;this.users[e].targetDirection=r.direction,r.type===f.SKILL_TYPE_INSTANT_RANGE?(o.onFire=function(e){l===c&&s(r,e),c.skillCastEffectPlay=!1},this.users[e].changeState(f.OBJECT_STATE_ATTACK)):r.type===f.SKILL_TYPE_INSTANT_PROJECTILE?(o.onFire=function(e){var t=c.makeProjectile(r.projectileIDs[0],o,r.direction);l===c&&d([t],e),c.skillCastEffectPlay=!1},this.users[e].changeState(f.OBJECT_STATE_ATTACK)):r.type===f.SKILL_TYPE_RANGE||r.type===f.SKILL_TYPE_SELF||r.type===f.SKILL_TYPE_SELF_EXPLOSION||r.type===f.SKILL_TYPE_TELEPORT?(o.onFire=function(e){l===c&&s(r,e),c.skillCastEffectPlay=!1},this.users[e].changeState(f.OBJECT_STATE_CAST)):r.type!==f.SKILL_TYPE_PROJECTILE&&r.type!==f.SKILL_TYPE_PROJECTILE_TICK&&r.type!==f.SKILL_TYPE_PROJECTILE_EXPLOSION&&r.type!==f.SKILL_TYPE_PROJECTILE_TICK_EXPLOSION||(o.onFire=function(e){for(var t=[],s=r.direction,n=0;n<r.projectileCount;n++){if(r.projectileCount%2==0){var i=n-(r.projectileCount/2-.5);s=r.direction+i*f.MULTI_PROJECTILE_DEGREE}else if(r.projectileCount%2==1){i=n-Math.floor(r.projectileCount/2),s=r.direction+i*f.MULTI_PROJECTILE_DEGREE}var a=c.makeProjectile(r.projectileIDs[n],o,s);t.push(a),l===c&&t.length===r.projectileCount&&d(t,e),c.skillCastEffectPlay=!1}},this.users[e].changeState(f.OBJECT_STATE_CAST)),this.users[e].setSkill(o)}},applySkill:function(e,t,s){if(e.type===f.SKILL_TYPE_TELEPORT){if(t in this.users){e.targetPosition.x<this.users[t].size.width/2?e.targetPosition.x=this.users[t].size.width/2:e.targetPosition.x>f.CANVAS_MAX_SIZE.width-this.users[t].size.width/2&&(e.targetPosition.x=f.CANVAS_MAX_SIZE.width-this.users[t].size.width/2),e.targetPosition.y<this.users[t].size.height/2?e.targetPosition.y=this.users[t].size.height/2:e.targetPosition.y>f.CANVAS_MAX_SIZE.height-this.users[t].size.height/2&&(e.targetPosition.y=f.CANVAS_MAX_SIZE.height-this.users[t].size.height/2);var n={x:e.targetPosition.x,y:e.targetPosition.y};this.moveUserToNewPos(t,n)}}else this.effects.push({property:e.property,position:{x:e.targetPosition.x-e.explosionRadius,y:e.targetPosition.y-e.explosionRadius},radius:e.explosionRadius,startTime:Date.now(),lifeTime:e.effectLastTime,scaleFactor:1,effectImgData:s||0,isCheckCollision:!1})},applyProjectile:function(e,t,s){this.projectiles.push({userID:e.userID,objectID:e.objectID,type:e.type,property:e.property,position:e.position,speed:e.speed,startTime:e.startTime,radius:e.radius,lifeTime:2*e.lifeTime,projectileImgData:t||0,effectRotateDegree:0,effectTimer:Date.now(),timer:Date.now(),effect:{property:e.property,position:e.position,radius:e.explosionRadius,startTime:0,lifeTime:e.effectLastTime,effectImgData:s||0,scaleFactor:1},move:function(){var e=(Date.now()-this.timer)/1e3;this.position.x+=this.speed.x*e,this.position.y+=this.speed.y*e,this.timer=Date.now()},isExpired:function(){return!(this.lifeTime>Date.now()-this.startTime)},explode:function(e){this.setEffect(e)},setEffect:function(e){this.effect.position=e,this.effect.startTime=Date.now()}})},applyCastSpeed:function(e,t){e in this.users&&(t.fireTime=Math.floor(t.fireTime*(100/this.users[e].castSpeed)),t.totalTime=Math.floor(t.totalTime*(100/this.users[e].castSpeed)))},deleteProjectile:function(e,t){for(var s=0;s<this.projectiles.length;s++)if(this.projectiles[s].objectID===e&&this.projectiles[s].userID===t){this.projectiles.splice(s,1);break}},explodeProjectile:function(e,t,s){for(var n=0;n<this.projectiles.length;n++)if(this.projectiles[n].objectID===e&&this.projectiles[n].userID===t){this.projectiles[n].explode(s),this.effects.push(this.projectiles[n].effect),this.projectiles.splice(n,1);break}},changeUserStat:function(e,t,s){if(e.oID in this.users){if(e.lv!==this.users[e.oID].level||t){if(e.lv!==this.users[e.oID].level){var n=u.makeCacheCanvas(e.lv,this.users[e.oID].name,s);this.users[e.oID].updateTextCanvas(n)}this.users[e.oID].level=e.lv,this.users[e.oID].imgData=this.setImgData(e),e.oID===this.user.objectID&&this.onUserLevelUp(e.lv)}if(this.users[e.oID].exp=e.ep,this.users[e.oID].maxHP=e.mHP,this.users[e.oID].maxMP=e.mMP,this.users[e.oID].HP=e.HP,this.users[e.oID].MP=e.MP,this.users[e.oID].castSpeed=e.csp,this.users[e.oID].maxSpeed=e.msp,this.users[e.oID].rotateSpeed=e.rsp,this.users[e.oID].conditions=e.cdt,this.users[e.oID].setSpeed(),this.users[e.oID].currentState===f.OBJECT_STATE_CAST&&this.users[e.oID].currentSkill){var i=this.users[e.oID].currentSkill.consumeMP;(this.users[e.oID].conditions[f.USER_CONDITION_FREEZE]||this.users[e.oID].conditions[f.USER_CONDITION_SILENCE]||this.users[e.oID].conditions[f.USER_CONDITION_BLUR]||this.users[e.oID].MP<i)&&this.users[e.oID].changeState(f.OBJECT_STATE_IDLE)}else this.users[e.oID].currentState===f.OBJECT_STATE_ATTACK&&(this.users[e.oID].conditions[f.USER_CONDITION_FREEZE]||this.users[e.oID].conditions[f.USER_CONDITION_SILENCE]||this.users[e.oID].conditions[f.USER_CONDITION_BLUR])&&this.users[e.oID].changeState(f.OBJECT_STATE_IDLE)}},moveUserToNewPos:function(e,t){e in this.users&&(this.users[e].changePosition(t),this.users[e].changeState(f.OBJECT_STATE_IDLE),e===this.user.objectID&&this.onMainUserMove(this.user))},updateSkillPossessions:function(e,t){e in this.users&&this.users[e].updateSkillPossessions(t)},setUserData:function(e){e.oID in this.users&&(this.users[e.oID].name=e.nm,this.users[e.oID].position=e.pos,this.users[e.oID].targetPosition=e.tpos,this.users[e.oID].direction=e.dir,this.users[e.oID].maxSpeed=e.msp,this.users[e.oID].rotateSpeed=e.rsp,this.users[e.oID].setCenter(),this.users[e.oID].setTargetDirection(),this.users[e.oID].setSpeed(),this.users[e.oID].changeState(e.cs))},updateUserData:function(e){var t=!1;if(!this.user)return!0;t=e.oID===this.user.oID||e.oID in this.users&&u.isRender(this.user,this.users[e.oID],e.tpos),e.oID in this.users&&this.users[e.oID].currentState!==f.OBJECT_STATE_DEATH&&(this.users[e.oID].setRenderVar(t),this.users[e.oID].position=e.pos,this.users[e.oID].targetPosition=e.tpos,this.users[e.oID].direction=e.dir,this.users[e.oID].maxSpeed=e.msp,this.users[e.oID].rotateSpeed=e.rsp,this.users[e.oID].setCenter(),this.users[e.oID].setTargetDirection(),this.users[e.oID].setSpeed(),t?this.users[e.oID].changeState(e.cs):this.users[e.oID].changeState(f.OBJECT_STATE_IDLE))},syncUserData:function(e){var t=!1;t=!this.user||(e.oID===this.user.oID||e.oID in this.users&&u.isRender(this.user,this.users[e.oID],e.tpos)),e.oID in this.users&&(this.users[e.oID].position=e.pos,t&&(this.users[e.oID].currentState!==f.OBJECT_STATE_ATTACK&&this.users[e.oID].currentState!==f.OBJECT_STATE_CAST&&(this.users[e.oID].targetPosition=e.tpos,this.users[e.oID].direction=e.dir,this.users[e.oID].maxSpeed=e.msp,this.users[e.oID].rotateSpeed=e.rsp,this.users[e.oID].setCenter(),this.users[e.oID].setTargetDirection(),this.users[e.oID].setSpeed()),this.users[e.oID].currentState!==e.cs&&this.users[e.oID].currentState!==f.OBJECT_STATE_CAST&&this.users[e.oID].currentState!==f.OBJECT_STATE_ATTACK&&this.users[e.oID].currentState!==f.OBJECT_STATE_MOVE_AND_ATTACK&&this.users[e.oID].changeState(e.cs)))},updateUserBuffImgData:function(e,t){e in this.users&&this.users[e].updateBuffImgData(t)},updateSkillHitImgData:function(e,t){e in this.users&&this.users[e].updateSkillHitImgData(t)},synchronizeUser:function(e){for(var t in this.users)this.users[t].objectID===e&&(this.user=this.users[t],this.user.onMainUserMove=C.bind(this,this.user));this.user},getUserCurrentState:function(e){if(e in this.users)return this.users[e].getCurrentState()},getUserCurrentSkillIndex:function(e){if(e in this.users)return this.users[e].getCurrentSkillIndex()},getUserPosition:function(e){if(e in this.users)return{x:Math.floor(this.users[e].position.x),y:Math.floor(this.users[e].position.y)}},getUserExp:function(){if(this.user)return this.user.exp},getUserHP:function(e){if(e in this.users)return this.users[e].HP},getUserMP:function(e){if(e in this.users)return this.users[e].MP},processUserData:function(){return{objectID:this.user.objectID,currentState:this.user.currentState,position:{x:Math.floor(this.user.position.x),y:Math.floor(this.user.position.y)},direction:Math.floor(this.user.direction),time:this.user.timer}},processSkillData:function(e){return{sID:e.index,sTPos:{x:Math.floor(e.targetPosition.x),y:Math.floor(e.targetPosition.y)}}},processProjectileData:function(e){for(var t=[],s=0;s<e.length;s++)t.push({oID:e[s].objectID,sID:e[s].index,pos:{x:Math.floor(e[s].position.x),y:Math.floor(e[s].position.y)},sp:e[s].speed});return t},checkCollisionWithObstacles:function(e,t){return u.checkCircleCollision(l,e.x-t.size.width/2,e.y-t.size.height/2,t.size.width/2,t.objectID)},reCalcSkillTargetPosition:function(e,t,s){var n=[s[0]],i=u.calcCompelPos({x:e.x-t.size.width/2,y:e.y-t.size.height/2,width:t.size.width,height:t.size.height,id:t.objectID},n);return{x:e.x+i.x,y:e.y+i.y}},setUserChatMsg:function(e,t){e in this.users&&this.users[e].setChatMsg(t)},resetUsers:function(e,t){this.users=[],this.setUsers(e,t)},resetObjs:function(e){this.objSkills=[],this.objGolds=[],this.objJewels=[],this.objBoxs=[],this.objBuffs=[],this.setObjs(e)},resetChests:function(e){this.chests=[],this.setChests(e)},resetMobs:function(e){this.monsters=[],this.setMobs(e)}};var y=function(){var e=u.checkCircleCollision(l,this.entityTreeEle.x,this.entityTreeEle.y,this.entityTreeEle.width/2,this.entityTreeEle.id);if(0<e.length)var t=u.calcCompelPos(this.entityTreeEle,e);return t},C=function(e){this.onMainUserMove(e)};t.exports=b},{"../public/csvjson.js":11,"../public/data.json":12,"../public/gameConfig.json":13,"../public/objectAssign.js":15,"../public/quadtree.js":16,"../public/util.js":18,"./CMonster.js":5,"./CObstacle.js":6,"./CUser.js":9}],5:[function(e,t,s){var n=e("../public/util.js"),i=e("../public/gameConfig.json"),a=function(e,t,s){this.objectID=e.oID,this.currentState=e.cs,this.position=e.pos,this.targetPosition=e.tpos,this.maxSpeed=e.msp,this.direction=e.dir,this.rotateSpeed=e.rsp,this.attackTime=e.at,this.size={width:s.size,height:s.size},this.center={x:this.position.x+this.size.width/2,y:this.position.y+this.size.height/2},this.speed={x:0,y:0},this.maxHP=e.mHP,this.HP=e.HP,this.conditions=e.cdt,this.isAttack=!1,this.attackDegree=0,this.isRender=!1,this.imgData=t,this.imgRatio=s.imgRatio/100||1,this.hitImgDataList=[],this.buffImgDataList=[],this.effectTimer=Date.now(),this.effectIndex=0,this.effectRotateDegree=0,this.entityTreeEle={x:this.position.x,y:this.position.y,width:this.size.width,height:this.size.height,id:this.objectID},this.timer=Date.now(),this.updateInterval=!1,this.updateFunction=new Function,this.onMove=new Function};a.prototype={changeState:function(e){switch(this.currentState=e,this.stop(),this.currentState){case i.OBJECT_STATE_IDLE:this.updateFunction=this.idle.bind(this);break;case i.OBJECT_STATE_MOVE:this.updateFunction=this.rotate.bind(this);break;case i.OBJECT_STATE_ATTACK:this.updateFunction=this.attack.bind(this);break;case i.OBJECT_STATE_DEATH:this.updateFunction=this.idle.bind(this)}this.update()},update:function(){this.updateInterval=setInterval(this.updateFunction,1e3/30)},setCenter:function(){this.center.x=this.position.x+this.size.width/2,this.center.y=this.position.y+this.size.height/2},idle:function(){this.doEveryTick()},rotate:function(){var e=(Date.now()-this.timer)/1e3;n.rotate.call(this,e),this.doEveryTick()},move:function(e,t){t?n.move.call(this,e,t):n.move.call(this,e)},attack:function(){var e=(Date.now()-this.timer)/this.attackTime;this.attackDegree+=25*e,this.doEveryTick()},setTargetDirection:function(){n.setTargetDirection.call(this)},setSpeed:function(){n.setSpeed.call(this)},stop:function(){this.attackDegree=0,this.updateInterval&&(clearInterval(this.updateInterval),this.updateInterval=!1)},doEveryTick:function(){this.timer=Date.now();for(var e=this.hitImgDataList.length-1;0<=e;e--)Date.now()-this.hitImgDataList[e].startTime>=this.hitImgDataList[e].resourceLifeTime&&this.hitImgDataList.splice(e,1);this.isRender&&Date.now()-this.effectTimer>=i.USER_ATTACH_EFFECT_CHANGE_TIME&&(this.effectTimer=Date.now(),this.effectRotateDegree+=10,100<this.effectIndex?this.effectIndex=0:this.effectIndex+=1,360<=this.effectRotateDegree&&(this.effectRotateDegree-=360))},updateBuffImgData:function(e){this.buffImgDataList=[];for(var t=0;t<e.length;t++){for(var s=0;s<e[t].resourceLength;s++)e[t]["resourceIndex"+(s+1)].width*=this.imgRatio,e[t]["resourceIndex"+(s+1)].height*=this.imgRatio;this.buffImgDataList.push(e[t])}},updateSkillHitImgData:function(e){e.startTime=Date.now();for(var t=0;t<e.resourceLength;t++)e["resourceIndex"+(t+1)].width*=this.imgRatio,e["resourceIndex"+(t+1)].height*=this.imgRatio;this.hitImgDataList.push(e)},setEntityEle:function(){this.entityTreeEle={x:this.position.x,y:this.position.y,width:this.size.width,height:this.size.height,id:this.objectID}}},t.exports=a},{"../public/gameConfig.json":13,"../public/util.js":18}],6:[function(e,t,s){function n(e,t,s,n,i){this.objectID=n,this.imgData=i,this.position={x:e,y:t},this.size={width:2*s,height:2*s},this.center={x:this.position.x+this.size.width/2,y:this.position.y+this.size.height/2},this.staticEle={x:this.position.x,y:this.position.y,width:this.size.width,height:this.size.height,id:this.objectID,isCollide:!1}}n.prototype={setPosition:function(e,t){this.position.x=e,this.position.y=t,this.setCenter()},setSize:function(e,t){this.size.width=e,this.size.height=t},setCenter:function(){0==this.size.width||this.size.height,this.center.x=this.position.x+this.size.width/2,this.center.y=this.position.y+this.size.height/2},setTreeImgEle:function(e){this.treeImgEle={x:this.center.x-e,y:this.center.y-e,width:2*e,height:2*e,id:this.objectID,isCollide:!1}}},t.exports=n},{}],7:[function(e,t,s){var i=e("../public/util.js"),a=e("../public/gameConfig.json");function n(e,t){this.index=e.index,this.type=e.type,this.property=e.property,this.consumeMP=e.consumeMP,this.totalTime=e.totalTime,this.fireTime=e.fireTime,this.range=e.range,this.explosionRadius=e.explosionRadius,this.radius=e.radius,this.maxSpeed=e.maxSpeed,this.lifeTime=e.lifeTime,this.direction=e.direction,this.targetPosition=e.targetPosition,this.userAniStartTime=t,this.effectLastTime=e.effectLastTime,this.repeatCount=e.repeatCount,this.repeatDelay=e.repeatDelay,this.effect={position:this.targetPosition,radius:this.explosionRadius,startTime:0,lifeTime:this.effectLastTime},this.userAniTimeout=!1,this.fireTimeout=!1,this.totalTimeout=!1,this.onUserAniStart=new Function,this.onFire=new Function,this.onTimeOver=new Function}n.prototype={executeSkill:function(){this.userAniTimeout=setTimeout(function(){this.onUserAniStart()}.bind(this),this.userAniStartTime);var e=this.fireTime-a.SKILL_INFORM_TIME;e<0&&(e=0),this.userAniStartTime>e&&(e=this.userAniStartTime),this.syncFireTime=Date.now()+this.fireTime,this.fireTimeout=setTimeout(function(){if(this.onFire(this.syncFireTime),this.repeatCount)for(var e=0;e<this.repeatCount;e++)!function(e,t,s,n){var i=(e+1)*t,a=s+i;setTimeout(function(){n(a)},i)}(e,this.repeatDelay,this.syncFireTime,this.onFire)}.bind(this),e),this.totalTimeout=setTimeout(function(){this.onTimeOver()}.bind(this),this.totalTime)},startEffectTimer:function(){this.effect.startTime=Date.now()},destroy:function(){this.userAniTimeout&&clearTimeout(this.userAniTimeout),this.fireTimeout&&clearTimeout(this.fireTimeout),this.totalTimeout&&clearTimeout(this.totalTimeout)},makeProjectile:function(e,t,s){var n=i.calcForePosition(e,this.radius,s,a.PROJECTILE_FIRE_DISTANCE);return new r(this,n,t,s)}};var r=function(e,t,s,n){this.objectID=s,this.index=e.index,this.position={x:t.x,y:t.y},this.direction=n,this.speed={x:e.maxSpeed*Math.cos(this.direction*Math.PI/180),y:e.maxSpeed*Math.sin(this.direction*Math.PI/180)},this.radius=e.radius,this.lifeTime=e.lifeTime,this.explosionRadius=e.explosionRadius};t.exports=n},{"../public/gameConfig.json":13,"../public/util.js":18}],8:[function(e,t,s){var q,n,a,r,l,o,c,Z=e("../public/util.js"),Q=e("../public/gameConfig.json"),$=e("../public/objectAssign.js"),i=e("../public/serverList.json"),d=(e("../public/youtuberList.json"),e("../public/data.json")),u=e("../public/csvjson.js"),f={delimiter:",",quote:'"'},ee=u.toObject(d.skillData,f),h=u.toObject(d.buffGroupData,f),te=u.toObject(d.iconResourceData,f),se=u.toObject(d.userStatData,f),ne=1,ie="PYRO",p="<span class='red'>PYRO</span> is a powerful mage.<br><span class='red'>PYRO</span> is more powerful when PYRO`s HP is lower.<br><span class='memo'>Check Passive Spell</span>",ae="FROSTER",E="<span class='blue'>FROSTER</span> is a magical mage.<br><span class='blue'>FROSTER</span>`s ice spell may freeze enemy.<br><span class='memo'>Check Passive Spell</span>",re="MYSTER",m="<span class='purple'>MYSTER</span> is a unpredictable mage.<br><span class='purple'>MYSTER</span> will be strengthen whenever use arcane spell.<br><span class='memo'>Check Passive Spell</span>",g=0,oe=null,I=0,le=null,C=new Array(4),v=new Array(4),_=[],L=[],ce=[],S=[],T=0;S[Q.USER_CONDITION_FREEZE]=!1,S[Q.USER_CONDITION_SILENCE]=!1,S[Q.USER_CONDITION_BLUR]=!1;var b,y,D,A,R,P,M,k,w,x,B,O,N,F,U,H,j,K,Y,X,G,J,z,V,W,de,ue,fe,he,pe,Ee,me,ge,Ie,_e,Se,Te,be,ye,Ce,ve,Le,De,Ae,Re,Pe,Me,ke,we,xe,Be,Oe,Ne,Fe,Ue,He,je,Ke,Ye,Xe,Ge,Je,ze,Ve,We,qe,Ze,Qe,$e,et,tt,st,nt,it,at,rt,ot,lt,ct,dt,ut,ft,ht,pt,Et,mt,gt,It,_t,St,Tt,bt,yt,Ct,vt,Lt,Dt,At,Rt,Pt,Mt,kt,wt,xt,Bt,Ot=0,Nt=0,Ft=0,Ut=0,Ht=1,jt=1,Kt=!1,Yt=!0,Xt=!0,Gt=!0,Jt=!0,zt=!0,Vt=[],Wt=[],qt=!1,Zt=Date.now(),Qt=Date.now(),$t=!1,es=!1,ts=69,ss=32,ns=65,is=49,as=50,rs=51,os=52,ls=83,cs=71,ds=13,us=27,fs=null,hs=null,ps=null,Es=null,ms=!0,gs=!0;function Is(){this.serverResponseTimeout=!1,this.onLoadCompleteServerList=new Function,this.onStartBtnClick=new Function,this.serverConditionOn=new Function,this.serverConditionOff=new Function,this.updateKillCount=new Function,this.onSetRankers=new Function,this.onPopUpSkillChangeClick=new Function,this.onSelectCharIcon=new Function,this.onSelectSkillCancelBtnClick=new Function,this.onSkillIconClick=new Function,this.onSkillUpgrade=new Function,this.onExchangeSkill=new Function,this.onExchangePassive=new Function,this.onEquipPassive=new Function,this.onUnequipPassive=new Function,this.onUpgradeCharSkills=new Function,this.onDeadSceneConfirmClick=new Function}function _s(e,t){e.classList.contains("disable")?(e.classList.add("enable"),e.classList.remove("disable"),t?(e.classList.add("popToCenter"),Ge.classList.add("enable"),Ge.classList.remove("disable")):e.classList.remove("popToCenter")):e.classList.contains("enable")&&(e.classList.add("disable"),e.classList.remove("enable"),e.classList.remove("popToCenter"),Ge.classList.add("disable"),Ge.classList.remove("enable"))}function Ss(e,t,s){this.onPopUpSkillChangeClick(),Cs();var n=null,i=75/72,a=null;t===Q.SKILL_CHANGE_PANEL_EQUIP&&(e===rt?n=-1:e===lt?n=0:e===ct?n=1:e===dt?n=2:e===ut?n=3:e===ft&&(n=-1));var r=parseInt(e.getAttribute("skillIndex"));if(t===Q.SKILL_CHANGE_PANEL_CONTAINER){var o=L.indexOf(r);-1!==o&&L.splice(o,1),e.getElementsByTagName("img")[0].classList.add("disable");var l=M.parentNode.getElementsByTagName("img");l[0].classList.add("disable");var c=vt.getElementsByTagName("img");c[0].classList.add("disable"),L.length&&(l[0].classList.remove("disable"),c[0].classList.remove("disable"))}if(fs){if(fs!==t){if(fs===Q.SKILL_CHANGE_PANEL_CONTAINER)if(-1===n)this.makeFlashMessage("Can not change character spell!!!");else{for(var d=0,u=0;u<Xe.childNodes.length;u++)if(Xe.childNodes[u]===hs){d=u;break}if(Xe.removeChild(hs),r){var f=$({},Z.findData(ee,"index",r)),h=document.createElement("div");(T=document.createElement("div")).classList.add("popUpskillImgContainer");var p=document.createElement("img");h.setAttribute("skillIndex",r),(b=document.createElement("img")).classList.add("disable"),h.appendChild(b),h.classList.add("popUpSkillContainerItem"),p.src=q;var E=$({},Z.findData(te,"index",f.skillIcon));p.style.clip=Z.makeCssClipStyle(E,i),Z.setImgCssStyle(p,E,i),T.appendChild(p),h.appendChild(T),Xe.insertBefore(h,Xe.childNodes[d]),h.onclick=Ss.bind(this,h,Q.SKILL_CHANGE_PANEL_CONTAINER,s)}for(;e.firstChild;)e.removeChild(e.firstChild);a=Bs(n),C.splice(n,1),v.splice(n,1),C.splice(n,0,Es);var m=$({},Z.findData(ee,"index",Es));v.splice(n,0,m),(T=document.createElement("div")).classList.add("popUpskillImgContainer"),(p=document.createElement("img")).src=q;E=$({},Z.findData(te,"index",m.skillIcon));p.style.clip=Z.makeCssClipStyle(E,i),Z.setImgCssStyle(p,E,i),e.setAttribute("skillIndex",m.index),T.appendChild(p),e.appendChild(T),this.applySkillCooldown(m.index,n)}else if(-1===ps)this.makeFlashMessage("Can not change character spell!!!");else{for(d=0,u=0;u<Xe.childNodes.length;u++)if(Xe.childNodes[u]===e){d=u;break}if(Xe.removeChild(e),Es){f=$({},Z.findData(ee,"index",Es)),h=document.createElement("div");(T=document.createElement("div")).classList.add("popUpskillImgContainer");p=document.createElement("img");(b=document.createElement("img")).classList.add("disable"),h.appendChild(b),h.setAttribute("skillIndex",Es),h.classList.add("popUpSkillContainerItem"),p.src=q;E=$({},Z.findData(te,"index",f.skillIcon));p.style.clip=Z.makeCssClipStyle(E,i),Z.setImgCssStyle(p,E,i),T.appendChild(p),h.appendChild(T),Xe.insertBefore(h,Xe.childNodes[d]),h.onclick=Ss.bind(this,h,Q.SKILL_CHANGE_PANEL_CONTAINER,s)}for(;hs.firstChild;)hs.removeChild(hs.firstChild);a=Bs(ps),C.splice(ps,1),v.splice(ps,1),C.splice(ps,0,r);m=$({},Z.findData(ee,"index",r));v.splice(ps,0,m),(T=document.createElement("div")).classList.add("popUpskillImgContainer"),(p=document.createElement("img")).src=q;E=$({},Z.findData(te,"index",m.skillIcon));p.style.clip=Z.makeCssClipStyle(E,i),Z.setImgCssStyle(p,E,i),hs.setAttribute("skillIndex",m.index),T.appendChild(p),hs.appendChild(T),this.applySkillCooldown(m.index,ps)}if(this.onExchangeSkill(ne),!s){var g=Os(a);if(m&&f)if(m.type===Q.SKILL_TYPE_PASSIVE&&f.type===Q.SKILL_TYPE_PASSIVE){var I=$({},Z.findData(ee,"index",f.index)).buffToSelf,_=$({},Z.findData(ee,"index",m.index)).buffToSelf;g?(Ns(I)?Us(I):this.onUnequipPassive(I),Fs(_),setTimeout(Hs.bind(this.onEquipPassive,_),g)):this.onExchangePassive(I,_)}else if(m.type===Q.SKILL_TYPE_PASSIVE){var S=$({},Z.findData(ee,"index",m.index)).buffToSelf;g?(Fs(S),setTimeout(Hs.bind(this.onEquipPassive,S),g)):this.onEquipPassive(S)}else f.type===Q.SKILL_TYPE_PASSIVE&&(S=$({},Z.findData(ee,"index",f.index)).buffToSelf,g&&Ns(S)?Us(S):this.onUnequipPassive(S));else m?m.type===Q.SKILL_TYPE_PASSIVE&&(S=$({},Z.findData(ee,"index",m.index)).buffToSelf,g?(Fs(S),setTimeout(Hs.bind(this.onEquipPassive,S),g)):this.onEquipPassive(S)):f&&f.type===Q.SKILL_TYPE_PASSIVE&&(S=$({},Z.findData(ee,"index",f.index)).buffToSelf,g&&Ns(S)?Us(S):this.onUnequipPassive(S))}this.setHUDSkills(),ws(),ps=hs=fs=Es=null}else if(r===Es){if(t===Q.SKILL_CHANGE_PANEL_EQUIP&&-1!==n){var T;m=$({},Z.findData(ee,"index",Es)),h=document.createElement("div");(T=document.createElement("div")).classList.add("popUpskillImgContainer");var b;p=document.createElement("img");(b=document.createElement("img")).classList.add("disable"),h.appendChild(b),h.setAttribute("skillIndex",Es),h.classList.add("popUpSkillContainerItem"),p.src=q;E=$({},Z.findData(te,"index",m.skillIcon));for(p.style.clip=Z.makeCssClipStyle(E,i),Z.setImgCssStyle(p,E,i),T.appendChild(p),h.appendChild(T),Xe.appendChild(h),h.onclick=Ss.bind(this,h,Q.SKILL_CHANGE_PANEL_CONTAINER,s);hs.firstChild;)hs.removeChild(hs.firstChild),hs.setAttribute("skillIndex","");if(C[ps]&&(C.splice(ps,1),v.splice(ps,1)),C.splice(ps,0,void 0),v.splice(ps,0,void 0),this.onExchangeSkill(ne),this.updateUnEquipSkillSlotCooldown(ps),m.type===Q.SKILL_TYPE_PASSIVE){S=$({},Z.findData(ee,"index",m.index)).buffToSelf;(g=Os(a=Bs(ps)))&&Ns(S)?Us(S):this.onUnequipPassive(S)}}this.setHUDSkills(),ws(),ps=hs=fs=Es=null}else if(hs===e)ys();else if(Es=r||null,fs=t,ps=n,(hs=e).classList.add("selected"),t===Q.SKILL_CHANGE_PANEL_CONTAINER)lt.classList.add("equipable"),ct.classList.add("equipable"),dt.classList.add("equipable"),ut.classList.add("equipable");else if(t===Q.SKILL_CHANGE_PANEL_EQUIP&&-1!==n)for(u=0;u<Xe.children.length;u++)Xe.children[u].classList.add("equipable")}else if(Es=r||null,fs=t,ps=n,(hs=e).classList.add("selected"),t===Q.SKILL_CHANGE_PANEL_CONTAINER)lt.classList.add("equipable"),ct.classList.add("equipable"),dt.classList.add("equipable"),ut.classList.add("equipable");else if(t===Q.SKILL_CHANGE_PANEL_EQUIP)switch(n){case-1:break;default:for(u=0;u<Xe.children.length;u++)Xe.children[u].classList.add("equipable")}if(this.checkPopUpSkillChange()?(this.setPopUpSkillChange(s),ps=hs=fs=Es=null,Cs(),this.updateSelectedPanel()):(this.updateSelectedPanel(Es),t===Q.SKILL_CHANGE_PANEL_EQUIP&&!r&&e.classList.contains("selected")&&tt.classList.remove("disable")),this.checkSkillsConditions(),!$t){var y=0;for(u=0;u<C.length;u++)C[u]&&y++;2<=y?$t=!0:C[0]!==Q.SKILL_INDEX_PYRO_GIVEN&&C[0]!==Q.SKILL_INDEX_FROST_GIVEN&&C[0]!==Q.SKILL_INDEX_ARCANE_GIVEN&&($t=!0)}}function Ts(e){if(e===o)var t=Q.START_BUTTON;else e===c&&(t=Q.RESTART_BUTTON);t===Q.RESTART_BUTTON&&c.getElementsByTagName("span")[0].classList.contains("disable")||(gs||(this.disableRestartButton(),Bt.onclick()),this.checkVideoAd(ne,t))}function bs(e,t,s){switch(this.classList.remove("cooldownMaskAni"),this.style.opacity=0,e){case Q.SKILL_BASIC_INDEX:Yt=!0;break;case Q.SKILL_EQUIP1_INDEX:Xt=!0;break;case Q.SKILL_EQUIP2_INDEX:Gt=!0;break;case Q.SKILL_EQUIP3_INDEX:Jt=!0;break;case Q.SKILL_EQUIP4_INDEX:zt=!0}for(var n=0;n<Vt.length;n++)if(Vt[n].slot===e){Vt.splice(n,1);break}t()}function ys(){for(;We.firstChild;)We.removeChild(We.firstChild);for(;qe.firstChild;)qe.removeChild(qe.firstChild);Qe.innerHTML="",$e.innerHTML="",Es=null,et.onclick=new Function,ps=hs=fs=null,et.getElementsByTagName("span")[0].innerHTML=" ",skillUpgradeBlockMask.classList.remove("disable"),tt.classList.add("disable"),Ze.classList.remove("skillUpgradeEffectAni"),Cs()}function Cs(){rt.classList.remove("selected"),ft.classList.remove("selected"),lt.classList.remove("selected"),ct.classList.remove("selected"),dt.classList.remove("selected"),ut.classList.remove("selected"),lt.classList.remove("equipable"),ct.classList.remove("equipable"),dt.classList.remove("equipable"),ut.classList.remove("equipable");for(var e=0;e<Xe.children.length;e++)Xe.children[e].classList.remove("equipable"),Xe.children[e].classList.remove("selected")}function vs(e){switch(e){case Q.SKILL_BASIC_INDEX:if(oe)var t=oe;break;case Q.SKILL_EQUIP1_INDEX:v[0]&&(t=v[0]);break;case Q.SKILL_EQUIP2_INDEX:v[1]&&(t=v[1]);break;case Q.SKILL_EQUIP3_INDEX:v[2]&&(t=v[2]);break;case Q.SKILL_EQUIP4_INDEX:v[3]&&(t=v[3]);break;case Q.SKILL_PASSIVE_INDEX:le&&(t=le)}if(t){var s=xs(t).replace(/&nbsp;/g,"<br>"),n=document.createElement("div");n.innerHTML=s,n.classList.add("bottomTooltip"),this.parentNode.parentNode.appendChild(n)}}function Ls(){for(var e=this.parentNode.parentNode,t=e.getElementsByClassName("bottomTooltip"),s=0;t.length;s++)e.removeChild(t[s])}function Ds(){var e=parseInt(this.getAttribute("skillIndex"));if(e&&Z.isNumeric(e)){var t=xs($({},Z.findData(ee,"index",e))).replace(/&nbsp;/g,"<br>"),s=document.createElement("div");s.innerHTML=t,s.classList.add("bottomTooltip"),this.appendChild(s)}}function As(e,t){var s=document.createElement("div"),n="";switch(e){case Q.STAT_POWER_INDEX:n+="Damage Rate <span class='green'>+"+Math.floor(t*Q.STAT_CALC_FACTOR_POWER_TO_DAMAGE_RATE*100)/100+"%</span><br>",n+="Max HP <span class='green'>+"+Math.floor(t*Q.STAT_CALC_FACTOR_POWER_TO_HP*100)/100+"</span><br>",n+="HP Regen <span class='green'>+"+Math.floor(t*Q.STAT_CALC_FACTOR_POWER_TO_HP_REGEN*100)/100+"</span><br>";break;case Q.STAT_MAGIC_INDEX:n+="All Resistance <span class='green'>+"+Math.floor(t*Q.STAT_CALC_FACTOR_MAGIC_TO_RESISTANCE*100)/100+"%</span><br>",n+="Max MP <span class='green'>+"+Math.floor(t*Q.STAT_CALC_FACTOR_MAGIC_TO_MP*100)/100+"</span><br>",n+="MP Regen <span class='green'>+"+Math.floor(t*Q.STAT_CALC_FACTOR_MAGIC_TO_MP_REGEN*100)/100+"</span><br>";break;case Q.STAT_SPEED_INDEX:n+="Casting Speed <span class='green'>+"+Math.floor(t*Q.STAT_CALC_FACTOR_SPEED_TO_CAST_SPEED*100)/100+"%</span><br>",n+="Cooldown Reduce <span class='green'>+"+Math.floor(t*Q.STAT_CALC_FACTOR_SPEED_TO_COOLDOWN_REDUCE_RATE*100)/100+"%</span><br>"}s.innerHTML=n,s.classList.add("bottomTooltip"),this.appendChild(s)}function Rs(e,t){var s=document.createElement("div"),n="";e===Q.STAT_OFFENCE_INDEX?(n+="<p><strong>All Damage <span class='green'>+"+Math.floor(10*(t.dR-100))/10+"%</span></strong></p>",n+="<p>Fire Damage <span class='green'>+"+Math.floor(10*(t.fiDR-100))/10+"%</span></p>",n+="<p>Frost Damage <span class='green'>+"+Math.floor(10*(t.frDR-100))/10+"%</span></p>",n+="<p>Arcane Damage <span class='green'>+"+Math.floor(10*(t.acDR-100))/10+"%</span></p>"):e===Q.STAT_DEFENCE_INDEX&&(n+="<p><strong>All Resistance <span class='green'>+"+Math.floor(10*t.rA)/10+"%</span></strong></p>",n+="<p>Fire Resistance <span class='green'>+"+Math.floor(10*t.rFi)/10+"%</span></p>",n+="<p>Frost Resistance <span class='green'>+"+Math.floor(10*t.rFr)/10+"%</span></p>",n+="<p>Arcane Resistance <span class='green'>+"+Math.floor(10*t.rAc)/10+"%</span></p>"),s.innerHTML=n,s.classList.add("bottomTooltip"),this.appendChild(s)}function Ps(){var e=document.createElement("div"),t=parseInt(this.getAttribute("buffGroupIndex")),s=$({},Z.findData(h,"index",t)),n="<h4 class='yellow'>"+s.clientName+"</h4><hr>"+s.clientDesc.replace(/&nbsp;/g,"<br>");e.innerHTML=n,e.classList.add("bottomTooltip"),this.appendChild(e)}function Ms(){for(var e=Z.getElementsByClassName(this,"bottomTooltip"),t=0;t<e.length;t++)this.removeChild(e[t])}function ks(e){this.onSkillIconClick(e)}function ws(){var e=40/72,t=$({},Z.findData(te,"index",oe.skillIcon));_t.getElementsByTagName("img")[0].style.clip=Z.makeCssClipStyle(t,e),_t.setAttribute("skillIndex",oe.index),Z.setImgCssStyle(_t.getElementsByTagName("img")[0],t,e),t=$({},Z.findData(te,"index",le.skillIcon)),St.getElementsByTagName("img")[0].style.clip=Z.makeCssClipStyle(t,e),St.setAttribute("skillIndex",le.index),Z.setImgCssStyle(St.getElementsByTagName("img")[0],t,e),e=50/72,v[0]?(t=$({},Z.findData(te,"index",v[0].skillIcon)),Tt.getElementsByTagName("img")[0].style.clip=Z.makeCssClipStyle(t,e),Tt.setAttribute("skillIndex",v[0].index),Z.setImgCssStyle(Tt.getElementsByTagName("img")[0],t,e)):(Tt.getElementsByTagName("img")[0].style.clip=Z.makeCssClipStyle(n,e),Tt.setAttribute("skillIndex",0),Z.setImgCssStyle(Tt.getElementsByTagName("img")[0],n,e)),v[1]?(t=$({},Z.findData(te,"index",v[1].skillIcon)),bt.getElementsByTagName("img")[0].style.clip=Z.makeCssClipStyle(t,e),bt.setAttribute("skillIndex",v[1].index),Z.setImgCssStyle(bt.getElementsByTagName("img")[0],t,e)):(bt.getElementsByTagName("img")[0].style.clip=Z.makeCssClipStyle(n,e),bt.setAttribute("skillIndex",0),Z.setImgCssStyle(bt.getElementsByTagName("img")[0],n,e)),v[2]?(t=$({},Z.findData(te,"index",v[2].skillIcon)),yt.getElementsByTagName("img")[0].style.clip=Z.makeCssClipStyle(t,e),yt.setAttribute("skillIndex",v[2].index),Z.setImgCssStyle(yt.getElementsByTagName("img")[0],t,e)):(yt.getElementsByTagName("img")[0].style.clip=Z.makeCssClipStyle(n,e),yt.setAttribute("skillIndex",0),Z.setImgCssStyle(yt.getElementsByTagName("img")[0],n,e)),v[3]?(t=$({},Z.findData(te,"index",v[3].skillIcon)),Ct.getElementsByTagName("img")[0].style.clip=Z.makeCssClipStyle(t,e),Ct.setAttribute("skillIndex",v[3].index),Z.setImgCssStyle(Ct.getElementsByTagName("img")[0],t,e)):(Ct.getElementsByTagName("img")[0].style.clip=Z.makeCssClipStyle(n,e),Ct.setAttribute("skillIndex",0),Z.setImgCssStyle(Ct.getElementsByTagName("img")[0],n,e))}function xs(e,t){var s="",n="white";switch(e.property){case Q.SKILL_PROPERTY_FIRE:n="red";break;case Q.SKILL_PROPERTY_FROST:n="blue";break;case Q.SKILL_PROPERTY_ARCANE:n="purple"}if(s+="<h4 class='"+n+"'><span class='yellow'>Lv "+e.level+"</span> "+e.clientName+"</h4><hr>",s+="<div class='tierLabel'><span class='green'>Tier : </span>"+e.tier+"</span></div>",e.type!==Q.SKILL_TYPE_PASSIVE){s+="<div class='titleLabel'><span class='green'>Active</span></div>";var i=e.fireDamage+e.frostDamage+e.arcaneDamage;if(t)var a=t.fireDamage+t.frostDamage+t.arcaneDamage;switch(e.type){case Q.SKILL_TYPE_INSTANT_RANGE:s+=t&&i<a?"<div><span class='yellow'>Damage : </span><span class='"+n+"'>"+i+"</span><img src='/images/upIcon.png' class='disable' /></div>":"<div><span class='yellow'>Damage : </span><span class='"+n+"'>"+i+"</span></div>",t&&t.explosionRadius>e.explosionRadius?s+="<div><span class='yellow'>Range : </span>"+e.explosionRadius+"<img src='/images/upIcon.png' class='disable' /></div>":s+="<div><span class='yellow'>Range : </span>"+e.explosionRadius+"</div>";break;case Q.SKILL_TYPE_PROJECTILE:t?(s+=i<a?"<div><span class='yellow'>Damage : </span><span class='"+n+"'>"+i+"</span><img src='/images/upIcon.png' class='disable' /></div>":"<div><span class='yellow'>Damage : </span><span class='"+n+"'>"+i+"</span></div>",t.radius>e.radius?s+="<div><span class='yellow'>Radius : </span>"+e.radius+"<img src='/images/upIcon.png' class='disable' /></div>":s+="<div><span class='yellow'>Radius : </span>"+e.radius+"</div>"):(s+="<div><span class='yellow'>Damage : </span><span class='"+n+"'>"+i+"</span></div>",s+="<div><span class='yellow'>Radius : </span>"+e.radius+"</div>");break;case Q.SKILL_TYPE_PROJECTILE_EXPLOSION:s+=t&&i<a?"<div><span class='yellow'>Damage : </span><span class='"+n+"'>"+i+"</span><img src='/images/upIcon.png' class='disable' /></div>":"<div><span class='yellow'>Damage : </span><span class='"+n+"'>"+i+"</span></div>",t&&t.explosionRadius>e.explosionRadius?s+="<div><span class='yellow'>Range : </span>"+e.explosionRadius+"<img src='/images/upIcon.png' class='disable' /></div>":s+="<div><span class='yellow'>Range : </span>"+e.explosionRadius+"</div>";break;case Q.SKILL_TYPE_PROJECTILE_TICK:case Q.SKILL_TYPE_PROJECTILE_TICK_EXPLOSION:t?(s+=i<a?"<div><span class='yellow'>Damage : </span><span class='"+n+"'>"+i+"</span><img src='/images/upIcon.png' class='disable' /></div>":"<div><span class='yellow'>Damage : </span><span class='"+n+"'>"+i+"</span></div>",t.radius>e.radius?s+="<div><span class='yellow'>Radius : </span>"+e.radius+"<img src='/images/upIcon.png' class='disable' /></div>":s+="<div><span class='yellow'>Radius : </span>"+e.radius+"</div>"):(s+="<div><span class='yellow'>Damage : </span><span class='"+n+"'>"+i+"</span></div>",s+="<div><span class='yellow'>Radius : </span>"+e.radius+"</div>");break;case Q.SKILL_TYPE_RANGE:if(i)s+=t&&i<a?"<div><span class='yellow'>Damage : </span><span class='"+n+"'>"+i+"</span><img src='/images/upIcon.png' class='disable' /></div>":"<div><span class='yellow'>Damage : </span><span class='"+n+"'>"+i+"</span></div>",t&&t.explosionRadius>e.explosionRadius?s+="<div><span class='yellow'>Range : </span>"+e.explosionRadius+"<img src='/images/upIcon.png' class='disable' /></div>":s+="<div><span class='yellow'>Range : </span>"+e.explosionRadius+"</div>";else{var r=$({},Z.findData(h,"index",e.buffToTarget)),o=Math.floor(10*r.buffLifeTime)/1e4;if(t)var l=$({},Z.findData(h,"index",t.buffToTarget)),c=Math.floor(10*l.buffLifeTime)/1e4;Z.isNumeric(o)&&1<=o&&(t?Z.isNumeric(c)&&1<=c&&(s+=o<c?"<div><span class='yellow'>Duration : </span>"+o+"(s)<img src='/images/upIcon.png' class='disable' /></div>":"<div><span class='yellow'>Duration : </span>"+o+"(s)</div>"):s+="<div><span class='yellow'>Duration : </span>"+o+"(s)</div>"),t&&t.explosionRadius>e.explosionRadius?s+="<div><span class='yellow'>Range : </span>"+e.explosionRadius+"<img src='/images/upIcon.png' class='disable' /></div>":s+="<div><span class='yellow'>Range : </span>"+e.explosionRadius+"</div>",(!Z.isNumeric(o)||o<1)&&(s+="<div></div>")}break;case Q.SKILL_TYPE_SELF:r=$({},Z.findData(h,"index",e.buffToSelf)),o=Math.floor(10*r.buffLifeTime)/1e4;if(t)l=$({},Z.findData(h,"index",t.buffToSelf)),c=Math.floor(10*l.buffLifeTime)/1e4;t?(isNaN(c)||c<=1?s+="<div><span class='yellow'>Duration : </span>"+o+"(s)<img src='/images/upIcon.png' class='disable' /></div>":s+=o<c?"<div><span class='yellow'>Duration : </span>"+o+"(s)<img src='/images/upIcon.png' class='disable' /></div>":"<div><span class='yellow'>Duration : </span>"+o+"(s)</div>",s+="<div></div>"):isNaN(o)||o<=1||(s+="<div><span class='yellow'>Duration : </span>"+o+"(s)</div>",s+="<div></div>");break;case Q.SKILL_TYPE_SELF_EXPLOSION:s+=t&&i<a?"<div><span class='yellow'>Damage : </span><span class='"+n+"'>"+i+"</span><img src='/images/upIcon.png' class='disable' /></div>":"<div><span class='yellow'>Damage : </span><span class='"+n+"'>"+i+"</span></div>",t&&t.explosionRadius>e.explosionRadius?s+="<div><span class='yellow'>Range : </span>"+e.explosionRadius+"<img src='/images/upIcon.png' class='disable' /></div>":s+="<div><span class='yellow'>Range : </span>"+e.explosionRadius+"</div>";break;case Q.SKILL_TYPE_TELEPORT:t&&t.range>e.range?s+="<div><span class='yellow'>Range : </span>"+e.range+"<img src='/images/upIcon.png' class='disable' /></div>":s+="<div><span class='yellow'>Range : </span>"+e.range+"</div>",s+="<div></div>"}var d=Math.floor(10*e.cooldown)/1e4;e.type!==Q.SKILL_TYPE_INSTANT_RANGE&&e.type!==Q.SKILL_TYPE_INSTANT_PROJECTILE&&(t?(t.consumeMP>e.consumeMP?s+="<div><span class='yellow'>MP Cost : </span>"+e.consumeMP+"<img src='/images/downIcon.png' class='disable' /></div>":t.consumeMP<e.consumeMP?s+="<div><span class='yellow'>MP Cost : </span>"+e.consumeMP+"<img src='/images/upIcon.png' class='disable' /></div>":s+="<div><span class='yellow'>MP Cost : </span>"+e.consumeMP+"</div>",t.cooldown<e.cooldown?s+="<div><span class='yellow'>Cooldown : </span>"+d+"(s)<img src='/images/upIcon.png' class='disable' /></div>":s+="<div><span class='yellow'>Cooldown : </span>"+d+"(s)</div>"):(s+="<div><span class='yellow'>MP Cost : </span>"+e.consumeMP+"</div>",s+="<div><span class='yellow'>Cooldown : </span>"+d+"(s)</div>")),s+="<hr>"}else s+="<div class='titleLabel'><span class='green'>Passive</span></div>",s+="<div></div><div></div><hr>";return s+="<p>"+e.clientDesc+"</p>"}function Bs(e){switch(e){case 0:return Q.SKILL_EQUIP1_INDEX;case 1:return Q.SKILL_EQUIP2_INDEX;case 2:return Q.SKILL_EQUIP3_INDEX;case 3:return Q.SKILL_EQUIP4_INDEX}}function Os(e){for(var t=0,s=0;s<Vt.length;s++)if(e===Vt[s].slot){var n=Date.now()-Vt[s].startTime;t=1e3*Vt[s].cooldownTime-n;break}return t}function Ns(e){for(var t=0;t<Wt.length;t++)if(Wt[t]===e)return!0;return!1}function Fs(e){for(var t=Wt.length-1;0<=t;t--)Wt[t]===e&&Wt.splice(t,1);Wt.push(e)}function Us(e){var t=Wt.indexOf(e);-1!==t&&Wt.splice(t,1)}function Hs(e){for(var t=Wt.length-1;0<=t;t--)if(Wt[t]===e){Wt.splice(t,1),this(e);break}}function js(){es||(es=!0,Ve.classList.add("disable"),at.classList.add("disable"),setTimeout(function(){$t?Ks():Xe.classList.add("skillEquipTutorialHighlight")},200),setTimeout(function(){$t?Ks():(nt.classList.add("disable"),st.classList.remove("disable"),st.classList.add("skillEquipTutorialAni"))},500),setTimeout(function(){$t?Ks():(st.classList.add("disable"),it.classList.remove("disable"),it.classList.add("skillEquipTutorialAni"),it.style.animationIterationCount=1),Xe.classList.remove("skillEquipTutorialHighlight")},2500),setTimeout(function(){$t?Ks():ot.classList.add("skillEquipTutorialHighlight")},3500),setTimeout(function(){$t?Ks():(nt.classList.remove("disable"),it.classList.add("disable"),nt.classList.add("skillEquipTutorialAni"))},3800),setTimeout(function(){ot.classList.remove("skillEquipTutorialHighlight"),es=!1,Ks(),$t||(nt.classList.add("disable"),js())},5800))}function Ks(){Ve.classList.remove("disable"),at.classList.remove("disable"),Xe.classList.remove("skillEquipTutorialHighlight"),ot.classList.remove("skillEquipTutorialHighlight"),st.classList.add("disable"),nt.classList.add("disable"),it.classList.add("disable")}function Ys(e){setTimeout(function(){gs=!1,c.getElementsByTagName("span")[0].innerHTML='Join Game <span class="small">(Ad)</span>'},e)}function Xs(e,t){var s=e.value.substr(0,1),n=parseInt(Z.charToKeyCode(s));" "==s&&(n=32);var i=!1;for(var a in ze)if(a!=t&&ze[a]==n){i=!0;break}i?(e.value="",this.makeFlashMessage("Key Duplicate!!!")):n?(ze[t]=n,e.value="",e.placeholder=" "==s?"Space":s.toUpperCase()):e.value=""}Is.prototype={initStartScene:function(){a=document.getElementById("startScene"),r=document.getElementById("gameScene"),l=document.getElementById("standingScene"),o=document.getElementById("startButton");document.getElementById("startSceneSelectedCharName"),document.getElementById("startSceneSelectedCharStatPower"),document.getElementById("startSceneSelectedCharStatMagic"),document.getElementById("startSceneSelectedCharStatSpeed"),document.getElementById("startSceneSelectedCharDesc");c=document.getElementById("restartButton"),Et=document.getElementById("standingSceneSelectedCharName"),mt=document.getElementById("standingSceneSelectedCharStatPower"),gt=document.getElementById("standingSceneSelectedCharStatMagic"),It=document.getElementById("standingSceneSelectedCharStatSpeed"),_t=document.getElementById("standingSceneSelectedCharBaseSkill"),St=document.getElementById("standingSceneSelectedCharPassiveSkill"),Tt=document.getElementById("standingSceneSelectedCharEquipSkill1"),bt=document.getElementById("standingSceneSelectedCharEquipSkill2"),yt=document.getElementById("standingSceneSelectedCharEquipSkill3"),Ct=document.getElementById("standingSceneSelectedCharEquipSkill4"),_t.getElementsByTagName("img")[0].src=q,St.getElementsByTagName("img")[0].src=q,Tt.getElementsByTagName("img")[0].src=q,bt.getElementsByTagName("img")[0].src=q,yt.getElementsByTagName("img")[0].src=q,Ct.getElementsByTagName("img")[0].src=q,_t.onmouseover=Ds.bind(_t),_t.onmouseout=Ms.bind(_t),St.onmouseover=Ds.bind(St),St.onmouseout=Ms.bind(St),Tt.onmouseover=Ds.bind(Tt),Tt.onmouseout=Ms.bind(Tt),bt.onmouseover=Ds.bind(bt),bt.onmouseout=Ms.bind(bt),yt.onmouseover=Ds.bind(yt),yt.onmouseout=Ms.bind(yt),Ct.onmouseover=Ds.bind(Ct),Ct.onmouseout=Ms.bind(Ct),vt=document.getElementById("standingSceneSkillSettingBtn"),Lt=document.getElementById("userStandingNickName"),o.onclick=Ts.bind(this,o),o.getElementsByTagName("span")[0].classList.remove("disable"),o.getElementsByTagName("img")[0].classList.add("disable"),function(){if(_u&&"0"!==_u.n){var e=document.getElementById("userStartNickName");e.value=_u.n}}(),xt=document.getElementById("displayContainer"),kt=document.getElementById("displayAdContainer"),wt=document.getElementById("displayAdRefresh"),Bt=document.getElementById("videoAdPlay");var e=document.getElementById("signInGoogle1"),t=document.getElementById("signInGoogle2"),s=document.getElementById("playGoogle"),n=document.getElementById("playAsGuest"),i=document.getElementById("optionLogout");e.onclick=function(){return window.open("/auth/google","newwindow","width=630, height=630"),!1},t.onclick=function(){return window.open("/auth/google","newwindow","width=630, height=630"),!1},s.onclick=function(){return window.open("/auth/google","newwindow","width=630, height=630"),!1},n.onclick=function(){var t=Z.createRequest();return t.onreadystatechange=function(e){4===t.readyState&&200===t.status&&(window.location.href="/")},t.open("POST","/playAsGuest",!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.send("username=guest&password=null"),!1},i.onclick=function(){return _a?!(window.location.href="/logout"):confirm("Account is not registered.\nLogout will result in loss all data!\nDo you want to logout?")?!(window.location.href="/logout"):void 0}},setStartSceneLevels:function(e,t,s){var n=document.getElementById("startSceneHudCenterCenterCharSelect").children;n[0].getElementsByTagName("span")[0].innerText="Lv. "+e,n[1].getElementsByTagName("span")[0].innerText="Lv. "+t,n[2].getElementsByTagName("span")[0].innerText="Lv. "+s,function(o,l,c){for(var d=document.getElementById("startSceneHudCenterCenterCharSelect").children,e=0;e<d.length;e++)d[e].onclick=function(){var e=parseInt(this.getAttribute("type"));ne=e===Q.CHAR_TYPE_FIRE||e===Q.CHAR_TYPE_FROST||e===Q.CHAR_TYPE_ARCANE?e:Q.CHAR_TYPE_FIRE;for(var t=0;t<d.length;t++)d[t].classList.remove("selectedChar");this.classList.add("selectedChar");var s="",n="",i="",a=1;switch(e){case Q.CHAR_TYPE_FIRE:s=ie,n=p,i="red",a=o;break;case Q.CHAR_TYPE_FROST:s=ae,n=E,i="blue",a=l;break;case Q.CHAR_TYPE_ARCANE:s=re,n=m,i="purple",a=c}var r=$({},Z.findDataWithTwoColumns(se,"type",ne,"level",a));startSceneSelectedCharName.innerHTML="<span class='"+i+"'>"+s+"</span>",startSceneSelectedCharDesc.innerHTML=n,startSceneSelectedCharStatPower.getElementsByTagName("span")[0].innerHTML=r.power,startSceneSelectedCharStatMagic.getElementsByTagName("span")[0].innerHTML=r.magic,startSceneSelectedCharStatSpeed.getElementsByTagName("span")[0].innerHTML=r.speed,startSceneSelectedCharStatPower.onmouseover=As.bind(startSceneSelectedCharStatPower,Q.STAT_POWER_INDEX,r.power),startSceneSelectedCharStatPower.onmouseout=Ms.bind(startSceneSelectedCharStatPower),startSceneSelectedCharStatMagic.onmouseover=As.bind(startSceneSelectedCharStatMagic,Q.STAT_MAGIC_INDEX,r.magic),startSceneSelectedCharStatMagic.onmouseout=Ms.bind(startSceneSelectedCharStatMagic),startSceneSelectedCharStatSpeed.onmouseover=As.bind(startSceneSelectedCharStatSpeed,Q.STAT_SPEED_INDEX,r.speed),startSceneSelectedCharStatSpeed.onmouseout=Ms.bind(startSceneSelectedCharStatSpeed)};d[0].onclick()}(e,t,s)},setServerList:function(){var a=document.getElementById("servers"),r=!1,o=!1,l=this.onLoadCompleteServerList;setTimeout(function(){r||(alert("Sorry. Can`t find available server."),a.selectedIndex=1,r=!0,l())},Q.MAX_FIND_AVAILABLE_SERVER_TIME);var e=0;for(var t in i)if(i[t]){var s="http://"+i[t].IP,n=a.querySelectorAll('[label="'+i[t].SERVER+'"]')[0];Z.createDomSelectOption(t,s,!0,n);try{!function(){var i=Z.createRequest();i.onreadystatechange=function(e){if(4===i.readyState&&200===i.status){var t=JSON.parse(i.response);if(t.isServerDown){n=(s=a.querySelectorAll('[value="'+t.ip+'"]')[0]).text+" ["+t.currentUser+"/"+t.maxUser+"]";s.text=n}else{var s;(s=a.querySelectorAll('[value="'+t.ip+'"]')[0]).disabled=!1,parseInt(t.currentUser)>=parseInt(t.maxUser)&&s.classList.add("overUser"),Date.now()-t.startTime>=Q.MAX_PING_LIMIT&&s.classList.add("highPing"),s.classList.contains("overUser")||s.classList.contains("highPing")||s.classList.add("available");var n=s.text+" ["+t.currentUser+"/"+t.maxUser+"] "+(Date.now()-t.startTime)+"ms";s.text=n,o||(o=!0,a.selectedIndex=t.optionIndex),r||parseInt(t.currentUser)<parseInt(t.maxUser)&&(r=!0,l(),a.selectedIndex=t.optionIndex)}}},i.open("POST",s+"/usersInfo",!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.send("ip="+s+"&startTime="+Date.now()+"&optionIndex="+e)}(),e++}catch(e){}}else Z.createDomSelectOptGroup(t,a,!1)},getSelectedServer:function(){var e=document.getElementById("servers");return e.options[e.selectedIndex].value},getStartUserName:function(){var e=document.getElementById("userStartNickName").value;if(e){var t=Z.processMessage(e,Q.USER_NICK_NAME_LENGTH,!0);return t&&(t=Z.checkName(ne,t)),t||Z.setRandomName(ne)}return Z.setRandomName(ne)},getStandingUserName:function(){var e=Lt.value;if(e){var t=Z.processMessage(e,Q.USER_NICK_NAME_LENGTH,!0);return t&&(t=Z.checkName(ne,t)),t||Z.setRandomName(ne)}return Z.setRandomName(ne)},checkServerCondition:function(e){var n=Z.createRequest(),i=Date.now(),a=this.serverConditionOn,r=this.serverConditionOff;n.onreadystatechange=function(e){if(4===n.readyState)if(200===n.status){var t=JSON.parse(n.response),s=Date.now()-i;t.canJoin?s<Q.MAX_PING_LIMIT?a():(alert("Ping is too high! How about join to other server."),r()):(t.version!==Q.GAME_VERSION?(alert("Client`s game version is different from server`s. Reload page."),location.reload()):t.isServerDown?(alert("Server is down for update! Reload page."),location.reload()):alert("The server is currently full! How about join to other server."),r())}else alert("Sorry. Unpredicted internet server error!"),r()};try{i=Date.now(),n.open("POST",e+"/serverCheck",!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send("version="+Q.GAME_VERSION)}catch(e){}},disableStartButton:function(){o.onclick="",o.getElementsByTagName("span")[0].classList.add("disable"),o.getElementsByTagName("img")[0].classList.remove("disable");for(var e=document.getElementById("startSceneHudCenterCenterCharSelect").children,t=0;t<e.length;t++)e[t].onclick=new Function},enableStartButton:function(){o.onclick=Ts.bind(this,o),o.getElementsByTagName("span")[0].classList.remove("disable"),o.getElementsByTagName("img")[0].classList.add("disable")},disableStartScene:function(){a.classList.add("disappearSmoothAni"),a.classList.remove("enable"),setTimeout(function(){a.classList.add("disable")},1e3),r.classList.add("appearSmoothAni"),r.classList.remove("disable"),setTimeout(function(){r.classList.add("enable"),r.classList.remove("appearSmoothAni")},1e3),kt.classList.add("disable"),Ys(6e5),adEventHandler=function(){gs=!0,Ys(3e5)},Je.classList.contains("disable")||(_s(Je),Z.setCookie("keySettings",JSON.stringify(ze)))},initStandingScene:function(e,t){wt.onclick(),kt.classList.remove("disable"),l.classList.remove("disable"),l.classList.add("enable"),setTimeout(function(){c.getElementsByTagName("span")[0].classList.remove("disable"),c.getElementsByTagName("img")[0].classList.add("disable")},1500),Lt.select(),Lt.onkeydown=function(e){13!==e.keyCode&&13!==e.which||c.onclick()},Lt.value=t;var s=0;switch(e){case Q.CHAR_TYPE_FIRE:s=0;break;case Q.CHAR_TYPE_FROST:s=1;break;case Q.CHAR_TYPE_ARCANE:s=2}c.onclick=Ts.bind(this,c);var n=c.getElementsByTagName("span")[0];n.innerHTML=gs?"Join Game":'Join Game <span class="small">(Ad)</span>';for(var i=this.onSelectCharIcon,a=document.getElementById("standingSceneHudCenterCenterCharSelect").children,r=0;r<a.length;r++){if(s===r){for(var o=0;o<a.length;o++)a[o].classList.remove("selectedChar");a[r].classList.add("selectedChar")}a[r].onclick=function(){var e=parseInt(this.getAttribute("type"));if(e===Q.CHAR_TYPE_FIRE||e===Q.CHAR_TYPE_FROST||e===Q.CHAR_TYPE_ARCANE){ne=e;for(var t=0;t<a.length;t++)a[t].classList.remove("selectedChar");this.classList.add("selectedChar"),i(e)}else i(Q.CHAR_TYPE_FIRE)}}a[s].onclick(),vt.onclick=function(){ys(),_s(Ke,!0),pt.onclick(),$t?Ks():js()}},updateCharInfoSelectedPanel:function(e,t){var s="",n="white";switch(e){case Q.CHAR_TYPE_FIRE:s=ie,n="red";break;case Q.CHAR_TYPE_FROST:s=ae,n="blue";break;case Q.CHAR_TYPE_ARCANE:s=re,n="purple"}var i=$({},Z.findDataWithTwoColumns(se,"type",e,"level",t));Et.innerHTML="<span class='yellow'>Lv "+t+" </span><span class='"+n+"'>"+s+"</span>",mt.getElementsByTagName("span")[0].innerHTML=i.power,gt.getElementsByTagName("span")[0].innerHTML=i.magic,It.getElementsByTagName("span")[0].innerHTML=i.speed,mt.onmouseover=As.bind(mt,Q.STAT_POWER_INDEX,i.power),mt.onmouseout=Ms.bind(mt),gt.onmouseover=As.bind(gt,Q.STAT_MAGIC_INDEX,i.magic),gt.onmouseout=Ms.bind(gt),It.onmouseover=As.bind(It,Q.STAT_SPEED_INDEX,i.speed),It.onmouseout=Ms.bind(It),ws()},disableStandingScene:function(){kt.classList.add("disable");for(var e=document.getElementById("standingSceneHudCenterCenterCharSelect").children,t=0;t<e.length;t++)e[t].onclick="";l.classList.add("disappearSmoothAni"),l.classList.remove("enable"),setTimeout(function(){l.classList.add("disable"),l.classList.remove("disappearSmoothAni")},1e3),r.classList.add("appearSmoothAni"),r.classList.remove("disable"),setTimeout(function(){r.classList.add("enable"),r.classList.remove("appearSmoothAni")},1e3),this.disableRestartButton(),Je.classList.contains("disable")||(_s(Je),Z.setCookie("keySettings",JSON.stringify(ze)))},disableFieldUIs:function(){document.getElementById("hudResourceUI").classList.add("disable"),M.parentNode.classList.add("disable")},enableFieldUIs:function(){document.getElementById("hudResourceUI").classList.remove("disable"),M.parentNode.classList.remove("disable")},disableRestartButton:function(){c.onclick="",c.getElementsByTagName("span")[0].classList.add("disable"),c.getElementsByTagName("img")[0].classList.remove("disable"),vt.onclick=""},initHUD:function(e){b=document.getElementById("hudBaseSkillImg"),y=document.getElementById("hudEquipSkill1Img"),D=document.getElementById("hudEquipSkill2Img"),A=document.getElementById("hudEquipSkill3Img"),R=document.getElementById("hudEquipSkill4Img"),P=document.getElementById("hudPassiveSkillImg"),b.src=q,y.src=q,D.src=q,A.src=q,R.src=q,P.src=q,b.addEventListener("mouseover",vs.bind(b,Q.SKILL_BASIC_INDEX),!1),y.addEventListener("mouseover",vs.bind(y,Q.SKILL_EQUIP1_INDEX),!1),D.addEventListener("mouseover",vs.bind(D,Q.SKILL_EQUIP2_INDEX),!1),A.addEventListener("mouseover",vs.bind(A,Q.SKILL_EQUIP3_INDEX),!1),R.addEventListener("mouseover",vs.bind(R,Q.SKILL_EQUIP4_INDEX),!1),P.addEventListener("mouseover",vs.bind(P,Q.SKILL_PASSIVE_INDEX),!1),b.addEventListener("mouseout",Ls.bind(b),!1),y.addEventListener("mouseout",Ls.bind(y),!1),D.addEventListener("mouseout",Ls.bind(D),!1),A.addEventListener("mouseout",Ls.bind(A),!1),R.addEventListener("mouseout",Ls.bind(R),!1),P.addEventListener("mouseout",Ls.bind(P),!1),b.onclick=ks.bind(this,Q.SKILL_BASIC_INDEX),y.onclick=ks.bind(this,Q.SKILL_EQUIP1_INDEX),D.onclick=ks.bind(this,Q.SKILL_EQUIP2_INDEX),A.onclick=ks.bind(this,Q.SKILL_EQUIP3_INDEX),R.onclick=ks.bind(this,Q.SKILL_EQUIP4_INDEX),M=document.getElementById("hudBtnSkillChange"),k=document.getElementById("gameSceneBuffsContainer"),w=document.getElementById("userHPProgressBar"),B=document.getElementById("userExpProgressBar"),x=document.getElementById("userMPProgressBar"),O=document.getElementById("hudBaseSkillMask"),N=document.getElementById("hudEquipSkill1Mask"),F=document.getElementById("hudEquipSkill2Mask"),U=document.getElementById("hudEquipSkill3Mask"),H=document.getElementById("hudEquipSkill4Mask"),O.addEventListener("animationend",bs.bind(O,Q.SKILL_BASIC_INDEX,this.checkSkillsConditions),!1),N.addEventListener("animationend",bs.bind(N,Q.SKILL_EQUIP1_INDEX,this.checkSkillsConditions),!1),F.addEventListener("animationend",bs.bind(F,Q.SKILL_EQUIP2_INDEX,this.checkSkillsConditions),!1),U.addEventListener("animationend",bs.bind(U,Q.SKILL_EQUIP3_INDEX,this.checkSkillsConditions),!1),H.addEventListener("animationend",bs.bind(H,Q.SKILL_EQUIP4_INDEX,this.checkSkillsConditions),!1),j=document.getElementById("hudBaseSkillBlockMask"),K=document.getElementById("hudEquipSkill1BlockMask"),Y=document.getElementById("hudEquipSkill2BlockMask"),X=document.getElementById("hudEquipSkill3BlockMask"),G=document.getElementById("hudEquipSkill4BlockMask"),J=document.getElementById("hudPassiveSkillBlockMask"),z=document.getElementById("hudBaseSkillConditionBlockMask"),V=document.getElementById("hudEquipSkill1ConditionBlockMask"),W=document.getElementById("hudEquipSkill2ConditionBlockMask"),de=document.getElementById("hudEquipSkill3ConditionBlockMask"),ue=document.getElementById("hudEquipSkill4ConditionBlockMask"),fe=document.getElementById("gameSceneHudBottomRightCenter"),he=document.getElementById("gameSceneCharNameAndLevel"),pe=document.getElementById("userStatOffence"),Ee=document.getElementById("userStatDefence"),me=document.getElementById("userStatPowerContainer"),ge=document.getElementById("userStatMagicContainer"),Ie=document.getElementById("userStatSpeedContainer"),Dt=document.getElementById("miniMapUser"),At=document.getElementById("miniMapChest1"),Rt=document.getElementById("miniMapChest2"),Pt=document.getElementById("gameSceneFpsText"),Mt=document.getElementById("gameScenePingText"),_e=document.getElementById("gameSceneHudTopLeft"),Se=document.getElementById("gameSceneHudTopCenter"),selectSkillImgContainer=document.getElementById("selectSkillImgContainer"),Te=document.getElementById("selectSkillInfo"),document.getElementById("btnSelectSkillCancel").onclick=function(){this.onSelectSkillCancelBtnClick()}.bind(this),be=document.getElementById("goldContainer"),ye=document.getElementById("jewelContainer"),Ce=document.getElementById("goldContainer2"),ve=document.getElementById("jewelContainer2"),Le=document.getElementById("gameBoardRank"),De=document.getElementById("gameBoardName"),Ae=document.getElementById("gameBoardLevel"),Re=document.getElementById("gameBoardKillScore"),Pe=document.getElementById("gameBoardTotalKillCount"),Me=document.getElementById("gameBoardTotalScore"),ke=document.getElementById("gameSceneDeadScene"),we=document.getElementById("deadSceneBackground"),xe=document.getElementById("chatInputContainer"),Be=document.getElementById("chatInput"),Oe=document.getElementById("flashMessageContainer"),Ne=document.getElementById("risingMessageContainer"),Ue=document.getElementById("downMessageContainer"),He=document.getElementById("reconnectScene"),je=document.getElementById("reconnectMessage"),Fe=document.getElementById("adminMessageContainer"),Je=document.getElementById("popUpSetting"),document.getElementById("resetKeySettings").onclick=this.resetKeySettings.bind(this);var t=document.getElementById("settingButton1"),s=document.getElementById("settingButton2");t.onclick=function(){_s(Je,!1),Z.setCookie("keySettings",JSON.stringify(ze))},s.onclick=function(){_s(Je,!1),Z.setCookie("keySettings",JSON.stringify(ze))},ze=e;var n=document.getElementById("bindE"),i=document.getElementById("bindSpace"),a=document.getElementById("bindA"),r=document.getElementById("bind1"),o=document.getElementById("bind2"),l=document.getElementById("bind3"),c=document.getElementById("bind4"),d=document.getElementById("bindS"),u=document.getElementById("bindG");n.oninput=Xs.bind(this,n,"BindingE"),i.oninput=Xs.bind(this,i,"BindingSpace"),a.oninput=Xs.bind(this,a,"BindingA"),r.oninput=Xs.bind(this,r,"Binding1"),o.oninput=Xs.bind(this,o,"Binding2"),l.oninput=Xs.bind(this,l,"Binding3"),c.oninput=Xs.bind(this,c,"Binding4"),d.oninput=Xs.bind(this,d,"BindingS"),u.oninput=Xs.bind(this,u,"BindingG")},changeLoadingText:function(){var e=document.getElementById("loadingText"),t="Loading ";switch(Ht){case 1:t+=".";break;case 2:t+="..";break;case 3:t+="..."}3<++Ht&&(Ht=1),e.innerHTML=t},startSceneLoadingComplete:function(){var e=document.getElementById("loadingImgContainer"),t=document.getElementById("startSceneHudContent");e.getElementsByTagName("span")[0].classList.add("disable"),e.classList.add("disappearSmoothAni"),setTimeout(function(){e.classList.remove("disappearSmoothAni"),e.classList.add("disable")},1e3),t.classList.remove("disable"),t.classList.add("appearSmoothAni"),setTimeout(function(){t.classList.remove("appearSmoothAni")},1e3);var s=document.getElementById("userStartNickName");s.select(),s.onkeydown=function(e){13!==e.keyCode&&13!==e.which||o.onclick()},_u&&this.startSceneLoginComplete()},startSceneLoginComplete:function(){var e=document.getElementById("loginContainer"),t=document.getElementById("charSelectContainer");e.classList.add("disable"),t.classList.remove("disable");var s=document.getElementById("startSceneLogin"),n=document.getElementById("standingSceneLogin");if(s.classList.remove("disable"),n.classList.remove("disable"),_a){s.getElementsByTagName("h3")[0].innerText="Logout",n.getElementsByTagName("h3")[0].innerText="Logout";var i=document.getElementById("signInGoogle1"),a=document.getElementById("signInGoogle2");i.classList.remove("btn-google"),a.classList.remove("btn-google"),i.classList.add("btn-disable"),a.classList.add("btn-disable"),i.innerHTML="Log out",a.innerHTML="Log out",i.onclick=function(){return!(window.location.href="/logout")},a.onclick=function(){return!(window.location.href="/logout")}}document.getElementById("optionLogout").classList.remove("disable")},drawStartScene:function(){r.classList.add("disable"),l.classList.add("disable")},drawGameScene:function(){a.classList.add("disable"),l.classList.add("disable")},drawRestartScene:function(){a.classList.add("disable"),r.classList.add("disable")},drawFPSAndPing:function(e,t){e<40?(e<0&&(e=0),Pt.innerHTML='FPS : <span class="red">'+e+"</span>"):Pt.innerHTML='FPS : <span class="green">'+e+"</span>",Mt.innerHTML=500<t?'PING : <span class="red">'+t+"ms</span>":'PING : <span class="green">'+t+"ms</span>"},enableSelectSkillInfo:function(e){var t=document.createElement("img"),s=$({},Z.findData(te,"index",e.skillIcon));t.src=q;t.style.clip=Z.makeCssClipStyle(s,1),Z.setImgCssStyle(t,s,1),selectSkillImgContainer.appendChild(t);var n="white";switch(e.property){case Q.SKILL_PROPERTY_FIRE:n="red";break;case Q.SKILL_PROPERTY_FROST:n="blue";break;case Q.SKILL_PROPERTY_ARCANE:n="purple"}switch(Te.getElementsByTagName("h4")[0].innerHTML="<span class='yellow'>Lv "+e.level+" </span><span class='"+n+"'>"+e.clientName+"</span>",Te.getElementsByTagName("div")[0].innerHTML="<span class='yellow'>Damage : </span><span class='"+n+"'>"+(e.fireDamage+e.frostDamage+e.arcaneDamage)+"</span>",Te.getElementsByTagName("div")[1].innerHTML="<span class='yellow'>ManaCost : </span>"+e.consumeMP,Te.getElementsByTagName("div")[2].innerHTML=e.clientDesc.replace(/&nbsp;/g,"<br>"),Se.classList.add("enable"),Se.classList.remove("disable"),e.index){case g:K.classList.remove("disable"),Y.classList.remove("disable"),X.classList.remove("disable"),G.classList.remove("disable"),J.classList.remove("disable");break;case C[0]:j.classList.remove("disable"),Y.classList.remove("disable"),X.classList.remove("disable"),G.classList.remove("disable"),J.classList.remove("disable");break;case C[1]:j.classList.remove("disable"),K.classList.remove("disable"),X.classList.remove("disable"),G.classList.remove("disable"),J.classList.remove("disable");break;case C[2]:j.classList.remove("disable"),K.classList.remove("disable"),Y.classList.remove("disable"),G.classList.remove("disable"),J.classList.remove("disable");break;case C[3]:j.classList.remove("disable"),K.classList.remove("disable"),Y.classList.remove("disable"),X.classList.remove("disable"),J.classList.remove("disable")}},disableSelectSkillInfo:function(){for(;selectSkillImgContainer.firstChild;)selectSkillImgContainer.removeChild(selectSkillImgContainer.firstChild);Te.getElementsByTagName("h4")[0].innerHTML="",Se.classList.add("disable"),Se.classList.remove("enable"),j.classList.add("disable"),K.classList.add("disable"),Y.classList.add("disable"),X.classList.add("disable"),G.classList.add("disable"),J.classList.add("disable")},syncSkills:function(e,t,s,n,i,a,r){g=e,oe=t,C=s,v=n,_=i,I=a,le=r},updatePossessionSkills:function(e){_=e},setNewSkill:function(e){L.push(e)},updateNewSkills:function(e){for(var t=0;t<e.length;t++)-1===L.indexOf(e[t])&&(L.push(e[t]),ce.push(e[t]));var s=M.parentNode.getElementsByTagName("img");s[0].classList.add("disable");var n=vt.getElementsByTagName("img");n[0].classList.add("disable"),L.length&&(s[0].classList.remove("disable"),n[0].classList.remove("disable"))},updateHP:function(e){var t=e.HP/e.mHP*100;100<t&&(t=100),w.style.height=t+"%",w.parentNode.getElementsByTagName("div")[1].innerHTML=Math.floor(e.HP)+"<br>/ "+Math.floor(e.mHP)},updateMP:function(e){T=e.MP;var t=e.MP/e.mMP*100;100<t&&(t=100),x.style.height=t+"%",x.parentNode.getElementsByTagName("div")[1].innerHTML=Math.floor(e.MP)+"<br>/ "+Math.floor(e.mMP)},updateExp:function(e,t){if(-1===t)var s=100;else 100<(s=e.ep/t*100)&&(s=100);B.style.width=s+"%"},updateCondition:function(e){S[Q.USER_CONDITION_FREEZE]=e[Q.USER_CONDITION_FREEZE],S[Q.USER_CONDITION_SILENCE]=e[Q.USER_CONDITION_SILENCE],S[Q.USER_CONDITION_BLUR]=e[Q.USER_CONDITION_BLUR]},checkSkillsConditions:function(){var e=!1,t=!1,s=!1,n=!1,i=!1,a=!1;S[Q.USER_CONDITION_FREEZE]||S[Q.USER_CONDITION_SILENCE]||S[Q.USER_CONDITION_BLUR]?e=!0:(Yt||(t=!0),v[0]&&(v[0].consumeMP>T?s=!0:Xt?v[0].type===Q.SKILL_TYPE_PASSIVE&&(s=!0):s=!0),v[1]&&(v[1].consumeMP>T?n=!0:Gt?v[1].type===Q.SKILL_TYPE_PASSIVE&&(n=!0):n=!0),v[2]&&(v[2].consumeMP>T?i=!0:Jt?v[2].type===Q.SKILL_TYPE_PASSIVE&&(i=!0):i=!0),v[3]&&(v[3].consumeMP>T?a=!0:zt?v[3].type===Q.SKILL_TYPE_PASSIVE&&(a=!0):a=!0)),e?(z.classList.remove("disable"),V.classList.remove("disable"),W.classList.remove("disable"),de.classList.remove("disable"),ue.classList.remove("disable")):(z.classList.add("disable"),V.classList.add("disable"),W.classList.add("disable"),de.classList.add("disable"),ue.classList.add("disable"),t&&z.classList.remove("disable"),s&&V.classList.remove("disable"),n&&W.classList.remove("disable"),i&&de.classList.remove("disable"),a&&ue.classList.remove("disable"))},applySkill:function(e,t){var s=null,n={};if(g===e?(s=O,Yt=!1,n.slot=Q.SKILL_BASIC_INDEX):C[0]===e?(s=N,Xt=!1,n.slot=Q.SKILL_EQUIP1_INDEX):C[1]===e?(s=F,Gt=!1,n.slot=Q.SKILL_EQUIP2_INDEX):C[2]===e?(s=U,Jt=!1,n.slot=Q.SKILL_EQUIP3_INDEX):C[3]===e&&(s=H,zt=!1,n.slot=Q.SKILL_EQUIP4_INDEX),s){var i=$({},Z.findData(ee,"index",e));if(t)var a=t/1e3;else a=i.cooldown*(100-Ut)/1e5,n.skillIndex=i.index,n.startTime=Date.now(),n.cooldownTime=a,Vt.push(n);s.style.animationDuration=a+"s",s.classList.add("cooldownMaskAni")}},applySkillCooldown:function(e,t){for(var s=Bs(t),n=0,i=0;i<Vt.length;i++)if(Vt[i].slot===s){var a=Date.now()-Vt[i].startTime;n=1e3*Vt[i].cooldownTime-a}for(i=0;i<Vt.length;i++)if(Vt[i].skillIndex===e){a=Date.now()-Vt[i].startTime;var r=1e3*Vt[i].cooldownTime-a;n<r&&500<=r&&this.applySkill(e,r)}},updateUnEquipSkillSlotCooldown:function(e){for(var t=Bs(e),s=!0,n=0;n<Vt.length;n++)Vt[n].slot===t&&(s=!1);if(s){switch(t){case Q.SKILL_EQUIP1_INDEX:Xt=!0,N.classList.remove("cooldownMaskAni"),N.style.opacity=0;break;case Q.SKILL_EQUIP2_INDEX:Gt=!0,F.classList.remove("cooldownMaskAni"),F.style.opacity=0;break;case Q.SKILL_EQUIP3_INDEX:Jt=!0,U.classList.remove("cooldownMaskAni"),U.style.opacity=0;break;case Q.SKILL_EQUIP4_INDEX:zt=!0,H.classList.remove("cooldownMaskAni"),H.style.opacity=0}this.checkSkillsConditions()}},checkCooltime:function(e){switch(e){case g:return!0;case C[0]:return Xt;case C[1]:return Gt;case C[2]:return Jt;case C[3]:return zt}},clearCooltime:function(){Xt=!0,N.classList.remove("cooldownMaskAni"),N.style.opacity=0,Gt=!0,F.classList.remove("cooldownMaskAni"),F.style.opacity=0,Jt=!0,U.classList.remove("cooldownMaskAni"),U.style.opacity=0,zt=!0,H.classList.remove("cooldownMaskAni"),H.style.opacity=0},setHUDSkills:function(){var e=48/72;if(oe){var t=$({},Z.findData(te,"index",oe.skillIcon));b.style.clip=Z.makeCssClipStyle(t,e),Z.setImgCssStyle(b,t,e)}else b.style.clip=Z.makeCssClipStyle(n,e),Z.setImgCssStyle(b,n,e);if(le){t=$({},Z.findData(te,"index",le.skillIcon));P.style.clip=Z.makeCssClipStyle(t,e),Z.setImgCssStyle(P,t,e)}else P.style.clip=Z.makeCssClipStyle(n,e),Z.setImgCssStyle(P,n,e);if(e=64/72,v[0]){t=$({},Z.findData(te,"index",v[0].skillIcon));y.style.clip=Z.makeCssClipStyle(t,e),Z.setImgCssStyle(y,t,e)}else y.style.clip=Z.makeCssClipStyle(n,e),Z.setImgCssStyle(y,n,e);if(v[1]){t=$({},Z.findData(te,"index",v[1].skillIcon));D.style.clip=Z.makeCssClipStyle(t,e),Z.setImgCssStyle(D,t,e)}else D.style.clip=Z.makeCssClipStyle(n,e),Z.setImgCssStyle(D,n,e);if(v[2]){t=$({},Z.findData(te,"index",v[2].skillIcon));A.style.clip=Z.makeCssClipStyle(t,e),Z.setImgCssStyle(A,t,e)}else A.style.clip=Z.makeCssClipStyle(n,e),Z.setImgCssStyle(A,n,e);if(v[3]){t=$({},Z.findData(te,"index",v[3].skillIcon));R.style.clip=Z.makeCssClipStyle(t,e),Z.setImgCssStyle(R,t,e)}else R.style.clip=Z.makeCssClipStyle(n,e),Z.setImgCssStyle(R,n,e)},setHUDStats:function(e){var t="white";switch(ne){case Q.CHAR_TYPE_FIRE:var s=ie;t="red";break;case Q.CHAR_TYPE_FROST:s=ae,t="blue";break;case Q.CHAR_TYPE_ARCANE:s=re,t="purple"}20===e.lv?he.innerHTML="<span class='yellow'>Lv MAX</span><span class='"+t+"'>"+s+"</span>":he.innerHTML="<span class='yellow'>Lv "+e.lv+"</span><span class='"+t+"'>"+s+"</span>";var n=Math.floor(10*(e.dR+(e.fiDR+e.frDR+e.acDR)/3-200))/10,i=Math.floor(10*(e.rA+(e.rFi+e.rFr+e.rAc)/3))/10;pe.getElementsByTagName("span")[0].innerHTML=n+" %",pe.onmouseover=Rs.bind(pe,Q.STAT_OFFENCE_INDEX,e),pe.onmouseout=Ms.bind(pe),Ee.getElementsByTagName("span")[0].innerHTML=i+" %",Ee.onmouseover=Rs.bind(Ee,Q.STAT_DEFENCE_INDEX,e),Ee.onmouseout=Ms.bind(Ee),me.getElementsByTagName("span")[0].innerHTML=Ot=e.sP,me.onmouseover=As.bind(me,Q.STAT_POWER_INDEX,Ot),me.onmouseout=Ms.bind(me),ge.getElementsByTagName("span")[0].innerHTML=Nt=e.sM,ge.onmouseover=As.bind(ge,Q.STAT_MAGIC_INDEX,Nt),ge.onmouseout=Ms.bind(ge),Ie.getElementsByTagName("span")[0].innerHTML=Ft=e.sS,Ie.onmouseover=As.bind(Ie,Q.STAT_SPEED_INDEX,Ft),Ie.onmouseout=Ms.bind(Ie)},setCooldownReduceRate:function(e){Ut=e},setSkillChangeBtn:function(){M.onclick=function(){ys(),_s(Ke),pt.onclick(),$t?Ks():js()},Ye.onclick=function(){ys(),_s(Ke),pt.onclick()},Ge.onclick=function(){ys(),_s(Ke),pt.onclick()}},popChangeWithKey:function(){ys(),_s(Ke),pt.onclick(),M.classList.add("clicked"),setTimeout(function(){M.classList.remove("clicked")},250)},popCloseWithKey:function(){Ke.classList.contains("disable")||(this.closePopUpSkillChange(),M.classList.add("clicked"),setTimeout(function(){M.classList.remove("clicked")},250))},setSkillIconResource:function(e){q=e.src,n=$({},Z.findData(te,"index",Q.UI_RESOURCE_INDEX_BLANK))},setResource:function(e){be.innerHTML=e.g,ye.innerHTML=e.j,Ce.innerHTML=e.g,ve.innerHTML=e.j},getResource:function(){return{gold:parseInt(be.innerText),jewel:parseInt(ye.innerText)}},addResource:function(e,t){var s=parseInt(be.innerText),n=parseInt(ye.innerText);Z.isNumeric(e)&&Z.isNumeric(s)&&(be.innerText=s+e,Ce.innerText=s+e),Z.isNumeric(t)&&Z.isNumeric(n)&&(ye.innerText=n+t,ve.innerText=n+t)},makeAdminMessage:function(e){var t=document.createElement("p");t.innerHTML=e,t.classList.add("adminMessage"),Fe.appendChild(t),setTimeout(function(){t.classList.add("adminMessageAni")},2e3),setTimeout(function(){Fe.removeChild(t)},7e3)},makeDownMessage:function(e,t){Ue.innerHTML="";var s=document.createElement("p"),n=parseInt(t/6e4);s.innerHTML=e+" ("+n+" min)",s.classList.add("downMessage"),Ue.appendChild(s);var i=this;qt=setTimeout(function(){t-=6e4,i.makeDownMessage.call(i,e,t)},6e4)},cancelDown:function(){Ue.innerHTML="",qt&&clearTimeout(qt),qt=!1},makeFlashMessage:function(e){if(650<Date.now()-Qt){Qt=Date.now();var t=document.createElement("p");t.innerHTML=e,t.classList.add("flashMessage"),Oe.appendChild(t),setTimeout(function(){t.classList.add("flashMessageAni")},2e3),setTimeout(function(){Oe.removeChild(t)},5e3)}},makeRisingMessage:function(n){var e=0;Date.now()>Zt+150?(e=0,Zt=Date.now()):(e=Zt+150-Date.now(),Zt=Date.now()+e),setTimeout(function(){var e=document.createElement("div");if(e.classList.add("risingMessage"),n.type===Q.GET_RESOURCE_TYPE_GOLD)(t=document.createElement("img")).src="../images/GoldIcon.png",e.appendChild(t),(s=document.createElement("span")).innerHTML="<span class='yellow'> + </span>"+n.amount,e.appendChild(s);else if(n.type===Q.GET_RESOURCE_TYPE_JEWEL){var t,s;(t=document.createElement("img")).src="../images/JewelIcon.png",e.appendChild(t),(s=document.createElement("span")).innerHTML="<span class='yellow'> + </span>"+n.amount,e.appendChild(s)}Ne.appendChild(e),setTimeout(function(){e.classList.add("risingMessageAni")},50),setTimeout(function(){Ne.removeChild(e)},3e3)},e)},makeRisingMessageForSkill:function(l,c){var e=0;Date.now()>Zt+150?(e=0,Zt=Date.now()):(e=Zt+150-Date.now(),Zt=Date.now()+e),setTimeout(function(){var e=document.createElement("div");e.classList.add("risingMessageSkill");var t=document.createElement("div");(a=document.createElement("img")).src=q;var s=$({},Z.findData(te,"index",l.skillIcon));if(a.style.clip=Z.makeCssClipStyle(s,40/72),Z.setImgCssStyle(a,s,40/72),t.appendChild(a),e.appendChild(t),c){t.classList.add("risingMessageSkillImgToChange");var n=document.createElement("div");n.classList.add("risingMessageArrow"),e.appendChild(n);var i=document.createElement("div");i.classList.add("risingMessageResource");var a=document.createElement("img");if(l.exchangeToGold){a.src="../images/GoldIcon.png";var r=l.exchangeToGold;(o=document.createElement("span")).innerHTML="<span class='yellow'> : </span>"+r}else if(l.exchangeToJewel){var o;a.src="../images/JewelIcon.png",r=l.exchangeToJewel,(o=document.createElement("span")).innerHTML="<span class='yellow'> : </span>&nbsp;"+r}i.appendChild(a),i.appendChild(o),e.appendChild(i)}else t.classList.add("risingMessageSkillImg");Ne.appendChild(e),setTimeout(function(){e.classList.add("risingMessageAniForSkill")},50),setTimeout(function(){Ne.removeChild(e)},3e3)},e)},updateBuffIcon:function(e,c,t,d){for(;k.firstChild;)k.removeChild(k.firstChild);k.innerHTML="";if(le){var s=$({},Z.findData(h,"index",le.buffToSelf));(a=document.createElement("div")).setAttribute("buffGroupIndex",le.buffToSelf),(r=document.createElement("div")).classList.add("buffImgContainer"),(o=document.createElement("img")).src=q;var n=$({},Z.findData(te,"index",s.buffIcon));o.style.clip=Z.makeCssClipStyle(n,.5),Z.setImgCssStyle(o,n,.5),r.appendChild(o),a.appendChild(r),k.appendChild(a),a.addEventListener("mouseover",Ps.bind(a),!1),a.addEventListener("mouseout",Ms.bind(a),!1)}if(e)for(var u=0;u<e.length;u++){var i=$({},Z.findData(h,"index",e[u])),a=document.createElement("div");(r=document.createElement("div")).classList.add("buffImgContainer"),a.setAttribute("buffGroupIndex",i.index),(o=document.createElement("img")).src=q;n=$({},Z.findData(te,"index",i.buffIcon));o.style.clip=Z.makeCssClipStyle(n,.5),Z.setImgCssStyle(o,n,.5),r.appendChild(o),a.appendChild(r),k.appendChild(a),a.addEventListener("mouseover",Ps.bind(a),!1),a.addEventListener("mouseout",Ms.bind(a),!1)}if(t)for(u=0;u<t.length;u++){var r,o,l=$({},Z.findData(h,"index",t[u]));a=document.createElement("div");(r=document.createElement("div")).classList.add("buffImgContainer"),a.setAttribute("buffGroupIndex",l.index),(o=document.createElement("img")).src=q;n=$({},Z.findData(te,"index",l.buffIcon));o.style.clip=Z.makeCssClipStyle(n,.5),Z.setImgCssStyle(o,n,.5),r.appendChild(o),a.appendChild(r),k.appendChild(a),a.addEventListener("mouseover",Ps.bind(a),!1),a.addEventListener("mouseout",Ms.bind(a),!1)}if(c)for(u=0;u<c.length;u++)!function(){var e=$({},Z.findData(h,"index",c[u].id)),t=e.buffLifeTime,s=c[u].st+d,n=Date.now()-s,i=(c[u],document.createElement("div"));i.setAttribute("buffGroupIndex",e.index);var a=document.createElement("div");a.classList.add("buffImgContainer");var r=document.createElement("img");r.src=q;var o=$({},Z.findData(te,"index",e.buffIcon));r.style.clip=Z.makeCssClipStyle(o,.5),Z.setImgCssStyle(r,o,.5),a.appendChild(r),i.appendChild(a),k.appendChild(i),i.addEventListener("mouseover",Ps.bind(i),!1),i.addEventListener("mouseout",Ms.bind(i),!1);var l=function(){n=Date.now()-s,t-n<=5e3?i.classList.add("buffBeforeEndAni"):setTimeout(l,100)};setTimeout(l,100)}()},initPopUpSkillChanger:function(){Ke=document.getElementById("popUpSkillChange"),Ye=document.getElementById("popUpCloseBtn"),Xe=document.getElementById("popUpSkillContainer"),Ge=document.getElementById("popUpBackground"),Ve=document.getElementById("popUpSkillInfoAndBtn"),(We=document.getElementById("popUpSkillInfoIcon")).onclick=ys,qe=document.getElementById("popUpSkillInfoDesc"),Ze=document.getElementById("skillUpgradeEffect"),Qe=document.getElementById("popUpSkillUpgradeCostGold"),$e=document.getElementById("popUpSkillUpgradeCostJewel"),et=document.getElementById("popUpSkillUpgradeBtn"),st=document.getElementById("popUpSkillTutorialClickText1"),nt=document.getElementById("popUpSkillTutorialClickText2"),it=document.getElementById("popUpSkillTutorialArrow"),at=document.getElementById("popUpSkillTextSkillInfo"),(tt=document.getElementById("popUpCancelSkillSelectBtn")).onclick=ys,rt=document.getElementById("popUpEquipBaseSkill"),ot=document.getElementById("popUpEquipSkillsContainer"),lt=document.getElementById("popUpEquipSkill1"),ct=document.getElementById("popUpEquipSkill2"),dt=document.getElementById("popUpEquipSkill3"),ut=document.getElementById("popUpEquipSkill4"),ft=document.getElementById("popUpEquipPassiveSkill"),ht=document.getElementById("popUpSortType"),pt=document.getElementById("popUpSortBtn")},checkPopUpSkillChange:function(){var e=!1,t=parseInt(lt.getAttribute("skillIndex")),s=parseInt(ct.getAttribute("skillIndex")),n=parseInt(dt.getAttribute("skillIndex")),i=parseInt(ut.getAttribute("skillIndex"));C[0]&&t!==C[0]&&(e=!0),C[1]&&s!==C[1]&&(e=!0),C[2]&&n!==C[2]&&(e=!0),C[3]&&i!==C[3]&&(e=!0);for(var a=Xe.children,r=0;r<a.length;r++){for(var o=!1,l=parseInt(a[r].getAttribute("skillIndex")),c=0;c<_.length;c++)if(l===_[c]){o=!0;break}o||(e=!0)}return e},upgradeBaseSkill:function(e,t){var s=g;g=e,oe=t,Es===s&&this.updateSelectedPanel(e),this.updateDOMElementsSkillIndex(s,e)},upgradeInherentSkill:function(e,t){var s=I;I=e,le=t,Es===s&&this.updateSelectedPanel(e),this.updateDOMElementsSkillIndex(s,e)},upgradePossessionSkill:function(e,t){for(var s=0;s<_.length;s++)if(_[s]===e){var n=_.indexOf(e);_.splice(n,1,t);break}for(s=0;s<C.length;s++)if(C[s]===e){n=C.indexOf(e);C.splice(n,1,t);var i=$({},Z.findData(ee,"index",t));v.splice(n,1,i);break}Es===e&&this.updateSelectedPanel(t),this.updateDOMElementsSkillIndex(e,t),ms=!0,et.getElementsByTagName("span")[0].classList.remove("disable"),et.getElementsByTagName("img")[0].classList.add("disable"),this.serverResponseTimeout&&(clearTimeout(this.serverResponseTimeout),this.serverResponseTimeout=!1)},playSkillUpgradeEffect:function(){Ze.classList.remove("skillUpgradeEffectAni"),setTimeout(function(){Ze.classList.add("skillUpgradeEffectAni")},50)},updateDOMElementsSkillIndex:function(e,t){for(var s=document.querySelectorAll('[skillIndex="'+e+'"]'),n=($({},Z.findData(ee,"index",t)),0);n<s.length;n++)s[n].setAttribute("skillIndex",t);this.setHUDSkills()},setPopUpSkillChange:function(e,t){if(t){var s=Es;ys()}for(;rt.firstChild;)rt.removeChild(rt.firstChild);for(;lt.firstChild;)lt.removeChild(lt.firstChild);for(;ct.firstChild;)ct.removeChild(ct.firstChild);for(;dt.firstChild;)dt.removeChild(dt.firstChild);for(;ut.firstChild;)ut.removeChild(ut.firstChild);for(;ft.firstChild;)ft.removeChild(ft.firstChild);lt.removeAttribute("skillIndex"),ct.removeAttribute("skillIndex"),dt.removeAttribute("skillIndex"),ut.removeAttribute("skillIndex"),(d=document.createElement("div")).classList.add("popUpskillImgContainer");var n=document.createElement("img");n.src=q;var i=60/72,a=$({},Z.findData(te,"index",oe.skillIcon));n.style.clip=Z.makeCssClipStyle(a,i),Z.setImgCssStyle(n,a,i),rt.setAttribute("skillIndex",g),d.appendChild(n),rt.appendChild(d),rt.onclick=Ss.bind(this,rt,Q.SKILL_CHANGE_PANEL_EQUIP,e),(d=document.createElement("div")).classList.add("popUpskillImgContainer");var r=document.createElement("img");r.src=q;a=$({},Z.findData(te,"index",le.skillIcon));if(r.style.clip=Z.makeCssClipStyle(a,i),Z.setImgCssStyle(r,a,i),ft.setAttribute("skillIndex",I),d.appendChild(r),ft.appendChild(d),ft.onclick=Ss.bind(this,ft,Q.SKILL_CHANGE_PANEL_EQUIP,e),i=75/72,v[0]){var o=document.createElement("img");(d=document.createElement("div")).classList.add("popUpskillImgContainer"),o.src=q;a=$({},Z.findData(te,"index",v[0].skillIcon));o.style.clip=Z.makeCssClipStyle(a,i),Z.setImgCssStyle(o,a,i),lt.setAttribute("skillIndex",v[0].index),d.appendChild(o),lt.appendChild(d)}if(v[1]){(d=document.createElement("div")).classList.add("popUpskillImgContainer");var l=document.createElement("img");l.src=q;a=$({},Z.findData(te,"index",v[1].skillIcon));l.style.clip=Z.makeCssClipStyle(a,i),Z.setImgCssStyle(l,a,i),ct.setAttribute("skillIndex",v[1].index),d.appendChild(l),ct.appendChild(d)}if(v[2]){(d=document.createElement("div")).classList.add("popUpskillImgContainer");var c=document.createElement("img");c.src=q;a=$({},Z.findData(te,"index",v[2].skillIcon));c.style.clip=Z.makeCssClipStyle(a,i),Z.setImgCssStyle(c,a,i),dt.setAttribute("skillIndex",v[2].index),d.appendChild(c),dt.appendChild(d)}if(v[3]){var d;(d=document.createElement("div")).classList.add("popUpskillImgContainer");var u=document.createElement("img");u.src=q;a=$({},Z.findData(te,"index",v[3].skillIcon));u.style.clip=Z.makeCssClipStyle(a,i),Z.setImgCssStyle(u,a,i),ut.setAttribute("skillIndex",v[3].index),d.appendChild(u),ut.appendChild(d)}(lt.onclick=Ss.bind(this,lt,Q.SKILL_CHANGE_PANEL_EQUIP,e),ct.onclick=Ss.bind(this,ct,Q.SKILL_CHANGE_PANEL_EQUIP,e),dt.onclick=Ss.bind(this,dt,Q.SKILL_CHANGE_PANEL_EQUIP,e),ut.onclick=Ss.bind(this,ut,Q.SKILL_CHANGE_PANEL_EQUIP,e),ht.onclick=function(){var e=parseInt(ht.getAttribute("sortType"));if(e)switch(e){case Q.CHAR_TYPE_FIRE:ht.setAttribute("sortType",Q.CHAR_TYPE_FROST),ht.src="/images/charFrostSymbol.png";break;case Q.CHAR_TYPE_FROST:ht.setAttribute("sortType",Q.CHAR_TYPE_ARCANE),ht.src="/images/charArcaneSymbol.png";break;case Q.CHAR_TYPE_ARCANE:ht.setAttribute("sortType",Q.CHAR_TYPE_FIRE),ht.src="/images/charFireSymbol.png"}else ht.setAttribute("sortType",Q.CHAR_TYPE_FIRE),ht.src="/images/charArcaneSymbol.png";pt.onclick()}.bind(this),pt.onclick=function(e){var t=parseInt(ht.getAttribute("sortType"));t||(t=Q.CHAR_TYPE_FIRE);for(var s=[],n=[],i=0;i<_.length;i++){var a=$({},Z.findData(ee,"index",_[i]));a.property===t?s.push(_[i]):n.push(_[i])}s.sort(function(e,t){return e-t}),n.sort(function(e,t){return e-t}),_=[];for(var i=0;i<s.length;i++)_.push(s[i]);for(var i=0;i<n.length;i++)_.push(n[i]);for(;Xe.firstChild;)Xe.removeChild(Xe.firstChild);for(var r=[],i=0;i<C.length;i++)r.push(C[i]);for(var i=0;i<_.length;i++){var o=!1;if(-1!==r.indexOf(_[i])&&(o=!0),!o){var l=!1;-1!==L.indexOf(_[i])&&(l=!0);var a=$({},Z.findData(ee,"index",_[i])),c=document.createElement("div"),d=document.createElement("div");d.classList.add("popUpskillImgContainer");var u=document.createElement("img");c.setAttribute("skillIndex",_[i]);var f=document.createElement("img");f.src="../images/newIcon.png",l||f.classList.add("disable"),c.appendChild(f),c.classList.add("popUpSkillContainerItem"),u.src=q;var h=$({},Z.findData(te,"index",a.skillIcon));u.style.clip=Z.makeCssClipStyle(h,75/72),Z.setImgCssStyle(u,h,75/72),d.appendChild(u),c.appendChild(d),Xe.appendChild(c),c.onclick=Ss.bind(this,c,Q.SKILL_CHANGE_PANEL_CONTAINER,e)}}}.bind(this,e),pt.onclick(),s)&&Ke.querySelectorAll('[skillIndex="'+s+'"]')[0].onclick()},updateSelectedPanel:function(e){for(;We.firstChild;)We.removeChild(We.firstChild);for(;qe.firstChild;)qe.removeChild(qe.firstChild);if(Qe.innerHTML="",$e.innerHTML="",tt.classList.add("disable"),e){var t=parseInt(rt.getAttribute("skillIndex")),s=parseInt(ft.getAttribute("skillIndex"));Es=e;var n=$({},Z.findData(ee,"index",e)),i=document.createElement("img");if(-1!==n.nextSkillIndex)var a=$({},Z.findData(ee,"index",n.nextSkillIndex));var r=xs(n,a).replace(/&nbsp;/g,"<br>");if(qe.innerHTML=r,a)for(var o=qe.getElementsByTagName("img"),l=0;l<o.length;l++)o[l].classList.remove("disable");i.src=q;var c=$({},Z.findData(te,"index",n.skillIcon));if(i.style.clip=Z.makeCssClipStyle(c,75/72),Z.setImgCssStyle(i,c,75/72),We.appendChild(i),e!==t&&e!==s){var d=parseInt(be.innerText),u=parseInt(ye.innerText),f="white";f=d>=n.upgradeGoldAmount?"green":"red",Qe.innerHTML="<span class='"+f+"'>"+n.upgradeGoldAmount+"<br>/ "+d,f=u>=n.upgradeJewelAmount?"green":"red",$e.innerHTML="<span class='"+f+"'>"+n.upgradeJewelAmount+"<br>/ "+u,et.onclick=function(e){if(ms&&Es)if(-1!==e.nextSkillIndex){var t=parseInt(be.innerText),s=parseInt(ye.innerText);t>=e.upgradeGoldAmount&&s>=e.upgradeJewelAmount?(this.onSkillUpgrade(Es),ms=!1,et.getElementsByTagName("span")[0].classList.add("disable"),et.getElementsByTagName("img")[0].classList.remove("disable"),this.serverResponseTimeout=setTimeout(function(){ms||(ms=!0,et.getElementsByTagName("span")[0].classList.remove("disable"),et.getElementsByTagName("img")[0].classList.add("disable"))},Q.MAX_SERVER_RESPONSE_TIME)):this.makeFlashMessage("Not enough resource!!!")}else this.makeFlashMessage("Spell reach max level!!!")}.bind(this,n),tt.classList.remove("disable"),-1!==n.nextSkillIndex?(et.getElementsByTagName("span")[0].innerHTML="Upgrade",skillUpgradeBlockMask.classList.add("disable")):(et.getElementsByTagName("span")[0].innerHTML="Max Level",skillUpgradeBlockMask.classList.remove("disable"),Qe.innerHTML="",$e.innerHTML="")}else et.onclick=new Function,et.getElementsByTagName("span")[0].innerHTML=" ",skillUpgradeBlockMask.classList.remove("disable")}else et.onclick=new Function,et.getElementsByTagName("span")[0].innerHTML=" ",skillUpgradeBlockMask.classList.remove("disable")},closePopUpSkillChange:function(){Ke.classList.contains("enable")&&(ys(),_s(Ke),pt.onclick())},setBoard:function(e,t){var s=[],n=[],i=0,a="",r=0;e.sort(function(e,t){return t.tS-e.tS});for(var o=0;o<e.length;o++)t===e[o].id&&(i=o+1,a=e[o].nm,userLevel=e[o].lv,r=e[o].kS,userScore=e[o].tS,userTotalKillCount=e[o].tK,this.updateKillCount(r,userTotalKillCount)),0!==o&&1!==o&&2!==o||s.push(e[o].id),n.push({rank:o+1,name:e[o].nm,level:e[o].lv,kill:e[o].kS,score:e[o].tS,totalKill:e[o].tK});var l="<h3>Rank</h3><hr>",c="<h3>Name</h3><hr>",d="<h3>Level</h3><hr>",u="<h3>Kills</h3><hr>",f="<h3>Score</h3><hr>",h="<h3>TotalKill</h3><hr>",p=10<n.length?10:n.length;for(o=0;o<p;o++){var E=!1;0!==o&&1!==o&&2!==o||(E=!0),i<=10&&i===o+1?E?(l+=0==o?"<img src='/images/rank1Icon.png'/>":1===o?"<img src='/images/rank2Icon.png'/>":"<img src='/images/rank3Icon.png'/>",c+="<p class='user ranker'>"+n[o].name+"</p>",d+="<p class='user ranker'>"+n[o].level+"</p>",u+="<p class='user ranker'>"+n[o].kill+"</p>",f+="<p class='user ranker'>"+n[o].score+"</p>",h+="<p class='user ranker'>"+n[o].totalKill+"</p>"):(l+="<p class='user'>"+n[o].rank+"</p>",c+="<p class='user'>"+n[o].name+"</p>",d+="<p class='user'>"+n[o].level+"</p>",u+="<p class='user'>"+n[o].kill+"</p>",f+="<p class='user'>"+n[o].score+"</p>",h+="<p class='user'>"+n[o].totalKill+"</p>"):E?(l+=0==o?"<img src='/images/rank1Icon.png'/>":1===o?"<img src='/images/rank2Icon.png'/>":"<img src='/images/rank3Icon.png'/>",c+="<p class='ranker'>"+n[o].name+"</p>",d+="<p class='ranker'>"+n[o].level+"</p>",u+="<p class='ranker'>"+n[o].kill+"</p>",f+="<p class='ranker'>"+n[o].score+"</p>",h+="<p class='ranker'>"+n[o].totalKill+"</p>"):(l+="<p>"+n[o].rank+"</p>",c+="<p>"+n[o].name+"</p>",d+="<p>"+n[o].level+"</p>",u+="<p>"+n[o].kill+"</p>",f+="<p>"+n[o].score+"</p>",h+="<p>"+n[o].totalKill+"</p>")}10<i&&(l+="<p class='user' style='font-size: 12px'>"+i+"</p>",c+="<p class='user' style='font-size: 12px'>"+a+"</p>",d+="<p class='user' style='font-size: 12px'>"+userLevel+"</p>",u+="<p class='user' style='font-size: 12px'>"+r+"</p>",f+="<p class='user' style='font-size: 12px'>"+userScore+"</p>",h+="<p class='user' style='font-size: 12px'>"+userTotalKillCount+"</p>"),Le.innerHTML=l,De.innerHTML=c,Ae.innerHTML=d,Re.innerHTML=u,Pe.innerHTML=h,Me.innerHTML=f,this.onSetRankers(s)},updateBoard:function(e,t){this.setBoard(e,t)},updateKillBoard:function(e,t){var s=document.createElement("span");s.classList.add("killFeedBack");var n="",i="white",a="white";switch(e.tp){case Q.CHAR_TYPE_FIRE:i="red";break;case Q.CHAR_TYPE_FROST:i="blue";break;case Q.CHAR_TYPE_ARCANE:i="purple"}switch(t.tp){case Q.CHAR_TYPE_FIRE:a="red";break;case Q.CHAR_TYPE_FROST:a="blue";break;case Q.CHAR_TYPE_ARCANE:a="purple"}if(e.nm)r=e.nm;else var r="NoName";if(t.nm)o=t.nm;else var o="NoName";if(e.uID===t.uID)n+="&nbsp; <span class="+i+">"+r+"</span>",n+="&nbsp; commit suicide";else if(e.fl){switch(e.fl){case Q.KILL_FEEDBACK_LEVEL_0:break;case Q.KILL_FEEDBACK_LEVEL_1:n+='<span class="feedbackLevel1 feedback" style="color : '+Q.KILL_FEEDBACK_LEVEL_1_COLOR+'">'+Q.KILL_FEEDBACK_LEVEL_1_PREFIX+"</span>",setTimeout(function(){_e.getElementsByClassName("feedbackLevel1")[0].classList.remove("feedbackLevel1")},50);break;case Q.KILL_FEEDBACK_LEVEL_2:n+='<span class="feedbackLevel2 feedback" style="color : '+Q.KILL_FEEDBACK_LEVEL_2_COLOR+'">'+Q.KILL_FEEDBACK_LEVEL_2_PREFIX+"</span>",setTimeout(function(){_e.getElementsByClassName("feedbackLevel2")[0].classList.remove("feedbackLevel2")},50);break;case Q.KILL_FEEDBACK_LEVEL_3:n+='<span class="feedbackLevel3 feedback" style="color : '+Q.KILL_FEEDBACK_LEVEL_3_COLOR+'">'+Q.KILL_FEEDBACK_LEVEL_3_PREFIX+"</span>",setTimeout(function(){_e.getElementsByClassName("feedbackLevel3")[0].classList.remove("feedbackLevel3")},50);break;case Q.KILL_FEEDBACK_LEVEL_4:n+='<span class="feedbackLevel4 feedback" style="color : '+Q.KILL_FEEDBACK_LEVEL_4_COLOR+'">'+Q.KILL_FEEDBACK_LEVEL_4_PREFIX+"</span>",setTimeout(function(){_e.getElementsByClassName("feedbackLevel4")[0].classList.remove("feedbackLevel4")},50);break;case Q.KILL_FEEDBACK_LEVEL_5:n+='<span class="feedbackLevel5 feedback" style="color : '+Q.KILL_FEEDBACK_LEVEL_5_COLOR+'">'+Q.KILL_FEEDBACK_LEVEL_5_PREFIX+"</span>",setTimeout(function(){_e.getElementsByClassName("feedbackLevel5")[0].classList.remove("feedbackLevel5")},50);break;case Q.KILL_FEEDBACK_LEVEL_6:n+='<span class="feedbackLevel6 feedback" style="color : '+Q.KILL_FEEDBACK_LEVEL_6_COLOR+'">'+Q.KILL_FEEDBACK_LEVEL_6_PREFIX+"</span>",setTimeout(function(){_e.getElementsByClassName("feedbackLevel6")[0].classList.remove("feedbackLevel6")},50);break;case Q.KILL_FEEDBACK_LEVEL_7:n+='<span class="feedbackLevel7 feedback" style="color : '+Q.KILL_FEEDBACK_LEVEL_7_COLOR+'">'+Q.KILL_FEEDBACK_LEVEL_7_PREFIX+"</span>",setTimeout(function(){_e.getElementsByClassName("feedbackLevel7")[0].classList.remove("feedbackLevel7")},50)}n+="&nbsp; <span class="+i+">"+r+"</span>",n+="&nbsp;&nbsp; kill ",n+="&nbsp; <span class="+a+">"+o+"</span>"}else n+="&nbsp; <span class="+i+">"+r+"</span>",n+="&nbsp;&nbsp;  kill ",n+="&nbsp; <span class="+a+">"+o+"</span>";n+="&nbsp;!!!<br>",s.innerHTML=n;for(var l=_e.getElementsByClassName("killFeedBack");5<=l.length;)_e.removeChild(l[0]);_e.appendChild(s),setTimeout(function(){s.classList.add("disappearSmoothAni"),setTimeout(function(){s.classList.remove("disappearSmoothAni"),s.classList.add("disable")},1e3)},5e3)},setMiniMapChests:function(e,t){At.setAttribute("locationID",t[0].id),At.style.left=Math.floor(100*t[0].posX/Q.CANVAS_MAX_SIZE.width)+"%",At.style.top=Math.floor(100*t[0].posY/Q.CANVAS_MAX_SIZE.height)+"%",Rt.setAttribute("locationID",t[1].id),Rt.style.left=Math.floor(100*t[1].posX/Q.CANVAS_MAX_SIZE.width)+"%",Rt.style.top=Math.floor(100*t[1].posY/Q.CANVAS_MAX_SIZE.height)+"%";for(var s=At.parentNode.querySelectorAll("[type=chest]"),n=0;n<s.length-1;n++){(r=s[n].getElementsByTagName("img"))[0].src=Q.MINIMAP_CHEST_GROUND_SRC}for(n=0;n<e.length;n++)for(var i=0;i<s.length-1;i++){var a=s[i].getAttribute("locationID");if(e[n].lID===a){var r=s[i].getElementsByTagName("img");1===e[n].gd||2===e[n].gd?r[0].src=Q.MINIMAP_CHEST_SRC_1:3===e[n].gd||4===e[n].gd?r[0].src=Q.MINIMAP_CHEST_SRC_2:5===e[n].gd&&(r[0].src=Q.MINIMAP_CHEST_SRC_3);break}}},setMinimapZones:function(e,t){var s=document.getElementById("miniMapSafe"),n=document.getElementById("miniMapPortal");s.style.left=Math.floor(100*e[0].posX/Q.CANVAS_MAX_SIZE.width)+"%",s.style.top=Math.floor(100*e[0].posY/Q.CANVAS_MAX_SIZE.height)+"%",n.style.left=Math.floor(100*t[0].posX/Q.CANVAS_MAX_SIZE.width)+"%",n.style.top=Math.floor(100*t[0].posY/Q.CANVAS_MAX_SIZE.height)+"%"},createChest:function(e,t){for(var s=At.parentNode.querySelectorAll("[type=chest]"),n=0;n<s.length;n++)if(e===s[n].getAttribute("locationID")){var i=s[n].getElementsByTagName("img");1===t||2===t?(i[0].src=Q.MINIMAP_CHEST_SRC_1,i[0].classList.add("chestAni1"),i[1].classList.add("chestAni1")):3===t||4===t?(i[0].src=Q.MINIMAP_CHEST_SRC_2,i[0].classList.add("chestAni2"),i[1].classList.add("chestAni2")):5===t&&(i[0].src=Q.MINIMAP_CHEST_SRC_3,i[0].classList.add("chestAni3"),i[1].classList.add("chestAni3")),i[0].classList.add("chestAni"),i[1].classList.add("chestAni")}},deleteChest:function(e){for(var t=At.parentNode.querySelectorAll("[type=chest]"),s=0;s<t.length;s++)if(e===t[s].getAttribute("locationID")){var n=t[s].getElementsByTagName("img");n[0].src=Q.MINIMAP_CHEST_GROUND_SRC,n[0].classList.remove("chestAni"),n[1].classList.remove("chestAni"),n[0].classList.remove("chestAni1"),n[1].classList.remove("chestAni1"),n[0].classList.remove("chestAni2"),n[1].classList.remove("chestAni2"),n[0].classList.remove("chestAni3"),n[1].classList.remove("chestAni3")}},setUserPosition:function(e){Dt.style.left=Math.floor(100*e.x/Q.CANVAS_MAX_SIZE.width)+"%",Dt.style.top=Math.floor(100*e.y/Q.CANVAS_MAX_SIZE.height)+"%"},updateUserPosition:function(e){Dt.style.left=Math.floor(100*e.x/Q.CANVAS_MAX_SIZE.width)+"%",Dt.style.top=Math.floor(100*e.y/Q.CANVAS_MAX_SIZE.height)+"%"},showChatInput:function(){xe.classList.remove("disable"),Be.select()},getChatMessage:function(){return Be.value},disableChatInput:function(){xe.classList.add("disable")},clearChatInput:function(){Be.value=""},playDeadScene:function(e,t,n,i,s,a,r,o){ke.style.pointerEvents="all";var l=document.getElementById("deadSceneTextContainer"),c=document.getElementById("deadSceneText"),d=document.getElementById("deadSceneInfoContainer"),u=(document.getElementById("deadSceneTop"),document.getElementById("deadSceneInfoName")),f=document.getElementById("deadSceneInfoLevel"),h=(document.getElementById("deadSceneInfoBaseSkills"),document.getElementById("deadSceneBaseSkill")),p=document.getElementById("deadScenePassiveSkill"),E=h.getElementsByTagName("span")[0],m=p.getElementsByTagName("span")[0],g=document.getElementById("deadSceneBeforeLevel"),I=document.getElementById("deadSceneAfterLevel"),_=document.getElementById("deadSceneInfoExpText"),S=document.getElementById("deadSceneInfoExpBar"),T=document.getElementById("deadSceneMid"),b=document.getElementById("deadSceneLevelUpText"),y=document.getElementById("deadSceneInfoGold"),C=document.getElementById("deadSceneInfoJewel"),v=document.getElementById("deadSceneBottom"),L=(document.getElementById("deadSceneInfoNewSkillText"),document.getElementById("deadSceneInfoNewSkills")),D=document.getElementById("deadSceneConfirm"),A=this;ke.style.width="100%",ke.style.height="100%",we.classList.remove("deadSceneBackgroundDefault"),we.classList.add("deadSceneBackgroundAni");var R="";R=t?e===t?"You kill yourself":"You are slain by <span class='yellow'>"+t+"</span>":"You are dead",c.innerHTML=R;var P="",M="";switch(ne){case Q.CHAR_TYPE_FIRE:P=ie,M="red";break;case Q.CHAR_TYPE_FROST:P=ae,M="blue";break;case Q.CHAR_TYPE_ARCANE:P=re,M="purple"}u.innerHTML="<span class='"+M+"'>"+P+"</span>";var k=55/72,w=$({},Z.findData(te,"index",oe.skillIcon));h.getElementsByTagName("img")[0].style.clip=Z.makeCssClipStyle(w,k),h.getElementsByTagName("img")[0].src=q,h.setAttribute("skillIndex",oe.index),Z.setImgCssStyle(h.getElementsByTagName("img")[0],w,k),h.onmouseover=Ds.bind(h),h.onmouseout=Ms.bind(h),w=$({},Z.findData(te,"index",le.skillIcon)),p.getElementsByTagName("img")[0].style.clip=Z.makeCssClipStyle(w,k),p.getElementsByTagName("img")[0].src=q,p.setAttribute("skillIndex",le.index),Z.setImgCssStyle(p.getElementsByTagName("img")[0],w,k),p.onmouseover=Ds.bind(p),p.onmouseout=Ms.bind(p),setTimeout(function(){l.classList.remove("deadSceneDefault"),l.classList.add("deadSceneAni"),c.classList.remove("deadSceneDefault"),c.classList.add("deadSceneAni")},1e3),setTimeout(function(){c.innerHTML="",c.classList.remove("deadSceneAni"),c.classList.add("deadSceneDefault"),d.classList.remove("deadSceneDefault"),d.classList.add("deadSceneAni")},3500),setTimeout(function(){H()},4500),E.innerText="Lv."+(Math.floor(n/5)+1),m.innerText="Lv."+(Math.floor(n/5)+1),f.innerHTML=20<=n?"Lv.MAX":"Lv."+n,g.innerHTML=20<=n?"Lv.MAX":"Lv."+n,I.innerHTML="Lv."+(20<=n?"":19===n?"MAX":n+1);var x=$({},Z.findData(se,"level",n)),B=$({},Z.findData(se,"level",i)),O=Math.floor(a/B.needExp*100),N=Math.floor(s/x.needExp*100),F=0,U=0;function H(){if(-1==x.needExp)f.innerHTML="Lv.MAX",g.innerHTML="Lv.MAX",I.innerHTML="",_.innerHTML="100%",S.style.width="100%",K();else if(i<=n)n=i,O<=N?(N=O,f.innerHTML="Lv."+n,g.innerHTML="Lv."+n,I.innerHTML="Lv."+(20<=n?"":19===n?"Lv.MAX":n+1),_.innerHTML=N+"%",S.style.width=N+"%",K()):-1==B.needExp?(N=100,f.innerHTML="Lv.MAX",g.innerHTML="Lv.MAX",I.innerHTML="",_.innerHTML="100%",S.style.width="100%",K()):(N++,_.innerHTML=N+"%",S.style.width=N+"%",setTimeout(H,10));else if(100<=N){if(N=0,n++,x=$({},Z.findData(se,"level",n)),F+=x.levelUpGold,U+=x.levelUpJewel,n%5==0){var e=Math.floor(n/5)+1,t=$({},Z.findDataWithTwoColumns(ee,"level",e,"groupIndex",oe.groupIndex)),s=$({},Z.findDataWithTwoColumns(ee,"level",e,"groupIndex",le.groupIndex));A.upgradeBaseSkill(t.index,t),A.upgradeInherentSkill(s.index,s),A.onUpgradeCharSkills(t,s),E.classList.add("yellow"),m.classList.add("yellow"),E.innerText="Lv."+e,m.innerText="Lv."+e}f.innerHTML="Lv."+n,g.innerHTML="Lv."+n,I.innerHTML="Lv."+(20<=n?"":19===n?"Lv.MAX":n+1),_.innerHTML="100%",S.style.width="100%",setTimeout(H,200)}else N++,_.innerHTML=N+"%",S.style.width=N+"%",setTimeout(H,10)}-1==x.needExp&&(N=100),0<=N&&(_.innerHTML=N+"%",S.style.width=N+"%");var j=this.getResource();function K(){T.classList.remove("deadSceneDefault"),T.classList.add("deadSceneAni"),setTimeout(function(){o-F>j.gold&&y.classList.add("yellow"),r-U>j.jewel&&C.classList.add("yellow"),G()},1e3)}y.innerHTML=j.gold,C.innerHTML=j.jewel;var Y=50,X=1;function G(){o-F-j.gold<Y&&(Y=o-F-j.gold),r-U-j.jewel<X&&(X=r-U-j.jewel),j.gold+=Y,j.jewel+=X,y.innerHTML=j.gold,C.innerHTML=j.jewel,j.gold>=o-F&&j.jewel>=r-U?F||U?(b.classList.remove("disable"),b.classList.add("levelUpTextAni"),setTimeout(function(){o>j.gold&&y.classList.add("yellow"),r>j.jewel&&C.classList.add("yellow"),J()},1500)):z():setTimeout(G,50)}function J(){b.classList.add("disable"),b.classList.remove("levelUpTextAni"),Y=50,X=1,o-j.gold<Y&&(Y=o-j.gold),r-j.jewel<X&&(X=r-j.jewel),j.gold+=Y,j.jewel+=X,y.innerHTML=j.gold,C.innerHTML=j.jewel,j.gold>=o&&j.jewel>=r?z():setTimeout(J,50)}function z(){A.setResource({g:o,j:r}),ce.length?(v.classList.remove("deadSceneDefault"),v.classList.add("deadSceneAni"),setTimeout(V,1e3)):W()}function V(){if(ce.length){var e=ce[0],t=$({},Z.findData(ee,"index",e)),s=document.createElement("div"),n=document.createElement("div");n.classList.add("deadSceneNewSkillImgContainer");var i=document.createElement("img");n.setAttribute("skillIndex",e),s.classList.add("deadSceneNewSkillContainerItem"),i.src=q;var a=$({},Z.findData(te,"index",t.skillIcon));i.style.clip=Z.makeCssClipStyle(a,50/72),Z.setImgCssStyle(i,a,50/72),n.appendChild(i),s.appendChild(n),L.appendChild(s),n.onmouseover=Ds.bind(n),n.onmouseout=Ms.bind(n),setTimeout(function(){s.style.opacity=1},100),ce.splice(0,1),setTimeout(V,200)}else W()}function W(){D.classList.remove("deadSceneDefault"),D.classList.add("deadSceneAni"),D.onclick=new Function,D.addEventListener("click",function(){for(A.onDeadSceneConfirmClick(),l.classList.add("deadSceneDefault"),l.classList.remove("deadSceneAni"),c.classList.add("deadSceneDefault"),c.classList.remove("deadSceneAni"),d.classList.add("deadSceneDefault"),d.classList.remove("deadSceneAni"),T.classList.add("deadSceneDefault"),T.classList.remove("deadSceneAni"),v.classList.add("deadSceneDefault"),v.classList.remove("deadSceneAni"),D.classList.add("deadSceneDefault"),D.classList.remove("deadSceneAni"),E.classList.remove("yellow"),m.classList.remove("yellow"),y.classList.remove("yellow"),C.classList.remove("yellow");L.firstChild;)L.removeChild(L.firstChild)})}},disableDeadScene:function(){we.classList.remove("deadSceneBackgroundAni"),we.classList.add("deadSceneBackgroundDefault"),ke.style.width="0%",ke.style.height="0%",ke.style.pointerEvents="none",r.classList.add("disappearSmoothAni"),r.classList.remove("enable"),setTimeout(function(){r.classList.add("disable"),r.classList.remove("disappearSmoothAni")},1e3)},bottomToRight:function(){fe.classList.add("bottomRightCenterToRight")},rightToBottom:function(){fe.classList.remove("bottomRightCenterToRight")},playReconnectScene:function(){He.classList.remove("disable"),Kt=setTimeout(function e(){var t="connecting";switch(jt){case 1:t+=".";break;case 2:t+="..";break;case 3:t+="..."}jt++;3<jt&&(jt=1);je.innerHTML=t;Kt=setTimeout(e,500)},500)},updateKeySettings:function(e){bindE.placeholder=Z.keyCodeToChar(e.BindingE),bindSpace.placeholder=Z.keyCodeToChar(e.BindingSpace),bindA.placeholder=Z.keyCodeToChar(e.BindingA),bind1.placeholder=Z.keyCodeToChar(e.Binding1),bind2.placeholder=Z.keyCodeToChar(e.Binding2),bind3.placeholder=Z.keyCodeToChar(e.Binding3),bind4.placeholder=Z.keyCodeToChar(e.Binding4),bindS.placeholder=Z.keyCodeToChar(e.BindingS),bindG.placeholder=Z.keyCodeToChar(e.BindingG)},resetKeySettings:function(){ze.BindingE=ts,ze.BindingSpace=ss,ze.BindingA=ns,ze.Binding1=is,ze.Binding2=as,ze.Binding3=rs,ze.Binding4=os,ze.BindingS=ls,ze.BindingG=cs,ze.BindingEnter=ds,ze.BindingEsc=us,this.updateKeySettings(ze)},disableReconnectScene:function(){Kt&&clearTimeout(Kt),He.classList.add("disable")},disableDisplayAd:function(){xt.classList.add("disable")},enableDisplayAd:function(){xt.classList.remove("disable")},checkVideoAd:function(e,t){if(gs)this.onStartBtnClick(e,t);else{var s=this;setTimeout(function(){s.checkVideoAd.call(s,e,t)},200)}},clearTutorial:function(){$t=!0,L=[];for(var e=document.getElementById("popUpSkillContainer").getElementsByTagName("img"),t=0;t<e.length;t+=2)e[t].classList.add("disable");document.getElementById("hudBtnSkillChange").parentNode.getElementsByTagName("img")[0].classList.add("disable"),document.getElementById("standingSceneSkillSettingBtn").getElementsByTagName("img")[0].classList.add("disable")}},t.exports=Is},{"../public/csvjson.js":11,"../public/data.json":12,"../public/gameConfig.json":13,"../public/objectAssign.js":15,"../public/serverList.json":17,"../public/util.js":18,"../public/youtuberList.json":19}],9:[function(e,t,s){var n=e("../public/util.js"),i=e("./CSkill.js"),a=e("../public/gameConfig.json"),r=function(e,t,s){this.objectID=e.oID,this.name=e.nm,this.type=e.tp,this.imgData=e.imgData,this.textCanvas=t,this.textScaleFactor=s,this.isRender=!0,this.hitImgDataList=[],this.buffImgDataList=[],this.imgHandIndex=0,this.level=e.lv,this.exp=e.ep,this.maxHP=e.mHP,this.maxMP=e.mMP,this.HP=e.HP,this.MP=e.MP,this.castSpeed=e.csp,this.conditions=e.cdt,this.currentState=null,this.currentSkill=void 0,this.isExecutedSkill=!1,this.skillCastEffectPlay=!1,this.castEffectFactor=1,this.isMoveBackward=!1,this.effectTimer=Date.now(),this.effectRotateDegree=0,this.effectIndex=0,this.size={width:a.USER_BODY_SIZE,height:a.USER_BODY_SIZE},this.position=e.pos,this.targetPosition=e.tpos,this.direction=e.dir,this.rotateSpeed=e.rsp,this.maxSpeed=e.msp,this.center={x:0,y:0},this.speed={x:0,y:0},this.targetDirection=0,this.timer=Date.now(),this.castingEndTime=!1,this.setCenter(),this.setSpeed(),this.setTargetDirection(),this.chatMessage1="",this.chatMessage2="",this.chatMessage1StartTime=Date.now(),this.chatMessage2StartTime=Date.now(),this.updateInterval=!1,this.imgHandTimeout=!1,this.updateFunction=null,this.entityTreeEle={x:this.position.x,y:this.position.y,width:this.size.width,height:this.size.height,id:this.objectID},this.moveUIUpdateTimer=Date.now(),this.onMove=new Function,this.onMainUserMove=new Function};r.prototype={changeState:function(e){switch(this.currentState=e,this.stop(),this.currentState){case a.OBJECT_STATE_IDLE:this.updateFunction=this.idle.bind(this);break;case a.OBJECT_STATE_MOVE:this.updateFunction=this.rotate.bind(this);break;case a.OBJECT_STATE_ATTACK:this.updateFunction=this.attack.bind(this);break;case a.OBJECT_STATE_CAST:this.updateFunction=this.rotate.bind(this);break;case a.OBJECT_STATE_DEATH:this.updateFunction=this.idle.bind(this);break;case a.OBJECT_STATE_MOVE_AND_ATTACK:this.updateFunction=this.rotate.bind(this)}this.update()},update:function(){this.updateInterval=setInterval(this.updateFunction,25)},setCenter:function(){this.center.x=this.position.x+this.size.width/2,this.center.y=this.position.y+this.size.height/2},idle:function(){this.doEveryTick()},rotate:function(){var e=(Date.now()-this.timer)/1e3;n.rotate.call(this,e),this.doEveryTick()},move:function(e,t){t?n.move.call(this,e,t):n.move.call(this,e),500<Date.now()-this.moveUIUpdateTimer&&(this.moveUIUpdateTimer=Date.now(),this.onMainUserMove())},setTargetDirection:function(e){n.setTargetDirection.call(this,e)},setSpeed:function(e){n.setSpeed.call(this,e)},attack:function(){this.executeSkill(),this.doEveryTick()},doEveryTick:function(){this.timer=Date.now();for(var e=this.hitImgDataList.length-1;0<=e;e--)Date.now()-this.hitImgDataList[e].startTime>=this.hitImgDataList[e].resourceLifeTime&&this.hitImgDataList.splice(e,1);Date.now()-this.chatMessage1StartTime>=a.CHAT_MESSAGE_TIME&&(this.chatMessage1=this.chatMessage2,this.chatMessage1StartTime=this.chatMessage2StartTime,this.chatMessage2="",this.chatMessage2StartTime=Date.now()),this.isRender&&Date.now()-this.effectTimer>=a.USER_ATTACH_EFFECT_CHANGE_TIME&&(this.effectTimer=Date.now(),this.effectRotateDegree+=10,100<this.effectIndex?this.effectIndex=0:this.effectIndex+=1,360<=this.effectRotateDegree&&(this.effectRotateDegree-=360))},updateBuffImgData:function(e){this.buffImgDataList=e},updateSkillHitImgData:function(e){e.startTime=Date.now(),this.hitImgDataList.push(e)},stop:function(){this.updateInterval&&(clearInterval(this.updateInterval),this.updateInterval=!1),this.currentSkill&&(this.currentSkill.destroy(),this.currentSkill=void 0,this.isExecutedSkill=!1,this.skillCastEffectPlay=!1),this.imgHandTimeout&&(clearTimeout(this.imgHandTimeout),this.imgHandTimeout=!1),this.isMoveBackward=!1,this.imgHandIndex=0,this.castingEndTime=!1},setEntityEle:function(){this.entityTreeEle={x:this.position.x,y:this.position.y,width:this.size.width,height:this.size.height,id:this.objectID}},makeSkillInstance:function(e){var t=Math.floor(a.USER_ANI_TIME*(100/this.castSpeed)),s=new i(e,e.fireTime-t);return s.onUserAniStart=function(e,t){var s=t/5;this.castingEndTime=Date.now()+(e.totalTime-e.userAniStartTime),this.imgHandTimeout=setTimeout(function e(t){this.imgHandIndex<4?(this.imgHandIndex++,this.imgHandTimeout=setTimeout(e.bind(this,t),t)):this.imgHandIndex=0}.bind(this,s),s)}.bind(this,s,t),s.onTimeOver=function(e){e.destroy(),this.currentSkill=void 0,this.isExecutedSkill=!1,this.skillCastEffectPlay=!1,this.castingEndTime=!1,this.changeState(a.OBJECT_STATE_IDLE,"onTimeOverHandler")}.bind(this,s),s},setSkill:function(e){this.currentSkill=e},executeSkill:function(){try{!this.isExecutedSkill&&this.currentSkill&&(this.skillCastEffectPlay=!0,this.skillCastEffectStartTime=Date.now(),this.isExecutedSkill=!0,this.currentSkill.executeSkill()),this.setCastEffectFactor()}catch(e){}},setCastEffectFactor:function(){var e=Date.now()-this.skillCastEffectStartTime;this.castEffectFactor=n.interpolationSine(e)},updateSkillPossessions:function(e){this.possessSkills=e},makeProjectile:function(e,t,s){return t.makeProjectile(this.center,e,s)},changePosition:function(e){this.position.x=e.x-this.size.width/2,this.position.y=e.y-this.size.height/2,this.setCenter()},setChatMsg:function(e){this.chatMessage2?(this.chatMessage1=this.chatMessage2,this.chatMessage1StartTime=this.chatMessage2StartTime,this.chatMessage2=e,this.chatMessage2StartTime=Date.now()):this.chatMessage1?(this.chatMessage2=e,this.chatMessage2StartTime=Date.now()):(this.chatMessage1=e,this.chatMessage1StartTime=Date.now())},getCurrentState:function(){return this.currentState},getCurrentSkillIndex:function(){return this.currentSkill.index},setRenderVar:function(e){this.isRender=e},updateTextCanvas:function(e){this.textCanvas=e}},t.exports=r},{"../public/gameConfig.json":13,"../public/util.js":18,"./CSkill.js":7}],10:[function(i,a,e){(function(e){var t=e.WebSocket||e.MozWebSocket,n=i("msgpack-lite");function s(){this.isFirst=!0,this.number=0,this.autoReconnectInterval=2e3}s.prototype.open=function(e){this.url=e,this.instance=new t(this.url),this.instance.binaryType="arraybuffer",this.instance.onopen=function(){this.isFirst?this.onopen():this.emit("needReconnect");this.isFirst=!1}.bind(this),this.instance.onmessage=function(e,t){this.number++,this.onmessage(e,t,this.number)}.bind(this),this.instance.onclose=function(e){switch(e){case 1e3:break;default:this.reconnect(e)}this.onclose(e)}.bind(this),this.instance.onerror=function(e){switch(e.code){case"ECONNREFUSED":this.reconnect(e);break;default:this.onerror(e)}}.bind(this)},s.prototype.send=function(e,t){try{this.instance.send(e,t)}catch(e){this.instance.emit("error",e)}},s.prototype.emit=function(e){for(var t=[],s=1;s<arguments.length;s++)t.push(arguments[s]);1===this.instance.readyState&&this.send(n.encode({t:e,v:t}))},s.prototype.reconnect=function(e){this.instance.onopen=new Function,this.instance.onmessage=new Function,this.instance.onclose=new Function,this.instance.onerror=new Function;var t=this;setTimeout(function(){t.open(t.url)},this.autoReconnectInterval)},s.prototype.close=function(e){this.instance&&this.instance.close(e)},s.prototype.onopen=function(e){},s.prototype.onmessage=function(e,t,s){},s.prototype.onerror=function(e){},s.prototype.onclose=function(e){},a.exports=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"msgpack-lite":24}],11:[function(e,t,s){function l(e){return"string"==typeof e?e:!0===e?'"':null}function d(e){if(null===e)return"null";if(e&&(1===e.nodeType||9===e.nodeType))return"element";var t=Object.prototype.toString.call(e).match(/\[object (.*?)\]/)[1].toLowerCase();if("number"===t){if(isNaN(e))return"nan";if(!isFinite(e))return"infinity"}return t}function h(e,t,s,n,i){return"undefined"===d(e)?u("",t,s,n,i):"null"===d(e)?u("null",t,s,n,i):Array.isArray(e)?function(e,s,n,t,i){if(a=e,a.every(function(e){var t=d(e);return!t.match(/array|object/)}))return u(e.join(";"),s,n+i.arrayDenote,t,i);var a;e.forEach(function(e,t){return h(e,s,n+i.arrayDenote,t,i)})}(e,t,s,n,i):"object"==typeof e?(a=e,r=t,o=s,l=n,c=i,void Object.keys(a).forEach(function(e){return h(a[e],r,o+c.objectDenote+e,l,c)})):u(String(e),t,s,n,i);var a,r,o,l,c}function u(e,t,s,n,i){return t&&t[s]||(t[s]=[]),n<t[s].length&&(n=t[s].length),t[s][n]=e,t}function f(e){return e?String(e).trim().replace(/^["|'](.*)["|']$/,"$1"):""}function p(e,t,s){if(s&&-1!==e.indexOf(s))return function(e,t,s){t=t||",",s=s||'"';var n=new RegExp("(?!\\s*$)\\s*(?:"+s+"([^"+s+"\\\\]*(?:\\\\[\\S\\s][^"+s+"\\\\]*)*)"+s+"|([^"+t+s+"\\s\\\\]*(?:\\s+[^"+t+s+"\\s\\\\]+)*))\\s*(?:"+t+"|$)","g"),i=[];e.replace(n,function(e,t,s){return void 0!==t?i.push(t.replace(/\\'/g,"'")):void 0!==s&&i.push(s),""}),/,\s*$/.test(e)&&i.push("");return i}(e,t,s);var n=[];return e.split(t).forEach(function(e){var t=e.trim();n.push(t)}),n}t.exports={toObject:function(e,t){var s=(t=t||{}).delimiter||",",a=l(t.quote),n=e,r=null;if("string"!=typeof n)throw new Error("Invalid input, input data should be a string");n=n.split(/[\n\r]+/gi),"string"==typeof t.headers?(r=t.headers.split(/[\n\r]+/gi),r=a?p(r.shift(),s,a):r.shift().split(s)):r=a?p(n.shift(),s,a):n.shift().split(s);var o=[];return n.forEach(function(n){if(n){n=a?p(n,s,a):n.split(s);var i={};r.forEach(function(e,t){var s=f(n[t]);parseInt(s)||0===parseInt(s)?i[e]=parseInt(s):parseFloat(s)?i[e]=parseFloat(s):i[e]=s}),o.push(i)}}),o},toArray:function(e,t){var s=(t=t||{}).delimiter||",",n=l(t.quote),i=e;if("string"!=typeof i)throw new Error("Invalid input, input data should be a string");i=i.split(/[\n\r]+/gi);var a=[];return i.forEach(function(e){e&&(e=(e=n?p(e,s,n):e.split(s)).map(function(e){return f(e)}),a.push(e))}),a},toColumnArray:function(e,t){var s=(t=t||{}).delimiter||",",n=l(t.quote),i=e,a=null;if("string"!=typeof i)throw new Error("Invalid input, input data should be a string");i=i.split(/[\n\r]+/gi),"string"==typeof t.headers?(a=t.headers.split(/[\n\r]+/gi),a=n?p(a.shift(),s,n):a.shift().split(s)):a=n?p(i.shift(),s,n):i.shift().split(s);var r={};return a.forEach(function(e){r[e]=[]}),i.forEach(function(e){e&&(e=n?p(e,s,n):e.split(s)).forEach(function(e,t){r[a[t]].push(f(e))})}),r},toSchemaObject:function(e,t){var n=(t=t||{}).delimiter||",",i=l(t.quote),s=e,a=null;if("string"!=typeof s)throw new Error("Invalid input, input should be a string");s=s.split(/[\n\r]+/gi),"string"==typeof t.headers?(a=t.headers.split(/[\n\r]+/gi),a=i?p(a.shift(),n,i):a.shift().split(n)):a=i?p(s.shift(),n,i):s.shift().split(n);var r=[];return s.forEach(function(e){if(e){e=i?p(e,n,i):e.split(n);var s={};e.forEach(function(e,t){!function e(t,s,n,i,a){var r,o,l=t.match(/\[*[\d]\]\.(\w+)|\.|\[\]|\[(.)\]|-|\+/gi);if(l){var c=l[0];if(-1!==l.indexOf("-"))return!0;if(-1!==l.indexOf(".")){var d=t.split(".");o=d.shift(),n[o]=n[o]||{},e(d.join("."),s,n[o],i,a)}else if(-1!==l.indexOf("[]"))r=t.replace(/\[\]/gi,""),n[r]||(n[r]=[]),n[r].push(s);else if(/\[*[\d]\]\.(\w+)/.test(c)){r=t.split("[").shift();var u=parseInt(c.match(/\[(.)\]/).pop(),10);o=t.split(".").pop(),n[r]=n[r]||[],n[r][u]=n[r][u]||{},n[r][u][o]=s}else if(/\[(.)\]/.test(c)){var i=c.match(/\[(.)\]/).pop();r=t.replace(/\[(.)\]/gi,""),n[r]=p(s,i,a)}else-1!==l.indexOf("+")&&(r=t.replace(/\+/gi,""),n[r]=Number(s))}else n[t]=f(s);return n}(a[t],e,s,n,i)}),r.push(s)}}),r},toCSV:function(e,t){(t=t||{}).delimiter=t.delimiter||",",t.wrap=t.wrap||"",t.arrayDenote=t.arrayDenote&&String(t.arrayDenote).trim()?t.arrayDenote:"[]",t.objectDenote=t.objectDenote&&String(t.objectDenote).trim()?t.objectDenote:".",t.detailedOutput="boolean"!=typeof t.detailedOutput||t.detailedOutput,t.headers=String(t.headers).toLowerCase();var s={},n="";t.headers.match(/none|full|relative|key/)?t.headers=t.headers.match(/none|full|relative|key/)[0]:t.headers="full";!0===t.wrap&&(t.wrap='"');"string"==typeof e&&(e=JSON.parse(e));h(e,s,"",0,t);var i=function(e,t,s){var n=/([^\[\]\.]+)$/,i=/\[\]\.?([^\[\]]+)$/;switch(e){case"none":return null;case"full":return Object.keys(t);case"key":return Object.keys(t).map(function(e){var t=e.match(n);return t&&2===t.length?t[1]:e});case"relative":return Object.keys(t).map(function(e){var t=e.match(i);return t&&2===t.length?t[1]:e})}}(t.headers,s);i&&(t.wrap&&(i=i.map(function(e){return t.wrap+e+t.wrap})),n=i.join(t.delimiter));var a=(c=s,d=0,Object.keys(c).forEach(function(e){Array.isArray(c[e])&&c[e].length>d&&(d=c[e].length)}),d),r=Object.keys(s),o=[],l=/\n|\r/g;var c,d;t.wrap||(l=new RegExp("\n|\r|"+t.delimiter,"g"));for(var u=0;u<a;u++){o=[];for(var f=0;f<r.length;f++)s[r[f]][u]?(s[r[f]][u]=s[r[f]][u].replace(l,"\t"),t.wrap&&(s[r[f]][u]=t.wrap+s[r[f]][u]+t.wrap),o[o.length]=s[r[f]][u]):o[o.length]="";n+="\n"+o.join(t.delimiter)}return n}}},{}],12:[function(e,t,s){t.exports={userStatData:"index,level,needExp,type,power,magic,speed,imgData,levelUpGold,levelUpJewel\n1,1,150,1,32,20,28,1,0,0\n2,2,200,1,34,21,29,1,300,1\n3,3,250,1,36,22,31,1,400,0\n4,4,300,1,37,23,32,1,450,0\n5,5,350,1,39,24,33,1,500,1\n6,6,400,1,41,25,35,2,600,0\n7,7,500,1,42,26,36,2,700,0\n8,8,600,1,44,27,37,2,800,1\n9,9,700,1,46,28,39,2,900,0\n10,10,800,1,47,29,40,2,1000,2\n11,11,900,1,49,30,41,3,1100,0\n12,12,1000,1,51,31,43,3,1200,0\n13,13,1100,1,52,32,44,3,1300,2\n14,14,1300,1,54,33,45,3,1400,0\n15,15,1500,1,56,34,47,3,1500,3\n16,16,1700,1,57,35,48,4,1700,0\n17,17,1900,1,59,36,49,4,1900,0\n18,18,2200,1,61,37,51,4,2100,3\n19,19,2500,1,62,38,52,4,2300,0\n20,20,-1,1,64,39,53,5,2500,4\n101,1,150,2,28,32,20,6,0,0\n102,2,200,2,29,34,21,6,300,1\n103,3,250,2,31,36,22,6,400,0\n104,4,300,2,32,37,23,6,450,0\n105,5,350,2,33,39,24,6,500,1\n106,6,400,2,35,41,25,7,600,0\n107,7,500,2,36,42,26,7,700,0\n108,8,600,2,37,44,27,7,800,1\n109,9,700,2,39,46,28,7,900,0\n110,10,800,2,40,47,29,7,1000,2\n111,11,900,2,41,49,30,8,1100,0\n112,12,1000,2,43,51,31,8,1200,0\n113,13,1100,2,44,52,32,8,1300,2\n114,14,1300,2,45,54,33,8,1400,0\n115,15,1500,2,47,56,34,8,1500,3\n116,16,1700,2,48,57,35,9,1700,0\n117,17,1900,2,49,59,36,9,1900,0\n118,18,2200,2,51,61,37,9,2100,3\n119,19,2500,2,52,62,38,9,2300,0\n120,20,-1,2,53,64,39,10,2500,4\n201,1,150,3,23,28,29,11,0,0\n202,2,200,3,24,29,31,11,300,1\n203,3,250,3,25,31,33,11,400,0\n204,4,300,3,26,32,34,11,450,0\n205,5,350,3,27,33,36,11,500,1\n206,6,400,3,28,35,38,12,600,0\n207,7,500,3,29,36,39,12,700,0\n208,8,600,3,30,37,41,12,800,1\n209,9,700,3,31,39,43,12,900,0\n210,10,800,3,32,40,44,12,1000,2\n211,11,900,3,33,41,46,13,1100,0\n212,12,1000,3,34,43,48,13,1200,0\n213,13,1100,3,35,44,49,13,1300,2\n214,14,1300,3,36,45,51,13,1400,0\n215,15,1500,3,37,47,53,13,1500,3\n216,16,1700,3,38,48,54,14,1700,0\n217,17,1900,3,39,49,56,14,1900,0\n218,18,2200,3,40,51,58,14,2100,3\n219,19,2500,3,41,52,59,14,2300,0\n220,20,-1,3,42,53,61,15,2500,4\n",skillData:"index,name,level,type,property,tier,groupIndex,nextSkillIndex,totalTime,fireTime,cooldown,range,explosionRadius,explosionDamageRate,consumeMP,fireDamage,frostDamage,arcaneDamage,doDamageToMP,damageToMPRate,doDamageToSelf,damageToSelfRate,healHP,healHPRate,healMP,healMPRate,repeatDelay,repeatCount,buffToSelf,buffToTarget,projectileCount,radius,maxSpeed,lifeTime,tickTime,upgradeGoldAmount,upgradeJewelAmount,clientName,clientDesc,effectLastTime,skillIcon,hitEffectGroup,explosionEffectGroup,projectileEffectGroup,exchangeToGold,exchangeToJewel\n11,PyroBaseAttack1,1,1,1,1,10,12,500,400,150,60,45,0,0,150,0,0,0,0,0,0,0,0,0,0,0,0,,1,0,0,0,0,0,10000,10000,Pyro Attack, Damage to near front &nbsp; Ignite enemy(20%),300,1,6,,,0,\n12,PyroBaseAttack2,2,1,1,1,10,13,500,400,150,60,45,0,0,160,0,0,0,0,0,0,0,0,0,0,0,0,,1,0,0,0,0,0,10000,10000,Pyro Attack, Damage to near front &nbsp; Ignite enemy(20%) <img src='/images/upIcon.png' class='disable' />,300,1,6,,,0,\n13,PyroBaseAttack3,3,1,1,1,10,14,500,400,150,60,47,0,0,170,0,0,0,0,0,0,0,0,0,0,0,0,,2,0,0,0,0,0,10000,10000,Pyro Attack, Damage to near front &nbsp; Ignite enemy(30%),300,1,6,,,0,\n14,PyroBaseAttack4,4,1,1,1,10,15,500,400,150,60,47,0,0,185,0,0,0,0,0,0,0,0,0,0,0,0,,2,0,0,0,0,0,10000,10000,Pyro Attack, Damage to near front &nbsp; Ignite enemy(30%) <img src='/images/upIcon.png' class='disable' />,300,1,6,,,0,\n15,PyroBaseAttack5,5,1,1,1,10,-1,500,400,150,60,50,0,0,200,0,0,0,0,0,0,0,0,0,0,0,0,,3,0,0,0,0,0,10000,10000,Pyro Attack, Damage to near front &nbsp; Ignite enemy(40%),300,1,6,,,0,\n21,FireBolt1,1,3,1,1,20,22,500,300,2500,0,0,0,40,250,0,0,0,0,0,0,0,0,0,0,0,0,,2,1,30,650,1500,0,500,0,Fire Bolt, Fire projectile &nbsp; Ignite enemy(30%),0,2,6,,,50,\n22,FireBolt2,2,3,1,1,20,23,500,300,2500,0,0,0,50,275,0,0,0,0,0,0,0,0,0,0,0,0,,2,1,30,650,1500,0,1000,0,Fire Bolt, Fire projectile &nbsp; Ignite enemy(30%) <img src='/images/upIcon.png' class='disable' />,0,2,6,,,50,\n23,FireBolt3,3,3,1,1,20,24,500,300,2500,0,0,0,60,290,0,0,0,0,0,0,0,0,0,0,0,0,,3,1,32,650,1500,0,2000,1,Fire Bolt, Fire projectile &nbsp; Ignite enemy(40%),0,2,6,,,50,\n24,FireBolt4,4,3,1,1,20,25,500,300,2500,0,0,0,70,305,0,0,0,0,0,0,0,0,0,0,0,0,,3,1,32,650,1500,0,3000,2,Fire Bolt, Fire projectile &nbsp; Ignite enemy(40%) <img src='/images/upIcon.png' class='disable' />,0,2,6,,,50,\n25,FireBolt5,5,3,1,1,20,-1,500,300,2500,0,0,0,80,320,0,0,0,0,0,0,0,0,0,0,0,0,,4,1,35,650,1500,0,0,0,Fire Bolt, Fire projectile &nbsp; Ignite enemy(50%),0,2,6,,,50,\n31,BurningSoul1,1,11,1,1,30,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,,0,0,0,0,0,500,0,Burning Soul, +4 HP regen <img src='/images/upIcon.png' class='disable' />,0,3,,,,50,\n32,BurningSoul2,2,11,1,1,30,33,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,,0,0,0,0,0,1000,0,Burning Soul, +6 HP regen <img src='/images/upIcon.png' class='disable' />  <img src='/images/plusIcon.png' class='disable' />,0,3,,,,50,\n33,BurningSoul3,3,11,1,1,30,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,,0,0,0,0,0,2000,1,Burning Soul, +7 HP regen <img src='/images/upIcon.png' class='disable' /> &nbsp; +300 HP,0,3,,,,50,\n34,BurningSoul4,4,11,1,1,30,35,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,,0,0,0,0,0,3000,2,Burning Soul, +9 HP regen <img src='/images/upIcon.png' class='disable' /> &nbsp; +300 HP <img src='/images/upIcon.png' class='disable' /> <img src='/images/plusIcon.png' class='disable' />,0,3,,,,50,\n35,BurningSoul5,5,11,1,1,30,-1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10,,0,0,0,0,0,0,0,Burning Soul, +10 HP regen &nbsp; +500 HP &nbsp; +10% Damage rate,0,3,,,,50,\n41,FireBall1,1,4,1,1,40,42,800,600,8000,0,110,0,100,470,0,0,0,0,0,0,0,0,0,0,0,0,,2,1,30,550,1500,0,1000,0,Fire Ball, Fire explosive projectile &nbsp; Ignite enemy(30%),300,4,6,,,100,\n42,FireBall2,2,4,1,1,40,43,800,600,8000,0,110,0,120,490,0,0,0,0,0,0,0,0,0,0,0,0,,2,1,30,550,1500,0,1500,1,Fire Ball, Fire explosive projectile &nbsp; Ignite enemy(30%) <img src='/images/upIcon.png' class='disable' />,300,4,6,,,100,\n43,FireBall3,3,4,1,1,40,44,800,600,8000,0,120,0,140,510,0,0,0,0,0,0,0,0,0,0,0,0,,3,1,35,550,1500,0,2500,2,Fire Ball, Fire explosive projectile &nbsp; Ignite enemy(40%),300,4,6,,,100,\n44,FireBall4,4,4,1,1,40,45,800,600,8000,0,120,0,160,530,0,0,0,0,0,0,0,0,0,0,0,0,,3,1,35,550,1500,0,3500,3,Fire Ball, Fire explosive projectile &nbsp; Ignite enemy(40%) <img src='/images/upIcon.png' class='disable' />,300,4,6,,,100,\n45,FireBall5,5,4,1,1,40,-1,800,600,8000,0,130,0,180,550,0,0,0,0,0,0,0,0,0,0,0,0,,4,1,40,550,1500,0,0,0,Fire Ball, Fire explosive projectile &nbsp; Ignite enemy(50%),300,4,6,,,100,\n51,InnerFire1,1,8,1,2,50,52,500,300,25000,0,0,0,100,0,0,0,0,0,1,100,0,0,0,0,0,0,11,16,0,0,0,0,0,1000,0,Inner Fire, +20% Damage rate <img src='/images/upIcon.png' class='disable' /> &nbsp; Make Ignite oneself,0,5,,,,100,\n52,InnerFire2,2,8,1,2,50,53,500,300,25000,0,0,0,120,0,0,0,0,0,1,100,0,0,0,0,0,0,12,16,0,0,0,0,0,1500,1,Inner Fire, +27% Damage rate <img src='/images/upIcon.png' class='disable' /> &nbsp; Make Ignite oneself <img src='/images/plusIcon.png' class='disable' />,0,5,,,,100,\n53,InnerFire3,3,8,1,2,50,54,500,300,25000,0,0,0,140,0,0,0,0,0,1,100,0,0,0,0,0,0,13,16,0,0,0,0,0,2500,2,Inner Fire, +30% Damage rate <img src='/images/upIcon.png' class='disable' /> &nbsp; Make Ignite oneself &nbsp; +10% Fire resistance,0,5,,,,100,\n54,InnerFire4,4,8,1,2,50,55,500,300,25000,0,0,0,160,0,0,0,0,0,1,100,0,0,0,0,0,0,14,16,0,0,0,0,0,3500,3,Inner Fire, +37% Damage rate <img src='/images/upIcon.png' class='disable' /> &nbsp; Make Ignite oneself &nbsp; +10% Fire resistance <img src='/images/upIcon.png' class='disable' /> <img src='/images/plusIcon.png' class='disable' />,0,5,,,,100,\n55,InnerFire5,5,8,1,2,50,-1,500,300,25000,0,0,0,180,0,0,0,0,0,1,100,0,0,0,0,0,0,15,16,0,0,0,0,0,0,0,Inner Fire, +40% Damage rate &nbsp; Make Ignite oneself &nbsp; +15% Fire resistance &nbsp; +3 HP regen,0,5,,,,100,\n61,RollingFire1,1,5,1,3,60,62,800,600,15000,0,0,0,130,80,0,0,0,0,0,0,0,0,0,0,0,0,,1,1,50,280,2000,60,1500,1,Rolling Fire, Fire rolling projectile &nbsp; Ignite enemy(20%),0,6,6,,1007,150,\n62,RollingFire2,2,5,1,3,60,63,800,600,15000,0,0,0,160,85,0,0,0,0,0,0,0,0,0,0,0,0,,1,1,50,280,2000,60,2000,2,Rolling Fire, Fire rolling projectile &nbsp; Ignite enemy(20%) <img src='/images/upIcon.png' class='disable' />,0,6,6,,1007,150,\n63,RollingFire3,3,5,1,3,60,64,800,600,15000,0,0,0,190,90,0,0,0,0,0,0,0,0,0,0,0,0,,2,1,53,280,2000,60,3000,3,Rolling Fire, Fire rolling projectile &nbsp; Ignite enemy(30%),0,6,6,,1007,150,\n64,RollingFire4,4,5,1,3,60,65,800,600,15000,0,0,0,220,95,0,0,0,0,0,0,0,0,0,0,0,0,,2,1,53,280,2000,60,4000,4,Rolling Fire, Fire rolling projectile &nbsp; Ignite enemy(30%) <img src='/images/upIcon.png' class='disable' />,0,6,6,,1007,150,\n65,RollingFire5,5,5,1,3,60,-1,800,600,15000,0,0,0,250,100,0,0,0,0,0,0,0,0,0,0,0,0,,3,1,55,280,2000,60,0,0,Rolling Fire, Fire rolling projectile &nbsp; Ignite enemy(40%),0,6,6,,1007,150,\n71,Fury1,1,11,1,3,70,72,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,,0,0,0,0,0,1500,1,Fury, +5% Move and Cast speed <img src='/images/upIcon.png' class='disable' />,0,7,,,,150,\n72,Fury2,2,11,1,3,70,73,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,18,,0,0,0,0,0,2000,2,Fury, +8% Move and Cast speed <img src='/images/upIcon.png' class='disable' /> <img src='/images/plusIcon.png' class='disable' />,0,7,,,,150,\n73,Fury3,3,11,1,3,70,74,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,19,,0,0,0,0,0,3000,3,Fury, +10% Move and Cast speed <img src='/images/upIcon.png' class='disable' /> &nbsp; +10% Move and Cast speed[While Ignite],0,7,,,,150,\n74,Fury4,4,11,1,3,70,75,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,20,,0,0,0,0,0,4000,4,Fury, +13% Move and Cast speed <img src='/images/upIcon.png' class='disable' /> &nbsp; +10% Move and Cast speed[While Ignite] <img src='/images/upIcon.png' class='disable' /> <img src='/images/plusIcon.png' class='disable' />,0,7,,,,150,\n75,Fury5,5,11,1,3,70,-1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,21,,0,0,0,0,0,0,0,Fury, +15% Move and Cast speed &nbsp; +15% Move and Cast speed[While Ignite] &nbsp; +10% Cooldown reduce rate,0,7,,,,150,\n81,Explosion1,1,9,1,4,80,82,1300,1100,20000,0,200,0,130,550,0,0,0,0,1,40,0,0,0,0,0,0,,5,0,0,0,0,0,2000,1,Explosion, Damage to near position &nbsp; Ignite enemy and oneself(100%) &nbsp; Damage to self(40%) <img src='/images/upIcon.png' class='disable' />,300,8,6,,,200,\n82,Explosion2,2,9,1,4,80,83,1300,1100,20000,0,200,0,160,575,0,0,0,0,1,35,0,0,0,0,0,0,,5,0,0,0,0,0,2500,2,Explosion, Damage to near position &nbsp; Ignite enemy and oneself(100%) &nbsp; Damage to self(35%) <img src='/images/upIcon.png' class='disable' />,300,8,6,,,200,\n83,Explosion3,3,9,1,4,80,84,1300,1100,20000,0,225,0,190,600,0,0,0,0,1,30,0,0,0,0,0,0,,5,0,0,0,0,0,3500,3,Explosion, Damage to near position &nbsp; Ignite enemy and oneself(100%) &nbsp; Damage to self(30%) <img src='/images/upIcon.png' class='disable' />,300,8,6,,,200,\n84,Explosion4,4,9,1,4,80,85,1300,1100,20000,0,225,0,220,625,0,0,0,0,1,25,0,0,0,0,0,0,,5,0,0,0,0,0,4500,4,Explosion, Damage to near position &nbsp; Ignite enemy and oneself(100%) &nbsp; Damage to self(25%) <img src='/images/upIcon.png' class='disable' />,300,8,6,,,200,\n85,Explosion5,5,9,1,4,80,-1,1300,1100,20000,0,250,0,250,650,0,0,0,0,1,20,0,0,0,0,0,0,,5,0,0,0,0,0,0,0,Explosion, Damage to near position &nbsp; Ignite enemy and oneself(100%) &nbsp; Damage to self(20%),300,8,6,,,200,\n91,Pyromaniac1,1,11,1,5,90,92,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,22,,0,0,0,0,0,10000,10000,Pyromaniac, +5 Power <img src='/images/upIcon.png' class='disable' /> &nbsp;   +10% Fire Damage rate <img src='/images/upIcon.png' class='disable' />,0,9,,,,0,\n92,Pyromaniac2,2,11,1,5,90,93,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,23,,0,0,0,0,0,10000,10000,Pyromaniac, +8 Power <img src='/images/upIcon.png' class='disable' /> &nbsp;   +14% Fire Damage rate <img src='/images/upIcon.png' class='disable' /> <img src='/images/plusIcon.png' class='disable' />,0,9,,,,0,\n93,Pyromaniac3,3,11,1,5,90,94,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,,0,0,0,0,0,10000,10000,Pyromaniac, +10 Power <img src='/images/upIcon.png' class='disable' /> &nbsp;   +17% Fire Damage rate <img src='/images/upIcon.png' class='disable' /> &nbsp;  3% Damage Rate Per 10% Life Loss <img src='/images/upIcon.png' class='disable' />,0,9,,,,0,\n94,Pyromaniac4,4,11,1,5,90,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,25,,0,0,0,0,0,10000,10000,Pyromaniac, +13 Power <img src='/images/upIcon.png' class='disable' /> &nbsp;   +21% Fire Damage rate <img src='/images/upIcon.png' class='disable' /> &nbsp;  4% Damage Rate Per 10% Life Loss <img src='/images/upIcon.png' class='disable' /> <img src='/images/plusIcon.png' class='disable' />,0,9,,,,0,\n95,Pyromaniac5,5,11,1,5,90,-1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,26,,0,0,0,0,0,10000,10000,Pyromaniac, +15 Power &nbsp;   +25% Fire Damage rate &nbsp;  +15% Cast Speed &nbsp;  +5% Damage Rate Per 10% Life Loss,0,9,,,,0,\n1001,FrosterBaseAttack1,1,1,2,1,1000,1002,600,400,150,60,47,0,0,0,140,0,0,0,0,0,0,0,0,0,0,0,,102,0,0,0,0,0,10000,10000,Froster Attack, Damage to near front &nbsp; Chill enemy(25%),300,101,7,,,0,\n1002,FrosterBaseAttack2,2,1,2,1,1000,1003,600,400,150,60,47,0,0,0,150,0,0,0,0,0,0,0,0,0,0,0,,102,0,0,0,0,0,10000,10000,Froster Attack, Damage to near front &nbsp; Chill enemy(25%) <img src='/images/upIcon.png' class='disable' />,300,101,7,,,0,\n1003,FrosterBaseAttack3,3,1,2,1,1000,1004,600,400,150,60,50,0,0,0,160,0,0,0,0,0,0,0,0,0,0,0,,103,0,0,0,0,0,10000,10000,Froster Attack, Damage to near front &nbsp; Chill enemy(30%),300,101,7,,,0,\n1004,FrosterBaseAttack4,4,1,2,1,1000,1005,600,400,150,60,50,0,0,0,170,0,0,0,0,0,0,0,0,0,0,0,,103,0,0,0,0,0,10000,10000,Froster Attack, Damage to near front &nbsp; Chill enemy(30%) <img src='/images/upIcon.png' class='disable' />,300,101,7,,,0,\n1005,FrosterBaseAttack5,5,1,2,1,1000,-1,600,400,150,60,53,0,0,0,180,0,0,0,0,0,0,0,0,0,0,0,,104,0,0,0,0,0,10000,10000,Froster Attack, Damage to near front &nbsp; Chill enemy(35%),300,101,7,,,0,\n1011,IceBolt1,1,3,2,1,1010,1012,500,300,2500,0,0,0,50,0,230,0,0,0,0,0,0,0,0,0,0,0,,105,1,32,650,1500,0,500,0,Ice Bolt, Fire projectile &nbsp; Chill enemy(40%),300,102,7,,,50,\n1012,IceBolt2,2,3,2,1,1010,1013,500,300,2500,0,0,0,60,0,245,0,0,0,0,0,0,0,0,0,0,0,,105,1,32,650,1500,0,1000,0,Ice Bolt, Fire projectile &nbsp; Chill enemy(40%) <img src='/images/upIcon.png' class='disable' />,300,102,7,,,50,\n1013,IceBolt3,3,3,2,1,1010,1014,500,300,2500,0,0,0,70,0,260,0,0,0,0,0,0,0,0,0,0,0,,106,1,34,650,1500,0,2000,1,Ice Bolt, Fire projectile &nbsp; Chill enemy(45%),300,102,7,,,50,\n1014,IceBolt4,4,3,2,1,1010,1015,500,300,2500,0,0,0,80,0,285,0,0,0,0,0,0,0,0,0,0,0,,106,1,34,650,1500,0,3000,2,Ice Bolt, Fire projectile &nbsp; Chill enemy(45%) <img src='/images/upIcon.png' class='disable' />,300,102,7,,,50,\n1015,IceBolt5,5,3,2,1,1010,-1,500,300,2500,0,0,0,90,0,300,0,0,0,0,0,0,0,0,0,0,0,,107,1,36,650,1500,0,0,0,Ice Bolt, Fire projectile &nbsp; Chill enemy(50%),300,102,7,,,50,\n1021,Healing1,1,8,2,1,1020,1022,500,300,12000,0,0,0,80,0,0,0,0,0,0,0,350,0,0,0,0,0,2000,,0,0,0,0,0,500,0,Healing, Heal 300 HP <img src='/images/upIcon.png' class='disable' />,300,103,,,,50,\n1022,Healing2,2,8,2,1,1020,1023,500,300,12000,0,0,0,95,0,0,0,0,0,0,0,400,0,0,0,0,0,2000,,0,0,0,0,0,1000,0,Healing, Heal 360 HP <img src='/images/upIcon.png' class='disable' /> <img src='/images/plusIcon.png' class='disable' />,300,103,,,,50,\n1023,Healing3,3,8,2,1,1020,1024,500,300,12000,0,0,0,110,0,0,0,0,0,0,0,450,0,0,0,0,0,116,,0,0,0,0,0,2000,1,Healing, Heal 400 HP <img src='/images/upIcon.png' class='disable' /> &nbsp; Every second +2% HP Restore,300,103,,,,50,\n1024,Healing4,4,8,2,1,1020,1025,500,300,12000,0,0,0,125,0,0,0,0,0,0,0,500,0,0,0,0,0,116,,0,0,0,0,0,3000,2,Healing, Heal 460 HP <img src='/images/upIcon.png' class='disable' /> &nbsp; Every second +2% HP Restore <img src='/images/upIcon.png' class='disable' /> <img src='/images/plusIcon.png' class='disable' />,300,103,,,,50,\n1025,Healing5,5,8,2,1,1020,-1,500,300,12000,0,0,0,140,0,0,0,0,0,0,0,550,0,0,20,0,0,117,,0,0,0,0,0,0,0,Healing, Heal 500 HP &nbsp; Every second +3% HP Restore &nbsp; +20% MP Restore,300,103,,,,50,\n1031,FrozenSoul1,1,11,2,1,1030,1032,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,111,,0,0,0,0,0,500,0,Frozen Soul, +3 MP regen <img src='/images/upIcon.png' class='disable' />,300,104,,,,50,\n1032,FrozenSoul2,2,11,2,1,1030,1033,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,112,,0,0,0,0,0,1000,0,Frozen Soul, +5 MP regen <img src='/images/upIcon.png' class='disable' /> <img src='/images/plusIcon.png' class='disable' />,300,104,,,,50,\n1033,FrozenSoul3,3,11,2,1,1030,1034,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,113,,0,0,0,0,0,2000,1,Frozen Soul, +6 MP regen <img src='/images/upIcon.png' class='disable' /> &nbsp; +150 MP,300,104,,,,50,\n1034,FrozenSoul4,4,11,2,1,1030,1035,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,114,,0,0,0,0,0,3000,2,Frozen Soul, +8 MP regen <img src='/images/upIcon.png' class='disable' /> &nbsp; +150 MP <img src='/images/upIcon.png' class='disable' /> <img src='/images/plusIcon.png' class='disable' />,300,104,,,,50,\n1035,FrozenSoul5,5,11,2,1,1030,-1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,115,,0,0,0,0,0,0,0,Frozen Soul, +9 MP regen &nbsp; +300 MP &nbsp; +10% All Resistance ,300,104,,,,50,\n1041,Purify1,1,8,2,2,1040,1042,500,300,20000,0,0,0,120,0,0,0,0,0,0,0,0,0,0,0,0,0,118,,0,0,0,0,0,1000,0,Purify, Every second Dispel oneself &nbsp; Every second +3% HP Restore <img src='/images/upIcon.png' class='disable' />,300,105,,,,100,\n1042,Purify2,2,8,2,2,1040,1043,500,300,20000,0,0,0,120,0,0,0,0,0,0,0,0,0,0,0,0,0,119,,0,0,0,0,0,1500,1,Purify, Every second Dispel oneself &nbsp; Every second +4% HP Restore,300,105,,,,100,\n1043,Purify3,3,8,2,2,1040,1044,500,300,20000,0,0,0,100,0,0,0,0,0,0,0,0,0,0,0,0,0,120,,0,0,0,0,0,2500,2,Purify, Every second Dispel oneself &nbsp; Every second +4% HP Restore <img src='/images/upIcon.png' class='disable' />,300,105,,,,100,\n1044,Purify4,4,8,2,2,1040,1045,500,300,20000,0,0,0,100,0,0,0,0,0,0,0,0,0,0,0,0,0,121,,0,0,0,0,0,3500,3,Purify, Every second Dispel oneself &nbsp; Every second +5% HP Restore,300,105,,,,100,\n1045,Purify5,5,8,2,2,1040,-1,500,300,20000,0,0,0,80,0,0,0,0,0,0,0,0,0,0,0,0,0,122,,0,0,0,0,0,0,0,Purify, Every second Dispel oneself &nbsp; Every second +5% HP Restore,300,105,,,,100,\n1051,IceBlock1,1,8,2,2,1050,1052,500,300,25000,0,0,0,120,0,0,0,0,0,1,100,0,0,0,0,0,0,123,137,0,0,0,0,0,1000,0,Ice Block, Make Immortal(4s) and Freeze oneself(3s) &nbsp; Every second +5% HP Restore <img src='/images/upIcon.png' class='disable' />,300,106,,,,100,\n1052,IceBlock2,2,8,2,2,1050,1053,500,300,25000,0,0,0,120,0,0,0,0,0,1,100,0,0,0,0,0,0,124,137,0,0,0,0,0,1500,1,Ice Block, Make Immortal(4s) and Freeze oneself(3s) &nbsp; Every second +6% HP Restore <img src='/images/upIcon.png' class='disable' /> <img src='/images/plusIcon.png' class='disable' />,300,106,,,,100,\n1053,IceBlock3,3,8,2,2,1050,1054,500,300,25000,0,0,0,100,0,0,0,0,0,1,100,0,0,0,0,0,0,125,137,0,0,0,0,0,2500,2,Ice Block, Make Immortal(4s) and Freeze oneself(3s) &nbsp; Every second +7% HP Restore <img src='/images/upIcon.png' class='disable' /> &nbsp; Every second +5% MP Restore,300,106,,,,100,\n1054,IceBlock4,4,8,2,2,1050,1055,500,300,25000,0,0,0,100,0,0,0,0,0,1,100,0,0,0,0,0,0,126,137,0,0,0,0,0,3500,3,Ice Block, Make Immortal(4s) and Freeze oneself(3s) &nbsp; Every second +8% HP Restore <img src='/images/upIcon.png' class='disable' /> &nbsp; Every second +5% MP Restore <img src='/images/upIcon.png' class='disable' />,300,106,,,,100,\n1055,IceBlock5,5,8,2,2,1050,-1,500,300,25000,0,0,0,80,0,0,0,0,0,1,100,0,0,0,0,0,0,127,137,0,0,0,0,0,0,0,Ice Block, Make Immortal(4s) and Freeze oneself(3s) &nbsp; Every second +10% HP Restore &nbsp; Every second +8% MP Restore,300,106,,,,100,\n1061,ColdSnap1,1,7,2,3,1060,1062,850,600,15000,410,120,0,60,0,110,0,0,0,0,0,0,0,0,0,350,1,,108,0,0,0,0,0,1500,1,Cold Snap, Damage target area(3 times) &nbsp; Chill enemy(70%),250,107,7,,,150,\n1062,ColdSnap2,2,7,2,3,1060,1063,850,600,15000,410,120,0,65,0,115,0,0,0,0,0,0,0,0,0,350,1,,108,0,0,0,0,0,2000,2,Cold Snap, Damage target area(3 times) <img src='/images/upIcon.png' class='disable' />&nbsp; Chill enemy(70%) ,250,107,7,,,150,\n1063,ColdSnap3,3,7,2,3,1060,1064,850,600,15000,430,130,0,65,0,115,0,0,0,0,0,0,0,0,0,350,2,,108,0,0,0,0,0,3000,3,Cold Snap, Damage target area(4 times) &nbsp; Chill enemy(70%),250,107,7,,,150,\n1064,ColdSnap4,4,7,2,3,1060,1065,850,600,15000,430,130,0,70,0,120,0,0,0,0,0,0,0,0,0,350,2,,108,0,0,0,0,0,4000,4,Cold Snap, Damage target area(4 times) <img src='/images/upIcon.png' class='disable' />&nbsp; Chill enemy(70%) ,250,107,7,,,150,\n1065,ColdSnap5,5,7,2,3,1060,-1,850,600,15000,450,140,0,70,0,120,0,0,0,0,0,0,0,0,0,350,3,,108,0,0,0,0,0,0,0,Cold Snap, Damage target area(5 times) &nbsp; Chill enemy(70%),250,107,7,,,150,\n1071,FrozenOrb1,1,6,2,4,1070,1072,800,600,15000,0,120,800,160,0,75,0,0,0,0,0,0,0,0,0,0,0,,101,1,52,280,2000,60,2000,1,Frozen Orb, Fire rolling explosive projectile &nbsp; Chill enemy(20%),300,108,7,1008,1008,200,\n1072,FrozenOrb2,2,6,2,4,1070,1073,800,600,15000,0,120,800,180,0,80,0,0,0,0,0,0,0,0,0,0,0,,101,1,52,280,2000,60,2500,2,Frozen Orb, Fire rolling explosive projectile &nbsp; Chill enemy(20%) <img src='/images/upIcon.png' class='disable' />,300,108,7,1008,1008,200,\n1073,FrozenOrb3,3,6,2,4,1070,1074,800,600,15000,0,130,800,200,0,85,0,0,0,0,0,0,0,0,0,0,0,,102,1,54,280,2000,60,3500,3,Frozen Orb, Fire rolling explosive projectile &nbsp; Chill enemy(25%),300,108,7,1008,1008,200,\n1074,FrozenOrb4,4,6,2,4,1070,1075,800,600,15000,0,130,800,220,0,90,0,0,0,0,0,0,0,0,0,0,0,,102,1,54,280,2000,60,4500,4,Frozen Orb, Fire rolling explosive projectile &nbsp; Chill enemy(25%) <img src='/images/upIcon.png' class='disable' />,300,108,7,1008,1008,200,\n1075,FrozenOrb5,5,6,2,4,1070,-1,800,600,15000,0,140,800,240,0,95,0,0,0,0,0,0,0,0,0,0,0,,103,1,56,280,2000,60,0,0,Frozen Orb, Fire rolling explosive projectile &nbsp; Chill enemy(30%),300,108,7,1008,1008,200,\n1081,IceSpear1,1,3,2,2,1080,1082,550,300,8000,0,0,0,60,0,150,0,0,0,0,0,0,0,0,0,0,0,,102,3,27,500,1000,0,1500,0,Ice Spear, Fire 3 projectile &nbsp; Chill enemy(25%),300,110,7,,,150,\n1082,IceSpear2,2,3,2,2,1080,1083,550,300,8000,0,0,0,65,0,160,0,0,0,0,0,0,0,0,0,0,0,,102,3,27,500,1000,0,2000,1,Ice Spear, Fire 3 projectile <img src='/images/upIcon.png' class='disable' /> &nbsp; Chill enemy(25%) <img src='/images/upIcon.png' class='disable' />,300,110,7,,,150,\n1083,IceSpear3,3,3,2,2,1080,1084,550,300,8000,0,0,0,65,0,160,0,0,0,0,0,0,0,0,0,250,1,,103,3,27,500,1000,0,3000,2,Ice Spear, Fire 3 projectile (2 times)&nbsp; Chill enemy(30%),300,110,7,,,150,\n1084,IceSpear4,4,3,2,2,1080,1085,550,300,8000,0,0,0,70,0,170,0,0,0,0,0,0,0,0,0,250,1,,103,3,27,500,1000,0,4000,3,Ice Spear, Fire 3 projectile (2 times)<img src='/images/upIcon.png' class='disable' /> &nbsp; Chill enemy(30%) <img src='/images/upIcon.png' class='disable' />,300,110,7,,,150,\n1085,IceSpear5,5,3,2,2,1080,-1,550,300,8000,0,0,0,70,0,170,0,0,0,0,0,0,0,0,0,250,2,,104,3,27,500,1000,0,0,0,Ice Spear, Fire 3 projectile (3 times)&nbsp; Chill enemy(35%),300,110,7,,,150,\n1091,Freezer1,1,11,2,5,1090,1092,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,128,,0,0,0,0,0,10000,10000,Freezer, +5 Magic <img src='/images/upIcon.png' class='disable' /> &nbsp;   +10% Frost Damage rate <img src='/images/upIcon.png' class='disable' />,0,109,,,,0,\n1092,Freezer2,2,11,2,5,1090,1093,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,129,,0,0,0,0,0,10000,10000,Freezer, +8 Magic <img src='/images/upIcon.png' class='disable' /> &nbsp;   +14% Frost Damage rate <img src='/images/upIcon.png' class='disable' /> <img src='/images/plusIcon.png' class='disable' />,0,109,,,,0,\n1093,Freezer3,3,11,2,5,1090,1094,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,130,,0,0,0,0,0,10000,10000,Freezer, +10 Magic <img src='/images/upIcon.png' class='disable' /> &nbsp;   +17% Frost Damage rate <img src='/images/upIcon.png' class='disable' /> &nbsp;  Can Make Freezing When Hit Chill Enemy(15%) <img src='/images/upIcon.png' class='disable' />,0,109,,,,0,\n1094,Freezer4,4,11,2,5,1090,1095,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,131,,0,0,0,0,0,10000,10000,Freezer, +13 Magic <img src='/images/upIcon.png' class='disable' /> &nbsp;   +21% Frost Damage rate <img src='/images/upIcon.png' class='disable' /> &nbsp;  Can Make Freezing When Hit Chill Enemy(20%) <img src='/images/upIcon.png' class='disable' /> <img src='/images/plusIcon.png' class='disable' />,0,109,,,,0,\n1095,Freezer5,5,11,2,5,1090,-1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,132,,0,0,0,0,0,10000,10000,Freezer, +15 Magic &nbsp;   +25% Frost Damage rate &nbsp;  +7.5% Move Speed &nbsp;  Can Make Freezing When Hit Chill Enemy(25%),0,109,,,,0,\n2001,MysterBaseAttack1,1,1,3,1,2000,2002,600,400,150,60,45,0,0,0,0,140,1,20,0,0,0,0,0,0,0,0,,,0,0,0,0,0,10000,10000,Myster Attack, Damage to near front &nbsp; Burn enemy MP(20%),300,201,8,,,0,\n2002,MysterBaseAttack2,2,1,3,1,2000,2003,600,400,150,60,45,0,0,0,0,150,1,20,0,0,0,0,0,0,0,0,,,0,0,0,0,0,10000,10000,Myster Attack, Damage to near front &nbsp; Burn enemy MP(20%) <img src='/images/upIcon.png' class='disable' />,300,201,8,,,0,\n2003,MysterBaseAttack3,3,1,3,1,2000,2004,600,400,150,60,47,0,0,0,0,160,1,25,0,0,0,0,0,0,0,0,,,0,0,0,0,0,10000,10000,Myster Attack, Damage to near front &nbsp; Burn enemy MP(25%),300,201,8,,,0,\n2004,MysterBaseAttack4,4,1,3,1,2000,2005,600,400,150,60,47,0,0,0,0,170,1,25,0,0,0,0,0,0,0,0,,,0,0,0,0,0,10000,10000,Myster Attack, Damage to near front &nbsp; Burn enemy MP(25%) <img src='/images/upIcon.png' class='disable' />,300,201,8,,,0,\n2005,MysterBaseAttack5,5,1,3,1,2000,-1,600,400,150,60,50,0,0,0,0,180,1,30,0,0,0,0,0,0,0,0,,,0,0,0,0,0,10000,10000,Myster Attack, Damage to near front &nbsp; Burn enemy MP(30%),300,201,8,,,0,\n2011,ArcaneBolt1,1,3,3,1,2010,2012,500,300,2400,0,0,0,45,0,0,230,1,20,0,0,0,0,0,0,0,0,,,1,30,650,1500,0,500,0,Arcane Bolt, Fire projectile &nbsp; Burn enemy MP(20%),300,202,8,,,50,\n2012,ArcaneBolt2,2,3,3,1,2010,2013,500,300,2400,0,0,0,55,0,0,245,1,20,0,0,0,0,0,0,0,0,,,1,30,650,1500,0,1000,0,Arcane Bolt, Fire projectile &nbsp; Burn enemy MP(20%) <img src='/images/upIcon.png' class='disable' />,300,202,8,,,50,\n2013,ArcaneBolt3,3,3,3,1,2010,2014,500,300,2400,0,0,0,65,0,0,260,1,25,0,0,0,0,0,0,0,0,,,1,32,650,1500,0,2000,1,Arcane Bolt, Fire projectile &nbsp; Burn enemy MP(25%),300,202,8,,,50,\n2014,ArcaneBolt4,4,3,3,1,2010,2015,500,300,2400,0,0,0,75,0,0,285,1,25,0,0,0,0,0,0,0,0,,,1,32,650,1500,0,3000,2,Arcane Bolt, Fire projectile &nbsp; Burn enemy MP(25%) <img src='/images/upIcon.png' class='disable' />,300,202,8,,,50,\n2015,ArcaneBolt5,5,3,3,1,2010,-1,500,300,2400,0,0,0,85,0,0,300,1,30,0,0,0,0,0,0,0,0,,,1,35,650,1500,0,0,0,Arcane Bolt, Fire projectile &nbsp; Burn enemy MP(30%),300,202,8,,,50,\n2021,ArcaneCloak1,1,11,3,1,2020,2022,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,201,,0,0,0,0,0,500,0,Arcane Cloak, +10% All Resistance <img src='/images/upIcon.png' class='disable' /> <img src='/images/plusIcon.png' class='disable' />,0,203,,,,50,\n2022,ArcaneCloak2,2,11,3,1,2020,2023,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,202,,0,0,0,0,0,1000,0,Arcane Cloak, +11% All Resistance <img src='/images/upIcon.png' class='disable' /> &nbsp; +5% Arcane Resistance <img src='/images/plusIcon.png' class='disable' />,0,203,,,,50,\n2023,ArcaneCloak3,3,11,3,1,2020,2024,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,203,,0,0,0,0,0,2000,1,Arcane Cloak, +12% All Resistance <img src='/images/upIcon.png' class='disable' /> &nbsp; +5% Arcane Resistance &nbsp; +5% Frost Resistance <img src='/images/plusIcon.png' class='disable' />,0,203,,,,50,\n2024,ArcaneCloak4,4,11,3,1,2020,2025,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,204,,0,0,0,0,0,3000,2,Arcane Cloak, +13% All Resistance <img src='/images/upIcon.png' class='disable' /> &nbsp; +5% Arcane Resistance <img src='/images/upIcon.png' class='disable' /> &nbsp; +5% Frost Resistance <img src='/images/upIcon.png' class='disable' /> &nbsp; +5% Fire Resistance <img src='/images/upIcon.png' class='disable' />,0,203,,,,50,\n2025,ArcaneCloak5,5,11,3,1,2020,-1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,205,,0,0,0,0,0,0,0,Arcane Cloak, +15% All Resistance &nbsp; + 10% Arcane Resistance &nbsp; +10% Frost Resistance &nbsp; +10% Fire Resistance,0,203,,,,50,\n2031,ArcaneMissile1,1,3,3,2,2030,2032,500,300,6000,0,0,0,110,0,0,200,1,15,0,0,0,0,0,0,0,0,,,3,25,500,1500,0,1000,0,Arcane Missile, Fire 3 projectile &nbsp; Burn enemy MP(15%),300,204,8,,,100,\n2032,ArcaneMissile2,2,3,3,2,2030,2033,500,300,6000,0,0,0,130,0,0,220,1,15,0,0,0,0,0,0,0,0,,,3,25,500,1500,0,1500,1,Arcane Missile, Fire 3 projectile <img src='/images/upIcon.png' class='disable' /> &nbsp; Burn enemy MP(15%),300,204,8,,,100,\n2033,ArcaneMissile3,3,3,3,2,2030,2034,500,300,6000,0,0,0,150,0,0,220,1,15,0,0,0,0,0,0,0,0,,,4,25,500,1500,0,2500,2,Arcane Missile, Fire 4 projectile &nbsp; Burn enemy MP(15%),300,204,8,,,100,\n2034,ArcaneMissile4,4,3,3,2,2030,2035,500,300,6000,0,0,0,170,0,0,230,1,15,0,0,0,0,0,0,0,0,,,4,25,500,1500,0,3500,3,Arcane Missile, Fire 4 projectile <img src='/images/upIcon.png' class='disable' /> &nbsp; Burn enemy MP(15%),300,204,8,,,100,\n2035,ArcaneMissile5,5,3,3,2,2030,-1,500,300,6000,0,0,0,190,0,0,230,1,15,0,0,0,0,0,0,0,0,,,5,25,500,1500,0,0,0,Arcane Missile, Fire 5 projectile &nbsp; Burn enemy MP(15%),300,204,8,,,100,\n2041,Silence1,1,7,3,2,2040,2042,500,300,16000,360,110,0,110,0,0,0,0,0,0,0,0,0,0,0,0,0,,206,0,0,0,0,0,1000,0,Silence, Silence enemy,300,205,,1009,,100,\n2042,Silence2,2,7,3,2,2040,2043,500,300,16000,360,110,0,130,0,0,0,0,0,0,0,0,0,0,0,0,0,,207,0,0,0,0,0,1500,1,Silence, Silence enemy,300,205,,1009,,100,\n2043,Silence3,3,7,3,2,2040,2044,500,300,14000,380,120,0,150,0,0,0,0,0,0,0,0,0,0,0,0,0,,207,0,0,0,0,0,2500,2,Silence, Silence enemy,300,205,,1009,,100,\n2044,Silence4,4,7,3,2,2040,2045,500,300,14000,380,120,0,170,0,0,0,0,0,0,0,0,0,0,0,0,0,,208,0,0,0,0,0,3500,3,Silence, Silence enemy,300,205,,1009,,100,\n2045,Silence5,5,7,3,2,2040,-1,500,300,12000,400,130,0,190,0,0,0,0,0,0,0,0,0,0,0,0,0,,208,0,0,0,0,0,0,0,Silence, Silence enemy,300,205,,1009,,100,\n2061,Blink1,1,10,3,3,2060,2062,500,300,11000,200,40,0,100,0,0,0,0,0,0,0,0,0,0,0,0,0,,,0,0,0,0,0,1500,1,Blink, Move direct to target position,300,207,,,,150,\n2062,Blink2,2,10,3,3,2060,2063,500,300,11000,225,40,0,100,0,0,0,0,0,0,0,0,0,0,0,0,0,,,0,0,0,0,0,2000,2,Blink, Move direct to target position,300,207,,,,150,\n2063,Blink3,3,10,3,3,2060,2064,500,300,10000,225,40,0,90,0,0,0,0,0,0,0,0,0,0,0,0,0,,,0,0,0,0,0,3000,3,Blink, Move direct to target position,300,207,,,,150,\n2064,Blink4,4,10,3,3,2060,2065,500,300,10000,250,40,0,90,0,0,0,0,0,0,0,0,0,0,0,0,0,,,0,0,0,0,0,4000,4,Blink, Move direct to target position,300,207,,,,150,\n2065,Blink5,5,10,3,3,2060,-1,500,300,9000,250,40,0,80,0,0,0,0,0,0,0,0,0,0,0,0,0,,,0,0,0,0,0,0,0,Blink, Move direct to target position,300,207,,,,150,\n2071,ArcaneBlast1,1,7,3,3,2070,2072,800,600,14000,370,110,0,110,0,0,400,1,20,0,0,0,0,0,0,0,0,,,0,0,0,0,0,1500,1,Arcane Blast, Damage to target area &nbsp; Burn enemy MP(20%),300,208,8,,,150,\n2072,ArcaneBlast2,2,7,3,3,2070,2073,800,600,14000,370,110,0,135,0,0,425,1,20,0,0,0,0,0,0,0,0,,,0,0,0,0,0,2000,2,Arcane Blast, Damage to target area &nbsp; Burn enemy MP(20%) <img src='/images/upIcon.png' class='disable' />,300,208,8,,,150,\n2073,ArcaneBlast3,3,7,3,3,2070,2074,800,600,14000,410,120,0,160,0,0,450,1,25,0,0,0,0,0,0,0,0,,,0,0,0,0,0,3000,3,Arcane Blast, Damage to target area &nbsp; Burn enemy MP(25%),300,208,8,,,150,\n2074,ArcaneBlast4,4,7,3,3,2070,2075,800,600,14000,410,120,0,185,0,0,475,1,25,0,0,0,0,0,0,0,0,,,0,0,0,0,0,4000,4,Arcane Blast, Damage to target area &nbsp; Burn enemy MP(25%) <img src='/images/upIcon.png' class='disable' />,300,208,8,,,150,\n2075,ArcaneBlast5,5,7,3,3,2070,-1,800,600,14000,450,130,0,210,0,0,500,1,30,0,0,0,0,0,0,0,0,,,0,0,0,0,0,0,0,Arcane Blast, Damage to target area &nbsp; Burn enemy MP(30%),300,208,8,,,150,\n2081,Haste1,1,8,3,3,2080,2082,500,300,35000,0,0,0,110,0,0,0,0,0,0,0,0,0,0,0,0,0,211,,0,0,0,0,0,1500,1,Haste, +20% Move and Cast speed <img src='/images/upIcon.png' class='disable' />,300,209,,,,150,\n2082,Haste2,2,8,3,3,2080,2083,500,300,35000,0,0,0,135,0,0,0,0,0,0,0,0,0,0,0,0,0,212,,0,0,0,0,0,2000,2,Haste, +23% Move and Cast speed <img src='/images/upIcon.png' class='disable' />,300,209,,,,150,\n2083,Haste3,3,8,3,3,2080,2084,500,300,32000,0,0,0,160,0,0,0,0,0,0,0,0,0,0,0,0,0,213,,0,0,0,0,0,3000,3,Haste, +25% Move and Cast speed <img src='/images/upIcon.png' class='disable' />,300,209,,,,150,\n2084,Haste4,4,8,3,3,2080,2085,500,300,32000,0,0,0,185,0,0,0,0,0,0,0,0,0,0,0,0,0,214,,0,0,0,0,0,4000,4,Haste, +28% Move and Cast speed <img src='/images/upIcon.png' class='disable' />,300,209,,,,150,\n2085,Haste5,5,8,3,3,2080,-1,500,300,30000,0,0,0,210,0,0,0,0,0,0,0,0,0,0,0,0,0,215,,0,0,0,0,0,0,0,Haste, +30% Move and Cast speed <img src='/images/upIcon.png' class='disable' />,300,209,,,,150,\n2091,Mystic1,1,11,3,5,2090,2092,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,216,,0,0,0,0,0,10000,10000,Mystic, +2 All Stat <img src='/images/upIcon.png' class='disable' /> &nbsp;   +10% All Damage rate <img src='/images/upIcon.png' class='disable' />,0,210,,,,0,\n2092,Mystic2,2,11,3,5,2090,2093,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,217,,0,0,0,0,0,10000,10000,Mystic, +4 All Stat <img src='/images/upIcon.png' class='disable' /> &nbsp;   +13% All Damage rate <img src='/images/upIcon.png' class='disable' /> <img src='/images/plusIcon.png' class='disable' />,0,210,,,,0,\n2093,Mystic3,3,11,3,5,2090,2094,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,218,,0,0,0,0,0,10000,10000,Mystic, +5 All Stat <img src='/images/upIcon.png' class='disable' /> &nbsp;   +15% All Damage rate <img src='/images/upIcon.png' class='disable' /> &nbsp;  Add Random Buff When Use Arcane Spell <img src='/images/upIcon.png' class='disable' /> ,0,210,,,,0,\n2094,Mystic4,4,11,3,5,2090,2095,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,219,,0,0,0,0,0,10000,10000,Mystic, +7 All Stat <img src='/images/upIcon.png' class='disable' /> &nbsp;   +18% All Damage rate <img src='/images/upIcon.png' class='disable' /> &nbsp;  Add Random Buff When Use Arcane Spell <img src='/images/upIcon.png' class='disable' />,0,210,,,,0,\n2095,Mystic5,5,11,3,5,2090,-1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,220,,0,0,0,0,0,10000,10000,Mystic, +8 All Stat &nbsp;   +20% All Damage rate &nbsp;  +15% Cooldown Reduce rate &nbsp;  Add Random Buff When Use Arcane Spell,0,210,,,,0,\n",buffGroupData:"index,name,clientName,clientDesc,isBuff,buff1,buff2,buff3,buff4,buff5,buff6,buff7,buff8,buff9,buff10,buffLifeTime,buffApplyRate,buffIcon,buffEffectGroup\n1,Ignite20,Ignite, Damage 3% of Max HP,0,1,,,,,,,,,,5000,20,515,5\n2,Ignite30,Ignite, Damage 3% of Max HP,0,1,,,,,,,,,,5000,30,515,5\n3,Ignite40,Ignite, Damage 3% of Max HP,0,1,,,,,,,,,,5000,40,515,5\n4,Ignite50,Ignite, Damage 3% of Max HP,0,1,,,,,,,,,,5000,50,515,5\n5,Ignite100,Ignite, Damage 3% of Max HP,0,1,,,,,,,,,,5000,100,515,5\n6,BurningSoul1,BurningSoul, +4 HP regen,1,22,,,,,,,,,,0,100,501,1010\n7,BurningSoul2,BurningSoul, +6 HP regen,1,23,,,,,,,,,,0,100,501,1010\n8,BurningSoul3,BurningSoul, +7 HP regen &nbsp; +300 HP,1,24,3,,,,,,,,,0,100,501,1010\n9,BurningSoul4,BurningSoul, +9 HP regen &nbsp; +300 HP,1,25,3,,,,,,,,,0,100,501,1010\n10,BurningSoul5,BurningSoul, +10 HP regen &nbsp; +500 HP &nbsp; +10% Damage rate,1,26,4,82,,,,,,,,0,100,501,1010\n11,InnerFire1,InnerFire, +20% Damage rate &nbsp; Make Ignite oneself,1,86,,,,,,,,,,10000,100,502,1001\n12,InnerFire2,InnerFire, +27% Damage rate &nbsp; Make Ignite oneself,1,87,,,,,,,,,,10000,100,502,1001\n13,InnerFire3,InnerFire, +30% Damage rate &nbsp; Make Ignite oneself &nbsp; +10% Fire resistance,1,88,123,,,,,,,,,10000,100,502,1001\n14,InnerFire4,InnerFire, +37% Damage rate &nbsp; Make Ignite oneself &nbsp; +10% Fire resistance,1,89,123,,,,,,,,,10000,100,502,1001\n15,InnerFire5,InnerFire, +40% Damage rate &nbsp; Make Ignite oneself &nbsp; +15% Fire resistance &nbsp; +3 HP regen,1,90,124,21,,,,,,,,10000,100,502,1001\n16,InnerFireIgnite,Ignite, Damage 3% of Max HP,0,1,,,,,,,,,,10000,100,515,5\n17,Fury1,Fury, +5% Move and Cast speed,1,32,45,,,,,,,,,0,100,503,1002\n18,Fury2,Fury, +8% Move and Cast speed,1,33,46,,,,,,,,,0,100,503,1002\n19,Fury3,Fury, +10% Move and Cast speed &nbsp; If ignite additional +10% Move and Cast speed,1,35,47,57,59,,,,,,,0,100,503,1002\n20,Fury4,Fury, +13% Move and Cast speed &nbsp; If ignite additional +10% Move and Cast speed,1,37,49,57,59,,,,,,,0,100,503,1002\n21,Fury5,Fury, +15% Move and Cast speed &nbsp; If ignite additional +15% Move and Cast speed &nbsp; +10% Cooldown reduce rate,1,38,50,58,60,113,,,,,,0,100,503,1002\n22,Pyromaniac1,Pyromaniac, +5 Power &nbsp;   +10% Fire Damage rate,1,63,91,,,,,,,,,0,100,504,101\n23,Pyromaniac2,Pyromaniac, +8 Power &nbsp;   +14% Fire Damage rate,1,65,92,,,,,,,,,0,100,504,101\n24,Pyromaniac3,Pyromaniac, +10 Power &nbsp;   +17% Fire Damage rate &nbsp;  3% Damage Rate Per 10% Life Loss,1,66,93,101,,,,,,,,0,100,504,101\n25,Pyromaniac4,Pyromaniac, +13 Power &nbsp;   +21% Fire Damage rate &nbsp;  4% Damage Rate Per 10% Life Loss,1,67,94,102,,,,,,,,0,100,504,101\n26,Pyromaniac5,Pyromaniac, +15 Power &nbsp;   +25% Fire Damage rate &nbsp;  +15% Cast Speed &nbsp;  +5% Damage Rate Per 10% Life Loss,1,68,95,103,50,,,,,,,0,100,504,101\n101,Chill20,Chill, Decrease 30% Move and Cast Speed,0,2,,,,,,,,,,3000,20,516,2\n102,Chill25,Chill, Decrease 30% Move and Cast Speed,0,2,,,,,,,,,,3000,25,516,2\n103,Chill30,Chill, Decrease 30% Move and Cast Speed,0,2,,,,,,,,,,3000,30,516,2\n104,Chill35,Chill, Decrease 30% Move and Cast Speed,0,2,,,,,,,,,,3000,35,516,2\n105,Chill40,Chill, Decrease 30% Move and Cast Speed,0,2,,,,,,,,,,3000,40,516,2\n106,Chill45,Chill, Decrease 30% Move and Cast Speed,0,2,,,,,,,,,,3000,45,516,2\n107,Chill50,Chill, Decrease 30% Move and Cast Speed,0,2,,,,,,,,,,3000,50,516,2\n108,Chill70,Chill, Decrease 30% Move and Cast Speed,0,2,,,,,,,,,,3000,70,516,2\n109,Chill85,Chill, Decrease 30% Move and Cast Speed,0,2,,,,,,,,,,3000,85,516,2\n110,Chill100,Chill, Decrease 30% Move and Cast Speed,0,2,,,,,,,,,,3000,100,516,2\n111,FrozenSoul1,FrozenSoul, +3 MP regen,1,27,,,,,,,,,,0,100,505,1011\n112,FrozenSoul2,FrozenSoul, +5 MP regen,1,28,,,,,,,,,,0,100,505,1011\n113,FrozenSoul3,FrozenSoul, +6 MP regen &nbsp; +150 MP,1,29,5,,,,,,,,,0,100,505,1011\n114,FrozenSoul4,FrozenSoul, +8 MP regen &nbsp; +150 MP,1,30,5,,,,,,,,,0,100,505,1011\n115,FrozenSoul5,FrozenSoul, +9 MP regen &nbsp; +300 MP &nbsp; +10% All Resistance ,1,31,6,115,,,,,,,,0,100,505,1011\n116,Heal3,Heal, +2% HP Restore,1,8,,,,,,,,,,5000,100,514,1012\n117,Heal5,Heal, +3% HP Restore,1,9,,,,,,,,,,5000,100,514,1012\n118,Purify1,Purify, Purify oneself &nbsp; +3% HP Restore,1,9,110,,,,,,,,,3000,100,506,1012\n119,Purify2,Purify, Purify oneself &nbsp; +4% HP Restore,1,10,110,,,,,,,,,3000,100,506,1012\n120,Purify3,Purify, Purify oneself &nbsp; +4% HP Restore,1,10,110,,,,,,,,,4000,100,506,1012\n121,Purify4,Purify, Purify oneself &nbsp; +5% HP Restore,1,11,110,,,,,,,,,4000,100,506,1012\n122,Purify5,Purify, Purify oneself &nbsp; +5% HP Restore,1,11,110,,,,,,,,,5000,100,506,1012\n123,IceBlock1,IceBlock, Immortal &nbsp; +5% HP Restore,1,145,11,,,,,,,,,4000,100,507,1\n124,IceBlock2,IceBlock, Immortal &nbsp; +6% HP Restore,1,145,12,,,,,,,,,4000,100,507,1\n125,IceBlock3,IceBlock, Immortal &nbsp; +7% HP and MP Restore &nbsp; +5% MP Restore,1,145,13,18,,,,,,,,4000,100,507,1\n126,IceBlock4,IceBlock, Immortal &nbsp; +8% HP and MP Restore &nbsp; +5% MP Restore,1,145,14,18,,,,,,,,4000,100,507,1\n127,IceBlock5,IceBlock, Immortal &nbsp; +10% HP and MP Restore &nbsp; +8% MP Restore,1,145,15,19,,,,,,,,4000,100,507,1\n128,Freezer1,Freezer, +5 Magic &nbsp;   +10% Frost Damage rate,1,71,96,,,,,,,,,0,100,508,102\n129,Freezer2,Freezer, +8 Magic &nbsp;   +14% Frost Damage rate,1,73,97,,,,,,,,,0,100,508,102\n130,Freezer3,Freezer, +10 Magic &nbsp;   +17% Frost Damage rate &nbsp;  Can Make Freezing When Hit Chill Enemy(15%),1,74,98,104,,,,,,,,0,100,508,102\n131,Freezer4,Freezer, +13 Magic &nbsp;   +21% Frost Damage rate &nbsp;  Can Make Freezing When Hit Chill Enemy(20%),1,75,99,105,,,,,,,,0,100,508,102\n132,Freezer5,Freezer, +15 Magic &nbsp;   +25% Frost Damage rate &nbsp;  +7.5% Move Speed &nbsp;  Can Make Freezing When Hit Chill Enemy(25%),1,76,100,106,34,,,,,,,0,100,508,102\n133,Freeze1,Freeze, Frozen &nbsp; Can`t do anything!!!,0,108,,,,,,,,,,1000,15,517,3\n134,Freeze2,Freeze, Frozen &nbsp; Can`t do anything!!!,0,108,,,,,,,,,,1000,20,517,3\n135,Freeze3,Freeze, Frozen &nbsp; Can`t do anything!!!,0,108,,,,,,,,,,1000,25,517,3\n136,Freeze5,Freeze, Frozen &nbsp; Can`t do anything!!!,0,108,,,,,,,,,,1000,100,517,3\n137,IceBlockFreeze,Freeze, Frozen &nbsp; Can`t do anything!!!,0,109,,,,,,,,,,3000,100,517,3\n201,ArcaneCloak1,ArcaneCloak, +10% All Resistance,1,115,,,,,,,,,,0,100,509,1005\n202,ArcaneCloak2,ArcaneCloak, +11% All Resistance &nbsp; +5% Arcane Resistance,1,116,125,,,,,,,,,0,100,509,1005\n203,ArcaneCloak3,ArcaneCloak, +12% All Resistance &nbsp; +5% Arcane Resistance &nbsp; +5% Frost Resistance,1,117,125,127,,,,,,,,0,100,509,1005\n204,ArcaneCloak4,ArcaneCloak, +13% All Resistance &nbsp; +5% Arcane Resistance &nbsp; +5% Frost Resistance &nbsp; +5% Fire Resistance,1,118,125,127,122,,,,,,,0,100,509,1005\n205,ArcaneCloak5,ArcaneCloak, +15% All Resistance &nbsp; + 10% Arcane Resistance &nbsp; +10% Frost Resistance &nbsp; +10% Fire Resistance,1,119,126,128,123,,,,,,,0,100,509,1005\n206,Silence1,Silence, Silenced &nbsp; Can`t cast spell!!!,0,129,,,,,,,,,,3000,100,518,4\n207,Silence2,Silence, Silenced &nbsp; Can`t cast spell!!!,0,129,,,,,,,,,,4000,100,518,4\n208,Silence3,Silence, Silenced &nbsp; Can`t cast spell!!!,0,129,,,,,,,,,,5000,100,518,4\n209,Dispel,Dispel, Dispel Buff,0,112,,,,,,,,,,500,100,519,1013\n210,DispelSelf,Dispel, Dispel Debuff,0,111,,,,,,,,,,500,100,513,1013\n211,Haste1,Haste, +15% Move and Cast speed,1,40,52,,,,,,,,,10000,100,510,1006\n212,Haste2,Haste, +18% Move and Cast speed,1,41,53,,,,,,,,,10000,100,510,1006\n213,Haste3,Haste, +20% Move and Cast speed,1,42,54,,,,,,,,,15000,100,510,1006\n214,Haste4,Haste, +23% Move and Cast speed,1,43,55,,,,,,,,,15000,100,510,1006\n215,Haste5,Haste, +25% Move and Cast speed,1,44,56,,,,,,,,,15000,100,510,1006\n216,Mystic1,Mystic, +2 All Stat &nbsp;   +10% All Damage rate,1,61,69,77,82,,,,,,,0,100,511,103\n217,Mystic2,Mystic, +4 All Stat &nbsp;   +13% All Damage rate,1,62,70,78,83,,,,,,,0,100,511,103\n218,Mystic3,Mystic, +5 All Stat &nbsp;   +15% All Damage rate &nbsp;  Add Random Buff When Use Arcane Spell ,1,63,71,79,84,130,,,,,,0,100,511,103\n219,Mystic4,Mystic, +7 All Stat &nbsp;   +18% All Damage rate &nbsp;  Add Random Buff When Use Arcane Spell,1,64,72,80,85,131,,,,,,0,100,511,103\n220,Mystic5,Mystic, +8 All Stat &nbsp;   +20% All Damage rate &nbsp;  +15% Cooldown Reduce rate &nbsp;  Add Random Buff When Use Arcane Spell,1,65,73,81,86,132,114,,,,,0,100,511,103\n221,RandomBuff1-1,MysticBuff1, +50 HP Restore,1,133,,,,,,,,,,6000,100,511,1014\n222,RandomBuff1-2,MysticBuff1, +30 MP Restore,1,134,,,,,,,,,,6000,100,511,1015\n223,RandomBuff1-3,MysticBuff1, +15% Damage Rate,1,135,,,,,,,,,,6000,100,511,1016\n224,RandomBuff1-4,MysticBuff1, +5% All Resistance,1,136,,,,,,,,,,6000,100,511,1017\n225,RandomBuff1-5,MysticBuff1, +10% Move and Cast speed,1,35,47,,,,,,,,,6000,100,511,1018\n226,RandomBuff2-1,MysticBuff2, +65 HP Restore,1,137,,,,,,,,,,7000,100,511,1014\n227,RandomBuff2-2,MysticBuff2, +40 MP Restore,1,138,,,,,,,,,,7000,100,511,1015\n228,RandomBuff2-3,MysticBuff2, +30% Damage Rate,1,139,,,,,,,,,,7000,100,511,1016\n229,RandomBuff2-4,MysticBuff2, +10% All Resistance,1,140,,,,,,,,,,7000,100,511,1017\n230,RandomBuff2-5,MysticBuff2, +15% Move and Cast speed,1,36,48,,,,,,,,,7000,100,511,1018\n231,RandomBuff3-1,MysticBuff3, +80 HP Restore,1,141,,,,,,,,,,8000,100,511,1014\n232,RandomBuff3-2,MysticBuff3, +50 MP Restore,1,142,,,,,,,,,,8000,100,511,1015\n233,RandomBuff3-3,MysticBuff3, +45% Damage Rate,1,143,,,,,,,,,,8000,100,511,1016\n234,RandomBuff3-4,MysticBuff3, +15% All Resistance,1,144,,,,,,,,,,8000,100,511,1017\n235,RandomBuff3-5,MysticBuff3, +20% Move and Cast speed,1,38,50,,,,,,,,,8000,100,511,1018\n1000,StartBuff,Immortal, Immortal ,1,145,146,147,,,,,,,,5000,100,512,1\n1001,LevelUPBuff,LevelUp, Level Up!!! ,1,146,147,,,,,,,,,1000,100,512,1019\n1002,EnvImmortal,Immortal, Immortal &nbsp;   You are totaly safe in here!,1,145,,,,,,,,,,0,100,512,1021\n1003,EnvPortal,,,1,149,145,,,,,,,,,1500,100,1002,1020\n1100,objBuffHeal,HP Heal, +500 HP Restore &nbsp;   +300 MP Restore,1,150,151,,,,,,,,,300,100,514,1011\n1101,objBuffDamage,Damage Buff, +50% Damage Rate,1,152,,,,,,,,,,10000,100,502,1001\n1102,objBuffSpeed,Speed, +25% Move and Cast speed,1,42,54,,,,,,,,,10000,100,510,1006\n1103,objBuffDefence,Defence, +30% All Resistance,1,153,,,,,,,,,,15000,100,509,1005\n1104,objBuffImmortal,Immortal, Immortal ,1,145,,,,,,,,,,15000,100,512,1\n2000,onlyForEffect,,,1,148,,,,,,,,,,500,100,1002,1012\n",chestData:"index,grade,HP,imgData,provideGold,provideJewel,minGoldCount,maxGoldCount,minGoldAmount,maxGoldAmount,minJewelCount,maxJewelCount,minJewelAmount,maxJewelAmount,minSkillCount,maxSkillCount,SkillIndex1,SkillDropRate1,SkillIndex2,SkillDropRate2,SkillIndex3,SkillDropRate3,SkillIndex4,SkillDropRate4,SkillIndex5,SkillDropRate5,SkillIndex6,SkillDropRate6,SkillIndex7,SkillDropRate7,SkillIndex7,SkillDropRate7,SkillIndex8,SkillDropRate8,SkillIndex9,SkillDropRate9,SkillIndex10,SkillDropRate10,SkillIndex11,SkillDropRate11,SkillIndex12,SkillDropRate12,SkillIndex13,SkillDropRate13,SkillIndex14,SkillDropRate14,SkillIndex15,SkillDropRate15,SkillIndex16,SkillDropRate16,SkillIndex17,SkillDropRate17,SkillIndex18,SkillDropRate18,SkillIndex19,SkillDropRate19,SkillIndex20,SkillDropRate20\n1,1,2000,108,0,0,5,7,80,100,0,0,1,1,1,1,21,75,31,100,41,75,51,50,61,50,71,50,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\n2,1,2000,108,0,0,5,7,80,100,0,0,1,1,1,1,1011,75,1021,100,1031,100,1041,75,1051,75,1061,50,1081,75,,,,,,,,,,,,,,,,,,,,,,,,,,,,\n3,1,2000,108,0,0,5,7,80,100,0,0,1,1,1,1,2011,75,2021,50,2031,75,2041,50,2061,50,2071,50,2081,50,,,,,,,,,,,,,,,,,,,,,,,,,,,,\n4,2,2500,109,0,0,6,7,80,120,0,0,1,1,1,1,41,75,51,50,61,50,71,50,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\n5,2,2500,109,0,0,6,7,80,120,0,0,1,1,1,1,1041,75,1051,75,1061,50,1081,75,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\n6,2,2500,109,0,0,6,7,80,120,0,0,1,1,1,1,2031,75,2041,50,2061,50,2071,50,2081,50,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\n7,3,3500,110,0,0,7,8,100,200,0,1,1,1,1,1,41,75,51,50,61,50,71,50,81,25,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\n8,3,3500,110,0,0,7,8,100,200,0,1,1,1,1,1,1041,75,1051,75,1061,50,1071,50,1081,75,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\n9,3,3500,110,0,0,7,8,100,200,0,1,1,1,1,1,2031,75,2041,50,2061,50,2071,50,2081,50,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\n10,4,4500,111,0,0,7,9,100,120,0,1,1,1,1,2,41,75,51,50,61,50,71,50,81,25,1041,75,1051,75,1061,50,1071,50,1081,75,,,,,,,,,,,,,,,,,,,,,,\n11,4,4500,111,0,0,7,9,100,120,0,1,1,1,1,2,1041,75,1051,75,1061,50,1071,50,2031,75,2041,50,2061,50,2071,50,2081,50,1081,75,,,,,,,,,,,,,,,,,,,,,,\n12,4,4500,111,0,0,7,9,100,120,0,1,1,1,1,2,2031,75,2041,50,2061,50,2071,50,2081,50,41,75,51,50,61,50,71,50,81,50,,,,,,,,,,,,,,,,,,,,,,\n13,5,6000,112,0,0,8,10,100,150,1,2,1,1,1,2,61,50,71,50,81,25,1061,50,1071,50,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\n14,5,6000,112,0,0,8,10,100,150,1,2,1,1,1,2,1061,50,1071,50,2061,50,2071,50,2081,50,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\n15,5,6000,112,0,0,8,10,100,150,1,2,1,1,1,2,2061,50,2071,50,2081,50,61,50,71,50,81,50,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\n",obstacleData:"index,type,id,posX,posY,radius,treeImgRadius,imgData\n1,1,T1,896,1347,15,45,103\n2,1,T2,1095,1614,25,75,102\n3,1,T3,2653,1891,25,75,102\n4,1,T4,351,2149,25,75,102\n5,1,T5,2575,1035,25,75,102\n6,1,T6,1370,2882,25,75,102\n7,1,T7,1303,2346,25,75,102\n8,1,T8,598,1929,25,75,102\n9,1,T9,798,883,25,75,102\n10,1,T10,2537,1050,25,75,102\n11,1,T11,341,1201,25,75,102\n12,1,T12,2069,682,25,75,102\n13,1,T13,1299,561,25,75,102\n14,1,T14,1206,1461,25,75,102\n15,1,T15,2502,2801,30,90,101\n16,1,T16,1112,1638,30,90,101\n17,1,T17,621,2218,30,90,101\n18,1,T18,1531,799,30,90,101\n19,1,T19,1024,1522,30,90,101\n20,1,T20,1537,2430,30,90,101\n21,1,T21,2021,367,30,90,101\n22,1,T22,852,981,30,90,101\n23,1,T23,1353,1316,30,90,101\n24,1,T24,719,2895,30,90,101\n25,1,T25,1616,2114,30,90,101\n26,1,T26,2399,1989,30,90,101\n101,2,R1,2097,2100,50,,106\n102,2,R2,1578,1989,50,,106\n103,2,R3,841,724,50,,106\n104,2,R4,2798,1285,50,,106\n105,2,R5,359,1568,50,,106\n106,2,R6,1526,801,50,,106\n107,2,R7,1728,2187,50,,106\n108,2,R8,1585,2140,70,,105\n109,2,R9,1867,581,70,,105\n110,2,R10,887,887,70,,105\n111,2,R11,2644,967,70,,105\n112,2,R12,636,1683,70,,105\n113,2,R13,1135,2461,70,,105\n114,2,R14,867,691,70,,105\n115,2,R15,2892,2470,70,,105\n116,2,R16,2623,2252,70,,105\n117,2,R17,2003,1768,70,,105\n118,2,R18,2800,2700,50,,106\n119,2,R19,2900,2700,50,,106\n120,2,R20,3000,2700,50,,106\n121,2,R21,3100,2700,50,,106\n122,2,R22,2700,2800,50,,106\n123,2,R23,2700,2900,50,,106\n124,2,R24,2700,3000,50,,106\n125,2,R25,2700,3100,50,,106\n126,2,R26,2700,2700,50,,106\n201,3,D1,1000,2200,35,,113\n202,3,D2,2200,1000,35,,113\n203,4,I1,2850,2850,150,,206\n204,5,L1,2850,2850,20,,207\n",resourceData:"index,name,srcPosX,srcPosY,srcWidth,srcHeight,width,height\n1,pyroNovice,0,0,70,70,60,60\n2,pyroApprentice,70,0,70,70,61,61\n3,pyroAdept,140,0,70,70,63,63\n4,pyroExpert,210,0,70,70,64,64\n5,pyroMaster,280,0,70,70,65,65\n6,frosterNovice,0,70,70,70,60,60\n7,frosterApprentice,70,70,70,70,61,61\n8,frosterAdept,140,70,70,70,63,63\n9,frosterExpert,210,70,70,70,64,64\n10,frosterMaster,280,70,70,70,65,65\n11,mysterNovice,0,140,70,70,60,60\n12,mysterApprentice,70,140,70,70,61,61\n13,mysterAdept,140,140,70,70,63,63\n14,mysterExpert,210,140,70,70,64,64\n15,mysterMaster,280,140,70,70,65,65\n16,charHandIdle,0,210,120,100,120,100\n17,charHandCast1,120,210,120,100,120,100\n18,charHandCast2,240,210,120,100,120,100\n19,charHandCast3,360,210,120,100,120,100\n20,charHandCast4,480,210,120,100,120,100\n21,castEffectFire,0,310,120,100,120,100\n22,castEffectFrost,120,310,120,100,120,100\n23,castEffectArcane,240,310,120,100,120,100\n24,projectileFire,0,220,70,70,65,65\n25,projectileFrost,70,220,70,70,65,65\n26,projectileArcane,140,220,70,70,65,65\n27,skillEffectFire,0,290,160,160,155,155\n28,skillEffectFrost,160,290,160,160,155,155\n29,skillEffectArcane,320,290,160,160,155,155\n30,ranker1,455,5,60,60,60,60\n31,ranker2,515,5,60,60,60,60\n32,ranker3,575,5,60,60,60,60\n33,Goblin,0,500,120,100,84,70\n34,Orc,120,500,120,100,96,80\n35,OrcFighter,240,500,120,100,108,90\n100,projectileSkillArrow,0,410,240,80,240,80\n101,objTreeLarge,210,0,210,210,225,225\n102,objTreeMedium,210,0,210,210,185,185\n103,objTreeSmall,210,0,210,210,145,145\n104,objTreeInside,420,0,210,210,0,0\n105,objStoneLarge,0,0,210,210,165,165\n106,objStoneMedium,0,0,210,210,125,125\n107,objStoneSmall,0,0,210,210,85,85\n108,objChest1,0,210,90,90,85,85\n109,objChest2,90,210,90,90,85,85\n110,objChest3,180,210,90,90,85,85\n111,objChest4,270,210,90,90,85,85\n112,objChest5,360,210,90,90,85,85\n113,objChestGround,450,210,90,90,85,85\n200,objGold,0,300,70,70,65,65\n201,objJewel,70,300,70,70,65,65\n202,objSkillFire,0,370,70,70,65,65\n203,objSkillFrost,70,370,70,70,65,65\n204,objSkillArcane,140,370,70,70,65,65\n205,objBox,140,300,70,70,65,65\n206,envImmortal,0,90,150,150,150,150\n207,envPortal1,0,0,90,90,90,90\n208,envPortal2,90,0,90,90,90,90\n209,envPortal3,180,0,90,90,90,90\n210,envPortal4,270,0,90,90,90,90\n211,envPortal5,360,0,90,90,90,90\n212,objBuffHeal,70,440,70,70,65,65\n213,objBuffDamage,140,440,70,70,65,65\n214,objBuffSpeed,210,440,70,70,65,65\n215,objBuffDefence,280,440,70,70,65,65\n216,objBuffImmortal,350,440,70,70,65,65\n1001,conditionEffectFreeze,0,0,80,80,75,75\n1002,conditionEffectChill,80,0,80,80,75,75\n1003,conditionEffectImmortal,160,0,80,80,75,75\n1004,conditionEffectSilence,240,0,80,80,75,75\n1005,conditionEffectIgnite1,0,80,60,60,55,55\n1006,conditionEffectIgnite2,60,80,60,60,55,55\n1007,conditionEffectIgnite3,120,80,60,60,55,55\n1008,conditionEffectIgnite4,180,80,60,60,55,55\n1009,conditionEffectIgnite5,240,80,60,60,55,55\n1010,conditionEffectIgnite6,300,80,60,60,55,55\n1011,fireHitEffect,210,220,70,70,65,65\n1012,frostHitEffect,280,220,70,70,65,65\n1013,arcaneHitEffect,350,220,70,70,65,65\n1014,blankImg,0,450,60,60,55,55\n1015,passiveEffectFire1,60,450,60,60,60,60\n1016,passiveEffectFire2,120,450,60,60,65,65\n1017,passiveEffectFire3,180,450,60,60,70,70\n1018,passiveEffectFire4,240,450,60,60,75,75\n1019,passiveEffectFire5,300,450,60,60,80,80\n1020,passiveEffectFire6,360,450,60,60,85,85\n1021,passiveEffectFire7,420,450,60,60,90,90\n1022,passiveEffectFrost1,0,510,60,60,60,60\n1023,passiveEffectFrost2,60,510,60,60,65,65\n1024,passiveEffectFrost3,120,510,60,60,70,70\n1025,passiveEffectFrost4,180,510,60,60,75,75\n1026,passiveEffectFrost5,240,510,60,60,80,80\n1027,passiveEffectFrost6,300,510,60,60,85,85\n1028,passiveEffectFrost7,360,510,60,60,90,90\n1029,passiveEffectArcane1,480,450,60,60,60,60\n1030,passiveEffectArcane2,420,510,60,60,65,65\n1031,passiveEffectArcane3,480,510,60,60,70,70\n1032,passiveEffectArcane4,540,510,60,60,75,75\n1033,passiveEffectArcane5,600,510,60,60,80,80\n1034,passiveEffectArcane6,660,510,60,60,85,85\n1035,passiveEffectArcane7,720,510,60,60,90,90\n1036,fireSkillEffectInnerFire,0,140,80,80,80,80\n1037,fireSkillEffectFury1,80,140,80,80,80,80\n1038,fireSkillEffectFury2,80,140,80,80,83,83\n1039,fireSkillEffectFury3,80,140,80,80,86,86\n1040,fireSkillEffectFury4,80,140,80,80,90,90\n1041,fireSkillEffectFury5,80,140,80,80,85,88\n1042,frostSkillEffectPurify,160,140,80,80,70,70\n1043,frostSkillEffectIceBlock,240,140,80,80,90,90\n1044,arcaneSkillEffectCloak,320,140,80,80,90,90\n1045,arcaneSkillEffectHaste1,400,140,80,80,80,80\n1046,arcaneSkillEffectHaste2,400,140,80,80,83,83\n1047,arcaneSkillEffectHaste3,400,140,80,80,86,86\n1048,arcaneSkillEffectHaste4,400,140,80,80,90,90\n1049,arcaneSkillEffectHaste5,400,140,80,80,85,88\n1050,fireProjectileRollingFire,480,290,90,90,90,90\n1051,frostProjectileFrostOrb,570,290,90,90,90,90\n1052,arcaneSkillNoDamageExplosion,660,290,90,90,90,90\n1053,regenHP1,360,80,60,60,55,55\n1054,regenHP2,420,80,60,60,55,55\n1055,regenHP3,480,80,60,60,55,55\n1056,regenHP4,540,80,60,60,55,55\n1057,regenHP5,600,80,60,60,55,55\n1058,regenMP1,360,20,60,60,55,55\n1059,regenMP2,420,20,60,60,55,55\n1060,regenMP3,480,20,60,60,55,55\n1061,regenMP4,540,20,60,60,55,55\n1062,regenMP5,600,20,60,60,55,55\n1063,purifyAndHeal1,660,20,60,60,55,55\n1064,purifyAndHeal2,720,20,60,60,55,55\n1065,dispel1,480,140,60,60,55,55\n1066,dispel2,540,140,60,60,55,55\n1067,dispel3,600,140,60,60,55,55\n1068,dispel4,660,140,60,60,55,55\n1069,levelUp1,160,0,80,80,64,64\n1070,levelUp2,160,0,80,80,66,66\n1071,levelUp3,160,0,80,80,68,68\n1072,levelUp4,160,0,80,80,70,70\n1073,levelUp5,160,0,80,80,72,72\n1074,portalEffect1,575,375,80,80,120,120\n1075,portalEffect2,575,375,80,80,122,122\n1076,portalEffect3,575,375,80,80,124,124\n1077,portalEffect4,575,375,80,80,126,126\n1078,portalEffect5,575,375,80,80,128,128\n1079,portalEffect6,575,375,80,80,130,130\n1080,portalEffect7,575,375,80,80,128,128\n1081,portalEffect8,575,375,80,80,126,126\n1082,portalEffect9,575,375,80,80,124,124\n1083,portalEffect10,575,375,80,80,122,122\n",iconResourceData:"index,name,top,right,bottom,left\n1,Pyro Attack,0,72,72,0\n2,Fire Bolt,0,144,72,72\n3,Burning Soul,0,216,72,144\n4,Fire Ball,0,288,72,216\n5,Inner Fire,0,360,72,288\n6,Rolling Fire,0,432,72,360\n7,Fury,0,504,72,432\n8,Explosion,0,576,72,504\n9,Pyromaniac,0,648,72,576\n101,Froster Attack,72,72,144,0\n102,Ice Bolt,72,144,144,72\n103,Healing,72,216,144,144\n104,Frozen Soul,72,288,144,216\n105,Purify,72,360,144,288\n106,Ice Block,72,432,144,360\n107,Cold Snap,72,504,144,432\n108,Frozen Orb,72,576,144,504\n109,Freezer,72,648,144,576\n110,Ice Spear,72,720,144,648\n201,Myster Attack,144,72,216,0\n202,Arcane Bolt,144,144,216,72\n203,Arcane Cloak,144,216,216,144\n204,Arcane Missile,144,288,216,216\n205,Silence,144,360,216,288\n206,Dispel,144,432,216,360\n207,Blink,144,504,216,432\n208,Arcane Blast,144,576,216,504\n209,Haste,144,648,216,576\n210,Mystic,144,720,216,648\n501,Buff_Burning Soul,360,72,432,0\n502,Buff_Inner Fire,360,144,432,72\n503,Buff_Fury,360,216,432,144\n504,Buff_Pyromaniac,360,288,432,216\n505,Buff_Frozen Soul,360,360,432,288\n506,Buff_Purify,360,432,432,360\n507,Buff_Ice Block,360,504,432,432\n508,Buff_Freezer,360,576,432,504\n509,Buff_Arcane Cloak,432,72,504,0\n510,Buff_Haste,432,144,504,72\n511,Buff_Mystic,432,216,504,144\n512,Buff_Immortal,432,288,504,216\n513,Buff_Dispel,360,648,432,576\n514,Buff_Heal,360,720,432,648\n515,Debuff_Ignite,288,72,360,0\n516,Debuff_Chill,288,144,360,72\n517,Debuff_Freeze,288,216,360,144\n518,Debuff_Silence,288,288,360,216\n519,Debuff_Dispel,288,360,360,288\n1001,blankImg,216,72,288,0\n1002,whiteBlankImg,216,144,288,72\n",effectGroupData:"index,name,isRotate,rotateStartDegree,isAttach,isFront,resourceLifeTime,resourceIndex1,resourceIndex2,resourceIndex3,resourceIndex4,resourceIndex5,resourceIndex6,resourceIndex7,resourceIndex8,resourceIndex9,resourceIndex10\n1,Immortal,1,0,1,1,,1003,,,,,,,,,\n2,Chill,0,,1,1,,1002,,,,,,,,,\n3,Freeze,0,,1,1,,1001,,,,,,,,,\n4,Silence,0,,1,1,,1004,,,,,,,,,\n5,Ignite,0,,0,0,300,1005,1006,1007,1008,1009,1010,,,,\n6,fireHitEffect,0,,1,1,100,1011,,,,,,,,,\n7,frostHitEffect,0,,1,1,100,1012,,,,,,,,,\n8,arcaneHitEffect,0,,1,1,100,1013,,,,,,,,,\n101,firePassive,0,,1,0,,1014,1014,1014,1015,1016,1017,1018,1019,1020,1021\n102,frostPassive,0,,1,0,,1014,1014,1014,1022,1023,1024,1025,1026,1027,1028\n103,arcanePassive,1,0,1,0,,1014,1014,1014,1029,1030,1031,1032,1033,1034,1035\n1001,fireSkillEffectInnerFire,1,0,1,0,,1036,,,,,,,,,\n1002,fireSkillEffectFury,0,,1,0,,1037,1038,1039,1040,1041,1040,1039,1038,1037,1037\n1003,frostSkillEffectPurify,1,0,1,1,,1042,,,,,,,,,\n1004,frostSkillEffectIceBlock,1,0,1,1,,1043,,,,,,,,,\n1005,arcaneSkillEffectCloak,1,0,1,0,,1044,,,,,,,,,\n1006,arcaneSkillEffectHaste,1,0,1,0,,1048,1047,1046,1045,1045,1045,1046,1047,1048,1049\n1007,fireProjectileRollingFire,1,0,0,1,,1050,,,,,,,,,\n1008,frostProjectileFrostOrb,1,0,0,1,,1051,,,,,,,,,\n1009,arcaneSkillNoDamageExplosion,0,,0,1,,1052,,,,,,,,,\n1010,regenHP,0,,1,1,,1054,1053,1054,1055,1056,1057,1014,1014,1014,1014\n1011,regenMP,0,,1,1,,1014,1014,1014,1014,1059,1058,1059,1060,1061,1062\n1012,purifyAndHeal,0,,1,1,,1063,1064,1063,1058,1059,,,,,\n1013,dispel,0,,1,1,,1066,1065,1066,1067,1068,,,,,\n1014,mysticRegenHP,0,,1,1,,1014,1014,1054,1053,1054,1055,1056,1057,1014,1014\n1015,mysticRegenMP,0,,1,1,,1014,1059,1058,1059,1060,1061,1062,1014,1014,1014\n1016,mysticInnerFire,1,180,1,0,,1036,,,,,,,,,\n1017,mysticCloak,1,180,1,0,,1044,,,,,,,,,\n1018,mysticHaste,1,0,1,0,,1045,1045,1046,1047,1048,1049,1048,1047,1046,1045\n1019,levelUp,1,0,1,1,,1069,1070,1071,1072,1073,1072,1071,1070,1069,\n1020,Portal,1,0,1,1,1000,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083\n1021,ImmortalZone,1,0,1,0,,1003,,,,,,,,,\n",mobData:"index,name,mobName,size,moveSpeed,rotateSpeed,attackTime,maxHP,damage,resistAll,attackRange,maxHitRange,resourceIndex,dropIndex,imgRatio\n1,Goblin1,Goblin,45,170,360,200,800,20,0,50,500,33,1,70\n2,Goblin2,Goblin,45,170,360,200,800,20,0,50,500,33,2,70\n3,Goblin3,Goblin,45,170,360,200,800,20,0,50,500,33,3,70\n4,Orc1,Orc,50,160,360,200,3300,50,10,60,550,34,4,80\n5,Orc2,Orc,50,160,360,200,3300,50,10,60,550,34,5,80\n6,Orc3,Orc,50,160,360,200,3300,50,10,60,550,34,6,80\n7,OrcFighter1,OrcFighter,55,155,360,180,5500,120,20,60,600,35,7,90\n8,OrcFighter2,OrcFighter,55,155,360,180,5500,120,20,60,600,35,8,90\n9,OrcFighter3,OrcFighter,55,155,360,180,5500,120,20,60,600,35,9,90\n",objBuffData:"index,name,buffGroupIndex,resourceIndex\n1,Heal,1100,212\n2,Damage,1101,213\n3,Speed,1102,214\n4,Defence,1103,215\n5,Immortal,1104,216\n"}},{}],13:[function(e,t,s){t.exports={GAME_VERSION:"1.1.0",MAX_SERVER_RESPONSE_TIME:5e3,LIMIT_NO_ACTION_TIME:12e5,LONG_TIME_INTERVAL:3e5,MAX_PING_LIMIT:1e3,INTERVAL:60,FPS:60,MAX_FIND_AVAILABLE_SERVER_TIME:7e3,RESOURCES_COUNT:5,RESOURCE_SRC_CHARACTER:"../images/Character.png",RESOURCE_SRC_OBJECT:"../images/Objects.png",RESOURCE_SRC_SKILL_EFFECT:"../images/SkillEffect.png",RESOURCE_SRC_ENVIRONMENT:"../images/Environment.png",RESOURCE_SRC_UI:"../images/UI.png",MINIMAP_CHEST_GROUND_SRC:"../images/chestGround.png",MINIMAP_CHEST_SRC_1:"../images/chest1.png",MINIMAP_CHEST_SRC_2:"../images/chest2.png",MINIMAP_CHEST_SRC_3:"../images/chest3.png",MINIMAP_VOID_SRC:"../images/void.png",START_BUTTON:1,RESTART_BUTTON:2,MINIMUM_LOADING_TIME:2e3,CHANGE_LOADING_TEXT_TIME:500,SKILL_INFORM_TIME:150,SKILL_HIT_EFFECT_TIME:100,USER_ATTACH_EFFECT_CHANGE_TIME:150,USER_DETACH_EFFECT_CHANGE_TIME:50,USER_DETACH_EFFECT_MAKE_TIME:200,RISE_TEXT_LIFE_TIME:3e3,PROJECTILE_EFFECT_CHANGE_TIME:150,CHAT_MESSAGE_TIME:5e3,USER_BODY_SIZE:64,USER_NICK_NAME_LENGTH:15,CHAT_MESSAGE_LENGTH:25,CAST_EFFECT_INTERPOLATION_FACTOR:.1,SKILL_EFFECT_INTERPOLATION_FACTOR:.6,USER_ANI_TIME:500,IMG_COLLISION_CLEAR_TIME:200,CANVAS_MAX_SIZE:{width:3200,height:3200},CANVAS_MAX_LOCAL_SIZE:{width:1600,height:1e3},IMAGE_SOURCE_SIZE:{width:800,height:600},DRAW_MODE_NORMAL:1,DRAW_MODE_SKILL_RANGE:2,SKILL_CHANGE_PANEL_CONTAINER:1,SKILL_CHANGE_PANEL_EQUIP:2,OBJECT_STATE_IDLE:1,OBJECT_STATE_MOVE:2,OBJECT_STATE_ATTACK:3,OBJECT_STATE_CAST:4,OBJECT_STATE_DEATH:5,OBJECT_STATE_MOVE_AND_ATTACK:6,MOVE_SLIGHT_RATE:.6,MOVE_BACK_WARD_SPEED_DECREASE_RATE:.5,GAME_STATE_LOAD:1,GAME_STATE_START_SCENE:2,GAME_STATE_GAME_START:3,GAME_STATE_GAME_ON:4,GAME_STATE_GAME_END:5,GAME_STATE_RESTART_SCENE:6,GAME_STATE_RESTART:7,CHAR_TYPE_FIRE:1,CHAR_TYPE_FROST:2,CHAR_TYPE_ARCANE:3,CHAR_TYPE_MOB:4,PREFIX_USER:"U",PREFIX_MONSTER:"M",PREFIX_SKILL:"S",PREFIX_SKILL_PROJECTILE:"P",PREFIX_CHEST:"C",PREFIX_OBSTACLE_TREE:"T",PREFIX_OBSTACLE_ROCK:"R",PREFIX_OBSTACLE_CHEST_GROUND:"D",PREFIX_OBJECT_EXP:"E",PREFIX_OBJECT_SKILL:"K",PREFIX_OBJECT_GOLD:"G",PREFIX_OBJECT_JEWEL:"J",PREFIX_OBJECT_BOX:"X",PREFIX_OBJECT_BUFF:"B",PREFIX_ENVIRONMENT_IMMORTAL_GROUND:"I",PREFIX_ENVIRONMENT_PORTAL:"L",USER_CONDITION_IMMORTAL:1,USER_CONDITION_CHILL:2,USER_CONDITION_FREEZE:3,USER_CONDITION_SILENCE:4,USER_CONDITION_IGNITE:5,USER_CONDITION_BLUR:6,SKILL_PROPERTY_FIRE:1,SKILL_PROPERTY_FROST:2,SKILL_PROPERTY_ARCANE:3,SKILL_INDEX_PYRO_BASE:11,SKILL_INDEX_PYRO_PASSIVE:91,SKILL_INDEX_PYRO_GIVEN:21,SKILL_INDEX_FROST_BASE:1001,SKILL_INDEX_FROST_PASSIVE:1091,SKILL_INDEX_FROST_GIVEN:1011,SKILL_INDEX_ARCANE_BASE:2001,SKILL_INDEX_ARCANE_PASSIVE:2091,SKILL_INDEX_ARCANE_GIVEN:2011,TUTORIAL_SKILL_FIRE_INDEX:41,TUTORIAL_SKILL_FROST_INDEX:1021,TUTORIAL_SKILL_ARCANE_INDEX:2021,SKILL_TYPE_INSTANT_RANGE:1,SKILL_TYPE_INSTANT_PROJECTILE:2,SKILL_TYPE_PROJECTILE:3,SKILL_TYPE_PROJECTILE_EXPLOSION:4,SKILL_TYPE_PROJECTILE_TICK:5,SKILL_TYPE_PROJECTILE_TICK_EXPLOSION:6,SKILL_TYPE_RANGE:7,SKILL_TYPE_SELF:8,SKILL_TYPE_SELF_EXPLOSION:9,SKILL_TYPE_TELEPORT:10,SKILL_TYPE_PASSIVE:11,SKILL_BASIC_INDEX:1,SKILL_EQUIP1_INDEX:2,SKILL_EQUIP2_INDEX:3,SKILL_EQUIP3_INDEX:4,SKILL_EQUIP4_INDEX:5,SKILL_PASSIVE_INDEX:6,STAT_POWER_INDEX:1,STAT_MAGIC_INDEX:2,STAT_SPEED_INDEX:3,STAT_OFFENCE_INDEX:4,STAT_DEFENCE_INDEX:5,PROJECTILE_FIRE_DISTANCE:20,MULTI_PROJECTILE_DEGREE:15,OBJ_SKILL_RADIUS:20,OBJ_JEWEL_RADIUS:20,OBJ_BOX_RADIUS:23,OBJ_BUFF_RADIUS:25,GET_RESOURCE_TYPE_GOLD:1,GET_RESOURCE_TYPE_JEWEL:2,GET_RESOURCE_TYPE_EXP:3,OBJ_TYPE_TREE:1,OBJ_TYPE_ROCK:2,OBJ_TYPE_CHEST_GROUND:3,ENV_TYPE_IMMORTAL_GROUND:4,ENV_TYPE_PORTAL:5,RESOURCE_INDEX_USER_HAND_1:16,RESOURCE_INDEX_USER_HAND_2:17,RESOURCE_INDEX_USER_HAND_3:18,RESOURCE_INDEX_USER_HAND_4:19,RESOURCE_INDEX_USER_HAND_5:20,RESOURCE_INDEX_CASTING_FIRE:21,RESOURCE_INDEX_CASTING_FROST:22,RESOURCE_INDEX_CASTING_ARCANE:23,RESOURCE_INDEX_PROJECTILE_FIRE:24,RESOURCE_INDEX_PROJECTILE_FROST:25,RESOURCE_INDEX_PROJECTILE_ARCANE:26,RESOURCE_INDEX_SKILL_EFFECT_FIRE:27,RESOURCE_INDEX_SKILL_EFFECT_FROST:28,RESOURCE_INDEX_SKILL_EFFECT_ARCANE:29,RESOURCE_INDEX_RANK_1:30,RESOURCE_INDEX_RANK_2:31,RESOURCE_INDEX_RANK_3:32,RESOURCE_INDEX_PORTAL_1:207,RESOURCE_INDEX_PORTAL_2:208,RESOURCE_INDEX_PORTAL_3:209,RESOURCE_INDEX_PORTAL_4:210,RESOURCE_INDEX_PORTAL_5:211,RESOURCE_INDEX_PROJECTILE_SKILL_ARROW:100,RESOURCE_INDEX_OBSTACLE_TREE_INSIDE:104,RESOURCE_INDEX_OBJ_GOLD:200,RESOURCE_INDEX_OBJ_JEWEL:201,RESOURCE_INDEX_OBJ_BOX:205,RESOURCE_INDEX_OBJ_SKILL_FIRE:202,RESOURCE_INDEX_OBJ_SKILL_FROST:203,RESOURCE_INDEX_OBJ_SKILL_ARCANE:204,RESOURCE_INDEX_CHEST_GRADE_1:108,RESOURCE_INDEX_CHEST_GRADE_2:109,RESOURCE_INDEX_CHEST_GRADE_3:110,RESOURCE_INDEX_CHEST_GRADE_4:111,RESOURCE_INDEX_CHEST_GRADE_5:112,UI_RESOURCE_INDEX_BLANK:1001,STAT_CALC_FACTOR_POWER_TO_DAMAGE_RATE:.5,STAT_CALC_FACTOR_POWER_TO_HP:25,STAT_CALC_FACTOR_POWER_TO_HP_REGEN:.05,STAT_CALC_FACTOR_MAGIC_TO_RESISTANCE:.25,STAT_CALC_FACTOR_MAGIC_TO_MP:15,STAT_CALC_FACTOR_MAGIC_TO_MP_REGEN:.03,STAT_CALC_FACTOR_SPEED_TO_CAST_SPEED:.25,STAT_CALC_FACTOR_SPEED_TO_COOLDOWN_REDUCE_RATE:.25,MTYPE_REQ_START_GAME:1,MTYPE_REQ_RESTART_GAME:2,MTYPE_REQ_RECONNECT:3,MTYPE_RECONNECT_SUCCESS:4,MTYPE_NEED_RECONNECT:5,MTYPE_USER_DATA_UPDATE:6,MTYPE_USER_MOVE_START:7,MTYPE_USER_MOVE_AND_ATTACK:8,MTYPE_USER_USE_SKILL:9,MTYPE_USER_STOP:10,MTYPE_SKILL_FIRED:11,MTYPE_PROJECTILE_FIRED:12,MTYPE_UPGRADE_SKILL:13,MTYPE_EXCHANGE_PASSIVE:14,MTYPE_EQUIP_PASSIVE:15,MTYPE_UNEQUIP_PASSIVE:16,MTYPE_FIRE_PING:17,MTYPE_CHATTING:18,MTYPE_UPDATE_USER_TIME_DIFF:19,MTYPE_UPDATE_EQUIP_SKILLS:20,MTYPE_KILL_ME:21,MTYPE_GIVE_EXP:22,MTYPE_GIVE_RESOURCES:23,MTYPE_GIVE_ALL_SKILL:24,MTYPE_SYNC_SUCCESS:25,MTYPE_DONT_CHEAT:26,MTYPE_REQ_RECONNECT_RES:27,MTYPE_RES_RECONNECT:28,MTYPE_ADMIN_MESSAGE:29,MTYPE_DOWN_SERVER:30,MTYPE_NOW_SERVER_IS_DOWN:31,MTYPE_CANCEL_SERVER_DOWN:32,MTYPE_FIRE_PONG:33,MTYPE_SYNC_AND_SET_SKILLS:34,MTYPE_RES_START_GAME:35,MTYPE_RES_RESTART_GAME:36,MTYPE_USER_JOINED:37,MTYPE_USER_DATA_SYNC:38,MTYPE_USER_DATA_UPDATE_AND_USER_SKILL:39,MTYPE_MOVE_USER_TO_NEW_POS:40,MTYPE_UPDATE_USER_PRIVATE_STAT:41,MTYPE_DELETE_PROJECTILE:42,MTYPE_EXPLODE_PROJECTILE:43,MTYPE_CREATE_OBJS:44,MTYPE_DELETE_OBJS:45,MTYPE_CREATE_CHEST:46,MTYPE_CHEST_DAMAGED:47,MTYPE_DELETE_CHEST:48,MTYPE_GET_RESOURCE:49,MTYPE_GET_SKILL:50,MTYPE_SKILL_CHANGE_TO_RESOURCE:51,MTYPE_CHANGE_USER_STAT:52,MTYPE_USER_DAMAGED:53,MTYPE_UPDATE_BUFF:54,MTYPE_UPDATE_RANK:55,MTYPE_USER_DEAD:56,MTYPE_USER_LEAVE:57,MTYPE_MOB_CREATED:58,MTYPE_MOB_CHANGE_STATE:59,MTYPE_MOB_TAKE_DAMAGE:60,MTYPE_MOB_UPDATE_BUFF:61,MTYPE_MOB_DEAD:62,MTYPE_ERROR_SET_ID:63,MTYPE_DUPLICATE_ACCESS:64,KILL_FEEDBACK_LEVEL_0:1,KILL_FEEDBACK_LEVEL_1:2,KILL_FEEDBACK_LEVEL_1_PREFIX:"Gorgeous",KILL_FEEDBACK_LEVEL_1_COLOR:"#f5ebb6",KILL_FEEDBACK_LEVEL_2:3,KILL_FEEDBACK_LEVEL_2_PREFIX:"Amazing",KILL_FEEDBACK_LEVEL_2_COLOR:"#f5e489",KILL_FEEDBACK_LEVEL_3:4,KILL_FEEDBACK_LEVEL_3_PREFIX:"Incredible",KILL_FEEDBACK_LEVEL_3_COLOR:"#f7de57",KILL_FEEDBACK_LEVEL_4:5,KILL_FEEDBACK_LEVEL_4_PREFIX:"Heroic",KILL_FEEDBACK_LEVEL_4_COLOR:"#f9dc3e",KILL_FEEDBACK_LEVEL_5:6,KILL_FEEDBACK_LEVEL_5_PREFIX:"Legendary",KILL_FEEDBACK_LEVEL_5_COLOR:"#fbda25",KILL_FEEDBACK_LEVEL_6:7,KILL_FEEDBACK_LEVEL_6_PREFIX:"Mythic",KILL_FEEDBACK_LEVEL_6_COLOR:"#f9d511",KILL_FEEDBACK_LEVEL_7:8,KILL_FEEDBACK_LEVEL_7_PREFIX:"Godlike",KILL_FEEDBACK_LEVEL_7_COLOR:"#ffd700"}},{}],14:[function(e,t,s){t.exports={backspace:"8",tab:"9",enter:"13",shift:"16",ctrl:"17",alt:"18",pause_break:"19",caps_lock:"20",escape:"27",page_up:"33","page down":"34",end:"35",home:"36",left_arrow:"37",up_arrow:"38",right_arrow:"39",down_arrow:"40",insert:"45",delete:"46",0:"48",1:"49",2:"50",3:"51",4:"52",5:"53",6:"54",7:"55",8:"56",9:"57",a:"65",b:"66",c:"67",d:"68",e:"69",f:"70",g:"71",h:"72",i:"73",j:"74",k:"75",l:"76",m:"77",n:"78",o:"79",p:"80",q:"81",r:"82",s:"83",t:"84",u:"85",v:"86",w:"87",x:"88",y:"89",z:"90","left_window key":"91","right_window key":"92",select_key:"93","numpad 0":"96","numpad 1":"97","numpad 2":"98","numpad 3":"99","numpad 4":"100","numpad 5":"101","numpad 6":"102","numpad 7":"103","numpad 8":"104","numpad 9":"105",multiply:"106",add:"107",subtract:"109","decimal point":"110",divide:"111",f1:"112",f2:"113",f3:"114",f4:"115",f5:"116",f6:"117",f7:"118",f8:"119",f9:"120",f10:"121",f11:"122",f12:"123",num_lock:"144",scroll_lock:"145",semi_colon:"186",equal_sign:"187",comma:"188",dash:"189",period:"190",forward_slash:"191",grave_accent:"192",open_bracket:"219",backslash:"220",closebracket:"221",single_quote:"222",space:"32"}},{}],15:[function(e,t,s){"use strict";var l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},s=0;s<10;s++)t["_"+String.fromCharCode(s)]=s;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var s,n,i=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),a=1;a<arguments.length;a++){for(var r in s=Object(arguments[a]))c.call(s,r)&&(i[r]=s[r]);if(l){n=l(s);for(var o=0;o<n.length;o++)d.call(s,n[o])&&(i[n[o]]=s[n[o]])}}return i}},{}],16:[function(e,t,s){var n,i;n=this,i=function(){var a=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};return function(){var m,p,b,n,y,r,i,C;function E(e){var t,s;if(this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this.maxElements=e.maxElements,null==this.width||null==this.height)throw new Error("Missing quadtree dimensions.");if(null==this.x&&(this.x=0),null==this.y&&(this.y=0),null==this.maxElements&&(this.maxElements=1),this.contents=[],this.oversized=[],this.size=0,this.width<1||this.height<1)throw new Error("Dimensions must be positive integers.");if(!a(this.x)||!a(this.y))throw new Error("Coordinates must be integers");if(this.maxElements<1)throw new Error("The maximum number of elements before a split must be a positive integer.");for(t in(s=this).children={NW:{create:function(){return new E({x:s.x,y:s.y,width:Math.max(Math.floor(s.width/2),1),height:Math.max(Math.floor(s.height/2),1),maxElements:s.maxElements})},tree:null},NE:{create:function(){return new E({x:s.x+Math.max(Math.floor(s.width/2),1),y:s.y,width:Math.ceil(s.width/2),height:Math.max(Math.floor(s.height/2),1),maxElements:s.maxElements})},tree:null},SW:{create:function(){return new E({x:s.x,y:s.y+Math.max(Math.floor(s.height/2),1),width:Math.max(Math.floor(s.width/2),1),height:Math.ceil(s.height/2),maxElements:s.maxElements})},tree:null},SE:{create:function(){return new E({x:s.x+Math.max(Math.floor(s.width/2),1),y:s.y+Math.max(Math.floor(s.height/2),1),width:Math.ceil(s.width/2),height:Math.ceil(s.height/2),maxElements:s.maxElements})},tree:null}},this.children)this.children[t].get=function(){return null!=this.tree||(this.tree=this.create()),this.tree}}return n=function(e){var t,s;return{x:Math.floor((null!=(t=e.width)?t:1)/2)+e.x,y:Math.floor((null!=(s=e.height)?s:1)/2)+e.y}},m=function(e,t){var s,n,i,a;return!(e.x>=t.x+(null!=(s=t.width)?s:1)||e.x+(null!=(n=e.width)?n:1)<=t.x||e.y>=t.y+(null!=(i=t.height)?i:1)||e.y+(null!=(a=e.height)?a:1)<=t.y)},p=function(e,t){var s;return s=n(t),e.x<s.x?e.y<s.y?"NW":"SW":e.y<s.y?"NE":"SE"},C=function(e){if("object"!=typeof e)throw new Error("Element must be an Object.");if(null==e.x||null==e.y)throw new Error("Coordinates properties are missing.");if((null!=e?e.width:void 0)<0||(null!=e?e.height:void 0)<0)throw new Error("Width and height must be positive integers.")},r=function(e){var t,s,n,i;return s=Math.max(Math.floor(e.width/2),1),n=Math.ceil(e.width/2),i=Math.max(Math.floor(e.height/2),1),t=Math.ceil(e.height/2),{NW:{x:e.x,y:e.y,width:s,height:i},NE:{x:e.x+s,y:e.y,width:n,height:i},SW:{x:e.x,y:e.y+i,width:s,height:t},SE:{x:e.x+s,y:e.y+i,width:n,height:t}}},b=function(e,t){var s,n,i,a;for(n in a=[],i=r(t))s=i[n],m(e,s)&&a.push(n);return a},y=function(e,s){var t;return(t=function(t){return e["_"+t]=e[t],Object.defineProperty(e,t,{set:function(e){return s.remove(this,!0),this["_"+t]=e,s.push(this)},get:function(){return this["_"+t]},configurable:!0})})("x"),t("y"),t("width"),t("height")},i=function(t){var e;return(e=function(e){if(null!=t["_"+e])return delete t[e],t[e]=t["_"+e],delete t["_"+e]})("x"),e("y"),e("width"),e("height")},E.prototype.push=function(e,t){return this.pushAll([e],t)},E.prototype.pushAll=function(e,t){var s,n,i,a,r,o,l,c,d,u,f,h,p,E,m,g,I,_,S,T;for(f=0,E=e.length;f<E;f++)u=e[f],C(u),t&&y(u,this);for(l=[{tree:this,elements:e}];0<l.length;){for(T=(I=l.shift()).tree,c={NW:null,NE:null,SW:null,SE:null},h=0,m=(o=I.elements).length;h<m;h++)if(r=o[h],T.size++,1!==(d=b(r,T)).length||1===T.width||1===T.height)T.oversized.push(r);else if(T.size-T.oversized.length<=T.maxElements)T.contents.push(r);else{for(a=d[0],S=T.children[a],null==c[a]&&(c[a]={tree:S.get(),elements:[]}),c[a].elements.push(r),p=0,g=(_=T.contents).length;p<g;p++)n=_[p],null==c[i=b(n,T)[0]]&&(c[i]={tree:T.children[i].get(),elements:[]}),c[i].elements.push(n);T.contents=[]}for(a in c)null!=(s=c[a])&&l.push(s)}return this},E.prototype.remove=function(e,t){var s,n;return C(e),-1<(s=this.oversized.indexOf(e))?(this.oversized.splice(s,1),this.size--,t||i(e),!0):-1<(s=this.contents.indexOf(e))?(this.contents.splice(s,1),this.size--,t||i(e),!0):!(null==(n=this.children[p(e,this)]).tree||!n.tree.remove(e,t))&&(this.size--,0===n.tree.size&&(n.tree=null),!0)},E.prototype.colliding=function(e,t){var s,n,i,a,r,o,l,c,d,u,f,h,p,E;for(null==t&&(t=m),C(e),r=[],i=[this];0<i.length;){for(o=0,d=(h=(E=i.shift()).oversized).length;o<d;o++)(n=h[o])!==e&&t(e,n)&&r.push(n);for(l=0,u=(p=E.contents).length;l<u;l++)(n=p[l])!==e&&t(e,n)&&r.push(n);for(0===(a=b(e,E)).length&&(a=[],e.x>=E.x+E.width&&a.push("NE"),e.y>=E.y+E.height&&a.push("SW"),0<a.length&&(1===a.length?a.push("SE"):a=["SE"])),c=0,f=a.length;c<f;c++)s=a[c],null!=E.children[s].tree&&i.push(E.children[s].tree)}return r},E.prototype.onCollision=function(e,t,s){var n,i,a,r,o,l,c,d,u,f,h,p,E;for(null==s&&(s=m),C(e),a=[this];0<a.length;){for(o=0,d=(h=(E=a.shift()).oversized).length;o<d;o++)(i=h[o])!==e&&s(e,i)&&t(i);for(l=0,u=(p=E.contents).length;l<u;l++)(i=p[l])!==e&&s(e,i)&&t(i);for(0===(r=b(e,E)).length&&(r=[],e.x>=E.x+E.width&&r.push("NE"),e.y>=E.y+E.height&&r.push("SW"),0<r.length&&(1===r.length?r.push("SE"):r=["SE"])),c=0,f=r.length;c<f;c++)n=r[c],null!=E.children[n].tree&&a.push(E.children[n].tree)}return null},E.prototype.get=function(e){return this.where(e)},E.prototype.where=function(n){var e,t,s,i,a,r,o,l,c,d,u,f,h;if("object"==typeof n&&(null==n.x||null==n.y))return this.find(function(e){var t,s;for(s in t=!0,n)n[s]!==e[s]&&(t=!1);return t});for(C(n),i=[],s=[this];0<s.length;){for(a=0,l=(d=(h=s.shift()).oversized).length;a<l;a++){for(o in t=d[a],e=!0,n)n[o]!==t[o]&&(e=!1);e&&i.push(t)}for(r=0,c=(u=h.contents).length;r<c;r++){for(o in t=u[r],e=!0,n)n[o]!==t[o]&&(e=!1);e&&i.push(t)}null!=(f=h.children[p(n,h)]).tree&&s.push(f.tree)}return i},E.prototype.each=function(e){var t,s,n,i,a,r,o,l,c,d;for(s=[this];0<s.length;){for(i=0,r=(l=(d=s.shift()).oversized).length;i<r;i++)n=l[i],"function"==typeof e&&e(n);for(a=0,o=(c=d.contents).length;a<o;a++)n=c[a],"function"==typeof e&&e(n);for(t in d.children)null!=d.children[t].tree&&s.push(d.children[t].tree)}return this},E.prototype.find=function(e){var t,s,n,i,a,r,o,l,c,d,u;for(s=[this],i=[];0<s.length;){for(a=0,o=(c=(u=s.shift()).oversized).length;a<o;a++)n=c[a],("function"==typeof e?e(n):void 0)&&i.push(n);for(r=0,l=(d=u.contents).length;r<l;r++)n=d[r],("function"==typeof e?e(n):void 0)&&i.push(n);for(t in u.children)null!=u.children[t].tree&&s.push(u.children[t].tree)}return i},E.prototype.filter=function(f){var h;return(h=function(e){var t,s,n,i,a,r,o,l,c,d,u;for(t in(s=new E({x:e.x,y:e.y,width:e.width,height:e.height,maxElements:e.maxElements})).size=0,e.children)null!=e.children[t].tree&&(s.children[t].tree=h(e.children[t].tree),s.size+=null!=(l=null!=(c=s.children[t].tree)?c.size:void 0)?l:0);for(i=0,r=(d=e.oversized).length;i<r;i++)n=d[i],(null==f||("function"==typeof f?f(n):void 0))&&s.oversized.push(n);for(a=0,o=(u=e.contents).length;a<o;a++)n=u[a],(null==f||("function"==typeof f?f(n):void 0))&&s.contents.push(n);return s.size+=s.oversized.length+s.contents.length,0===s.size?null:s})(this)},E.prototype.reject=function(t){return this.filter(function(e){return!("function"==typeof t?t(e):void 0)})},E.prototype.visit=function(e){var t,s,n;for(s=[this];0<s.length;)for(t in n=s.shift(),e.bind(n)(),n.children)null!=n.children[t].tree&&s.push(n.children[t].tree);return this},E.prototype.pretty=function(){var e,t,s,n,i,a,r;for(a="",s=function(e){var t,s,n;for(n="",t=s=e;s<=0?t<0:0<t;s<=0?++t:--t)n+="   ";return n},t=[{label:"ROOT",tree:this,level:0}];0<t.length;){for(e in a+=(n=s((r=t.shift()).level))+"| "+r.label+"\n"+n+"| ------------\n",0<r.tree.oversized.length&&(a+=n+"| * Oversized elements *\n"+n+"|   "+r.tree.oversized+"\n"),0<r.tree.contents.length&&(a+=n+"| * Leaf content *\n"+n+"|   "+r.tree.contents+"\n"),i=!1,r.tree.children)null!=r.tree.children[e].tree&&(i=!0,t.unshift({label:e,tree:r.tree.children[e].tree,level:r.level+1}));i&&(a+=n+"\n")}return a},E}()},"function"==typeof define&&define.amd?define([],i):"object"==typeof s&&t.exports?t.exports=i():n.Quadtree=i()},{}],17:[function(e,t,s){t.exports={"NORTH EAST AMERICA":"","NORTH EAST AMERICA 1":{SERVER:"NORTH EAST AMERICA",IP:"52.91.88.102"},"NORTH EAST AMERICA 2":{SERVER:"NORTH EAST AMERICA",IP:"52.90.99.174"},EUROPE:"","EUROPE 1":{SERVER:"EUROPE",IP:"18.196.2.82"},TEST:"","TEST 1":{SERVER:"TEST",IP:"localhost"}}},{}],18:[function(n,e,c){var d=n("./gameConfig.json"),u=Math.PI/180,o=n("../../modules/public/objectAssign.js"),i=n("msgpack-lite");function f(e){for(var t=e,s=0;s<6;s++)t+=Math.floor(16*Math.random()).toString(16);return t}c.rotate=function(e){c.isNumeric(this.rotateSpeed)&&(this.targetDirection===this.direction?this.currentState===d.OBJECT_STATE_MOVE||this.currentState===d.OBJECT_STATE_MOVE_AND_ATTACK?this.move(e):this.currentState===d.OBJECT_STATE_ATTACK||this.currentState===d.OBJECT_STATE_CAST&&this.executeSkill():(0<this.direction&&this.targetDirection<0?180-this.direction+180+this.targetDirection<this.direction-this.targetDirection?Math.abs(this.targetDirection-this.direction)<this.rotateSpeed*e?this.direction+=Math.abs(this.targetDirection-this.direction):this.direction+=this.rotateSpeed*e:this.targetDirection<this.direction&&(Math.abs(this.targetDirection-this.direction)<this.rotateSpeed*e?this.direction-=Math.abs(this.targetDirection-this.direction):this.direction-=this.rotateSpeed*e):this.direction<0&&0<this.targetDirection?180+this.direction+180-this.targetDirection<this.targetDirection-this.direction?Math.abs(this.targetDirection-this.direction)<this.rotateSpeed*e?this.direction-=Math.abs(this.targetDirection-this.direction):this.direction-=this.rotateSpeed*e:this.targetDirection>this.direction&&(Math.abs(this.targetDirection-this.direction)<this.rotateSpeed*e?this.direction+=Math.abs(this.targetDirection-this.direction):this.direction+=this.rotateSpeed*e):this.targetDirection>this.direction?Math.abs(this.targetDirection-this.direction)<this.rotateSpeed*e?this.direction+=Math.abs(this.targetDirection-this.direction):this.direction+=this.rotateSpeed*e:this.targetDirection<this.direction&&(Math.abs(this.targetDirection-this.direction)<this.rotateSpeed*e?this.direction-=Math.abs(this.targetDirection-this.direction):this.direction-=this.rotateSpeed*e),this.currentState!==d.OBJECT_STATE_MOVE&&this.currentState!==d.OBJECT_STATE_MOVE_AND_ATTACK||this.move(e,!0)),180<=this.direction?this.direction-=360:this.direction<=-180&&(this.direction+=360))},c.move=function(e,t){if(c.isNumeric(this.speed.x)&&c.isNumeric(this.speed.y)){var s=this.targetPosition.x-this.center.x,n=this.targetPosition.y-this.center.y,i=Math.pow(s,2)+Math.pow(n,2);i<100&&this.currentState===d.OBJECT_STATE_MOVE_AND_ATTACK?this.executeSkill():i<100&&(this.stop(),this.changeState(d.OBJECT_STATE_IDLE)),Math.abs(s)<Math.abs(this.speed.x)*e&&(this.speed.x=s/e),Math.abs(n)<Math.abs(this.speed.y)*e&&(this.speed.y=n/e);var a=this.onMove();a&&c.isNumeric(a.x)&&c.isNumeric(a.y)&&(this.position.x+=a.x,this.position.y+=a.y),t?(this.position.x+=this.speed.x*e*d.MOVE_SLIGHT_RATE,this.position.y+=this.speed.y*e*d.MOVE_SLIGHT_RATE):(this.position.x+=this.speed.x*e,this.position.y+=this.speed.y*e),this.position.x<0?this.position.x=0:this.position.x>d.CANVAS_MAX_SIZE.width-this.size.width&&(this.position.x=d.CANVAS_MAX_SIZE.width-this.size.width),this.position.y<0?this.position.y=0:this.position.y>d.CANVAS_MAX_SIZE.height-this.size.height&&(this.position.y=d.CANVAS_MAX_SIZE.height-this.size.height),this.setCenter(),a&&(this.isMoveBackward?(this.setTargetDirection(!0),this.setSpeed(d.MOVE_BACK_WARD_SPEED_DECREASE_RATE)):(this.setTargetDirection(),this.setSpeed()))}},c.setSpeed=function(e){var t=this.targetPosition.x-this.center.x,s=this.targetPosition.y-this.center.y,n=Math.pow(t,2),i=Math.pow(s,2);0==t&&0==s?(this.speed.x=0,this.speed.y=0):n+i<100?(this.speed.x=t,this.speed.y=s):(this.speed.x=(0<=t?1:-1)*this.maxSpeed*Math.sqrt(n/(n+i)),this.speed.y=(0<=s?1:-1)*this.maxSpeed*Math.sqrt(i/(n+i))),e&&(this.speed.x*=1-e,this.speed.y*=1-e)},c.setTargetDirection=function(e){var t=this.targetPosition.x-this.center.x,s=this.targetPosition.y-this.center.y,n=180*Math.atan(s/t)/Math.PI;isNaN(n)?this.targetDirection=this.direction:this.targetDirection=t<0&&0<=s?n+180:t<0&&s<0?n-180:n,e&&(0<=this.targetDirection?this.targetDirection-=180:this.targetDirection+=180)},c.setTargetPosition=function(e,t){var s=e.x,n=e.y;return s<t.size.width/2?s=t.size.width/2:s>d.CANVAS_MAX_SIZE.width-t.size.width/2&&(s=d.CANVAS_MAX_SIZE.width-t.size.width/2),n<t.size.height/2?n=t.size.height/2:n>d.CANVAS_MAX_SIZE.height-t.size.height/2&&(n=d.CANVAS_MAX_SIZE.height-t.size.height/2),{x:Math.floor(s),y:Math.floor(n)}},c.setMoveAttackUserTargetPosition=function(e,t,s){var n=e.x-s.center.x,i=e.y-s.center.y,a=n/Math.sqrt(Math.pow(n,2)+Math.pow(i,2)),r=i/Math.sqrt(Math.pow(n,2)+Math.pow(i,2)),o=t.range,l=n-a*o,c=i-r*o;if(Math.sqrt(Math.pow(n,2)+Math.pow(i,2))<o)var d=!0;else d=!1;return{x:s.center.x+l,y:s.center.y+c,moveBackward:d}},c.checkCircleCollision=function(e,t,s,a,n){var r=[],o={x:t,y:s,width:2*a,height:2*a,id:n};return e.onCollision(o,function(e){if(o.id!==e.id){var t=o.x+a,s=o.y+a,n=e.x+e.width/2,i=e.y+e.height/2;0<Math.pow(a+e.width/2,2)-Math.pow(n-t,2)-Math.pow(i-s,2)&&(r.collisionPosition={x:(t+n)/2,y:(s+i)/2},r.push(e))}}),r},c.calcCompelPos=function(e,t){for(var s={x:0,y:0},n=0;n<t.length;n++){var i=e.x+e.width/2,a=e.y+e.height/2,r=i-(t[n].x+t[n].width/2),o=a-(t[n].y+t[n].height/2),l=e.width/2+t[n].width/2-Math.sqrt(Math.pow(r,2)+Math.pow(o,2)),c=Math.pow(o/r,2),d=l*Math.sqrt(1/(1+c)),u=l*Math.sqrt(c/(1+c));s.x+=(0<r?1:-1)*d*1.1,s.y+=(0<o?1:-1)*u*1.1}return s},c.checkAndCalcCompelPos=function(e,t,s,n,i,a){var r=[];a={x:t,y:s,width:2*n,height:2*n,id:i};e.onCollision(a,function(e){if(a.id!==e.id){var t=a.x+a.width/2,s=a.y+a.height/2,n=e.x+e.width/2,i=e.y+e.height/2;0<Math.pow(a.width/2+e.width/2,2)-Math.pow(n-t,2)-Math.pow(i-s,2)&&r.push(e)}});var o={x:0,y:0};for(var l in r){var c=a.y+a.height/2,d=a.x+a.width/2-(r[l].x+r[l].width/2),u=c-(r[l].y+r[l].height/2),f=a.width/2+r[l].width/2-Math.sqrt(Math.pow(d,2)+Math.pow(u,2)),h=Math.pow(u/d,2),p=f*Math.sqrt(1/(1+h)),E=f*Math.sqrt(h/(1+h));o.x+=(0<d?1:-1)*p*1,o.y+=(0<u?1:-1)*E*1}return o},c.localToWorldPosition=function(e,t){return{x:e.x+t.x,y:e.y+t.y}},c.worldToLocalPosition=function(e,t,s){return s?{x:(e.x-t.x)*s,y:(e.y-t.y)*s}:{x:e.x-t.x,y:e.y-t.y}},c.worldXCoordToLocalX=function(e,t,s){return(e-t)*s},c.worldYCoordToLocalY=function(e,t,s){return(e-t)*s},c.isXInCanvas=function(e,t){return 0<e&&e<t.canvasSize.width},c.isYInCanvas=function(e,t){return 0<e&&e<t.canvasSize.height},c.isObjInCanvas=function(e,t,s){return e.x-(t+100)<=s.canvasSize.width&&0<=e.x+(t+100)&&e.y-(t+100)<=s.canvasSize.height&&0<=e.y+(t+100)},c.distanceSquare=function(e,t){var s=e.x-t.x,n=e.y-t.y;return Math.pow(s,2)+Math.pow(n,2)},c.distance=function(e,t){var s=c.distanceSpuare(e,t);return Math.sqrt(s)},c.calcSkillTargetPosition=function(e,t,s){switch(e.type){case d.SKILL_TYPE_INSTANT_RANGE:var n=e.range*Math.cos(s.direction*u),i=e.range*Math.sin(s.direction*u);return{x:s.center.x+n,y:s.center.y+i};case d.SKILL_TYPE_INSTANT_PROJECTILE:return{x:t.x,y:t.y};case d.SKILL_TYPE_RANGE:var a=c.distanceSquare(s.center,t);if(Math.pow(e.range,2)>a)return{x:t.x,y:t.y};var r=t.x-s.center.x,o=t.y-s.center.y,l=Math.atan(o/r);isNaN(l)?l=s.direction:r<0&&0<=o?l+=Math.PI:r<0&&o<0&&(l-=Math.PI);n=e.range*Math.cos(l),i=e.range*Math.sin(l);return{x:s.center.x+n,y:s.center.y+i};case d.SKILL_TYPE_SELF:case d.SKILL_TYPE_SELF_EXPLOSION:return{x:s.center.x,y:s.center.y};case d.SKILL_TYPE_TELEPORT:a=c.distanceSquare(s.center,t);if(Math.pow(e.range,2)>a)return{x:t.x,y:t.y};r=t.x-s.center.x,o=t.y-s.center.y,l=Math.atan(o/r);isNaN(l)?l=s.direction:r<0&&0<=o?l+=Math.PI:r<0&&o<0&&(l-=Math.PI);n=e.range*Math.cos(l),i=e.range*Math.sin(l);return{x:s.center.x+n,y:s.center.y+i};case d.SKILL_TYPE_PROJECTILE:case d.SKILL_TYPE_PROJECTILE_TICK:case d.SKILL_TYPE_PROJECTILE_EXPLOSION:case d.SKILL_TYPE_PROJECTILE_TICK_EXPLOSION:return{x:t.x,y:t.y}}},c.calcSkillTargetDirection=function(e,t,s){switch(e){case d.SKILL_TYPE_INSTANT_RANGE:case d.SKILL_TYPE_INSTANT_PROJECTILE:return s.direction;case d.SKILL_TYPE_RANGE:return c.calcTargetDirection(t,s.center,s.direction);case d.SKILL_TYPE_SELF:case d.SKILL_TYPE_SELF_EXPLOSION:return s.direction;case d.SKILL_TYPE_TELEPORT:case d.SKILL_TYPE_PROJECTILE:case d.SKILL_TYPE_PROJECTILE_TICK:case d.SKILL_TYPE_PROJECTILE_EXPLOSION:case d.SKILL_TYPE_PROJECTILE_TICK_EXPLOSION:return c.calcTargetDirection(t,s.center,s.direction)}},c.calcTargetDirection=function(e,t,s){var n=e.x-t.x,i=e.y-t.y,a=180*Math.atan(i/n)/Math.PI;return isNaN(a)?s:n<0&&0<=i?a+180:n<0&&i<0?a-180:a},c.calcTargetPosition=function(e,t,s){return{x:s*Math.cos(t*u),y:s*Math.sin(t*u)}},c.findData=function(e,t,s){try{if(e){for(var n=void 0,i=0;i<e.length;i++)if(e[i][t]==s){n=e[i];break}return n}}catch(e){}},c.findAllDatas=function(e,t,s){try{if(e){for(var n=[],i=0;i<e.length;i++)e[i][t]==s&&n.push(e[i]);return n}}catch(e){}},c.findDataWithTwoColumns=function(e,t,s,n,i){for(var a=[],r=null,o=0;o<e.length;o++)e[o][t]==s&&a.push(e[o]);if(0<a.length)for(o=0;o<a.length;o++)if(a[o][n]==i){r=a[o];break}return r},c.findAndSetBuffs=function(e,t,s){for(var n=[],i=0;i<10;i++){var a=e["buff"+(i+1)];if(!a)return n;var r=o({},c.findData(t,"index",a));r.actorID=s,n.push(r)}return n},c.getBuffs=function(e){for(var t=[],s=0;s<10;s++)e["buff"+(s+1)]&&t.push(e["buff"+(s+1)]);return t},c.getMobs=function(e,t){for(var s=[],n=0;n<5;n++)if(e["genMob"+(n+1)]){var i=c.findData(t,"index",e["genMob"+(n+1)]);s.push(i)}return s},c.setResourceData=function(e,t){for(var s=t.resourceLength=0;s<10;s++){var n=t["resourceIndex"+(s+1)];if(!n)break;var i=o({},c.findData(e,"index",n));t["resourceIndex"+(s+1)]=i,t.resourceLength=s+1}return!!t.resourceLength},c.makeUserEffect=function(e,t){var s={x:e.center.x,y:e.center.y};return{index:t.index,isRotate:t.isRotate,resourceIndex1:t.resourceIndex1,resourceIndex2:t.resourceIndex2,resourceIndex3:t.resourceIndex3,resourceIndex4:t.resourceIndex4,resourceIndex5:t.resourceIndex5,resourceIndex6:t.resourceIndex6,resourceIndex7:t.resourceIndex7,resourceIndex8:t.resourceIndex8,resourceIndex9:t.resourceIndex9,resourceIndex10:t.resourceIndex10,resourceLength:t.resourceLength,resourceLifeTime:t.resourceLifeTime,startTime:Date.now(),effectTimer:Date.now(),effectIndex:0,center:s,changeIndex:function(){this.effectIndex+1>=this.resourceLength?this.effectIndex=0:this.effectIndex++,this.effectTimer=Date.now()}}},c.generateRandomUniqueID=function(e,t,s){if(!s){for(var n=!1;!n;){var i=f(t);for(var a in n=!0,e)i==e[a].objectID&&(n=!1)}return i}if(s){for(var r=[],o=0;o<s;o++)for(n=!1;!n;){i=f(t);for(var a in n=!0,e)i==e[a].objectID&&(n=!1);for(var l=0;l<r.length;l++)i==r[l]&&(n=!1);n&&r.push(i)}return r}},c.getElementsByClassName=function(e,t){for(var s=[],n=e.getElementsByTagName("div"),i=0;i<n.length;i++)for(var a=0;a<n[i].classList.length;a++)n[i].classList[a]===t&&s.push(n[i]);return s},c.calcForePosition=function(e,t,s,n){return{x:e.x+n*Math.cos(s*u)-t,y:e.y+n*Math.sin(s*u)-t}},c.interpolationSine=function(e,t){return t?d.SKILL_EFFECT_INTERPOLATION_FACTOR*Math.sin(Math.PI*e/t)+.5:d.CAST_EFFECT_INTERPOLATION_FACTOR*Math.sin(2*Math.PI*e/1e3)+1},c.isNumeric=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},c.makeCssClipStyle=function(e,t){return t?"rect("+e.top*t+"px,"+e.right*t+"px,"+e.bottom*t+"px,"+e.left*t+"px)":"rect("+e.top+"px,"+e.right+"px,"+e.bottom+"px,"+e.left+"px)"},c.setImgCssStyle=function(e,t,s){s?(e.style.position="absolute",e.style.top=-t.top*s+"px",e.style.left=-t.left*s+"px",e.style.width=d.IMAGE_SOURCE_SIZE.width*s+"px",e.style.height=d.IMAGE_SOURCE_SIZE.height*s+"px"):(e.style.position="absolute",e.style.top=-t.top+"px",e.style.left=-t.left+"px",e.style.width=d.IMAGE_SOURCE_SIZE.width+"px",e.style.height=d.IMAGE_SOURCE_SIZE.height+"px")},c.processMessage=function(e,t,s){var n=e.replace(/(<([^>]+)>)/gi,"").substring(0,t);return s?n.replace(/\s/gi,""):n},c.createDomSelectOptGroup=function(e,t){var s=document.createElement("optgroup");s.label=e,t.appendChild(s)},c.createDomSelectOption=function(e,t,s,n){var i=document.createElement("option");i.setAttribute("value",t),s&&(i.disabled=!0);var a=document.createTextNode(e);i.appendChild(a),n.appendChild(i)},c.createRequest=function(){var t;try{t=new XMLHttpRequest}catch(e){try{t=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){t=new ActiveXObject("Microsoft.XMLHTTP")}}return t},c.getCookie=function(e,t){for(var s=e.split(";"),n=0;n<s.length;n++){for(var i=s[n];" "==i.charAt(0);)i=i.substring(1);if(0===i.indexOf(t)){var a=i.substring(t.length+1,i.length);return"true"===a||"false"!==a&&a}}return""},c.setCookie=function(e,t){var s=new Date;s.setTime(s.getTime()+6048e5);var n="expires="+s.toUTCString();document.cookie=e+"="+t+";"+n+";path=/"},c.isRender=function(e,t,s,n,i){var a=n||900,r=i||600;return!(Math.abs(t.center.x-e.center.x)>a&&Math.abs(s.x-e.center.x)>a)&&!(Math.abs(t.center.y-e.center.y)>r&&Math.abs(s.y-e.center.y)>r)},c.setDrawUser=function(e,t,s){var n=[];for(var i in e){var a=c.worldToLocalPosition(e[i].center,s.userOffset,s.scaleFactor);if(c.isObjInCanvas(a,e[i].size.width,s)){var r=c.worldToLocalPosition(e[i].position,s.userOffset,s.scaleFactor),o=!1;e[i].currentSkill&&(o=e[i].currentSkill.property),n.push({objectID:e[i].objectID,level:e[i].level,name:e[i].name,textCanvas:e[i].textCanvas,textScaleFactor:e[i].textScaleFactor,HP:e[i].HP,maxHP:e[i].maxHP,MP:e[i].MP,maxMP:e[i].maxMP,chatMessage1:e[i].chatMessage1,chatMessage2:e[i].chatMessage2,localCenter:a,localPosition:r,direction:e[i].direction,buffImgDataList:e[i].buffImgDataList,effectIndex:e[i].effectIndex,effectRotateDegree:e[i].effectRotateDegree,imgHandIndex:e[i].imgHandIndex,imgData:e[i].imgData,skillCastEffectPlay:e[i].skillCastEffectPlay,currentSkill:o,castEffectFactor:e[i].castEffectFactor,hitImgDataList:e[i].hitImgDataList,buffImgDataList:e[i].buffImgDataList})}}return n},c.setDrawMobs=function(e,t){var s=[];for(var n in e){var i=c.worldToLocalPosition(e[n].center,t.userOffset,t.scaleFactor);if(c.isObjInCanvas(i,e[n].size.width,t)){var a=c.worldToLocalPosition(e[n].position,t.userOffset,t.scaleFactor);s.push({objectID:e[n].objectID,HP:e[n].HP,maxHP:e[n].maxHP,localCenter:i,localPosition:a,direction:e[n].direction+e[n].attackDegree,effectIndex:e[n].effectIndex,effectRotateDegree:e[n].effectRotateDegree,imgData:e[n].imgData,buffImgDataList:e[n].buffImgDataList,hitImgDataList:e[n].hitImgDataList})}}return s},c.checkName=function(e,t){return"Pyro#"==t.slice(0,5)&&e!==d.CHAR_TYPE_FIRE||"Froster#"==t.slice(0,8)&&e!==d.CHAR_TYPE_FROST||"Myster#"==t.slice(0,7)&&e!==d.CHAR_TYPE_ARCANE?null:t},c.setRandomName=function(e){for(var t="",s=0;s<3;s++)t+=Math.floor(10*Math.random());switch(e){case d.CHAR_TYPE_FIRE:return"Pyro#"+t;case d.CHAR_TYPE_FROST:return"Froster#"+t;case d.CHAR_TYPE_ARCANE:return"Myster#"+t}},c.charToKeyCode=function(e){return n("./keyCodeTable")[e.toLowerCase()]},c.keyCodeToChar=function(e){var t=n("./keyCodeTable");for(var s in t)if(t[s]==e)return s.toUpperCase()},c.makeCacheCanvas=function(e,t,s){var n=document.createElement("canvas"),i=n.getContext("2d");return n.width=400*s,n.height=100*s,i.beginPath(),i.textAlign="center",i.fillStyle="black",i.font="bold 15px Arial",i.fillText("Lv."+e+" "+t,200*s,50*s,200*s),i.closePath(),n},c.makePacketForm=function(e){for(var t=[],s=1;s<arguments.length;s++)t.push(arguments[s]);return i.encode({t:e,v:t})},c.decodePacket=function(e){return i.decode(e)},c.processUserData=function(e){return{oID:e[0],tp:e[1],nm:e[2],cs:e[3],pos:e[4],tpos:e[5],msp:e[6],dir:e[7],rsp:e[8],lv:e[9],ep:e[10],mHP:e[11],mMP:e[12],HP:e[13],MP:e[14],csp:e[15],cdt:e[16]}},c.processUserAddData=function(e){return{oID:e[0],tp:e[1],nm:e[2],cs:e[3],pos:e[4],tpos:e[5],msp:e[6],dir:e[7],rsp:e[8],lv:e[9],ep:e[10],mHP:e[11],mMP:e[12],HP:e[13],MP:e[14],csp:e[15],cdt:e[16],bS:e[17],pS:e[18],ipS:e[19],eS:e[20],aS:e[21],dR:e[22],fiDR:e[23],frDR:e[24],acDR:e[25],rA:e[26],rFi:e[27],rFr:e[28],rAc:e[29],sP:e[30],sM:e[31],sS:e[32],cRR:e[33],g:e[34],j:e[35]}},c.processUserAddReData=function(e){return{oID:e[0],tp:e[1],nm:e[2],cs:e[3],pos:e[4],tpos:e[5],msp:e[6],dir:e[7],rsp:e[8],lv:e[9],ep:e[10],mHP:e[11],mMP:e[12],HP:e[13],MP:e[14],csp:e[15],cdt:e[16],bS:e[17],pS:e[18],ipS:e[19],dR:e[20],fiDR:e[21],frDR:e[22],acDR:e[23],rA:e[24],rFi:e[25],rFr:e[26],rAc:e[27],sP:e[28],sM:e[29],sS:e[30],cRR:e[31]}},c.processUserMAData=function(e){return{oID:e[0],tp:e[1],nm:e[2],cs:e[3],pos:e[4],tpos:e[5],msp:e[6],dir:e[7],rsp:e[8],lv:e[9],ep:e[10],mHP:e[11],mMP:e[12],HP:e[13],MP:e[14],csp:e[15],cdt:e[16],sID:e[17],sTPos:e[18],mB:e[19]}},c.processUserUSData=function(e){return{oID:e[0],tp:e[1],nm:e[2],cs:e[3],pos:e[4],tpos:e[5],msp:e[6],dir:e[7],rsp:e[8],lv:e[9],ep:e[10],mHP:e[11],mMP:e[12],HP:e[13],MP:e[14],csp:e[15],cdt:e[16],sID:e[17],sDir:e[18],sTPos:e[19],sPIDs:e[20]}},c.processUserStatData=function(e){return{oID:e[0],tp:e[1],lv:e[2],ep:e[3],mHP:e[4],mMP:e[5],HP:e[6],MP:e[7],csp:e[8],msp:e[9],rsp:e[10],cdt:e[11]}},c.processScoreDatas=function(e){for(var t=[],s=0;s<e.length;s++)t.push({id:e[s][0],nm:e[s][1],lv:e[s][2],kS:e[s][3],tS:e[s][4],tK:e[s][5]});return t},c.processUserPrivateData=function(e){return{dR:e[0],fiDR:e[1],frDR:e[2],acDR:e[3],rA:e[4],rFi:e[5],rFr:e[6],rAc:e[7],lv:e[8],sP:e[9],sM:e[10],sS:e[11],cRR:e[12]}},c.processMobData=function(e){return{id:e[0],oID:e[1],cs:e[2],pos:e[3],tpos:e[4],msp:e[5],dir:e[6],rsp:e[7],at:e[8],mHP:e[9],HP:e[10],cdt:e[11],bL:e[12]}},c.processMobDatas=function(e){for(var t=[],s=0;s<e.length;s++)t.push(c.processMobData(e[s]));return t},c.processBuffData=function(e){return{oID:e[0],iP:e[1],bL:e[2],pL:e[3],aL:e[4]}},c.processBuffDatas=function(e){for(var t=[],s=0;s<e.length;s++)t.push(c.processBuffData(e[s]));return t},c.processMobStatData=function(e){return{oID:e[0],pos:e[1],dir:e[2],HP:e[3]}},c.processMobBuffData=function(e){return{oID:e[0],bL:e[1]}},c.processObjDatas=function(e){for(var t=[],s=0;s<e.length;s++){var n={};switch(e[s][0].substr(0,1)){case d.PREFIX_OBJECT_GOLD:n.oID=e[s][0],n.pos=e[s][1],n.rad=e[s][2];break;case d.PREFIX_OBJECT_JEWEL:n.oID=e[s][0],n.pos=e[s][1];break;case d.PREFIX_OBJECT_SKILL:n.oID=e[s][0],n.pos=e[s][1],n.pro=e[s][2];break;case d.PREFIX_OBJECT_BOX:n.oID=e[s][0],n.pos=e[s][1];break;case d.PREFIX_OBJECT_BUFF:n.oID=e[s][0],n.pos=e[s][1],n.rID=e[s][2]}t.push(n)}return t}},{"../../modules/public/objectAssign.js":15,"./gameConfig.json":13,"./keyCodeTable":14,"msgpack-lite":24}],19:[function(e,t,s){t.exports={1:{NAME:"TasselsPlays",HREF:"https://www.youtube.com/watch?v=v4UdZjaGYLs"},2:{NAME:"Fady",HREF:"https://www.youtube.com/watch?v=zkqpXRhDW6o"}}},{}],20:[function(e,n,t){!function(e){void 0!==n&&(n.exports=e);var i="listeners",s={on:function(e,t){return r(this,e).push(t),this},once:function(e,t){var s=this;return n.originalListener=t,r(s,e).push(n),s;function n(){a.call(s,e,n),t.apply(this,arguments)}},off:a,emit:function(e,t){var s=this,n=r(s,e,!0);if(!n)return!1;var i=arguments.length;if(1===i)n.forEach(function(e){e.call(s)});else if(2===i)n.forEach(function(e){e.call(s,t)});else{var a=Array.prototype.slice.call(arguments,1);n.forEach(function(e){e.apply(s,a)})}return!!n.length}};function t(e){for(var t in s)e[t]=s[t];return e}function a(e,t){var s,n=this;if(arguments.length){if(t){if(s=r(n,e,!0)){if(!(s=s.filter(function(e){return e!==t&&e.originalListener!==t})).length)return a.call(n,e);n[i][e]=s}}else if((s=n[i])&&(delete s[e],!Object.keys(s).length))return a.call(n)}else delete n[i];return n}function r(e,t,s){if(!s||e[i]){var n=e[i]||(e[i]={});return n[t]||(n[t]=[])}}t(e.prototype),e.mixin=t}(function e(){if(!(this instanceof e))return new e})},{}],21:[function(e,t,s){arguments[4][3][0].apply(s,arguments)},{dup:3}],22:[function(e,t,s){(function(i){!function(I){var _,S="undefined",T=S!==typeof i&&i,b=S!==typeof Uint8Array&&Uint8Array,y=S!==typeof ArrayBuffer&&ArrayBuffer,C=[0,0,0,0,0,0,0,0],n=Array.isArray||function(e){return!!e&&"[object Array]"==Object.prototype.toString.call(e)},v=4294967296,L=16777216;function e(e,t,l){var d=t?0:4,u=t?4:0,n=t?0:3,i=t?1:2,a=t?2:1,r=t?3:0,o=t?w:B,c=t?x:O,s=p.prototype,f="is"+e,h="_"+f;return s.buffer=void 0,s.offset=0,s[h]=!0,s.toNumber=E,s.toString=function(e){var t=this.buffer,s=this.offset,n=g(t,s+d),i=g(t,s+u),a="",r=!l&&2147483648&n;r&&(n=~n,i=v-i);e=e||10;for(;;){var o=n%e*v+i;if(n=Math.floor(n/e),i=Math.floor(o/e),a=(o%e).toString(e)+a,!n&&!i)break}r&&(a="-"+a);return a},s.toJSON=E,s.toArray=D,T&&(s.toBuffer=A),b&&(s.toArrayBuffer=R),p[f]=function(e){return!(!e||!e[h])},I[e]=p;function p(e,t,s,n){return this instanceof p?function(e,t,s,n,i){b&&y&&(t instanceof y&&(t=new b(t)),n instanceof y&&(n=new b(n)));if(!(t||s||n||_))return void(e.buffer=k(C,0));if(!P(t,s)){var a=_||Array;i=s,n=t,s=0,t=new a(8)}if(e.buffer=t,e.offset=s|=0,S===typeof n)return;"string"==typeof n?function(e,t,s,n){var i=0,a=s.length,r=0,o=0;"-"===s[0]&&i++;var l=i;for(;i<a;){var c=parseInt(s[i++],n);if(!(0<=c))break;o=o*n+c,r=r*n+Math.floor(o/v),o%=v}l&&(r=~r,o?o=v-o:r++);m(e,t+d,r),m(e,t+u,o)}(t,s,n,i||10):P(n,i)?M(t,s,n,i):"number"==typeof i?(m(t,s+d,n),m(t,s+u,i)):0<n?o(t,s,n):n<0?c(t,s,n):M(t,s,C,0)}(this,e,t,s,n):new p(e,t,s,n)}function E(){var e=this.buffer,t=this.offset,s=g(e,t+d),n=g(e,t+u);return l||(s|=0),s?s*v+n:n}function m(e,t,s){e[t+r]=255&s,s>>=8,e[t+a]=255&s,s>>=8,e[t+i]=255&s,s>>=8,e[t+n]=255&s}function g(e,t){return e[t+n]*L+(e[t+i]<<16)+(e[t+a]<<8)+e[t+r]}}function D(e){var t=this.buffer,s=this.offset;return _=null,!1!==e&&0===s&&8===t.length&&n(t)?t:k(t,s)}function A(e){var t=this.buffer,s=this.offset;if(_=T,!1!==e&&0===s&&8===t.length&&i.isBuffer(t))return t;var n=new T(8);return M(n,0,t,s),n}function R(e){var t=this.buffer,s=this.offset,n=t.buffer;if(_=b,!1!==e&&0===s&&n instanceof y&&8===n.byteLength)return n;var i=new b(8);return M(i,0,t,s),i.buffer}function P(e,t){var s=e&&e.length;return t|=0,s&&t+8<=s&&"string"!=typeof e[t]}function M(e,t,s,n){t|=0,n|=0;for(var i=0;i<8;i++)e[t++]=255&s[n++]}function k(e,t){return Array.prototype.slice.call(e,t,t+8)}function w(e,t,s){for(var n=t+8;t<n;)e[--n]=255&s,s/=256}function x(e,t,s){var n=t+8;for(s++;t<n;)e[--n]=255&-s^255,s/=256}function B(e,t,s){for(var n=t+8;t<n;)e[t++]=255&s,s/=256}function O(e,t,s){var n=t+8;for(s++;t<n;)e[t++]=255&-s^255,s/=256}e("Uint64BE",!0,!0),e("Int64BE",!0,!1),e("Uint64LE",!1,!0),e("Int64LE",!1,!1)}("object"==typeof s&&"string"!=typeof s.nodeName?s:this||{})}).call(this,e("buffer").Buffer)},{buffer:2}],23:[function(e,t,s){var n={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},{}],24:[function(e,t,s){s.encode=e("./encode").encode,s.decode=e("./decode").decode,s.Encoder=e("./encoder").Encoder,s.Decoder=e("./decoder").Decoder,s.createCodec=e("./ext").createCodec,s.codec=e("./codec").codec},{"./codec":33,"./decode":35,"./decoder":36,"./encode":38,"./encoder":39,"./ext":43}],25:[function(e,s,t){(function(e){function t(e){return e&&e.isBuffer&&e}s.exports=t(void 0!==e&&e)||t(this.Buffer)||t("undefined"!=typeof window&&window.Buffer)||this.Buffer}).call(this,e("buffer").Buffer)},{buffer:2}],26:[function(e,t,s){s.copy=function(e,t,s,n){var i;s||(s=0);n||0===n||(n=this.length);t||(t=0);var a=n-s;if(e===this&&s<t&&t<n)for(i=a-1;0<=i;i--)e[i+t]=this[i+s];else for(i=0;i<a;i++)e[i+t]=this[i+s];return a},s.toString=function(e,t,s){var n=this,i=0|t;s||(s=n.length);var a="",r=0;for(;i<s;)(r=n[i++])<128?a+=String.fromCharCode(r):(192==(224&r)?r=(31&r)<<6|63&n[i++]:224==(240&r)?r=(15&r)<<12|(63&n[i++])<<6|63&n[i++]:240==(248&r)&&(r=(7&r)<<18|(63&n[i++])<<12|(63&n[i++])<<6|63&n[i++]),65536<=r?(r-=65536,a+=String.fromCharCode(55296+(r>>>10),56320+(1023&r))):a+=String.fromCharCode(r));return a},s.write=function(e,t){var s=this,n=t||(t|=0),i=e.length,a=0,r=0;for(;r<i;)(a=e.charCodeAt(r++))<128?s[n++]=a:(a<2048?s[n++]=192|a>>>6:(a<55296||57343<a?s[n++]=224|a>>>12:(a=65536+(a-55296<<10|e.charCodeAt(r++)-56320),s[n++]=240|a>>>18,s[n++]=128|a>>>12&63),s[n++]=128|a>>>6&63),s[n++]=128|63&a);return n-t}},{}],27:[function(e,t,s){var n=e("./bufferish");function i(e){return new Array(e)}(s=t.exports=i(0)).alloc=i,s.concat=n.concat,s.from=function(e){if(!n.isBuffer(e)&&n.isView(e))e=n.Uint8Array.from(e);else if(n.isArrayBuffer(e))e=new Uint8Array(e);else{if("string"==typeof e)return n.from.call(s,e);if("number"==typeof e)throw new TypeError('"value" argument must not be a number')}return Array.prototype.slice.call(e)}},{"./bufferish":31}],28:[function(e,t,s){var n=e("./bufferish"),i=n.global;function a(e){return new i(e)}(s=t.exports=n.hasBuffer?a(0):[]).alloc=n.hasBuffer&&i.alloc||a,s.concat=n.concat,s.from=function(e){if(!n.isBuffer(e)&&n.isView(e))e=n.Uint8Array.from(e);else if(n.isArrayBuffer(e))e=new Uint8Array(e);else{if("string"==typeof e)return n.from.call(s,e);if("number"==typeof e)throw new TypeError('"value" argument must not be a number')}return i.from&&1!==i.from.length?i.from(e):new i(e)}},{"./bufferish":31}],29:[function(e,t,s){var n,o=e("./buffer-lite");s.copy=r,s.slice=d,s.toString=function(e,t,s){return(!a&&l.isBuffer(this)?this.toString:o.toString).apply(this,arguments)},s.write=(n="write",function(){return(this[n]||o[n]).apply(this,arguments)});var l=e("./bufferish"),i=l.global,a=l.hasBuffer&&"TYPED_ARRAY_SUPPORT"in i,c=a&&!i.TYPED_ARRAY_SUPPORT;function r(e,t,s,n){var i=l.isBuffer(this),a=l.isBuffer(e);if(i&&a)return this.copy(e,t,s,n);if(c||i||a||!l.isView(this)||!l.isView(e))return o.copy.call(this,e,t,s,n);var r=s||null!=n?d.call(this,s,n):this;return e.set(r,t),r.length}function d(e,t){var s=this.slice||!c&&this.subarray;if(s)return s.call(this,e,t);var n=l.alloc.call(this,t-e);return r.call(this,n,0,e,t),n}},{"./buffer-lite":26,"./bufferish":31}],30:[function(e,t,n){var i=e("./bufferish");function s(e){return new Uint8Array(e)}(n=t.exports=i.hasArrayBuffer?s(0):[]).alloc=s,n.concat=i.concat,n.from=function(e){if(i.isView(e)){var t=e.byteOffset,s=e.byteLength;(e=e.buffer).byteLength!==s&&(e.slice?e=e.slice(t,t+s):(e=new Uint8Array(e)).byteLength!==s&&(e=Array.prototype.slice.call(e,t,t+s)))}else{if("string"==typeof e)return i.from.call(n,e);if("number"==typeof e)throw new TypeError('"value" argument must not be a number')}return new Uint8Array(e)}},{"./bufferish":31}],31:[function(e,t,a){var s=a.global=e("./buffer-global"),n=a.hasBuffer=s&&!!s.isBuffer,i=a.hasArrayBuffer="undefined"!=typeof ArrayBuffer,r=a.isArray=e("isarray");a.isArrayBuffer=i?function(e){return e instanceof ArrayBuffer||p(e)}:m;var o=a.isBuffer=n?s.isBuffer:m,l=a.isView=i?ArrayBuffer.isView||g("ArrayBuffer","buffer"):m;a.alloc=h,a.concat=function(e,t){t||(t=0,Array.prototype.forEach.call(e,function(e){t+=e.length}));var s=this!==a&&this||e[0],n=h.call(s,t),i=0;return Array.prototype.forEach.call(e,function(e){i+=f.copy.call(e,n,i)}),n},a.from=function(e){return"string"==typeof e?function(e){var t=3*e.length,s=h.call(this,t),n=f.write.call(s,e);t!==n&&(s=f.slice.call(s,0,n));return s}.call(this,e):E(this).from(e)};var c=a.Array=e("./bufferish-array"),d=a.Buffer=e("./bufferish-buffer"),u=a.Uint8Array=e("./bufferish-uint8array"),f=a.prototype=e("./bufferish-proto");function h(e){return E(this).alloc(e)}var p=g("ArrayBuffer");function E(e){return o(e)?d:l(e)?u:r(e)?c:n?d:i?u:c}function m(){return!1}function g(t,s){return t="[object "+t+"]",function(e){return null!=e&&{}.toString.call(s?e[s]:e)===t}}},{"./buffer-global":25,"./bufferish-array":27,"./bufferish-buffer":28,"./bufferish-proto":29,"./bufferish-uint8array":30,isarray:23}],32:[function(e,t,s){var n=e("isarray");s.createCodec=o,s.install=function(e){for(var t in e)a.prototype[t]=r(a.prototype[t],e[t])},s.filter=function(e){return n(e)?function(t){return t=t.slice(),function(e){return t.reduce(s,e)};function s(e,t){return t(e)}}(e):e};var i=e("./bufferish");function a(e){if(!(this instanceof a))return new a(e);this.options=e,this.init()}function r(e,t){return e&&t?function(){return e.apply(this,arguments),t.apply(this,arguments)}:e||t}function o(e){return new a(e)}a.prototype.init=function(){var e=this.options;return e&&e.uint8array&&(this.bufferish=i.Uint8Array),this},s.preset=o({preset:!0})},{"./bufferish":31,isarray:23}],33:[function(e,t,s){e("./read-core"),e("./write-core"),s.codec={preset:e("./codec-base").preset}},{"./codec-base":32,"./read-core":45,"./write-core":48}],34:[function(e,t,s){s.DecodeBuffer=i;var n=e("./read-core").preset;function i(e){if(!(this instanceof i))return new i(e);if(e&&(this.options=e).codec){var t=this.codec=e.codec;t.bufferish&&(this.bufferish=t.bufferish)}}e("./flex-buffer").FlexDecoder.mixin(i.prototype),i.prototype.codec=n,i.prototype.fetch=function(){return this.codec.decode(this)}},{"./flex-buffer":44,"./read-core":45}],35:[function(e,t,s){s.decode=function(e,t){var s=new n(t);return s.write(e),s.read()};var n=e("./decode-buffer").DecodeBuffer},{"./decode-buffer":34}],36:[function(e,t,s){s.Decoder=a;var n=e("event-lite"),i=e("./decode-buffer").DecodeBuffer;function a(e){if(!(this instanceof a))return new a(e);i.call(this,e)}a.prototype=new i,n.mixin(a.prototype),a.prototype.decode=function(e){arguments.length&&this.write(e),this.flush()},a.prototype.push=function(e){this.emit("data",e)},a.prototype.end=function(e){this.decode(e),this.emit("end")}},{"./decode-buffer":34,"event-lite":20}],37:[function(e,t,s){s.EncodeBuffer=i;var n=e("./write-core").preset;function i(e){if(!(this instanceof i))return new i(e);if(e&&(this.options=e).codec){var t=this.codec=e.codec;t.bufferish&&(this.bufferish=t.bufferish)}}e("./flex-buffer").FlexEncoder.mixin(i.prototype),i.prototype.codec=n,i.prototype.write=function(e){this.codec.encode(this,e)}},{"./flex-buffer":44,"./write-core":48}],38:[function(e,t,s){s.encode=function(e,t){var s=new n(t);return s.write(e),s.read()};var n=e("./encode-buffer").EncodeBuffer},{"./encode-buffer":37}],39:[function(e,t,s){s.Encoder=a;var n=e("event-lite"),i=e("./encode-buffer").EncodeBuffer;function a(e){if(!(this instanceof a))return new a(e);i.call(this,e)}a.prototype=new i,n.mixin(a.prototype),a.prototype.encode=function(e){this.write(e),this.emit("data",this.read())},a.prototype.end=function(e){arguments.length&&this.encode(e),this.flush(),this.emit("end")}},{"./encode-buffer":37,"event-lite":20}],40:[function(e,t,s){s.ExtBuffer=function e(t,s){if(!(this instanceof e))return new e(t,s);this.buffer=n.from(t);this.type=s};var n=e("./bufferish")},{"./bufferish":31}],41:[function(t,e,s){s.setExtPackers=function(e){e.addExtPacker(14,Error,[u,l]),e.addExtPacker(1,EvalError,[u,l]),e.addExtPacker(2,RangeError,[u,l]),e.addExtPacker(3,ReferenceError,[u,l]),e.addExtPacker(4,SyntaxError,[u,l]),e.addExtPacker(5,TypeError,[u,l]),e.addExtPacker(6,URIError,[u,l]),e.addExtPacker(10,RegExp,[d,l]),e.addExtPacker(11,Boolean,[c,l]),e.addExtPacker(12,String,[c,l]),e.addExtPacker(13,Date,[Number,l]),e.addExtPacker(15,Number,[c,l]),"undefined"!=typeof Uint8Array&&(e.addExtPacker(17,Int8Array,r),e.addExtPacker(18,Uint8Array,r),e.addExtPacker(19,Int16Array,r),e.addExtPacker(20,Uint16Array,r),e.addExtPacker(21,Int32Array,r),e.addExtPacker(22,Uint32Array,r),e.addExtPacker(23,Float32Array,r),"undefined"!=typeof Float64Array&&e.addExtPacker(24,Float64Array,r),"undefined"!=typeof Uint8ClampedArray&&e.addExtPacker(25,Uint8ClampedArray,r),e.addExtPacker(26,ArrayBuffer,r),e.addExtPacker(29,DataView,r));i.hasBuffer&&e.addExtPacker(27,a,i.from)};var n,i=t("./bufferish"),a=i.global,r=i.Uint8Array.from,o={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function l(e){return n||(n=t("./encode").encode),n(e)}function c(e){return e.valueOf()}function d(e){(e=RegExp.prototype.toString.call(e).split("/")).shift();var t=[e.pop()];return t.unshift(e.join("/")),t}function u(e){var t={};for(var s in o)t[s]=e[s];return t}},{"./bufferish":31,"./encode":38}],42:[function(t,e,s){s.setExtUnpackers=function(e){e.addExtUnpacker(14,[o,c(Error)]),e.addExtUnpacker(1,[o,c(EvalError)]),e.addExtUnpacker(2,[o,c(RangeError)]),e.addExtUnpacker(3,[o,c(ReferenceError)]),e.addExtUnpacker(4,[o,c(SyntaxError)]),e.addExtUnpacker(5,[o,c(TypeError)]),e.addExtUnpacker(6,[o,c(URIError)]),e.addExtUnpacker(10,[o,l]),e.addExtUnpacker(11,[o,d(Boolean)]),e.addExtUnpacker(12,[o,d(String)]),e.addExtUnpacker(13,[o,d(Date)]),e.addExtUnpacker(15,[o,d(Number)]),"undefined"!=typeof Uint8Array&&(e.addExtUnpacker(17,d(Int8Array)),e.addExtUnpacker(18,d(Uint8Array)),e.addExtUnpacker(19,[u,d(Int16Array)]),e.addExtUnpacker(20,[u,d(Uint16Array)]),e.addExtUnpacker(21,[u,d(Int32Array)]),e.addExtUnpacker(22,[u,d(Uint32Array)]),e.addExtUnpacker(23,[u,d(Float32Array)]),"undefined"!=typeof Float64Array&&e.addExtUnpacker(24,[u,d(Float64Array)]),"undefined"!=typeof Uint8ClampedArray&&e.addExtUnpacker(25,d(Uint8ClampedArray)),e.addExtUnpacker(26,u),e.addExtUnpacker(29,[u,d(DataView)]));i.hasBuffer&&e.addExtUnpacker(27,d(a))};var n,i=t("./bufferish"),a=i.global,r={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function o(e){return n||(n=t("./decode").decode),n(e)}function l(e){return RegExp.apply(null,e)}function c(n){return function(e){var t=new n;for(var s in r)t[s]=e[s];return t}}function d(t){return function(e){return new t(e)}}function u(e){return new Uint8Array(e).buffer}},{"./bufferish":31,"./decode":35}],43:[function(e,t,s){e("./read-core"),e("./write-core"),s.createCodec=e("./codec-base").createCodec},{"./codec-base":32,"./read-core":45,"./write-core":48}],44:[function(e,t,s){s.FlexDecoder=o,s.FlexEncoder=l;var n=e("./bufferish"),i=2048,a=65536,r="BUFFER_SHORTAGE";function o(){if(!(this instanceof o))return new o}function l(){if(!(this instanceof l))return new l}function c(){throw new Error("method not implemented: write()")}function d(){throw new Error("method not implemented: fetch()")}function u(){return this.buffers&&this.buffers.length?(this.flush(),this.pull()):this.fetch()}function f(e){(this.buffers||(this.buffers=[])).push(e)}function h(){return(this.buffers||(this.buffers=[])).shift()}function p(s){return function(e){for(var t in s)e[t]=s[t];return e}}o.mixin=p({bufferish:n,write:function(e){var t=this.offset?n.prototype.slice.call(this.buffer,this.offset):this.buffer;this.buffer=t?e?this.bufferish.concat([t,e]):t:e,this.offset=0},fetch:d,flush:function(){for(;this.offset<this.buffer.length;){var e,t=this.offset;try{e=this.fetch()}catch(e){if(e&&e.message!=r)throw e;this.offset=t;break}this.push(e)}},push:f,pull:h,read:u,reserve:function(e){var t=this.offset,s=t+e;if(s>this.buffer.length)throw new Error(r);return this.offset=s,t},offset:0}),o.mixin(o.prototype),l.mixin=p({bufferish:n,write:c,fetch:function(){var e=this.start;if(e<this.offset){var t=this.start=this.offset;return n.prototype.slice.call(this.buffer,e,t)}},flush:function(){for(;this.start<this.offset;){var e=this.fetch();e&&this.push(e)}},push:f,pull:function(){var e=this.buffers||(this.buffers=[]),t=1<e.length?this.bufferish.concat(e):e[0];return e.length=0,t},read:u,reserve:function(e){var t=0|e;if(this.buffer){var s=this.buffer.length,n=0|this.offset,i=n+t;if(i<s)return this.offset=i,n;this.flush(),e=Math.max(e,Math.min(2*s,this.maxBufferSize))}return e=Math.max(e,this.minBufferSize),this.buffer=this.bufferish.alloc(e),this.start=0,this.offset=t,0},send:function(e){var t=e.length;if(t>this.minBufferSize)this.flush(),this.push(e);else{var s=this.reserve(t);n.prototype.copy.call(e,this.buffer,s)}},maxBufferSize:a,minBufferSize:i,offset:0,start:0}),l.mixin(l.prototype)},{"./bufferish":31}],45:[function(e,t,s){var n=e("./ext-buffer").ExtBuffer,i=e("./ext-unpacker"),a=e("./read-format").readUint8,r=e("./read-token"),o=e("./codec-base");function l(){var e,n,t=this.options;return this.decode=(e=t,n=r.getReadToken(e),function(e){var t=a(e),s=n[t];if(!s)throw new Error("Invalid type: "+(t?"0x"+t.toString(16):t));return s(e)}),t&&t.preset&&i.setExtUnpackers(this),this}o.install({addExtUnpacker:function(e,t){(this.extUnpackers||(this.extUnpackers=[]))[e]=o.filter(t)},getExtUnpacker:function(t){return(this.extUnpackers||(this.extUnpackers=[]))[t]||function(e){return new n(e,t)}},init:l}),s.preset=l.call(o.preset)},{"./codec-base":32,"./ext-buffer":40,"./ext-unpacker":42,"./read-format":46,"./read-token":47}],46:[function(e,t,s){var n=e("ieee754"),i=e("int64-buffer"),a=i.Uint64BE,r=i.Int64BE;s.getReadFormat=function(e){var t=o.hasArrayBuffer&&e&&e.binarraybuffer,s=e&&e.int64;return{map:c&&e&&e.usemap?f:u,array:h,str:p,bin:t?m:E,ext:g,uint8:I,uint16:S,uint32:b,uint64:C(8,s?D:v),int8:_,int16:T,int32:y,int64:C(8,s?A:L),float32:C(4,R),float64:C(8,P)}},s.readUint8=I;var o=e("./bufferish"),l=e("./bufferish-proto"),c="undefined"!=typeof Map,d=!0;function u(e,t){var s,n={},i=new Array(t),a=new Array(t),r=e.codec.decode;for(s=0;s<t;s++)i[s]=r(e),a[s]=r(e);for(s=0;s<t;s++)n[i[s]]=a[s];return n}function f(e,t){var s,n=new Map,i=new Array(t),a=new Array(t),r=e.codec.decode;for(s=0;s<t;s++)i[s]=r(e),a[s]=r(e);for(s=0;s<t;s++)n.set(i[s],a[s]);return n}function h(e,t){for(var s=new Array(t),n=e.codec.decode,i=0;i<t;i++)s[i]=n(e);return s}function p(e,t){var s=e.reserve(t),n=s+t;return l.toString.call(e.buffer,"utf-8",s,n)}function E(e,t){var s=e.reserve(t),n=s+t,i=l.slice.call(e.buffer,s,n);return o.from(i)}function m(e,t){var s=e.reserve(t),n=s+t,i=l.slice.call(e.buffer,s,n);return o.Uint8Array.from(i).buffer}function g(e,t){var s=e.reserve(t+1),n=e.buffer[s++],i=s+t,a=e.codec.getExtUnpacker(n);if(!a)throw new Error("Invalid ext type: "+(n?"0x"+n.toString(16):n));return a(l.slice.call(e.buffer,s,i))}function I(e){var t=e.reserve(1);return e.buffer[t]}function _(e){var t=e.reserve(1),s=e.buffer[t];return 128&s?s-256:s}function S(e){var t=e.reserve(2),s=e.buffer;return s[t++]<<8|s[t]}function T(e){var t=e.reserve(2),s=e.buffer,n=s[t++]<<8|s[t];return 32768&n?n-65536:n}function b(e){var t=e.reserve(4),s=e.buffer;return 16777216*s[t++]+(s[t++]<<16)+(s[t++]<<8)+s[t]}function y(e){var t=e.reserve(4),s=e.buffer;return s[t++]<<24|s[t++]<<16|s[t++]<<8|s[t]}function C(s,n){return function(e){var t=e.reserve(s);return n.call(e.buffer,t,d)}}function v(e){return new a(this,e).toNumber()}function L(e){return new r(this,e).toNumber()}function D(e){return new a(this,e)}function A(e){return new r(this,e)}function R(e){return n.read(this,e,!1,23,4)}function P(e){return n.read(this,e,!1,52,8)}},{"./bufferish":31,"./bufferish-proto":29,ieee754:21,"int64-buffer":22}],47:[function(e,t,s){var n=e("./read-format");function i(e){var t,s=new Array(256);for(t=0;t<=127;t++)s[t]=a(t);for(t=128;t<=143;t++)s[t]=o(t-128,e.map);for(t=144;t<=159;t++)s[t]=o(t-144,e.array);for(t=160;t<=191;t++)s[t]=o(t-160,e.str);for(s[192]=a(null),s[193]=null,s[194]=a(!1),s[195]=a(!0),s[196]=r(e.uint8,e.bin),s[197]=r(e.uint16,e.bin),s[198]=r(e.uint32,e.bin),s[199]=r(e.uint8,e.ext),s[200]=r(e.uint16,e.ext),s[201]=r(e.uint32,e.ext),s[202]=e.float32,s[203]=e.float64,s[204]=e.uint8,s[205]=e.uint16,s[206]=e.uint32,s[207]=e.uint64,s[208]=e.int8,s[209]=e.int16,s[210]=e.int32,s[211]=e.int64,s[212]=o(1,e.ext),s[213]=o(2,e.ext),s[214]=o(4,e.ext),s[215]=o(8,e.ext),s[216]=o(16,e.ext),s[217]=r(e.uint8,e.str),s[218]=r(e.uint16,e.str),s[219]=r(e.uint32,e.str),s[220]=r(e.uint16,e.array),s[221]=r(e.uint32,e.array),s[222]=r(e.uint16,e.map),s[223]=r(e.uint32,e.map),t=224;t<=255;t++)s[t]=a(t-256);return s}function a(e){return function(){return e}}function r(s,n){return function(e){var t=s(e);return n(e,t)}}function o(t,s){return function(e){return s(e,t)}}s.getReadToken=function(e){var t=n.getReadFormat(e);return e&&e.useraw?function(e){var t,s=i(e).slice();for(s[217]=s[196],s[218]=s[197],s[219]=s[198],t=160;t<=191;t++)s[t]=o(t-160,e.bin);return s}(t):i(t)}},{"./read-format":46}],48:[function(e,t,s){var o=e("./ext-buffer").ExtBuffer,i=e("./ext-packer"),a=e("./write-type"),l=e("./codec-base");function n(){var e,n,t=this.options;return this.encode=(e=t,n=a.getWriteType(e),function(e,t){var s=n[typeof t];if(!s)throw new Error('Unsupported type "'+typeof t+'": '+t);s(e,t)}),t&&t.preset&&i.setExtPackers(this),this}l.install({addExtPacker:function(t,e,s){s=l.filter(s);var n=e.name;if(n&&"Object"!==n){var i=this.extPackers||(this.extPackers={});i[n]=r}else{var a=this.extEncoderList||(this.extEncoderList=[]);a.unshift([e,r])}function r(e){return s&&(e=s(e)),new o(e,t)}},getExtPacker:function(e){var t=this.extPackers||(this.extPackers={}),s=e.constructor,n=s&&s.name&&t[s.name];if(n)return n;for(var i=this.extEncoderList||(this.extEncoderList=[]),a=i.length,r=0;r<a;r++){var o=i[r];if(s===o[0])return o[1]}},init:n}),s.preset=n.call(l.preset)},{"./codec-base":32,"./ext-buffer":40,"./ext-packer":41,"./write-type":50}],49:[function(e,t,s){var n=e("ieee754"),i=e("int64-buffer"),a=i.Uint64BE,r=i.Int64BE,o=e("./write-uint8").uint8,l=e("./bufferish"),c=l.global,d=l.hasBuffer&&"TYPED_ARRAY_SUPPORT"in c&&!c.TYPED_ARRAY_SUPPORT,u=l.hasBuffer&&c.prototype||{};function f(){var e=o.slice();return e[196]=h(196),e[197]=p(197),e[198]=E(198),e[199]=h(199),e[200]=p(200),e[201]=E(201),e[202]=m(202,4,u.writeFloatBE||_,!0),e[203]=m(203,8,u.writeDoubleBE||S,!0),e[204]=h(204),e[205]=p(205),e[206]=E(206),e[207]=m(207,8,g),e[208]=h(208),e[209]=p(209),e[210]=E(210),e[211]=m(211,8,I),e[217]=h(217),e[218]=p(218),e[219]=E(219),e[220]=p(220),e[221]=E(221),e[222]=p(222),e[223]=E(223),e}function h(i){return function(e,t){var s=e.reserve(2),n=e.buffer;n[s++]=i,n[s]=t}}function p(i){return function(e,t){var s=e.reserve(3),n=e.buffer;n[s++]=i,n[s++]=t>>>8,n[s]=t}}function E(i){return function(e,t){var s=e.reserve(5),n=e.buffer;n[s++]=i,n[s++]=t>>>24,n[s++]=t>>>16,n[s++]=t>>>8,n[s]=t}}function m(n,i,a,r){return function(e,t){var s=e.reserve(i+1);e.buffer[s++]=n,a.call(e.buffer,t,s,r)}}function g(e,t){new a(this,t,e)}function I(e,t){new r(this,t,e)}function _(e,t){n.write(this,e,t,!1,23,4)}function S(e,t){n.write(this,e,t,!1,52,8)}s.getWriteToken=function(e){return e&&e.uint8array?((s=f())[202]=m(202,4,_),s[203]=m(203,8,S),s):d||l.hasBuffer&&e&&e.safe?((t=o.slice())[196]=m(196,1,c.prototype.writeUInt8),t[197]=m(197,2,c.prototype.writeUInt16BE),t[198]=m(198,4,c.prototype.writeUInt32BE),t[199]=m(199,1,c.prototype.writeUInt8),t[200]=m(200,2,c.prototype.writeUInt16BE),t[201]=m(201,4,c.prototype.writeUInt32BE),t[202]=m(202,4,c.prototype.writeFloatBE),t[203]=m(203,8,c.prototype.writeDoubleBE),t[204]=m(204,1,c.prototype.writeUInt8),t[205]=m(205,2,c.prototype.writeUInt16BE),t[206]=m(206,4,c.prototype.writeUInt32BE),t[207]=m(207,8,g),t[208]=m(208,1,c.prototype.writeInt8),t[209]=m(209,2,c.prototype.writeInt16BE),t[210]=m(210,4,c.prototype.writeInt32BE),t[211]=m(211,8,I),t[217]=m(217,1,c.prototype.writeUInt8),t[218]=m(218,2,c.prototype.writeUInt16BE),t[219]=m(219,4,c.prototype.writeUInt32BE),t[220]=m(220,2,c.prototype.writeUInt16BE),t[221]=m(221,4,c.prototype.writeUInt32BE),t[222]=m(222,2,c.prototype.writeUInt16BE),t[223]=m(223,4,c.prototype.writeUInt32BE),t):f();var t;var s}},{"./bufferish":31,"./write-uint8":51,ieee754:21,"int64-buffer":22}],50:[function(e,t,s){var g=e("isarray"),n=e("int64-buffer"),I=n.Uint64BE,_=n.Int64BE,i=e("./bufferish"),u=e("./bufferish-proto"),o=e("./write-token"),S=e("./write-uint8").uint8,T=e("./ext-buffer").ExtBuffer,l="undefined"!=typeof Uint8Array,c="undefined"!=typeof Map,b=[];b[1]=212,b[2]=213,b[4]=214,b[8]=215,b[16]=216,s.getWriteType=function(e){var f=o.getWriteToken(e),t=e&&e.useraw,s=l&&e&&e.binarraybuffer,h=s?i.isArrayBuffer:i.isBuffer,p=s?function(e,t){n(e,new Uint8Array(t))}:n,E=c&&e&&e.usemap?function(n,e){if(!(e instanceof Map))return r(n,e);var t=e.size;f[t<16?128+t:t<=65535?222:223](n,t);var i=n.codec.encode;e.forEach(function(e,t,s){i(n,t),i(n,e)})}:r;return{boolean:function(e,t){f[t?195:194](e,t)},function:m,number:function(e,t){var s,n=0|t;{if(t!==n)return void f[s=203](e,t);s=-32<=n&&n<=127?255&n:0<=n?n<=255?204:n<=65535?205:206:-128<=n?208:-32768<=n?209:210}f[s](e,n)},object:t?function(e,t){if(h(t))return s=e,n=t,i=n.length,f[i<32?160+i:i<=65535?218:219](s,i),void s.send(n);var s,n,i;a(e,t)}:a,string:(d=t?function(e){return e<32?1:e<=65535?3:5}:function(e){return e<32?1:e<=255?2:e<=65535?3:5},function(e,t){var s=t.length,n=5+3*s;e.offset=e.reserve(n);var i=e.buffer,a=d(s),r=e.offset+a;s=u.write.call(i,t,r);var o=d(s);if(a!==o){var l=r+o-a,c=r+s;u.copy.call(i,i,l,r,c)}f[1===o?160+s:o<=3?215+o:219](e,s),e.offset+=s}),symbol:m,undefined:m};var d;function a(e,t){if(null===t)return m(e,t);if(h(t))return p(e,t);if(g(t))return function(e,t){var s=t.length;f[s<16?144+s:s<=65535?220:221](e,s);for(var n=e.codec.encode,i=0;i<s;i++)n(e,t[i])}(e,t);if(I.isUint64BE(t))return s=e,n=t,void f[207](s,n.toArray());var s,n,i,a;if(_.isInt64BE(t))return i=e,a=t,void f[211](i,a.toArray());var r,o,l,c,d,u=e.codec.getExtPacker(t);if(u&&(t=u(t)),t instanceof T)return r=e,l=(o=t).buffer,c=l.length,d=b[c]||(c<255?199:c<=65535?200:201),f[d](r,c),S[o.type](r),void r.send(l);E(e,t)}function m(e,t){f[192](e,t)}function n(e,t){var s=t.length,n=s<255?196:s<=65535?197:198;f[n](e,s),e.send(t)}function r(t,s){var e=Object.keys(s),n=e.length,i=n<16?128+n:n<=65535?222:223;f[i](t,n);var a=t.codec.encode;e.forEach(function(e){a(t,e),a(t,s[e])})}}},{"./bufferish":31,"./bufferish-proto":29,"./ext-buffer":40,"./write-token":49,"./write-uint8":51,"int64-buffer":22,isarray:23}],51:[function(e,t,s){for(var n=s.uint8=new Array(256),i=0;i<=255;i++)n[i]=a(i);function a(s){return function(e){var t=e.reserve(1);e.buffer[t]=s}}},{}],52:[function(s,e,t){var $,ee,i,E,te,o,m,n,g,a,r,l,c,d,u,f,h,I,_,S,p,T,b,y,C,v,L,D,A,R,P,se,ne,ie,ae,re=s("../../modules/public/util.js"),M=(s("../../modules/client/CUser.js"),s("../../modules/client/CManager.js")),oe=s("../../modules/public/gameConfig.json"),le=s("../../modules/public/objectAssign.js"),k=s("../../modules/public/csvjson.js"),w=s("../../modules/public/data.json"),x=s("../../modules/client/WebSocketClient.js"),B={delimiter:",",quote:'"'},ce=k.toObject(w.userStatData,B),de=k.toObject(w.skillData,B),O=k.toObject(w.buffGroupData,B),ue=k.toObject(w.resourceData,B),fe=(k.toObject(w.iconResourceData,B),k.toObject(w.obstacleData,B)),he=(k.toObject(w.mobData,B),k.toObject(w.effectGroupData,B)),N=s("../../modules/client/CUIManager.js"),F=Math.PI/180,pe=(oe.FPS,1e3/oe.INTERVAL),U=0,H=!1,j=!1,K=Date.now(),Y=Date.now(),X=!1,G=!1,J=!1,z=new Array(5),V=!1,W=Date.now(),Ee=[],q=new Array(5),Z=0,Q=!0,me=Date.now(),ge=0,Ie=oe.GAME_STATE_LOAD,_e=null,Se=null,Te=null,be=!1,ye=!1,Ce=!1,ve=Date.now(),Le=0,De=0,Ae=!1,Re=Date.now(),Pe=Date.now(),Me=Date.now(),ke=Date.now(),we=null,xe=!1,Be=!0,Oe=!1,Ne=!1,Fe=1e3,Ue=0,He=0,je=oe.DRAW_MODE_NORMAL,Ke={x:0,y:0},Ye=null,Xe=1,Ge=1,Je=1,ze=1,Ve=1,We=oe.SKILL_INDEX_PYRO_BASE,qe=oe.SKILL_INDEX_PYRO_PASSIVE,Ze=new Array(4),Qe=oe.SKILL_INDEX_FROST_BASE,$e=oe.SKILL_INDEX_FROST_PASSIVE,et=new Array(4),tt=oe.SKILL_INDEX_ARCANE_BASE,st=oe.SKILL_INDEX_ARCANE_PASSIVE,nt=new Array(4),it="",at=0,rt=null,ot=0,lt=null,ct=new Array(4),dt=new Array(4),ut=[],ft=null,ht=0,pt=[],Et={BindingE:69,BindingSpace:32,BindingA:65,Binding1:49,Binding2:50,Binding3:51,Binding4:52,BindingS:83,BindingG:71,BindingHome:36,BindingEnter:13,BindingEsc:27};function mt(e){switch(_e&&window.cancelAnimFrame(_e),clearInterval(Ae),_e=null,Ae=!1,e){case oe.GAME_STATE_LOAD:Ie=e,Se=It,Te=_t;break;case oe.GAME_STATE_START_SCENE:Ie=e,Se=null,Te=St;break;case oe.GAME_STATE_GAME_START:Ie=e,Se=Tt,Te=bt;break;case oe.GAME_STATE_GAME_ON:Ie=e,Se=yt,Te=Ct;break;case oe.GAME_STATE_END:Ie=e,Se=vt,Te=Ct;break;case oe.GAME_STATE_RESTART_SCENE:Ie=e,Se=null,Te=Lt;break;case oe.GAME_STATE_RESTART:Ie=e,Se=Dt,Te=null}!function(){Te&&gt();Se&&Se()}()}function gt(){_e=window.requestAnimFrame(gt),Te()}function It(){!function(){i=document.getElementById("canvas"),E=i.getContext("2d"),ee=new N,_u&&zt();_a||(_onU=function(e,t,s){t?alert("That account was already registered."):e&&(_u=e,_a=s,zt(),ee.startSceneLoginComplete())});ee.updateKillCount=function(e,t){Ue=e,He=t},ee.onSetRankers=function(e){pt=e},ee.onLoadCompleteServerList=function(){X=!0},ee.serverConditionOn=function(){G=!0},ee.serverConditionOff=function(){G=!1,ee.enableStartButton(),mt(oe.GAME_STATE_START_SCENE)},ee.onStartBtnClick=function(e,t){Pe=Date.now(),Xe=e,t===oe.START_BUTTON?mt(oe.GAME_STATE_GAME_START):t===oe.RESTART_BUTTON&&mt(oe.GAME_STATE_RESTART)},ee.onSkillUpgrade=function(e){Pe=Date.now(),$.emit(oe.MTYPE_UPGRADE_SKILL,e)},ee.onExchangeSkill=function(e){if(Gt(e),te.getUserCurrentState(oe.userID)===oe.OBJECT_STATE_CAST){var t=te.getUserCurrentSkillIndex(oe.userID);-1===ct.indexOf(t)&&te.stopUser()}},ee.onExchangePassive=function(e,t){$.emit(oe.MTYPE_EXCHANGE_PASSIVE,e,t)},ee.onEquipPassive=function(e){$.emit(oe.MTYPE_EQUIP_PASSIVE,e)},ee.onUnequipPassive=function(e){$.emit(oe.MTYPE_UNEQUIP_PASSIVE,e)},ee.onSkillIconClick=function(e){if(Pe=Date.now(),e===oe.SKILL_BASIC_INDEX)var t=le({},rt);else e===oe.SKILL_EQUIP1_INDEX?t=le({},dt[0]):e===oe.SKILL_EQUIP2_INDEX?t=le({},dt[1]):e===oe.SKILL_EQUIP3_INDEX?t=le({},dt[2]):e===oe.SKILL_EQUIP4_INDEX&&(t=le({},dt[3]));jt(t)},ee.onSelectSkillCancelBtnClick=function(){Kt(oe.DRAW_MODE_NORMAL)},ee.onSelectCharIcon=function(e){Pe=Date.now();var t=1;switch(Xe=e){case oe.CHAR_TYPE_FIRE:t=Je,at=We;for(var s=0;s<4;s++)ct[s]=Ze[s];ot=qe;break;case oe.CHAR_TYPE_FROST:t=ze,at=Qe;for(var s=0;s<4;s++)ct[s]=et[s];ot=$e;break;case oe.CHAR_TYPE_ARCANE:t=Ve,at=tt;for(var s=0;s<4;s++)ct[s]=nt[s];ot=st}rt=le({},re.findData(de,"index",at)),lt=le({},re.findData(de,"index",ot));for(var s=0;s<4;s++)ct[s]?dt[s]=le({},re.findData(de,"index",ct[s])):dt[s]=void 0;ee.syncSkills(at,rt,ct,dt,ut,ot,lt),ee.setPopUpSkillChange(!0),ee.updateCharInfoSelectedPanel(e,t)},ee.onPopUpSkillChangeClick=function(){Pe=Date.now()},ee.onUpgradeCharSkills=function(e,t){at=e.index,rt=e,ot=t.index,lt=t,Gt(Xe)},ee.onDeadSceneConfirmClick=function(){ee.closePopUpSkillChange(),ee.disableDeadScene(),ee.clearCooltime(),ee.initStandingScene(Xe,it),ee.setPopUpSkillChange(!0),mt(oe.GAME_STATE_RESTART_SCENE)},document.body.onmousedown=function(e){2===e.button&&je===oe.DRAW_MODE_SKILL_RANGE&&Kt(oe.DRAW_MODE_NORMAL)},re=s("../../modules/public/util.js"),s("../../modules/client/CUser.js"),M=s("../../modules/client/CManager.js"),oe=s("../../modules/public/gameConfig.json"),(te=new M(oe)).onSkillFire=Rt,te.onProjectileSkillFire=Pt,te.onUserLevelUp=function(e){Ge=e},te.onNeedToGetObjBuffResource=function(e){e.resourceData=le({},re.findData(ue,"index",e.rID))},we=new Vt,o=new Image,m=new Image,n=new Image,g=new Image,a=new Image,z[0]=le({},re.findData(ue,"index",oe.RESOURCE_INDEX_USER_HAND_1)),z[1]=le({},re.findData(ue,"index",oe.RESOURCE_INDEX_USER_HAND_2)),z[2]=le({},re.findData(ue,"index",oe.RESOURCE_INDEX_USER_HAND_3)),z[3]=le({},re.findData(ue,"index",oe.RESOURCE_INDEX_USER_HAND_4)),z[4]=le({},re.findData(ue,"index",oe.RESOURCE_INDEX_USER_HAND_5)),q[0]=le({},re.findData(ue,"index",oe.RESOURCE_INDEX_PORTAL_1)),q[1]=le({},re.findData(ue,"index",oe.RESOURCE_INDEX_PORTAL_2)),q[2]=le({},re.findData(ue,"index",oe.RESOURCE_INDEX_PORTAL_3)),q[3]=le({},re.findData(ue,"index",oe.RESOURCE_INDEX_PORTAL_4)),q[4]=le({},re.findData(ue,"index",oe.RESOURCE_INDEX_PORTAL_5)),r=le({},re.findData(ue,"index",oe.RESOURCE_INDEX_OBSTACLE_TREE_INSIDE)),l=le({},re.findData(ue,"index",oe.RESOURCE_INDEX_OBJ_GOLD)),c=le({},re.findData(ue,"index",oe.RESOURCE_INDEX_OBJ_JEWEL)),d=le({},re.findData(ue,"index",oe.RESOURCE_INDEX_OBJ_BOX)),u=le({},re.findData(ue,"index",oe.RESOURCE_INDEX_OBJ_SKILL_FIRE)),f=le({},re.findData(ue,"index",oe.RESOURCE_INDEX_OBJ_SKILL_FROST)),h=le({},re.findData(ue,"index",oe.RESOURCE_INDEX_OBJ_SKILL_ARCANE)),I=le({},re.findData(ue,"index",oe.RESOURCE_INDEX_CASTING_FIRE)),_=le({},re.findData(ue,"index",oe.RESOURCE_INDEX_CASTING_FROST)),S=le({},re.findData(ue,"index",oe.RESOURCE_INDEX_CASTING_ARCANE)),p=le({},re.findData(ue,"index",oe.RESOURCE_INDEX_PROJECTILE_FIRE)),T=le({},re.findData(ue,"index",oe.RESOURCE_INDEX_PROJECTILE_FROST)),b=le({},re.findData(ue,"index",oe.RESOURCE_INDEX_PROJECTILE_ARCANE)),y=le({},re.findData(ue,"index",oe.RESOURCE_INDEX_SKILL_EFFECT_FIRE)),C=le({},re.findData(ue,"index",oe.RESOURCE_INDEX_SKILL_EFFECT_FROST)),v=le({},re.findData(ue,"index",oe.RESOURCE_INDEX_SKILL_EFFECT_ARCANE)),L=le({},re.findData(ue,"index",oe.RESOURCE_INDEX_RANK_1)),D=le({},re.findData(ue,"index",oe.RESOURCE_INDEX_RANK_2)),A=le({},re.findData(ue,"index",oe.RESOURCE_INDEX_RANK_3)),R=le({},re.findData(ue,"index",oe.RESOURCE_INDEX_PROJECTILE_SKILL_ARROW));var e=re.getCookie(document.cookie,"keySettings");e&&(Et=JSON.parse(e),ee.updateKeySettings(Et));o.src=oe.RESOURCE_SRC_OBJECT,o.onload=At,m.src=oe.RESOURCE_SRC_CHARACTER,m.onload=At,g.src=oe.RESOURCE_SRC_SKILL_EFFECT,g.onload=At,a.src=oe.RESOURCE_SRC_ENVIRONMENT,a.onload=At,n.src=oe.RESOURCE_SRC_UI,n.onload=At,ee.setSkillIconResource(n),ee.initStartScene(),ee.initHUD(Et),ee.initPopUpSkillChanger(),ee.setSkillChangeBtn();var t=(P=document.createElement("canvas")).getContext("2d");P.width=200,P.height=100,t.beginPath(),t.textAlign="center",t.fillStyle="white",t.font="bold 20px Arial",t.fillText("To The Field!",100,50),t.closePath(),j=!0}(),Mt(),window.oncontextmenu=function(){return!1},window.onresize=function(){Mt()},window.onblur=function(){Ie===oe.GAME_STATE_GAME_ON&&te.stopUser()},window.onbeforeunload=function(){$&&$.close(1e3)}}function _t(){H&&j&&Date.now()-K>=oe.MINIMUM_LOADING_TIME&&X?(ee.startSceneLoadingComplete(),mt(oe.GAME_STATE_START_SCENE)):Date.now()-Y>=oe.CHANGE_LOADING_TEXT_TIME&&(Y=Date.now(),ee.changeLoadingText())}function St(){ee.drawStartScene()}function Tt(){ee.disableStartButton();var e=ee.getSelectedServer();e&&ee.checkServerCondition(e)}function bt(){if(!J)if(G){J=!0;var e=ee.getSelectedServer();e?(!function(e){function Z(e,t){var s=le({},re.findData(de,"index",e));ee.makeRisingMessageForSkill(s,!1),t&&function(e){te.updateSkillPossessions(oe.userID,e);var t=[];if(ut.length!==e.length)for(var s=0;s<e.length;s++)-1===ut.indexOf(e[s])&&t.push(e[s]);ut=e,t.length&&ee.updateNewSkills(t);ee.updatePossessionSkills(ut),ee.setPopUpSkillChange(!1,!0)}(t)}function Q(e){var t=re.processMobBuffData(e);!function(e,t){for(var s=[],n=0;n<t.length;n++)buffImgDataIndex=le({},re.findData(O,"index",t[n])).buffEffectGroup,buffImgData=le({},re.findData(he,"index",buffImgDataIndex)),hasResource=re.setResourceData(ue,buffImgData),hasResource&&s.push(buffImgData);te.updateMobBuffImgData(e,s)}(t.oID,t.bL)}re.setCookie("T",1),($=new x).open(e.replace("http","ws")),$.onopen=function(){_u||(window.location.href="/error"),Ne=setInterval(function(){if(Oe){switch(clearInterval(Ne),Ne=!1,Xe){case oe.CHAR_TYPE_FIRE:Ge=Je;break;case oe.CHAR_TYPE_FROST:Ge=ze;break;case oe.CHAR_TYPE_ARCANE:Ge=Ve}$.emit(oe.MTYPE_REQ_START_GAME,Xe,it),Me=Date.now(),$.emit(oe.MTYPE_FIRE_PING,Me),Ae||Be||$.emit(oe.MTYPE_NEED_RECONNECT)}},Fe)},$.onmessage=function(e){xe&&(clearTimeout(xe),xe=!1);var t,s,n,i,a,r,o,l,c,d,u,f,h,p,E,m,g,I,_,S,T,b,y,C,v,L,D,A,R,P,M,k,w,x,B,O,N,F,U,H,j,K,Y,X,G,J,z,V,W=re.decodePacket(new Uint8Array(e.data)),q=W.v;switch(Oe||W.t!==oe.MTYPE_SYNC_SUCCESS||(Oe=!0,ht&&Ie!==oe.GAME_STATE_GAME_ON&&$.emit(oe.MTYPE_NEED_RECONNECT),ht++),W.t){case oe.MTYPE_DONT_CHEAT:Oe&&(V=q[0],re.isNumeric(V.x)&&re.isNumeric(V.y)&&te.moveUserToNewPos(oe.userID,V));break;case oe.MTYPE_REQ_RECONNECT_RES:!function(){clearInterval(Ae);var e=te.getUserPosition(oe.userID),t=te.getUserHP(oe.userID),s=te.getUserMP(oe.userID);$.emit(oe.MTYPE_REQ_RECONNECT,it,Xe,{HP:t,MP:s},ct,Ue,He,e)}();break;case oe.MTYPE_RES_RECONNECT:!function(e,t,s,n,i,a,r){for(var o=re.processUserData(e),l=[],c=0;c<t.length;c++)l.push(re.processUserData(t[c]));var d=re.processBuffDatas(s),u=re.processObjDatas(n),f=re.processScoreDatas(a),h=re.processMobDatas(r);oe.userID=o.oID,te.resetUsers(l,oe.scaleFactor);for(var c=0;c<d.length;c++)Jt(d[c]);te.resetObjs(u),te.resetChests(i),te.resetMobs(h),te.synchronizeUser(oe.userID),te.onMainUserMove=function(e){ee.updateUserPosition(e.position)},ee.setBoard(f,oe.userID);var p=le({},re.findAllDatas(fe,"type",oe.OBJ_TYPE_CHEST_GROUND));ee.setMiniMapChests(i,p),Ie===oe.GAME_STATE_GAME_ON?(wt(),xt(),Ae=setInterval(kt,pe)):(ee.disableDeadScene(),ee.disableStandingScene(),mt(oe.GAME_STATE_RESTART));te.setUserInitState(oe.userID),ee.disableReconnectScene(),$.emit(oe.MTYPE_RECONNECT_SUCCESS)}(q[0],q[1],q[2],q[3],q[4],q[5],q[6]);break;case oe.MTYPE_ADMIN_MESSAGE:z=q[0],ee.makeAdminMessage(z);break;case oe.MTYPE_DOWN_SERVER:G=q[0],J=q[1],ee.makeDownMessage(G,J);break;case oe.MTYPE_NOW_SERVER_IS_DOWN:window.location.href="/serverdown";break;case oe.MTYPE_CANCEL_SERVER_DOWN:ee.makeAdminMessage("Server down canceled."),ee.cancelDown();break;case oe.MTYPE_FIRE_PONG:Y=q[0],X=q[1],Le=Date.now()-Y,De=Date.now()-(X+Le/2),$.emit(oe.MTYPE_UPDATE_USER_TIME_DIFF,Date.now(),Le);break;case oe.MTYPE_SYNC_AND_SET_SKILLS:!function(e){var t=re.processUserAddData(e);Date.now();oe.userID=t.oID,at=t.bS,rt=le({},re.findData(de,"index",t.bS)),ot=t.ipS,lt=le({},re.findData(de,"index",t.ipS));for(var s=0;s<4;s++)t.eS[s]?ct[s]=t.eS[s]:ct[s]=void 0;for(var s=0;s<4;s++)t.eS[s]?dt[s]=le({},re.findData(de,"index",t.eS[s])):dt[s]=void 0;var n=t.aS;if(n&&n.length){for(var s=0;s<n[0].length;s++)Ze[s]=n[0][s];for(var s=0;s<n[1].length;s++)et[s]=n[1][s];for(var s=0;s<n[2].length;s++)nt[s]=n[2][s]}ut=t.pS,ee.syncSkills(at,rt,ct,dt,ut,ot,lt),ee.setHUDSkills(),ee.updateBuffIcon(),ee.setHUDStats(t),ee.updateCondition(t.cdt),ee.setCooldownReduceRate(t.cRR),ee.setPopUpSkillChange(),ee.setResource(t),ee.setUserPosition(t.pos)}(q[0]);break;case oe.MTYPE_RES_START_GAME:!function(e,t,s,n,i,a){Be=!1;for(var r=[],o=0;o<e.length;o++)r.push(re.processUserData(e[o]));var l=re.processBuffDatas(t),c=re.processObjDatas(s),d=re.processScoreDatas(i),u=re.processMobDatas(a);te.start(),te.setUsers(r,oe.scaleFactor);for(var o=0;o<l.length;o++)Jt(l[o]);if(te.setObjs(c),te.setChests(n),te.setMobs(u),te.synchronizeUser(oe.userID),te.onMainUserMove=function(e){ee.updateUserPosition(e.position)},_u&&_u.f){var f=oe.TUTORIAL_SKILL_FIRE_INDEX;switch(Xe){case oe.CHAR_TYPE_FIRE:f=oe.TUTORIAL_SKILL_FIRE_INDEX;break;case oe.CHAR_TYPE_FROST:f=oe.TUTORIAL_SKILL_FROST_INDEX;break;case oe.CHAR_TYPE_ARCANE:f=oe.TUTORIAL_SKILL_ARCANE_INDEX}ee.setNewSkill(f)}var h=le({},re.findAllDatas(fe,"type",oe.OBJ_TYPE_CHEST_GROUND)),p=le({},re.findAllDatas(fe,"type",oe.ENV_TYPE_IMMORTAL_GROUND)),E=le({},re.findAllDatas(fe,"type",oe.ENV_TYPE_PORTAL));ee.setBoard(d,oe.userID),ee.setMiniMapChests(n,h),ee.setMinimapZones(p,E),wt(),xt(),mt(oe.GAME_STATE_GAME_ON),Ae=setInterval(kt,pe)}(q[0],q[1],q[2],q[3],q[4],q[5]);break;case oe.MTYPE_RES_RESTART_GAME:!function(e,t){var s=re.processUserAddReData(e),n=re.processScoreDatas(t);switch(te.iamRestart(s,oe.scaleFactor),te.setUserData(s),te.changeUserStat(s,!0,oe.scaleFactor),ee.updateCondition(s.cdt),ee.updateMP(s),ee.checkSkillsConditions(),wt(),xt(),at=s.bS,rt=le({},re.findData(de,"index",s.bS)),ot=s.ipS,lt=le({},re.findData(de,"index",s.ipS)),Xe){case oe.CHAR_TYPE_FIRE:for(var i=0;i<4;i++)ct[i]=Ze[i];break;case oe.CHAR_TYPE_FROST:for(var i=0;i<4;i++)ct[i]=et[i];break;case oe.CHAR_TYPE_ARCANE:for(var i=0;i<4;i++)ct[i]=nt[i]}for(var i=0;i<4;i++)ct[i]?dt[i]=le({},re.findData(de,"index",ct[i])):dt[i]=void 0;ut=s.pS,ee.syncSkills(at,rt,ct,dt,ut,ot,lt),ee.setHUDSkills(),ee.setHUDStats(s),ee.setCooldownReduceRate(s.cRR),ee.setPopUpSkillChange(),ee.updateBoard(n,oe.userID),ee.updateHP(s),ee.updateMP(s),ee.setUserPosition(s.pos),mt(oe.GAME_STATE_GAME_ON),te.setUserInitState(oe.userID),Ae=setInterval(kt,pe)}(q[0],q[1]);break;case oe.MTYPE_USER_JOINED:Oe&&(U=q[0],H=q[1],j=re.processUserData(U),K=re.processScoreDatas(H),te.setUser(j,oe.scaleFactor),ee.updateBoard(K,oe.userID),te.setUserInitState(j.oID));break;case oe.MTYPE_USER_DATA_UPDATE:N=q[0],F=re.processUserData(N),te.updateUserData(F);break;case oe.MTYPE_USER_DATA_SYNC:Oe&&(B=q[0],O=re.processUserData(B),te.syncUserData(O));break;case oe.MTYPE_USER_MOVE_AND_ATTACK:Oe&&(k=q[0],w=re.processUserMAData(k),(x=le({},re.findData(de,"index",w.sID))).targetPosition=w.sTPos,te.moveAndAttackUser(w.oID,w.tpos,x,w.mB));break;case oe.MTYPE_USER_DATA_UPDATE_AND_USER_SKILL:Oe&&function(e){var t=re.processUserUSData(e);te.updateUserData(t);var s=le({},re.findData(de,"index",t.sID));te.applyCastSpeed(t.oID,s),s.targetPosition=t.sTPos,s.direction=t.sDir,(s.type===oe.SKILL_TYPE_PROJECTILE||s.type===oe.SKILL_TYPE_PROJECTILE_TICK||s.type===oe.SKILL_TYPE_PROJECTILE_EXPLOSION||s.type===oe.SKILL_TYPE_PROJECTILE_TICK_EXPLOSION||s.type===oe.SKILL_TYPE_INSTANT_PROJECTILE)&&(s.projectileIDs=t.sPIDs);te.useSkill(t.oID,s)}(q[0]);break;case oe.MTYPE_SKILL_FIRED:Oe&&function(s,n){var e=s.sT+De-Date.now();e<0&&(e=0);setTimeout(function(){var e=le({},re.findData(de,"index",s.sID));if(e.targetPosition=s.sTPos,e.explosionEffectGroup){var t=le({},re.findData(he,"index",e.explosionEffectGroup));re.setResourceData(ue,t)}n===oe.userID&&ee.applySkill(e.index),te.applySkill(e,n,t)},e)}(q[0],q[1]);break;case oe.MTYPE_PROJECTILE_FIRED:Oe&&function(i,e,a){var t=e+De-Date.now();t<0&&(t=0);setTimeout(function(){for(var e=0;e<i.length;e++){var t=le({},re.findData(de,"index",i[e].sID));if(t.userID=a,t.objectID=i[e].oID,t.position=i[e].pos,t.speed=i[e].sp,t.startTime=Date.now(),a==oe.userID&&ee.applySkill(t.index),t.projectileEffectGroup){var s=le({},re.findData(he,"index",t.projectileEffectGroup));re.setResourceData(ue,s)}if(t.explosionEffectGroup){var n=le({},re.findData(he,"index",t.explosionEffectGroup));re.setResourceData(ue,n)}te.applyProjectile(t,s,n)}},t)}(q[0],q[1],q[2]);break;case oe.MTYPE_MOVE_USER_TO_NEW_POS:Oe&&(P=q[0],M=q[1],te.moveUserToNewPos(P,M));break;case oe.MTYPE_UPGRADE_SKILL:!function(e,t,s){if(ee.setResource(s),e===at)at=t,rt=le({},re.findData(de,"index",t)),ee.upgradeBaseSkill(at,rt);else if(e===ot)ot=t,lt=le({},re.findData(de,"index",t)),ee.upgradeInherentSkill(ot,lt);else{for(var n=0;n<4;n++){var i=le({},re.findData(de,"index",t));ct[n]===e&&(ct.splice(n,1,t),dt.splice(n,1,i)),Ze[n]===e&&Ze.splice(n,1,t),et[n]===e&&et.splice(n,1,t),nt[n]===e&&nt.splice(n,1,t)}for(var n=0;n<ut.length;n++)if(ut[n]===e){ut.splice(n,1,t),ee.upgradePossessionSkill(e,t);break}}ee.playSkillUpgradeEffect(),Gt(Xe)}(q[0],q[1],q[2]);break;case oe.MTYPE_UPDATE_USER_PRIVATE_STAT:A=q[0],R=re.processUserPrivateData(A),ee.setHUDStats(R),ee.setCooldownReduceRate(R.cRR);break;case oe.MTYPE_DELETE_PROJECTILE:Oe&&(L=q[0],D=q[1],te.deleteProjectile(L,D));break;case oe.MTYPE_EXPLODE_PROJECTILE:Oe&&(y=q[0],C=q[1],v=q[2],te.explodeProjectile(y,C,v));break;case oe.MTYPE_CREATE_OBJS:Oe&&(T=q[0],b=re.processObjDatas(T),te.setObjs(b));break;case oe.MTYPE_DELETE_OBJS:Oe&&(S=q[0],te.deleteOBJ(S));break;case oe.MTYPE_CREATE_CHEST:Oe&&(_=q[0],te.createChest(_),ee.createChest(_.lID,_.gd));break;case oe.MTYPE_CHEST_DAMAGED:Oe&&(g=q[0],I=q[1],te.updateChest(g,I),Ee.indexOf(g)&&(Ee.push(g),setTimeout(function(){var e=Ee.indexOf(g);Ee.splice(e,1)},oe.SKILL_HIT_EFFECT_TIME)));break;case oe.MTYPE_DELETE_CHEST:Oe&&(m=q[0],te.deleteChest(m),ee.deleteChest(m));break;case oe.MTYPE_GET_RESOURCE:E=q[0],ee.makeRisingMessage(E);break;case oe.MTYPE_GET_SKILL:Z(q[0],q[1]);break;case oe.MTYPE_SKILL_CHANGE_TO_RESOURCE:h=q[0],p=le({},re.findData(de,"index",h)),ee.makeRisingMessageForSkill(p,!0);break;case oe.MTYPE_CHANGE_USER_STAT:Oe&&function(e){var t=re.processUserStatData(e);if(t.oID===oe.userID){ee.updateCondition(t.cdt),ee.updateHP(t),ee.updateMP(t),ee.checkSkillsConditions();var s=le({},re.findDataWithTwoColumns(ce,"type",Xe,"level",t.lv)).needExp;ee.updateExp(t,s)}te.changeUserStat(t,!1,oe.scaleFactor)}(q[0],q[1]);break;case oe.MTYPE_USER_DAMAGED:Oe&&function(e,t){var s=re.processUserStatData(e);if(t){var n=le({},re.findData(de,"index",t)).hitEffectGroup,i=le({},re.findData(he,"index",n)),a=re.setResourceData(ue,i);a&&te.updateSkillHitImgData(s.oID,i)}te.changeUserStat(s,!1,oe.scaleFactor),s.oID===oe.userID&&(ee.updateHP(s),ee.updateMP(s),ee.updateCondition(s.cdt),ee.checkSkillsConditions())}(q[0],q[1]);break;case oe.MTYPE_UPDATE_BUFF:Oe&&function(e){var t=re.processBuffData(e);t.oID===oe.userID&&(ee.updateBuffIcon(t.pL,t.bL,t.aL,De),t.aL.length||Ie!==oe.GAME_STATE_GAME_ON?(ee.enableFieldUIs(),ye=!1):(ee.disableFieldUIs(),ye=!0,ee.closePopUpSkillChange()));Jt(t)}(q[0]);break;case oe.MTYPE_UPDATE_RANK:Oe&&(u=q[0],f=re.processScoreDatas(u),ee.updateBoard(f,oe.userID));break;case oe.MTYPE_CHATTING:Oe&&(c=q[0],d=q[1],te.setUserChatMsg(c,d));break;case oe.MTYPE_USER_DEAD:Oe&&function(e,t,s,n){var i=re.processScoreDatas(s);ee.updateKillBoard(e,t),t.uID===oe.userID&&(te.iamDead(),se=n.j,ne=n.g,ie=n.l,ae=n.e,ft=e.nm,mt(oe.GAME_STATE_END));te.kickUser(t.uID),ee.updateBoard(i,oe.userID)}(q[0],q[1],q[2],q[3]);break;case oe.MTYPE_USER_LEAVE:Oe&&(r=q[0],o=q[1],l=re.processScoreDatas(o),te.kickUser(r),ee.updateBoard(l,oe.userID));break;case oe.MTYPE_MOB_CREATED:Oe&&(i=q[0],a=re.processMobDatas(i),te.setMobs(a));break;case oe.MTYPE_MOB_CHANGE_STATE:Oe&&(s=q[0],n=re.processMobData(s),te.changeStateMob(n));break;case oe.MTYPE_MOB_TAKE_DAMAGE:Oe&&function(e,t){var s=re.processMobStatData(e);if(te.updateMob(s),t){var n=le({},re.findData(de,"index",t)).hitEffectGroup,i=le({},re.findData(he,"index",n)),a=re.setResourceData(ue,i);a&&te.updateMobHitImgData(s.oID,i)}}(q[0],q[1]);break;case oe.MTYPE_MOB_UPDATE_BUFF:Oe&&Q(q[0]);break;case oe.MTYPE_MOB_DEAD:Oe&&(t=q[0],te.deleteMob(t));break;case oe.MTYPE_ERROR_SET_ID:alert("Session Error"),window.location.href="/error";break;case oe.MTYPE_DUPLICATE_ACCESS:window.location.href="/duplicate";default:W.t,oe.MTYPE_SYNC_SUCCESS}},$.onerror=function(e){},$.onclose=function(e){Oe=!1,$&&(ee.playReconnectScene(),Bt(),Ot()),xe||(xe=setTimeout(function(){window.location.href="/error"},3e4))}}(e),it=ee.getStartUserName()):(alert("Select available server."),J=!1,ee.enableStartButton(),mt(oe.GAME_STATE_START_SCENE))}else J&&(J=!1,ee.enableStartButton(),mt(oe.GAME_STATE_START_SCENE))}function yt(){ee.disableStartScene(),ee.enableFieldUIs()}function Ct(){we.countFrames(),function(){500<Date.now()-ke&&(ke=Date.now(),ee.drawGameScene(),ee.drawFPSAndPing(we.lastFrameCount,Le));oe.userOffset={x:te.user.center.x-oe.canvasSize.width/(2*oe.scaleFactor),y:te.user.center.y-oe.canvasSize.height/(2*oe.scaleFactor)},(oe.userOffset.x<=0||oe.userOffset.y<=0||oe.userOffset.x>=oe.CANVAS_MAX_SIZE.width-oe.CANVAS_MAX_LOCAL_SIZE.width||oe.userOffset.y>=oe.CANVAS_MAX_SIZE.height-oe.CANVAS_MAX_LOCAL_SIZE.height)&&(E.fillStyle="rgb(103, 124, 81)",E.fillRect(0,0,i.width,i.height)),function(){if(oe.userOffset.x<=200||oe.userOffset.y<=200||oe.userOffset.x>=oe.CANVAS_MAX_SIZE.width-200-oe.CANVAS_MAX_LOCAL_SIZE.width||oe.userOffset.y>=oe.CANVAS_MAX_SIZE.height-200-oe.CANVAS_MAX_LOCAL_SIZE.height){E.fillStyle="rgb(96, 56, 19)";var e=-oe.userOffset.x*oe.scaleFactor,t=-oe.userOffset.y*oe.scaleFactor,s=oe.CANVAS_MAX_SIZE.width*oe.scaleFactor,n=oe.CANVAS_MAX_SIZE.height*oe.scaleFactor;E.fillRect(e,t,s,n)}E.fillStyle="rgb(105, 147, 50)",e=(100-oe.userOffset.x)*oe.scaleFactor,t=(100-oe.userOffset.y)*oe.scaleFactor,s=(oe.CANVAS_MAX_SIZE.width-200)*oe.scaleFactor,n=(oe.CANVAS_MAX_SIZE.height-200)*oe.scaleFactor,E.fillRect(e,t,s,n)}(),function(){E.lineWidth=2,E.strokeStyle="rgb(103, 124, 81)",E.beginPath();for(var e=-oe.userOffset.x-800;e<oe.canvasSize.width;e+=50){var t=e*oe.scaleFactor;re.isXInCanvas(t,oe)&&(E.moveTo(t,0),E.lineTo(t,oe.canvasSize.height))}for(var s=-oe.userOffset.y-500;s<oe.canvasSize.height;s+=50){var n=s*oe.scaleFactor;re.isYInCanvas(n,oe)&&(E.moveTo(0,n),E.lineTo(oe.canvasSize.width,n))}E.stroke(),E.closePath()}(),function(){for(var e=0;e<te.immortalGrounds.length;e++){var t=re.worldToLocalPosition(te.immortalGrounds[e].center,oe.userOffset,oe.scaleFactor);re.isObjInCanvas(t,te.immortalGrounds[e].size.width/2,oe)&&E.drawImage(a,te.immortalGrounds[e].imgData.srcPosX,te.immortalGrounds[e].imgData.srcPosY,te.immortalGrounds[e].imgData.srcWidth,te.immortalGrounds[e].imgData.srcHeight,t.x-te.immortalGrounds[e].size.width/2*oe.scaleFactor,t.y-te.immortalGrounds[e].size.height/2*oe.scaleFactor,te.immortalGrounds[e].size.width*oe.scaleFactor,te.immortalGrounds[e].size.height*oe.scaleFactor)}}(),function(){for(var e=0;e<te.objGolds.length;e++){var t=re.worldXCoordToLocalX(te.objGolds[e].pos.x,oe.userOffset.x,oe.scaleFactor),s=re.worldYCoordToLocalY(te.objGolds[e].pos.y,oe.userOffset.y,oe.scaleFactor),n=2*te.objGolds[e].rad*oe.scaleFactor;re.isObjInCanvas({x:t,y:s},n,oe)&&E.drawImage(o,l.srcPosX,l.srcPosY,l.srcWidth,l.srcHeight,t,s,n,n)}for(var e=0;e<te.objJewels.length;e++)t=re.worldXCoordToLocalX(te.objJewels[e].pos.x,oe.userOffset.x,oe.scaleFactor),s=re.worldYCoordToLocalY(te.objJewels[e].pos.y,oe.userOffset.y,oe.scaleFactor),n=2*oe.OBJ_JEWEL_RADIUS*oe.scaleFactor,re.isObjInCanvas({x:t,y:s},n,oe)&&E.drawImage(o,c.srcPosX,c.srcPosY,c.srcWidth,c.srcHeight,t,s,n,n);for(var e=0;e<te.objBoxs.length;e++)t=re.worldXCoordToLocalX(te.objBoxs[e].pos.x,oe.userOffset.x,oe.scaleFactor),s=re.worldYCoordToLocalY(te.objBoxs[e].pos.y,oe.userOffset.y,oe.scaleFactor),n=2*oe.OBJ_BOX_RADIUS*oe.scaleFactor,re.isObjInCanvas({x:t,y:s},n,oe)&&E.drawImage(o,d.srcPosX,d.srcPosY,d.srcWidth,d.srcHeight,t,s,n,n);for(var e=0;e<te.objSkills.length;e++){switch(t=re.worldXCoordToLocalX(te.objSkills[e].pos.x,oe.userOffset.x,oe.scaleFactor),s=re.worldYCoordToLocalY(te.objSkills[e].pos.y,oe.userOffset.y,oe.scaleFactor),n=2*oe.OBJ_SKILL_RADIUS*oe.scaleFactor,te.objSkills[e].pro){case oe.SKILL_PROPERTY_FIRE:var i=u;break;case oe.SKILL_PROPERTY_FROST:i=f;break;case oe.SKILL_PROPERTY_ARCANE:i=h}E.drawImage(o,i.srcPosX,i.srcPosY,i.srcWidth,i.srcHeight,t,s,n,n)}for(var e=0;e<te.objBuffs.length;e++)t=re.worldXCoordToLocalX(te.objBuffs[e].pos.x,oe.userOffset.x,oe.scaleFactor),s=re.worldYCoordToLocalY(te.objBuffs[e].pos.y,oe.userOffset.y,oe.scaleFactor),n=2*oe.OBJ_BUFF_RADIUS*oe.scaleFactor,re.isObjInCanvas({x:t,y:s},n,oe)&&E.drawImage(o,te.objBuffs[e].resourceData.srcPosX,te.objBuffs[e].resourceData.srcPosY,te.objBuffs[e].resourceData.srcWidth,te.objBuffs[e].resourceData.srcHeight,t,s,n,n)}(),function(){for(var e=0;e<te.userEffects.length;e++){var t=te.userEffects[e]["resourceIndex"+(te.userEffects[e].effectIndex+1)],s=re.worldToLocalPosition(te.userEffects[e].center,oe.userOffset,oe.scaleFactor);E.drawImage(g,t.srcPosX,t.srcPosY,t.srcWidth,t.srcHeight,s.x-t.width/2*oe.scaleFactor,s.y-t.height/2*oe.scaleFactor,t.width*oe.scaleFactor,t.height*oe.scaleFactor)}}();var e=re.setDrawUser(te.users,te.user,oe);if(function(e){for(var t=0;t<e.length;t++){var s=e[t].localCenter;E.save();var n=e[t].direction*F;E.translate(s.x,s.y),E.rotate(n);for(var i=0;i<e[t].buffImgDataList.length;i++)if(!e[t].buffImgDataList[i].isFront&&e[t].buffImgDataList[i].isAttach){var a=e[t].effectIndex%e[t].buffImgDataList[i].resourceLength+1,r=e[t].buffImgDataList[i]["resourceIndex"+a];if(e[t].buffImgDataList[i].isRotate){E.restore(),E.save(),E.translate(s.x,s.y);var o=(e[t].buffImgDataList[i].rotateStartDegree+e[t].effectRotateDegree)*F;E.rotate(o),E.drawImage(g,r.srcPosX,r.srcPosY,r.srcWidth,r.srcHeight,-r.width/2*oe.scaleFactor,-r.height/2*oe.scaleFactor,r.width*oe.scaleFactor,r.height*oe.scaleFactor),E.restore(),E.save(),E.translate(s.x,s.y),E.rotate(n)}else E.drawImage(g,r.srcPosX,r.srcPosY,r.srcWidth,r.srcHeight,-r.width/2*oe.scaleFactor,-r.height/2*oe.scaleFactor,r.width*oe.scaleFactor,r.height*oe.scaleFactor)}var r=z[e[t].imgHandIndex];if(E.drawImage(m,r.srcPosX,r.srcPosY,r.srcWidth,r.srcHeight,-r.width/2*oe.scaleFactor,-r.height/2*oe.scaleFactor,r.width*oe.scaleFactor,r.height*oe.scaleFactor),E.drawImage(m,e[t].imgData.srcPosX,e[t].imgData.srcPosY,e[t].imgData.srcWidth,e[t].imgData.srcHeight,-e[t].imgData.width/2*oe.scaleFactor,-e[t].imgData.height/2*oe.scaleFactor,e[t].imgData.width*oe.scaleFactor,e[t].imgData.height*oe.scaleFactor),e[t].skillCastEffectPlay&&e[t].currentSkill){switch(e[t].currentSkill){case oe.SKILL_PROPERTY_FIRE:var r=I;break;case oe.SKILL_PROPERTY_FROST:r=_;break;case oe.SKILL_PROPERTY_ARCANE:r=S}var l=e[t].castEffectFactor;E.drawImage(m,r.srcPosX,r.srcPosY,r.srcWidth,r.srcHeight,-r.width/2*oe.scaleFactor*l,-r.height/2*oe.scaleFactor*l,r.width*oe.scaleFactor*l,r.height*oe.scaleFactor*l)}for(var i=0;i<e[t].hitImgDataList.length;i++)if(e[t].hitImgDataList[i].isAttach){var a=e[t].effectIndex%e[t].hitImgDataList[i].resourceLength+1,r=e[t].hitImgDataList[i]["resourceIndex"+a];if(e[t].hitImgDataList[i].isRotate){E.restore(),E.save(),E.translate(s.x,s.y);var o=(e[t].hitImgDataList[i].rotateStartDegree+e[t].effectRotateDegree)*F;E.rotate(o),E.drawImage(m,r.srcPosX,r.srcPosY,r.srcWidth,r.srcHeight,-r.width/2*oe.scaleFactor,-r.height/2*oe.scaleFactor,r.width*oe.scaleFactor,r.height*oe.scaleFactor),E.restore(),E.save(),E.translate(s.x,s.y),E.rotate(n)}else E.drawImage(g,r.srcPosX,r.srcPosY,r.srcWidth,r.srcHeight,-r.width/2*oe.scaleFactor,-r.height/2*oe.scaleFactor,r.width*oe.scaleFactor,r.height*oe.scaleFactor)}for(var i=0;i<e[t].buffImgDataList.length;i++)if(e[t].buffImgDataList[i].isFront&&e[t].buffImgDataList[i].isAttach){var a=e[t].effectIndex%e[t].buffImgDataList[i].resourceLength+1,r=e[t].buffImgDataList[i]["resourceIndex"+a];if(e[t].buffImgDataList[i].isRotate){E.restore(),E.save(),E.translate(s.x,s.y);var o=e[t].effectRotateDegree*F;E.rotate(o),E.drawImage(g,r.srcPosX,r.srcPosY,r.srcWidth,r.srcHeight,-r.width/2*oe.scaleFactor,-r.height/2*oe.scaleFactor,r.width*oe.scaleFactor,r.height*oe.scaleFactor),E.restore(),E.save(),E.translate(s.x,s.y),E.rotate(n)}else E.drawImage(g,r.srcPosX,r.srcPosY,r.srcWidth,r.srcHeight,-r.width/2*oe.scaleFactor,-r.height/2*oe.scaleFactor,r.width*oe.scaleFactor,r.height*oe.scaleFactor)}E.restore();for(var c=e[t].localPosition,d=!1,i=0;i<pt.length;i++)pt[i]===e[t].objectID&&(d=i+1);var u=void 0;if(d){switch(d){case 1:u=L;break;case 2:u=D;break;case 3:u=A}E.drawImage(m,u.srcPosX,u.srcPosY,u.srcWidth,u.srcHeight,s.x-15*oe.scaleFactor,s.y-90*oe.scaleFactor,30*oe.scaleFactor,30*oe.scaleFactor)}if(E.drawImage(e[t].textCanvas,s.x-200*e[t].textScaleFactor,c.y-65*e[t].textScaleFactor),e[t].HP!==e[t].maxHP||e[t].MP!==e[t].maxMP){E.beginPath(),E.fillStyle="#ff0000";var f=c.x-7*oe.scaleFactor,h=e[t].HP/e[t].maxHP*78*oe.scaleFactor,p=7*oe.scaleFactor;E.fillRect(f,c.y+80*oe.scaleFactor,h,p),E.fillStyle="#0000ff",h=e[t].MP/e[t].maxMP*78*oe.scaleFactor,p=4*oe.scaleFactor,E.fillRect(f,c.y+87*oe.scaleFactor,h,p),E.strokeStyle="rgb(15,15,15)",h=78*oe.scaleFactor,p=10*oe.scaleFactor,E.lineJoin="round",E.fillRect(f,c.y+86.25*oe.scaleFactor,h,.75),E.strokeRect(f,c.y+80*oe.scaleFactor,h,p),E.closePath()}}}(e),function(e){for(var t=0;t<e.length;t++){var s=e[t].localCenter;E.save();var n=e[t].direction*F;E.translate(s.x,s.y),E.rotate(n);for(var i=0;i<e[t].buffImgDataList.length;i++)if(!e[t].buffImgDataList[i].isFront&&e[t].buffImgDataList[i].isAttach){var a=e[t].effectIndex%e[t].buffImgDataList[i].resourceLength+1,r=e[t].buffImgDataList[i]["resourceIndex"+a];if(e[t].buffImgDataList[i].isRotate){E.restore(),E.save(),E.translate(s.x,s.y);var o=(e[t].buffImgDataList[i].rotateStartDegree+e[t].effectRotateDegree)*F;E.rotate(o),E.drawImage(g,r.srcPosX,r.srcPosY,r.srcWidth,r.srcHeight,-r.width/2*oe.scaleFactor,-r.height/2*oe.scaleFactor,r.width*oe.scaleFactor,r.height*oe.scaleFactor),E.restore(),E.save(),E.translate(s.x,s.y),E.rotate(n)}else E.drawImage(g,r.srcPosX,r.srcPosY,r.srcWidth,r.srcHeight,-r.width/2*oe.scaleFactor,-r.height/2*oe.scaleFactor,r.width*oe.scaleFactor,r.height*oe.scaleFactor)}E.drawImage(m,e[t].imgData.srcPosX,e[t].imgData.srcPosY,e[t].imgData.srcWidth,e[t].imgData.srcHeight,-e[t].imgData.width/2*oe.scaleFactor,-e[t].imgData.height/2*oe.scaleFactor,e[t].imgData.width*oe.scaleFactor,e[t].imgData.height*oe.scaleFactor);for(var i=0;i<e[t].hitImgDataList.length;i++)if(e[t].hitImgDataList[i].isAttach){var a=e[t].effectIndex%e[t].hitImgDataList[i].resourceLength+1,r=e[t].hitImgDataList[i]["resourceIndex"+a];if(e[t].hitImgDataList[i].isRotate){E.restore(),E.save(),E.translate(s.x,s.y);var o=(e[t].hitImgDataList[i].rotateStartDegree+e[t].effectRotateDegree)*F;E.rotate(o),E.drawImage(m,r.srcPosX,r.srcPosY,r.srcWidth,r.srcHeight,-r.width/2*oe.scaleFactor,-r.height/2*oe.scaleFactor,r.width*oe.scaleFactor,r.height*oe.scaleFactor),E.restore(),E.save(),E.translate(s.x,s.y),E.rotate(n)}else E.drawImage(g,r.srcPosX,r.srcPosY,r.srcWidth,r.srcHeight,-r.width/2*oe.scaleFactor,-r.height/2*oe.scaleFactor,r.width*oe.scaleFactor,r.height*oe.scaleFactor)}for(var i=0;i<e[t].buffImgDataList.length;i++)if(e[t].buffImgDataList[i].isFront&&e[t].buffImgDataList[i].isAttach){var a=e[t].effectIndex%e[t].buffImgDataList[i].resourceLength+1,r=e[t].buffImgDataList[i]["resourceIndex"+a];if(e[t].buffImgDataList[i].isRotate){E.restore(),E.save(),E.translate(s.x,s.y);var o=e[t].effectRotateDegree*F;E.rotate(o),E.drawImage(g,r.srcPosX,r.srcPosY,r.srcWidth,r.srcHeight,-r.width/2*oe.scaleFactor,-r.height/2*oe.scaleFactor,r.width*oe.scaleFactor,r.height*oe.scaleFactor),E.restore(),E.save(),E.translate(s.x,s.y),E.rotate(n)}else E.drawImage(g,r.srcPosX,r.srcPosY,r.srcWidth,r.srcHeight,-r.width/2*oe.scaleFactor,-r.height/2*oe.scaleFactor,r.width*oe.scaleFactor,r.height*oe.scaleFactor)}if(E.restore(),e[t].HP!==e[t].maxHP){var l=e[t].localPosition;E.beginPath(),E.fillStyle="#ff0000";var c=l.x-7*oe.scaleFactor,d=e[t].HP/e[t].maxHP*60*oe.scaleFactor,u=7*oe.scaleFactor;E.fillRect(c,l.y+60*oe.scaleFactor,d,u),E.strokeStyle="rgb(15,15,15)",d=60*oe.scaleFactor,E.lineJoin="round",E.strokeRect(c,l.y+60*oe.scaleFactor,d,u),E.closePath()}}}(re.setDrawMobs(te.monsters,oe)),function(){var e=!1;Date.now()-W>=oe.IMG_COLLISION_CLEAR_TIME&&(e=!0,W=Date.now());for(var t=0;t<te.obstacles.length-te.treesCount;t++){var s=re.worldToLocalPosition(te.obstacles[t].center,oe.userOffset,oe.scaleFactor);re.isObjInCanvas(s,te.obstacles[t].imgData.width/2,oe)&&(E.drawImage(o,te.obstacles[t].imgData.srcPosX,te.obstacles[t].imgData.srcPosY,te.obstacles[t].imgData.srcWidth,te.obstacles[t].imgData.srcHeight,s.x-te.obstacles[t].imgData.width/2*oe.scaleFactor,s.y-te.obstacles[t].imgData.height/2*oe.scaleFactor,te.obstacles[t].imgData.width*oe.scaleFactor,te.obstacles[t].imgData.height*oe.scaleFactor),te.obstacles[t].staticEle.isCollide&&(E.beginPath(),E.arc(s.x,s.y,te.obstacles[t].imgData.width/2*.9*oe.scaleFactor,0,2*Math.PI),E.fillStyle="rgba(255, 0, 0, 0.5)",E.fill(),E.closePath()),e&&(te.obstacles[t].staticEle.isCollide=!1))}(function(){for(var e=0;e<te.projectiles.length;e++){if(te.projectiles[e].projectileImgData)var t=te.projectiles[e].projectileImgData.resourceIndex1,s=te.projectiles[e].projectileImgData.isRotate;else switch(te.projectiles[e].property){case oe.SKILL_PROPERTY_FIRE:t=p;break;case oe.SKILL_PROPERTY_FROST:t=T;break;case oe.SKILL_PROPERTY_ARCANE:t=b}var n=re.worldXCoordToLocalX(te.projectiles[e].position.x,oe.userOffset.x,oe.scaleFactor),i=re.worldYCoordToLocalY(te.projectiles[e].position.y,oe.userOffset.y,oe.scaleFactor),a=te.projectiles[e].radius*oe.scaleFactor;if(s){var r=n+a,o=i+a;E.save(),E.translate(r,o);var l=te.projectiles[e].effectRotateDegree*F;E.rotate(l),E.drawImage(g,t.srcPosX,t.srcPosY,t.srcWidth,t.srcHeight,-a,-a,2*a,2*a),E.restore()}else E.drawImage(g,t.srcPosX,t.srcPosY,t.srcWidth,t.srcHeight,n,i,2*a,2*a)}})(),function(){for(var e=0;e<te.chests.length;e++){E.beginPath();var t=re.worldToLocalPosition(te.chests[e].center,oe.userOffset,oe.scaleFactor);if(E.drawImage(o,te.chests[e].imgData.srcPosX,te.chests[e].imgData.srcPosY,te.chests[e].imgData.srcWidth,te.chests[e].imgData.srcHeight,t.x-te.chests[e].imgData.width/2*oe.scaleFactor,t.y-te.chests[e].imgData.height/2*oe.scaleFactor,te.chests[e].imgData.width*oe.scaleFactor,te.chests[e].imgData.height*oe.scaleFactor),-1!==Ee.indexOf(te.chests[e].locationID)){var s=re.worldToLocalPosition(te.chests[e].position,oe.userOffset,oe.scaleFactor);E.fillStyle="rgba(255, 0, 0, 0.5)",E.fillRect(s.x,s.y-2.5,.85*te.chests[e].imgData.width*oe.scaleFactor,.85*te.chests[e].imgData.height*oe.scaleFactor)}E.fillStyle="#ff0000";var n=te.chests[e].HP/te.chests[e].maxHP*85*oe.scaleFactor,i=10*oe.scaleFactor,a=t.x-42.5*oe.scaleFactor,r=t.y+60*oe.scaleFactor;E.fillRect(a,r,n,i),E.strokeStyle="#000000",n=85*oe.scaleFactor,E.strokeRect(a,r,n,i),E.closePath()}}(),function(){for(var e=0;e<te.portals.length;e++){var t=re.worldToLocalPosition(te.portals[e].center,oe.userOffset,oe.scaleFactor),s=q[Z];re.isObjInCanvas(t,te.portals[e].size.width/2,oe)&&(E.save(),E.translate(t.x,t.y),E.rotate(ge*F),E.drawImage(a,s.srcPosX,s.srcPosY,s.srcWidth,s.srcHeight,-te.portals[e].size.width/2*oe.scaleFactor,-te.portals[e].size.height/2*oe.scaleFactor,te.portals[e].size.width*oe.scaleFactor,te.portals[e].size.height*oe.scaleFactor),E.restore(),E.drawImage(P,t.x-100,t.y-70))}100<Date.now()-me&&(me=Date.now(),Q?4<=Z?Q=!(Z=3):Z++:Z<=0?(Z=1,Q=!0):Z--,ge++)}();for(var t=te.obstacles.length-te.treesCount;t<te.obstacles.length;t++){var s=re.worldToLocalPosition(te.obstacles[t].center,oe.userOffset,oe.scaleFactor);re.isObjInCanvas(s,te.obstacles[t].imgData.width/2,oe)&&(te.obstacles[t].treeImgEle.isCollide?E.drawImage(o,r.srcPosX,r.srcPosY,r.srcWidth,r.srcHeight,s.x-te.obstacles[t].imgData.width/2*oe.scaleFactor,s.y-te.obstacles[t].imgData.height/2*oe.scaleFactor,te.obstacles[t].imgData.width*oe.scaleFactor,te.obstacles[t].imgData.height*oe.scaleFactor):E.drawImage(o,te.obstacles[t].imgData.srcPosX,te.obstacles[t].imgData.srcPosY,te.obstacles[t].imgData.srcWidth,te.obstacles[t].imgData.srcHeight,s.x-te.obstacles[t].imgData.width/2*oe.scaleFactor,s.y-te.obstacles[t].imgData.height/2*oe.scaleFactor,te.obstacles[t].imgData.width*oe.scaleFactor,te.obstacles[t].imgData.height*oe.scaleFactor),e&&(te.obstacles[t].treeImgEle.isCollide=!1),te.obstacles[t].staticEle.isCollide&&(E.beginPath(),E.arc(s.x,s.y,te.obstacles[t].imgData.width/2*.9*oe.scaleFactor,0,2*Math.PI),E.fillStyle="rgba(255, 0, 0, 0.5)",E.fill(),E.closePath()),e&&(te.obstacles[t].staticEle.isCollide=!1))}}(),function(e){for(var t=0;t<e.length;t++){var s=e[t].localCenter,n=e[t].localPosition;if(e[t].chatMessage2){E.beginPath(),E.textAlign="center",E.font="20px normal",E.strokeStyle="#000000";var i=(12*e[t].chatMessage1.length+20)*oe.scaleFactor;E.fillStyle="#ffffff",E.fillRect(s.x-i/2,n.y-55*oe.scaleFactor,i,25*oe.scaleFactor),E.strokeRect(s.x-i/2,n.y-55*oe.scaleFactor,i,25*oe.scaleFactor),E.fillStyle="#000000",E.fillText(e[t].chatMessage1,s.x,n.y-36*oe.scaleFactor),i=(12*e[t].chatMessage2.length+20)*oe.scaleFactor,E.fillStyle="#ffffff",E.fillRect(s.x-i/2,n.y-30*oe.scaleFactor,i,25*oe.scaleFactor),E.strokeRect(s.x-i/2,n.y-30*oe.scaleFactor,i,25*oe.scaleFactor),E.fillStyle="#000000",E.fillText(e[t].chatMessage2,s.x,n.y-11*oe.scaleFactor),E.moveTo(s.x-8,n.y-5*oe.scaleFactor),E.lineTo(s.x+8,n.y-5*oe.scaleFactor),E.lineTo(s.x,n.y),E.fill(),E.closePath()}else if(e[t].chatMessage1){E.beginPath();var i=(12*e[t].chatMessage1.length+20)*oe.scaleFactor;E.strokeStyle="#000000",E.fillStyle="#ffffff",E.fillRect(s.x-i/2,n.y-30*oe.scaleFactor,i,25*oe.scaleFactor),E.strokeRect(s.x-i/2,n.y-30*oe.scaleFactor,i,25*oe.scaleFactor),E.fillStyle="#000000",E.moveTo(s.x-8,n.y-5*oe.scaleFactor),E.lineTo(s.x+8,n.y-5*oe.scaleFactor),E.lineTo(s.x,n.y),E.fill(),E.textAlign="center",E.font="20px normal",E.fillText(e[t].chatMessage1,s.x,n.y-11*oe.scaleFactor),E.closePath()}}}(e),function(){for(var e=0;e<te.effects.length;e++){if(E.beginPath(),E.fillStyle="#ff0000",te.effects[e].effectImgData)var t=te.effects[e].effectImgData.resourceIndex1;else switch(te.effects[e].property){case oe.SKILL_PROPERTY_FIRE:t=y;break;case oe.SKILL_PROPERTY_FROST:t=C;break;case oe.SKILL_PROPERTY_ARCANE:t=v}var s=re.worldXCoordToLocalX(te.effects[e].position.x+te.effects[e].radius,oe.userOffset.x,oe.scaleFactor),n=re.worldYCoordToLocalY(te.effects[e].position.y+te.effects[e].radius,oe.userOffset.y,oe.scaleFactor),i=te.effects[e].radius*te.effects[e].scaleFactor;E.drawImage(g,t.srcPosX,t.srcPosY,t.srcWidth,t.srcHeight,s-i,n-i,2*i,2*i),E.closePath()}}(),je===oe.DRAW_MODE_SKILL_RANGE)!function(){if(Ye.type===oe.SKILL_TYPE_PROJECTILE||Ye.type===oe.SKILL_TYPE_PROJECTILE_TICK||Ye.type===oe.SKILL_TYPE_PROJECTILE_EXPLOSION||Ye.type===oe.SKILL_TYPE_PROJECTILE_TICK_EXPLOSION){E.beginPath(),E.save();var e=re.worldToLocalPosition(te.users[oe.userID].center,oe.userOffset),t=Ke.x-e.x,s=Ke.y-e.y,n=Math.atan(s/t);isNaN(n)?n=0:t<0&&0<=s?n+=Math.PI:t<0&&s<0&&(n-=Math.PI),E.translate(e.x*oe.scaleFactor,e.y*oe.scaleFactor),E.rotate(n),E.drawImage(m,R.srcPosX,R.srcPosY,R.srcWidth,R.srcHeight,-R.width/2*oe.scaleFactor,-R.height/2*oe.scaleFactor,R.width*oe.scaleFactor,R.height*oe.scaleFactor),E.closePath(),E.restore()}else if(Ye.index===at)E.beginPath(),E.fillStyle="#ffffff",E.globalAlpha=.7,E.arc(Ke.x*oe.scaleFactor,Ke.y*oe.scaleFactor,Ye.explosionRadius*oe.scaleFactor,0,2*Math.PI),E.fill(),E.closePath();else{E.beginPath(),E.fillStyle="#ffffff",E.globalAlpha=.5;var e=re.worldToLocalPosition(te.users[oe.userID].center,oe.userOffset);E.arc(e.x*oe.scaleFactor,e.y*oe.scaleFactor,Ye.range*oe.scaleFactor,0,2*Math.PI),E.fill(),E.closePath(),E.beginPath(),E.globalAlpha=.7;var i=re.distanceSquare(e,Ke);if(Math.pow(Ye.range,2)>i)E.arc(Ke.x*oe.scaleFactor,Ke.y*oe.scaleFactor,Ye.explosionRadius*oe.scaleFactor,0,2*Math.PI);else{var t=Ke.x-e.x,s=Ke.y-e.y,n=Math.atan(s/t);isNaN(n)?n=0:t<0&&0<=s?n+=Math.PI:t<0&&s<0&&(n-=Math.PI);var a=Ye.range*Math.cos(n),r=Ye.range*Math.sin(n),o={x:e.x+a,y:e.y+r};E.arc(o.x*oe.scaleFactor,o.y*oe.scaleFactor,Ye.explosionRadius*oe.scaleFactor,0,2*Math.PI)}E.fill()}E.globalAlpha=1}();else if(Ce&&150<Date.now()-ve&&!te.user.castingEndTime){ve=Date.now(),Pe=Date.now();var t=re.localToWorldPosition(Ke,oe.userOffset),s=re.setTargetPosition(t,te.users[oe.userID]);te.moveUser(s);var n=te.processUserData();n.targetPosition={x:Math.floor(s.x),y:Math.floor(s.y)},Re=Date.now(),$.emit(oe.MTYPE_USER_MOVE_START,n)}}()}function vt(){Ce=!1,Bt(),Ot(),je===oe.DRAW_MODE_SKILL_RANGE&&Kt(oe.DRAW_MODE_NORMAL),ee.closePopUpSkillChange(),Gt(Xe);var e=te.getUserExp();ee.playDeadScene(oe.userID,ft,Ge,ie,e,ae,se,ne),Ge=ie,function(){switch(Xe){case oe.CHAR_TYPE_FIRE:Je=Ge;break;case oe.CHAR_TYPE_FROST:ze=Ge;break;case oe.CHAR_TYPE_ARCANE:Ve=Ge}}()}function Lt(){ee.drawRestartScene()}function Dt(){ee.disableStandingScene(),it=ee.getStandingUserName(),$.emit(oe.MTYPE_REQ_RESTART_GAME,it,Xe,ct)}function At(){++U>=oe.RESOURCES_COUNT&&(H=!0,ee.setServerList())}function Rt(e,t){var s=te.processSkillData(e);s.sT=t,-1===ct.indexOf(s.sID)&&at!==s.sID?te.stopUser():$.emit(oe.MTYPE_SKILL_FIRED,s)}function Pt(e,t){var s=te.processProjectileData(e);$.emit(oe.MTYPE_PROJECTILE_FIRED,s,t)}function Mt(){i.width=window.innerWidth,i.height=window.innerHeight,window.innerWidth<1200?ee.bottomToRight():ee.rightToBottom(),window.innerWidth<1024?ee.disableDisplayAd():ee.enableDisplayAd(),oe.canvasSize={width:window.innerWidth,height:window.innerHeight},function(e){e.scaleX=1,e.scaleY=1,e.canvasSize.width>=e.CANVAS_MAX_LOCAL_SIZE.width&&(e.scaleX=e.canvasSize.width/e.CANVAS_MAX_LOCAL_SIZE.width);e.canvasSize.height>=e.CANVAS_MAX_LOCAL_SIZE.height&&(e.scaleY=e.canvasSize.height/e.CANVAS_MAX_LOCAL_SIZE.height);e.scaleX>e.scaleY?e.scaleFactor=e.scaleX:e.scaleFactor=e.scaleY}(oe)}function kt(){var e=te.processUserData(),t=!1;1e3<=Date.now()-Re&&(t=!0,Re=Date.now()),5e3<=Date.now()-Me&&(Me=Date.now(),$.emit(oe.MTYPE_FIRE_PING,Me)),$.emit(oe.MTYPE_USER_DATA_UPDATE,e,t,we.lastFrameCount)}function wt(){i.addEventListener("click",Ut,!1),i.addEventListener("mousemove",Yt,!1),i.addEventListener("mousedown",Nt,!1),i.addEventListener("mouseup",Ft,!1)}function xt(){document.addEventListener("keydown",Ht,!1)}function Bt(){i.removeEventListener("click",Ut),i.removeEventListener("mousemove",Yt),i.removeEventListener("mousedown",Nt),i.removeEventListener("mouseup",Ft)}function Ot(){document.removeEventListener("keydown",Ht)}function Nt(){Ce=!0}function Ft(){Ce=!1}window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},window.cancelAnimFrame=window.cancelAnimationFrame||window.mozCancelAnimationFrame;var Ut=function(r){be&&(be=!1,ee.disableChatInput()),Pe=Date.now(),V&&(clearTimeout(V),V=!1);var e=0;te.user.castingEndTime&&(e=te.user.castingEndTime-Date.now()+30),V=setTimeout(function(){var e={x:r.clientX/oe.scaleFactor,y:r.clientY/oe.scaleFactor},t=re.localToWorldPosition(e,oe.userOffset);if(je===oe.DRAW_MODE_SKILL_RANGE)if(Ye.index===at){var s=re.setMoveAttackUserTargetPosition(t,Ye,te.users[oe.userID]),n={x:Math.floor(s.x),y:Math.floor(s.y)},i=le({},Ye);i.targetPosition={x:Math.floor(t.x),y:Math.floor(t.y)},te.moveAndAttackUser(oe.userID,n,i,s.moveBackward);var a=te.processUserData();a.targetPosition=n,a.moveBackward=s.moveBackward,a.skillIndex=Ye.index,a.skillTargetPosition={x:Math.floor(t.x),y:Math.floor(t.y)},Kt(oe.DRAW_MODE_NORMAL),Re=Date.now(),$.emit(oe.MTYPE_USER_MOVE_AND_ATTACK,a)}else Xt(Ye,t,te.users[oe.userID]),Kt(oe.DRAW_MODE_NORMAL)},e)},Ht=function(e){Pe=Date.now();var t,s=e.keyCode||e.which||0;if(je===oe.DRAW_MODE_NORMAL&&!be){if(s===Et.BindingE||s===Et.BindingSpace){if(te.user.currentState!==oe.OBJECT_STATE_ATTACK)var n=le({},rt)}else s===Et.Binding1?n=le({},dt[0]):s===Et.Binding2?n=le({},dt[1]):s===Et.Binding3?n=le({},dt[2]):s===Et.Binding4&&(n=le({},dt[3]));jt(n),s===Et.BindingA&&(n=le({},rt),(t=n).index===at&&(te.user.conditions[oe.USER_CONDITION_FREEZE]||te.user.conditions[oe.USER_CONDITION_SILENCE]||te.user.conditions[oe.USER_CONDITION_BLUR]||(te.applyCastSpeed(oe.userID,t),Ye=t,Kt(oe.DRAW_MODE_SKILL_RANGE))))}if(s===Et.BindingG&&(be||ye||ee.popChangeWithKey()),s===Et.BindingEsc&&(je===oe.DRAW_MODE_SKILL_RANGE&&Kt(oe.DRAW_MODE_NORMAL),be?(be=!1,ee.disableChatInput()):ee.popCloseWithKey()),s===Et.BindingS&&!be){te.stopUser();var i=te.processUserData();Re=Date.now(),$.emit(oe.MTYPE_USER_STOP,i)}if(s===Et.BindingEnter)if(be){be=!1;var a=re.processMessage(ee.getChatMessage(),oe.CHAT_MESSAGE_LENGTH,!1);ee.disableChatInput(),ee.clearChatInput(),a&&$.emit(oe.MTYPE_CHATTING,a)}else be=!0,ee.showChatInput()};function jt(e){V&&(clearTimeout(V),V=!1);var t=0;te.user.castingEndTime&&(t=te.user.castingEndTime-Date.now()+30),V=setTimeout(function(){e&&e.hasOwnProperty("index")&&e.type!==oe.SKILL_TYPE_PASSIVE&&(te.user.conditions[oe.USER_CONDITION_FREEZE]?(ee.makeFlashMessage("FROZEN!!!"),je===oe.DRAW_MODE_SKILL_RANGE&&Kt(oe.DRAW_MODE_NORMAL)):te.user.conditions[oe.USER_CONDITION_SILENCE]?(ee.makeFlashMessage("SILENCED!!!"),je===oe.DRAW_MODE_SKILL_RANGE&&Kt(oe.DRAW_MODE_NORMAL)):te.user.conditions[oe.USER_CONDITION_BLUR]?(ee.makeFlashMessage("Using Portal!!!"),je===oe.DRAW_MODE_SKILL_RANGE&&Kt(oe.DRAW_MODE_NORMAL)):te.user.MP<e.consumeMP?(ee.makeFlashMessage("Not enough Mana!!!"),je===oe.DRAW_MODE_SKILL_RANGE&&Kt(oe.DRAW_MODE_NORMAL)):ee.checkCooltime(e.index)?(te.applyCastSpeed(oe.userID,e),e.type===oe.SKILL_TYPE_PROJECTILE||e.type===oe.SKILL_TYPE_PROJECTILE_EXPLOSION||e.type===oe.SKILL_TYPE_PROJECTILE_TICK||e.type===oe.SKILL_TYPE_PROJECTILE_TICK_EXPLOSION||e.type===oe.SKILL_TYPE_RANGE||e.type===oe.SKILL_TYPE_TELEPORT?je===oe.DRAW_MODE_NORMAL&&(Ye=e,Kt(oe.DRAW_MODE_SKILL_RANGE)):Xt(e,te.users[oe.userID].center,te.users[oe.userID])):e.index!==at&&(ee.makeFlashMessage("Spell is not ready!!!"),je===oe.DRAW_MODE_SKILL_RANGE&&Kt(oe.DRAW_MODE_NORMAL)))},t)}function Kt(e){e===oe.DRAW_MODE_NORMAL?(je=oe.DRAW_MODE_NORMAL,Ye=null,ee.disableSelectSkillInfo()):e===oe.DRAW_MODE_SKILL_RANGE&&(je=oe.DRAW_MODE_SKILL_RANGE,ee.enableSelectSkillInfo(Ye))}function Yt(e){Ke.x=e.clientX/oe.scaleFactor,Ke.y=e.clientY/oe.scaleFactor}function Xt(e,t,s){if(ee.checkCooltime(e.index)&&!s.conditions[oe.USER_CONDITION_FREEZE]&&!s.conditions[oe.USER_CONDITION_SILENCE]&&!s.conditions[oe.USER_CONDITION_BLUR]){if(e.targetPosition=re.calcSkillTargetPosition(e,t,s),e.type===oe.SKILL_TYPE_TELEPORT)for(var n=!0,i=1;n;){i++;var a=te.checkCollisionWithObstacles(e.targetPosition,s);a.length?e.targetPosition=te.reCalcSkillTargetPosition(e.targetPosition,s,a):n=!1,20<=i&&(n=!1)}e.direction=re.calcSkillTargetDirection(e.type,e.targetPosition,s),e.type!==oe.SKILL_TYPE_PROJECTILE&&e.type!==oe.SKILL_TYPE_PROJECTILE_TICK&&e.type!==oe.SKILL_TYPE_PROJECTILE_EXPLOSION&&e.type!==oe.SKILL_TYPE_PROJECTILE_TICK_EXPLOSION&&e.type!==oe.SKILL_TYPE_INSTANT_PROJECTILE||(e.projectileIDs=re.generateRandomUniqueID(te.projectiles,oe.PREFIX_SKILL_PROJECTILE,e.projectileCount)),te.useSkill(oe.userID,e);var r=te.processUserData();r.skillIndex=e.index,r.skillDirection=Math.floor(e.direction),r.skillTargetPosition={x:Math.floor(e.targetPosition.x),y:Math.floor(e.targetPosition.y)},e.projectileIDs&&(r.projectileIDs=e.projectileIDs),Re=Date.now(),$.emit(oe.MTYPE_USER_USE_SKILL,r)}}function Gt(e){switch(e){case oe.CHAR_TYPE_FIRE:We=at,qe=ot;for(var t=0;t<ct.length;t++)Ze[t]=ct[t];break;case oe.CHAR_TYPE_FROST:Qe=at,$e=ot;for(t=0;t<ct.length;t++)et[t]=ct[t];break;case oe.CHAR_TYPE_ARCANE:tt=at,st=ot;for(t=0;t<ct.length;t++)nt[t]=ct[t]}$.emit(oe.MTYPE_UPDATE_EQUIP_SKILLS,e,ct)}function Jt(e){var t=[],s=le({},re.findData(de,"index",e.iP)).buffToSelf,n=le({},re.findData(O,"index",s)).buffEffectGroup,i=le({},re.findData(he,"index",n)),a=re.setResourceData(ue,i);a&&t.push(i);for(var r=0;r<e.bL.length;r++)n=le({},re.findData(O,"index",e.bL[r].id)).buffEffectGroup,i=le({},re.findData(he,"index",n)),(a=re.setResourceData(ue,i))&&t.push(i);for(r=0;r<e.pL.length;r++)n=le({},re.findData(O,"index",e.pL[r])).buffEffectGroup,i=le({},re.findData(he,"index",n)),(a=re.setResourceData(ue,i))&&t.push(i);for(r=0;r<e.aL.length;r++)n=le({},re.findData(O,"index",e.aL[r])).buffEffectGroup,i=le({},re.findData(he,"index",n)),(a=re.setResourceData(ue,i))&&t.push(i);te.updateUserBuffImgData(e.oID,t)}function zt(){var e=_u.l.split(","),t=_u.f;Je=parseInt(e[0]),ze=parseInt(e[1]),Ve=parseInt(e[2]);var s=Math.floor(Je/5)+1,n=Math.floor(ze/5)+1,i=Math.floor(Ve/5)+1,a=le({},re.findData(de,"index",We)).groupIndex,r=le({},re.findData(de,"index",qe)).groupIndex,o=le({},re.findData(de,"index",Qe)).groupIndex,l=le({},re.findData(de,"index",$e)).groupIndex,c=le({},re.findData(de,"index",tt)).groupIndex,d=le({},re.findData(de,"index",st)).groupIndex;We=le({},re.findDataWithTwoColumns(de,"groupIndex",a,"level",s)).index,qe=le({},re.findDataWithTwoColumns(de,"groupIndex",r,"level",s)).index,Qe=le({},re.findDataWithTwoColumns(de,"groupIndex",o,"level",n)).index,$e=le({},re.findDataWithTwoColumns(de,"groupIndex",l,"level",n)).index,tt=le({},re.findDataWithTwoColumns(de,"groupIndex",c,"level",i)).index,st=le({},re.findDataWithTwoColumns(de,"groupIndex",d,"level",i)).index,t||ee.clearTutorial(),ee.setStartSceneLevels(Je,ze,Ve)}function Vt(){this.lastFrameCount=0,this.lastFrameTime=Date.now(),this.frameCount=0}Vt.prototype.countFrames=function(){this.frameCount++,Date.now()>=this.lastFrameTime+1e3&&(this.lastFrameTime=Date.now(),this.lastFrameCount=this.frameCount,this.frameCount=0)},mt(oe.GAME_STATE_LOAD),setInterval(function(){Date.now()>=Pe+oe.LIMIT_NO_ACTION_TIME&&(window.location.href="/noaction")},oe.LONG_TIME_INTERVAL)},{"../../modules/client/CManager.js":4,"../../modules/client/CUIManager.js":8,"../../modules/client/CUser.js":9,"../../modules/client/WebSocketClient.js":10,"../../modules/public/csvjson.js":11,"../../modules/public/data.json":12,"../../modules/public/gameConfig.json":13,"../../modules/public/objectAssign.js":15,"../../modules/public/util.js":18}]},{},[52]);