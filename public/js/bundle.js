/* 2018-11-26 */

!function a(r,o,l){function c(s,e){if(!o[s]){if(!r[s]){var t="function"==typeof require&&require;if(!e&&t)return t(s,!0);if(d)return d(s,!0);var i=new Error("Cannot find module '"+s+"'");throw i.code="MODULE_NOT_FOUND",i}var n=o[s]={exports:{}};r[s][0].call(n.exports,function(e){var t=r[s][1][e];return c(t||e)},n,n.exports,a,r,o,l)}return o[s].exports}for(var d="function"==typeof require&&require,e=0;e<l.length;e++)c(l[e]);return c}({1:[function(e,t,s){var n,l,c,a,d,u,r=e("./CUser.js"),o=e("./CMonster.js"),h=e("../public/util.js"),p=e("../public/gameConfig.json"),f=e("../public/objectAssign.js"),m=e("../public/quadtree.js"),g=e("./CObstacle.js"),E=[],I=[],S=[],i=function(){this.user=null,this.users=[],this.monsters=[],this.chests=[],this.obstacles=[],this.immortalGrounds=[],this.portals=[],this.treesCount=0,this.effects=[],this.userEffects=[],this.projectiles=[],this.riseText=[],this.userEffectTimer=Date.now(),this.objGolds=[],this.objJewels=[],this.objSkills=[],this.objBoxs=[],this.objBuffs=[],this.onUserLevelUp=new Function,this.onMainUserMove=new Function,this.onSkillFire=new Function,this.onProjectileSkillFire=new Function,this.staticInterval=null};i.prototype={start:function(e,t,s,i){n=e,l=t,c=s,a=i,d=new m({width:p.CANVAS_MAX_SIZE.width,height:p.CANVAS_MAX_SIZE.height,maxElements:5}),u=new m({width:p.CANVAS_MAX_SIZE.width,height:p.CANVAS_MAX_SIZE.height,maxElements:5}),this.mapSetting(),this.updateGame()},mapSetting:function(){this.createObstacles(),this.setEnvironments()},updateGame:function(){var e=1e3/p.INTERVAL;null===this.staticInterval&&(this.staticInterval=setInterval(function(){for(var e=this.userEffects.length-1;0<=e;e--)Date.now()-this.userEffects[e].startTime>=this.userEffects[e].resourceLifeTime?this.userEffects.splice(e,1):Date.now()-this.userEffects[e].effectTimer>=p.USER_DETACH_EFFECT_CHANGE_TIME&&this.userEffects[e].changeIndex();if(Date.now()-this.userEffectTimer>=p.USER_DETACH_EFFECT_MAKE_TIME){for(var t in this.users)if(this.users[t].isRender)for(var e=0;e<this.users[t].buffImgDataList.length;e++)if(!this.users[t].buffImgDataList[e].isAttach){var s=h.makeUserEffect(this.users[t],this.users[t].buffImgDataList[e]);this.userEffects.push(s)}for(var t in this.monsters)for(var e=0;e<this.monsters[t].buffImgDataList.length;e++)if(!this.monsters[t].buffImgDataList[e].isAttach){var s=h.makeUserEffect(this.monsters[t],this.monsters[t].buffImgDataList[e]);this.userEffects.push(s)}this.userEffectTimer=Date.now()}if(this.user){var i=h.checkCircleCollision(u,this.user.position.x,this.user.position.y,this.user.size.width/2,this.user.objectID);if(i.length)for(var e=0;e<i.length;e++)a=i[e],i[e].isCollide||(a.isCollide=!0)}var e=S.length;for(;e--;){var i=h.checkCircleCollision(d,S[e].position.x,S[e].position.y,S[e].radius,p.PREFIX_SKILL);if(i.length)for(var n=0;n<i.length;n++){var a=i[n];a.isCollide||(a.isCollide=!0)}S.splice(e,1)}for(var t in this.users)this.users[t].setEntityEle();for(var t in this.monsters)this.monsters[t].setEntityEle();var e=this.projectiles.length;for(;e--;)if(this.projectiles[e].isExpired())this.projectiles.splice(e,1);else if(this.projectiles[e].move(),this.projectiles[e].projectileImgData&&Date.now()-this.projectiles[e].effectTimer>=p.PROJECTILE_EFFECT_CHANGE_TIME&&(this.projectiles[e].effectTimer=Date.now(),this.projectiles[e].effectRotateDegree+=10),this.projectiles[e].type===p.SKILL_TYPE_INSTANT_PROJECTILE||this.projectiles[e].type===p.SKILL_TYPE_PROJECTILE||this.projectiles[e].type===p.SKILL_TYPE_PROJECTILE_TICK||this.projectiles[e].type===p.SKILL_TYPE_PROJECTILE_TICK_EXPLOSION){var i=h.checkCircleCollision(d,this.projectiles[e].position.x,this.projectiles[e].position.y,this.projectiles[e].radius,p.PREFIX_SKILL_PROJECTILE);if(i.length)for(var n=0;n<i.length;n++){var a=i[n];a.id.substr(0,3)===p.PREFIX_OBSTACLE_CHEST_GROUND||a.isCollide||(a.isCollide=!0)}}var e=this.effects.length;for(;e--;)this.effects[e].isCheckCollision||Date.now()-this.effects[e].startTime>this.effects[e].lifeTime/2&&(S.push(this.effects[e]),this.effects[e].isCheckCollision=!0),this.effects[e].startTime+this.effects[e].lifeTime<Date.now()?this.effects.splice(e,1):this.effects[e].scaleFactor=h.interpolationSine(Date.now()-this.effects[e].startTime,this.effects[e].lifeTime)}.bind(this),e))},createObstacles:function(){for(var e=f({},h.findAllDatas(c,"type",p.OBJ_TYPE_ROCK)),t=0;t<Object.keys(e).length;t++){var s=f({},h.findData(l,"index",e[t].imgData)),i=new g(e[t].posX,e[t].posY,e[t].radius,e[t].id,s);this.obstacles.push(i),E.push(i.staticEle)}var n=f({},h.findAllDatas(c,"type",p.OBJ_TYPE_CHEST_GROUND));for(t=0;t<Object.keys(n).length;t++){s=f({},h.findData(l,"index",n[t].imgData));var a=new g(n[t].posX,n[t].posY,n[t].radius,n[t].id,s);this.obstacles.push(a),E.push(a.staticEle)}var r=f({},h.findAllDatas(c,"type",p.OBJ_TYPE_TREE));this.treesCount=Object.keys(r).length;for(t=0;t<Object.keys(r).length;t++){s=f({},h.findData(l,"index",r[t].imgData));var o=new g(r[t].posX,r[t].posY,r[t].radius,r[t].id,s);o.setTreeImgEle(r[t].treeImgRadius),this.obstacles.push(o),E.push(o.staticEle),I.push(o.treeImgEle)}d.pushAll(E),u.pushAll(I)},setEnvironments:function(){for(var e=f({},h.findAllDatas(c,"type",p.ENV_TYPE_IMMORTAL_GROUND)),t=0;t<Object.keys(e).length;t++){var s=f({},h.findData(l,"index",e[t].imgData));(n=new g(e[t].posX,e[t].posY,e[t].radius,e[t].id,s)).size.width=2*(e[t].radius+30),n.size.height=2*(e[t].radius+30),this.immortalGrounds.push(n)}var i=f({},h.findAllDatas(c,"type",p.ENV_TYPE_PORTAL));for(t=0;t<Object.keys(i).length;t++){var n;s=f({},h.findData(l,"index",i[t].imgData));(n=new g(i[t].posX,i[t].posY,i[t].radius,i[t].id,s)).size.width=2*(i[t].radius+60),n.size.height=2*(i[t].radius+60),this.portals.push(n)}},setChests:function(e){for(var t=0;t<e.length;t++)this.createChest(e[t])},createChest:function(e){for(var t=f({},h.findAllDatas(c,"type",p.OBJ_TYPE_CHEST_GROUND)),s=0;s<Object.keys(t).length;s++)if(t[s].id===e.lID){var i=t[s],n={x:t[s].posX,y:t[s].posY};break}if(i&&n){switch(e.gd){case 1:var a=p.RESOURCE_INDEX_CHEST_GRADE_1;break;case 2:a=p.RESOURCE_INDEX_CHEST_GRADE_2;break;case 3:a=p.RESOURCE_INDEX_CHEST_GRADE_3;break;case 4:a=p.RESOURCE_INDEX_CHEST_GRADE_4;break;case 5:a=p.RESOURCE_INDEX_CHEST_GRADE_5}var r=f({},h.findData(l,"index",a));this.chests.push({objectID:e.oID,locationID:e.lID,grade:e.gd,HP:e.HP,maxHP:e.mHP,position:n,size:{width:2*i.radius,height:2*i.radius},center:{x:n.x+i.radius,y:n.y+i.radius},imgData:r})}},updateChest:function(e,t){for(var s=0;s<this.chests.length;s++)if(this.chests[s].locationID===e){this.chests[s].HP=t;break}},deleteChest:function(e){for(var t=0;t<this.chests.length;t++)if(this.chests[t].locationID===e){this.chests.splice(t,1);break}},setUser:function(e,t){if(!(e.oID in this.users)){var s=h.makeCacheCanvas(e.lv,e.nm,t);e.imgData=this.setImgData(e);var i=new r(e,s,t);this.users[e.oID]=i,this.users[e.oID].onMove=_.bind(i),this.users[e.oID].changeState(e.cs)}},setUsers:function(e,t){for(var s=0;s<e.length;s++)this.setUser(e[s],t)},setImgData:function(e){var t=h.findDataWithTwoColumns(n,"type",e.tp,"level",e.lv).imgData;return f({},h.findData(l,"index",t))},setUsersSkills:function(e){for(var t=0;t<e.length;t++)0<e[t].fireTime&&this.userSkill(e[t].userID,e[t])},setMobs:function(e){if(e)for(var t=0;t<e.length;t++){var s=h.findData(a,"index",e[t].id),i=h.findData(l,"index",s.resourceIndex),n=new o(e[t],i,s);(this.monsters[n.objectID]=n).onMove=_.bind(n),n.setCenter(),n.setTargetDirection(),n.setSpeed(),n.changeState(n.currentState)}},changeStateMob:function(e){if(e.oID in this.monsters){var t=h.isRender(this.user,this.monsters[e.oID],e.tpos,2e3,1500);this.monsters[e.oID].direction=e.dir,this.monsters[e.oID].rotateSpeed=e.rsp,this.monsters[e.oID].maxSpeed=e.msp,this.monsters[e.oID].attackTime=e.at,this.monsters[e.oID].conditions=e.cdt,t?(this.monsters[e.oID].position=e.pos,this.monsters[e.oID].targetPosition=e.tpos,this.monsters[e.oID].setCenter(),this.monsters[e.oID].setTargetDirection(),this.monsters[e.oID].setSpeed(),this.monsters[e.oID].changeState(e.cs)):(this.monsters[e.oID].position=e.tpos,this.monsters[e.oID].setCenter(),this.monsters[e.oID].changeState(p.OBJECT_STATE_IDLE))}},updateMob:function(e){e.oID in this.monsters&&(this.monsters[e.oID].HP=e.HP,this.monsters[e.oID].position=e.pos,this.monsters[e.oID].direction=e.dir)},updateMobBuffImgData:function(e,t){e in this.monsters&&this.monsters[e].updateBuffImgData(t)},updateMobHitImgData:function(e,t){e in this.monsters&&this.monsters[e].updateSkillHitImgData(t)},deleteMob:function(e){e in this.monsters&&(this.monsters[e].stop(),delete this.monsters[e])},setObjs:function(e){for(var t=0;t<e.length;t++)e[t].oID.substr(0,3)===p.PREFIX_OBJECT_SKILL?this.objSkills.push(e[t]):e[t].oID.substr(0,3)===p.PREFIX_OBJECT_GOLD?this.objGolds.push(e[t]):e[t].oID.substr(0,3)===p.PREFIX_OBJECT_JEWEL?this.objJewels.push(e[t]):e[t].oID.substr(0,3)===p.PREFIX_OBJECT_BOX?this.objBoxs.push(e[t]):e[t].oID.substr(0,3)===p.PREFIX_OBJECT_BUFF&&(this.onNeedToGetObjBuffResource(e[t]),this.objBuffs.push(e[t]))},deleteOBJ:function(e){if(e.substr(0,3)===p.PREFIX_OBJECT_SKILL){for(var t=0;t<this.objSkills.length;t++)if(this.objSkills[t].oID===e)return void this.objSkills.splice(t,1)}else if(e.substr(0,3)===p.PREFIX_OBJECT_GOLD){for(t=0;t<this.objGolds.length;t++)if(this.objGolds[t].oID===e)return void this.objGolds.splice(t,1)}else if(e.substr(0,3)===p.PREFIX_OBJECT_JEWEL){for(t=0;t<this.objJewels.length;t++)if(this.objJewels[t].oID===e)return void this.objJewels.splice(t,1)}else if(e.substr(0,3)===p.PREFIX_OBJECT_BOX){for(t=0;t<this.objBoxs.length;t++)if(this.objBoxs[t].oID===e)return void this.objBoxs.splice(t,1)}else if(e.substr(0,3)===p.PREFIX_OBJECT_BUFF)for(t=0;t<this.objBuffs.length;t++)if(this.objBuffs[t].oID===e)return void this.objBuffs.splice(t,1)},iamRestart:function(e,t){this.users[this.user.objectID]=this.user;var s=h.makeCacheCanvas(e.lv,e.nm,t);this.user.updateTextCanvas(s),this.user.changeState(p.OBJECT_STATE_IDLE)},setUserInitState:function(e){e in this.users&&this.users[e].changeState(p.OBJECT_STATE_IDLE)},iamDead:function(){this.user.hitImgDataList=[],this.user.buffImgDataList=[],this.user.conditions=[],this.user.changeState(p.OBJECT_STATE_DEATH)},kickUser:function(e){e in this.users&&(this.users[e].stop(),delete this.users[e])},checkUserAtUsers:function(e){return e.objectID in this.users},moveUser:function(e){this.user.targetPosition=e,this.user.setCenter(),this.user.setTargetDirection(),this.user.setSpeed(),this.user.changeState(p.OBJECT_STATE_MOVE)},stopUser:function(){this.user.changeState(p.OBJECT_STATE_IDLE)},moveAndAttackUser:function(e,t,s,i){var n=!1;if(n=e===this.user.objectID||e in this.users&&h.isRender(this.user,this.users[e],t),e in this.users&&n){this.users[e].setRenderVar(n),this.users[e].targetPosition=t,this.users[e].setCenter(),i?(this.users[e].setTargetDirection(i),this.users[e].setSpeed(p.MOVE_BACK_WARD_SPEED_DECREASE_RATE)):(this.users[e].setTargetDirection(),this.users[e].setSpeed()),s.direction=this.users[e].targetDirection;var a=this.users[e].makeSkillInstance(s),r=this.user,o=this.users[e],l=this.onSkillFire;a.onFire=function(e){r===o&&l(s,e),o.skillCastEffectPlay=!1},this.users[e].changeState(p.OBJECT_STATE_MOVE_AND_ATTACK),this.users[e].setSkill(a),i&&(this.users[e].isMoveBackward=!0)}},useSkill:function(e,r){var t=!1;if(!this.user)return!0;if(t=e===this.user.objectID||e in this.users&&h.isRender(this.user,this.users[e],r.targetPosition),e in this.users&&t){this.users[e].setRenderVar(t);var o=this.users[e].makeSkillInstance(r),l=this.user,c=this.users[e],s=this.onSkillFire,d=this.onProjectileSkillFire;this.users[e].targetDirection=r.direction,r.type===p.SKILL_TYPE_INSTANT_RANGE?(o.onFire=function(e){l===c&&s(r,e),c.skillCastEffectPlay=!1},this.users[e].changeState(p.OBJECT_STATE_ATTACK)):r.type===p.SKILL_TYPE_INSTANT_PROJECTILE?(o.onFire=function(e){var t=c.makeProjectile(r.projectileIDs[0],o,r.direction);l===c&&d([t],e),c.skillCastEffectPlay=!1},this.users[e].changeState(p.OBJECT_STATE_ATTACK)):r.type===p.SKILL_TYPE_RANGE||r.type===p.SKILL_TYPE_SELF||r.type===p.SKILL_TYPE_SELF_EXPLOSION||r.type===p.SKILL_TYPE_TELEPORT?(o.onFire=function(e){l===c&&s(r,e),c.skillCastEffectPlay=!1},this.users[e].changeState(p.OBJECT_STATE_CAST)):r.type!==p.SKILL_TYPE_PROJECTILE&&r.type!==p.SKILL_TYPE_PROJECTILE_TICK&&r.type!==p.SKILL_TYPE_PROJECTILE_EXPLOSION&&r.type!==p.SKILL_TYPE_PROJECTILE_TICK_EXPLOSION||(o.onFire=function(e){for(var t=[],s=r.direction,i=0;i<r.projectileCount;i++){if(r.projectileCount%2==0){var n=i-(r.projectileCount/2-.5);s=r.direction+n*p.MULTI_PROJECTILE_DEGREE}else if(r.projectileCount%2==1){n=i-Math.floor(r.projectileCount/2),s=r.direction+n*p.MULTI_PROJECTILE_DEGREE}var a=c.makeProjectile(r.projectileIDs[i],o,s);t.push(a),l===c&&t.length===r.projectileCount&&d(t,e),c.skillCastEffectPlay=!1}},this.users[e].changeState(p.OBJECT_STATE_CAST)),this.users[e].setSkill(o)}},applySkill:function(e,t,s){if(e.type===p.SKILL_TYPE_TELEPORT){if(t in this.users){e.targetPosition.x<this.users[t].size.width/2?e.targetPosition.x=this.users[t].size.width/2:e.targetPosition.x>p.CANVAS_MAX_SIZE.width-this.users[t].size.width/2&&(e.targetPosition.x=p.CANVAS_MAX_SIZE.width-this.users[t].size.width/2),e.targetPosition.y<this.users[t].size.height/2?e.targetPosition.y=this.users[t].size.height/2:e.targetPosition.y>p.CANVAS_MAX_SIZE.height-this.users[t].size.height/2&&(e.targetPosition.y=p.CANVAS_MAX_SIZE.height-this.users[t].size.height/2);var i={x:e.targetPosition.x,y:e.targetPosition.y};this.moveUserToNewPos(t,i)}}else this.effects.push({property:e.property,position:{x:e.targetPosition.x-e.explosionRadius,y:e.targetPosition.y-e.explosionRadius},radius:e.explosionRadius,startTime:Date.now(),lifeTime:e.effectLastTime,scaleFactor:1,effectImgData:s||0,isCheckCollision:!1})},applyProjectile:function(e,t,s){this.projectiles.push({userID:e.userID,objectID:e.objectID,type:e.type,property:e.property,position:e.position,speed:e.speed,startTime:e.startTime,radius:e.radius,lifeTime:2*e.lifeTime,projectileImgData:t||0,effectRotateDegree:0,effectTimer:Date.now(),timer:Date.now(),effect:{property:e.property,position:e.position,radius:e.explosionRadius,startTime:0,lifeTime:e.effectLastTime,effectImgData:s||0,scaleFactor:1},move:function(){var e=(Date.now()-this.timer)/1e3;this.position.x+=this.speed.x*e,this.position.y+=this.speed.y*e,this.timer=Date.now()},isExpired:function(){return!(this.lifeTime>Date.now()-this.startTime)},explode:function(e){this.setEffect(e)},setEffect:function(e){this.effect.position=e,this.effect.startTime=Date.now()}})},applyCastSpeed:function(e,t){e in this.users&&(t.fireTime=Math.floor(t.fireTime*(100/this.users[e].castSpeed)),t.totalTime=Math.floor(t.totalTime*(100/this.users[e].castSpeed)))},deleteProjectile:function(e,t){for(var s=0;s<this.projectiles.length;s++)if(this.projectiles[s].objectID===e&&this.projectiles[s].userID===t){this.projectiles.splice(s,1);break}},explodeProjectile:function(e,t,s){for(var i=0;i<this.projectiles.length;i++)if(this.projectiles[i].objectID===e&&this.projectiles[i].userID===t){this.projectiles[i].explode(s),this.effects.push(this.projectiles[i].effect),this.projectiles.splice(i,1);break}},changeUserStat:function(e,t,s){if(e.oID in this.users){if(e.lv!==this.users[e.oID].level||t){if(e.lv!==this.users[e.oID].level){var i=h.makeCacheCanvas(e.lv,this.users[e.oID].name,s);this.users[e.oID].updateTextCanvas(i)}this.users[e.oID].level=e.lv,this.users[e.oID].imgData=this.setImgData(e),e.oID===this.user.objectID&&this.onUserLevelUp(e.lv)}if(this.users[e.oID].exp=e.ep,this.users[e.oID].maxHP=e.mHP,this.users[e.oID].maxMP=e.mMP,this.users[e.oID].HP=e.HP,this.users[e.oID].MP=e.MP,this.users[e.oID].castSpeed=e.csp,this.users[e.oID].maxSpeed=e.msp,this.users[e.oID].rotateSpeed=e.rsp,this.users[e.oID].conditions=e.cdt,this.users[e.oID].setSpeed(),this.users[e.oID].currentState===p.OBJECT_STATE_CAST&&this.users[e.oID].currentSkill){var n=this.users[e.oID].currentSkill.consumeMP;(this.users[e.oID].conditions[p.USER_CONDITION_FREEZE]||this.users[e.oID].conditions[p.USER_CONDITION_SILENCE]||this.users[e.oID].conditions[p.USER_CONDITION_BLUR]||this.users[e.oID].MP<n)&&this.users[e.oID].changeState(p.OBJECT_STATE_IDLE)}else this.users[e.oID].currentState===p.OBJECT_STATE_ATTACK&&(this.users[e.oID].conditions[p.USER_CONDITION_FREEZE]||this.users[e.oID].conditions[p.USER_CONDITION_SILENCE]||this.users[e.oID].conditions[p.USER_CONDITION_BLUR])&&this.users[e.oID].changeState(p.OBJECT_STATE_IDLE)}},moveUserToNewPos:function(e,t){e in this.users&&(this.users[e].changePosition(t),this.users[e].changeState(p.OBJECT_STATE_IDLE),e===this.user.objectID&&this.onMainUserMove(this.user))},updateSkillPossessions:function(e,t){e in this.users&&this.users[e].updateSkillPossessions(t)},setUserData:function(e){e.oID in this.users&&(this.users[e.oID].name=e.nm,this.users[e.oID].position=e.pos,this.users[e.oID].targetPosition=e.tpos,this.users[e.oID].direction=e.dir,this.users[e.oID].maxSpeed=e.msp,this.users[e.oID].rotateSpeed=e.rsp,this.users[e.oID].setCenter(),this.users[e.oID].setTargetDirection(),this.users[e.oID].setSpeed(),this.users[e.oID].changeState(e.cs))},updateUserData:function(e){var t=!1;if(!this.user)return!0;t=e.oID===this.user.oID||e.oID in this.users&&h.isRender(this.user,this.users[e.oID],e.tpos),e.oID in this.users&&this.users[e.oID].currentState!==p.OBJECT_STATE_DEATH&&(this.users[e.oID].setRenderVar(t),this.users[e.oID].position=e.pos,this.users[e.oID].targetPosition=e.tpos,this.users[e.oID].direction=e.dir,this.users[e.oID].maxSpeed=e.msp,this.users[e.oID].rotateSpeed=e.rsp,this.users[e.oID].setCenter(),this.users[e.oID].setTargetDirection(),this.users[e.oID].setSpeed(),t?this.users[e.oID].changeState(e.cs):this.users[e.oID].changeState(p.OBJECT_STATE_IDLE))},syncUserData:function(e){var t=!1;t=!this.user||(e.oID===this.user.oID||e.oID in this.users&&h.isRender(this.user,this.users[e.oID],e.tpos)),e.oID in this.users&&(this.users[e.oID].position=e.pos,t&&(this.users[e.oID].currentState!==p.OBJECT_STATE_ATTACK&&this.users[e.oID].currentState!==p.OBJECT_STATE_CAST&&(this.users[e.oID].targetPosition=e.tpos,this.users[e.oID].direction=e.dir,this.users[e.oID].maxSpeed=e.msp,this.users[e.oID].rotateSpeed=e.rsp,this.users[e.oID].setCenter(),this.users[e.oID].setTargetDirection(),this.users[e.oID].setSpeed()),this.users[e.oID].currentState!==e.cs&&this.users[e.oID].currentState!==p.OBJECT_STATE_CAST&&this.users[e.oID].currentState!==p.OBJECT_STATE_ATTACK&&this.users[e.oID].currentState!==p.OBJECT_STATE_MOVE_AND_ATTACK&&this.users[e.oID].changeState(e.cs)))},updateUserBuffImgData:function(e,t){e in this.users&&this.users[e].updateBuffImgData(t)},updateSkillHitImgData:function(e,t){e in this.users&&this.users[e].updateSkillHitImgData(t)},synchronizeUser:function(e){for(var t in this.users)this.users[t].objectID===e&&(this.user=this.users[t],this.user.onMainUserMove=T.bind(this,this.user));this.user},getUserCurrentState:function(e){if(e in this.users)return this.users[e].getCurrentState()},getUserCurrentSkillIndex:function(e){if(e in this.users)return this.users[e].getCurrentSkillIndex()},getUserPosition:function(e){if(e in this.users)return{x:Math.floor(this.users[e].position.x),y:Math.floor(this.users[e].position.y)}},getUserExp:function(e){if(e in this.users)return this.users[e].exp},getUserHP:function(e){if(e in this.users)return this.users[e].HP},getUserMP:function(e){if(e in this.users)return this.users[e].MP},processUserData:function(){return{objectID:this.user.objectID,currentState:this.user.currentState,position:{x:Math.floor(this.user.position.x),y:Math.floor(this.user.position.y)},direction:Math.floor(this.user.direction),time:this.user.timer}},processSkillData:function(e){return{sID:e.index,sTPos:{x:Math.floor(e.targetPosition.x),y:Math.floor(e.targetPosition.y)}}},processProjectileData:function(e){for(var t=[],s=0;s<e.length;s++)t.push({oID:e[s].objectID,sID:e[s].index,pos:{x:Math.floor(e[s].position.x),y:Math.floor(e[s].position.y)},sp:e[s].speed});return t},checkCollisionWithObstacles:function(e,t){return h.checkCircleCollision(d,e.x-t.size.width/2,e.y-t.size.height/2,t.size.width/2,t.objectID)},reCalcSkillTargetPosition:function(e,t,s){var i=[s[0]],n=h.calcCompelPos({x:e.x-t.size.width/2,y:e.y-t.size.height/2,width:t.size.width,height:t.size.height,id:t.objectID},i);return{x:e.x+n.x,y:e.y+n.y}},setUserChatMsg:function(e,t){e in this.users&&this.users[e].setChatMsg(t)},resetUsers:function(e,t){this.users=[],this.setUsers(e,t)},resetObjs:function(e){this.objSkills=[],this.objGolds=[],this.objJewels=[],this.objBoxs=[],this.objBuffs=[],this.setObjs(e)},resetChests:function(e){this.chests=[],this.setChests(e)},resetMobs:function(e){this.monsters=[],this.setMobs(e)}};var _=function(){var e=h.checkCircleCollision(d,this.entityTreeEle.x,this.entityTreeEle.y,this.entityTreeEle.width/2,this.entityTreeEle.id);if(0<e.length)var t=h.calcCompelPos(this.entityTreeEle,e);return t},T=function(e){this.onMainUserMove(e)};t.exports=i},{"../public/gameConfig.json":10,"../public/objectAssign.js":12,"../public/quadtree.js":13,"../public/util.js":15,"./CMonster.js":2,"./CObstacle.js":3,"./CUser.js":6}],2:[function(e,t,s){var i=e("../public/util.js"),n=e("../public/gameConfig.json"),a=function(e,t,s){this.objectID=e.oID,this.currentState=e.cs,this.position=e.pos,this.targetPosition=e.tpos,this.maxSpeed=e.msp,this.direction=e.dir,this.rotateSpeed=e.rsp,this.attackTime=e.at,this.size={width:s.size,height:s.size},this.center={x:this.position.x+this.size.width/2,y:this.position.y+this.size.height/2},this.speed={x:0,y:0},this.maxHP=e.mHP,this.HP=e.HP,this.conditions=e.cdt,this.isAttack=!1,this.attackDegree=0,this.isRender=!1,this.imgData=t,this.imgRatio=s.imgRatio/100||1,this.hitImgDataList=[],this.buffImgDataList=[],this.effectTimer=Date.now(),this.effectIndex=0,this.effectRotateDegree=0,this.entityTreeEle={x:this.position.x,y:this.position.y,width:this.size.width,height:this.size.height,id:this.objectID},this.timer=Date.now(),this.updateInterval=!1,this.updateFunction=new Function,this.onMove=new Function};a.prototype={changeState:function(e){switch(this.currentState=e,this.stop(),this.currentState){case n.OBJECT_STATE_IDLE:this.updateFunction=this.idle.bind(this);break;case n.OBJECT_STATE_MOVE:this.updateFunction=this.rotate.bind(this);break;case n.OBJECT_STATE_ATTACK:this.updateFunction=this.attack.bind(this);break;case n.OBJECT_STATE_DEATH:this.updateFunction=this.idle.bind(this)}this.update()},update:function(){this.updateInterval=setInterval(this.updateFunction,1e3/30)},setCenter:function(){this.center.x=this.position.x+this.size.width/2,this.center.y=this.position.y+this.size.height/2},idle:function(){this.doEveryTick()},rotate:function(){var e=(Date.now()-this.timer)/1e3;i.rotate.call(this,e),this.doEveryTick()},move:function(e,t){t?i.move.call(this,e,t):i.move.call(this,e)},attack:function(){var e=(Date.now()-this.timer)/this.attackTime;this.attackDegree+=25*e,this.doEveryTick()},setTargetDirection:function(){i.setTargetDirection.call(this)},setSpeed:function(){i.setSpeed.call(this)},stop:function(){this.attackDegree=0,this.updateInterval&&(clearInterval(this.updateInterval),this.updateInterval=!1)},doEveryTick:function(){this.timer=Date.now();for(var e=this.hitImgDataList.length-1;0<=e;e--)Date.now()-this.hitImgDataList[e].startTime>=this.hitImgDataList[e].resourceLifeTime&&this.hitImgDataList.splice(e,1);this.isRender&&Date.now()-this.effectTimer>=n.USER_ATTACH_EFFECT_CHANGE_TIME&&(this.effectTimer=Date.now(),this.effectRotateDegree+=10,100<this.effectIndex?this.effectIndex=0:this.effectIndex+=1,360<=this.effectRotateDegree&&(this.effectRotateDegree-=360))},updateBuffImgData:function(e){this.buffImgDataList=[];for(var t=0;t<e.length;t++){for(var s=0;s<e[t].resourceLength;s++)e[t]["resourceIndex"+(s+1)].width*=this.imgRatio,e[t]["resourceIndex"+(s+1)].height*=this.imgRatio;this.buffImgDataList.push(e[t])}},updateSkillHitImgData:function(e){e.startTime=Date.now();for(var t=0;t<e.resourceLength;t++)e["resourceIndex"+(t+1)].width*=this.imgRatio,e["resourceIndex"+(t+1)].height*=this.imgRatio;this.hitImgDataList.push(e)},setEntityEle:function(){this.entityTreeEle={x:this.position.x,y:this.position.y,width:this.size.width,height:this.size.height,id:this.objectID}}},t.exports=a},{"../public/gameConfig.json":10,"../public/util.js":15}],3:[function(e,t,s){function i(e,t,s,i,n){this.objectID=i,this.imgData=n,this.position={x:e,y:t},this.size={width:2*s,height:2*s},this.center={x:this.position.x+this.size.width/2,y:this.position.y+this.size.height/2},this.staticEle={x:this.position.x,y:this.position.y,width:this.size.width,height:this.size.height,id:this.objectID,isCollide:!1}}i.prototype={setPosition:function(e,t){this.position.x=e,this.position.y=t,this.setCenter()},setSize:function(e,t){this.size.width=e,this.size.height=t},setCenter:function(){0==this.size.width||this.size.height,this.center.x=this.position.x+this.size.width/2,this.center.y=this.position.y+this.size.height/2},setTreeImgEle:function(e){this.treeImgEle={x:this.center.x-e,y:this.center.y-e,width:2*e,height:2*e,id:this.objectID,isCollide:!1}}},t.exports=i},{}],4:[function(e,t,s){var n=e("../public/util.js"),a=e("../public/gameConfig.json");function i(e,t){this.index=e.index,this.type=e.type,this.property=e.property,this.consumeMP=e.consumeMP,this.totalTime=e.totalTime,this.fireTime=e.fireTime,this.range=e.range,this.explosionRadius=e.explosionRadius,this.radius=e.radius,this.maxSpeed=e.maxSpeed,this.lifeTime=e.lifeTime,this.direction=e.direction,this.targetPosition=e.targetPosition,this.userAniStartTime=t,this.effectLastTime=e.effectLastTime,this.repeatCount=e.repeatCount,this.repeatDelay=e.repeatDelay,this.effect={position:this.targetPosition,radius:this.explosionRadius,startTime:0,lifeTime:this.effectLastTime},this.userAniTimeout=!1,this.fireTimeout=!1,this.totalTimeout=!1,this.onUserAniStart=new Function,this.onFire=new Function,this.onTimeOver=new Function}i.prototype={executeSkill:function(){this.userAniTimeout=setTimeout(function(){this.onUserAniStart()}.bind(this),this.userAniStartTime);var e=this.fireTime-a.SKILL_INFORM_TIME;e<0&&(e=0),this.userAniStartTime>e&&(e=this.userAniStartTime),this.syncFireTime=Date.now()+this.fireTime,this.fireTimeout=setTimeout(function(){if(this.onFire(this.syncFireTime),this.repeatCount)for(var e=0;e<this.repeatCount;e++)!function(e,t,s,i){var n=(e+1)*t,a=s+n;setTimeout(function(){i(a)},n)}(e,this.repeatDelay,this.syncFireTime,this.onFire)}.bind(this),e),this.totalTimeout=setTimeout(function(){this.onTimeOver()}.bind(this),this.totalTime)},startEffectTimer:function(){this.effect.startTime=Date.now()},destroy:function(){this.userAniTimeout&&clearTimeout(this.userAniTimeout),this.fireTimeout&&clearTimeout(this.fireTimeout),this.totalTimeout&&clearTimeout(this.totalTimeout)},makeProjectile:function(e,t,s){var i=n.calcForePosition(e,this.radius,s,a.PROJECTILE_FIRE_DISTANCE);return new r(this,i,t,s)}};var r=function(e,t,s,i){this.objectID=s,this.index=e.index,this.position={x:t.x,y:t.y},this.direction=i,this.speed={x:e.maxSpeed*Math.cos(this.direction*Math.PI/180),y:e.maxSpeed*Math.sin(this.direction*Math.PI/180)},this.radius=e.radius,this.lifeTime=e.lifeTime,this.explosionRadius=e.explosionRadius};t.exports=i},{"../public/gameConfig.json":10,"../public/util.js":15}],5:[function(e,t,s){var L,h,y,o,D,i,r,l,c,d,u,v=e("../public/util.js"),A=e("../public/gameConfig.json"),R=e("../public/objectAssign.js"),n=e("../public/serverList.json"),P=(e("../public/youtuberList.json"),1),p="PYRO",f="<span class='red'>PYRO</span> is a powerful mage.<br><span class='red'>PYRO</span> is more powerful when PYRO`s HP is lower.<br><span class='memo'>Check Passive Spell</span>",m="FROSTER",g="<span class='blue'>FROSTER</span> is a magical mage.<br><span class='blue'>FROSTER</span>`s ice spell may freeze enemy.<br><span class='memo'>Check Passive Spell</span>",E="MYSTER",I="<span class='purple'>MYSTER</span> is a unpredictable mage.<br><span class='purple'>MYSTER</span> will be strengthen whenever use arcane spell.<br><span class='memo'>Check Passive Spell</span>",S=0,_=null,T=0,C=null,k=new Array(4),O=new Array(4),b=[],M=[],x=[],w=0;x[A.USER_CONDITION_FREEZE]=!1,x[A.USER_CONDITION_SILENCE]=!1,x[A.USER_CONDITION_BLUR]=!1;var F,N,B,U,H,j,K,X,G,Y,J,z,V,W,q,Z,Q,$,ee,te,se,ie,ne,ae,re,oe,le,ce,de,ue,he,pe,fe,me,ge,Ee,Ie,Se,_e,Te,Ce,be,Le,ye,De,ve,Ae,Re,Pe,ke,Oe,Me,xe,we,Fe,Ne,Be,Ue,He,je,Ke,a,Xe,Ge,Ye,Je,ze,Ve,We,qe,Ze,Qe,$e,et,tt,st,it,nt,at,rt,ot,lt,ct,dt,ut,ht,pt,ft,mt,gt,Et,It,St,_t,Tt,Ct,bt,Lt,yt,Dt,vt,At,Rt,Pt,kt,Ot,Mt,xt,wt,Ft,Nt,Bt,Ut,Ht,jt,Kt,Xt=0,Gt=0,Yt=0,Jt=0,zt=1,Vt=1,Wt=!1,qt=!0,Zt=!0,Qt=!0,$t=!0,es=!0,ts=[],ss=[],is=!1,ns=Date.now(),as=Date.now(),rs=!1,os=!1,ls=69,cs=32,ds=65,us=49,hs=50,ps=51,fs=52,ms=83,gs=71,Es=36,Is=13,Ss=27,_s=null,Ts=null,Cs=null,bs=null,Ls=!0,ys=!0;function Ds(e,t,s,i){L=e,h=t,y=s,o=i,this.serverResponseTimeout=!1,this.onLoadCompleteServerList=new Function,this.onStartBtnClick=new Function,this.onSocialBtnClick=new Function,this.serverConditionOn=new Function,this.serverConditionOff=new Function,this.updateKillCount=new Function,this.onSetRankers=new Function,this.onPopUpSkillChangeClick=new Function,this.onSelectCharIcon=new Function,this.onSelectSkillCancelBtnClick=new Function,this.onSkillIconClick=new Function,this.onSkillUpgrade=new Function,this.onExchangeSkill=new Function,this.onExchangePassive=new Function,this.onEquipPassive=new Function,this.onUnequipPassive=new Function}function vs(e,t){e.classList.contains("disable")?(e.classList.add("enable"),e.classList.remove("disable"),t?(e.classList.add("popToCenter"),Ge.classList.add("enable"),Ge.classList.remove("disable")):e.classList.remove("popToCenter")):e.classList.contains("enable")&&(e.classList.add("disable"),e.classList.remove("enable"),e.classList.remove("popToCenter"),Ge.classList.add("disable"),Ge.classList.remove("enable"))}function As(e,t,s){this.onPopUpSkillChangeClick(),Os();var i=null,n=75/72,a=null;t===A.SKILL_CHANGE_PANEL_EQUIP&&(e===at?i=-1:e===ot?i=0:e===lt?i=1:e===ct?i=2:e===dt?i=3:e===ut&&(i=-1));var r=parseInt(e.getAttribute("skillIndex"));if(t===A.SKILL_CHANGE_PANEL_CONTAINER){var o=M.indexOf(r);-1!==o&&M.splice(o,1),e.getElementsByTagName("img")[0].classList.add("disable");var l=K.parentNode.getElementsByTagName("img");l[0].classList.add("disable");var c=Lt.getElementsByTagName("img");c[0].classList.add("disable"),M.length&&(l[0].classList.remove("disable"),c[0].classList.remove("disable"))}if(_s){if(_s!==t){if(_s===A.SKILL_CHANGE_PANEL_CONTAINER)if(-1===i)this.makeFlashMessage("Can not change character spell!!!");else{for(var d=0,u=0;u<Xe.childNodes.length;u++)if(Xe.childNodes[u]===Ts){d=u;break}if(Xe.removeChild(Ts),r){var h=R({},v.findData(L,"index",r)),p=document.createElement("div");(T=document.createElement("div")).classList.add("popUpskillImgContainer");var f=document.createElement("img");p.setAttribute("skillIndex",r),(C=document.createElement("img")).classList.add("disable"),p.appendChild(C),p.classList.add("popUpSkillContainerItem"),f.src=D;var m=R({},v.findData(y,"index",h.skillIcon));f.style.clip=v.makeCssClipStyle(m,n),v.setImgCssStyle(f,m,n),T.appendChild(f),p.appendChild(T),Xe.insertBefore(p,Xe.childNodes[d]),p.onclick=As.bind(this,p,A.SKILL_CHANGE_PANEL_CONTAINER,s)}for(;e.firstChild;)e.removeChild(e.firstChild);a=Xs(i),k.splice(i,1),O.splice(i,1),k.splice(i,0,bs);var g=R({},v.findData(L,"index",bs));O.splice(i,0,g),(T=document.createElement("div")).classList.add("popUpskillImgContainer"),(f=document.createElement("img")).src=D;m=R({},v.findData(y,"index",g.skillIcon));f.style.clip=v.makeCssClipStyle(m,n),v.setImgCssStyle(f,m,n),e.setAttribute("skillIndex",g.index),T.appendChild(f),e.appendChild(T),this.applySkillCooldown(g.index,i)}else if(-1===Cs)this.makeFlashMessage("Can not change character spell!!!");else{for(d=0,u=0;u<Xe.childNodes.length;u++)if(Xe.childNodes[u]===e){d=u;break}if(Xe.removeChild(e),bs){h=R({},v.findData(L,"index",bs)),p=document.createElement("div");(T=document.createElement("div")).classList.add("popUpskillImgContainer");f=document.createElement("img");(C=document.createElement("img")).classList.add("disable"),p.appendChild(C),p.setAttribute("skillIndex",bs),p.classList.add("popUpSkillContainerItem"),f.src=D;m=R({},v.findData(y,"index",h.skillIcon));f.style.clip=v.makeCssClipStyle(m,n),v.setImgCssStyle(f,m,n),T.appendChild(f),p.appendChild(T),Xe.insertBefore(p,Xe.childNodes[d]),p.onclick=As.bind(this,p,A.SKILL_CHANGE_PANEL_CONTAINER,s)}for(;Ts.firstChild;)Ts.removeChild(Ts.firstChild);a=Xs(Cs),k.splice(Cs,1),O.splice(Cs,1),k.splice(Cs,0,r);g=R({},v.findData(L,"index",r));O.splice(Cs,0,g),(T=document.createElement("div")).classList.add("popUpskillImgContainer"),(f=document.createElement("img")).src=D;m=R({},v.findData(y,"index",g.skillIcon));f.style.clip=v.makeCssClipStyle(m,n),v.setImgCssStyle(f,m,n),Ts.setAttribute("skillIndex",g.index),T.appendChild(f),Ts.appendChild(T),this.applySkillCooldown(g.index,Cs)}if(this.onExchangeSkill(P),!s){var E=Gs(a);if(g&&h)if(g.type===A.SKILL_TYPE_PASSIVE&&h.type===A.SKILL_TYPE_PASSIVE){var I=R({},v.findData(L,"index",h.index)).buffToSelf,S=R({},v.findData(L,"index",g.index)).buffToSelf;E?(Ys(I)?zs(I):this.onUnequipPassive(I),Js(S),setTimeout(Vs.bind(this.onEquipPassive,S),E)):this.onExchangePassive(I,S)}else if(g.type===A.SKILL_TYPE_PASSIVE){var _=R({},v.findData(L,"index",g.index)).buffToSelf;E?(Js(_),setTimeout(Vs.bind(this.onEquipPassive,_),E)):this.onEquipPassive(_)}else h.type===A.SKILL_TYPE_PASSIVE&&(_=R({},v.findData(L,"index",h.index)).buffToSelf,E&&Ys(_)?zs(_):this.onUnequipPassive(_));else g?g.type===A.SKILL_TYPE_PASSIVE&&(_=R({},v.findData(L,"index",g.index)).buffToSelf,E?(Js(_),setTimeout(Vs.bind(this.onEquipPassive,_),E)):this.onEquipPassive(_)):h&&h.type===A.SKILL_TYPE_PASSIVE&&(_=R({},v.findData(L,"index",h.index)).buffToSelf,E&&Ys(_)?zs(_):this.onUnequipPassive(_))}this.setHUDSkills(),js(),Cs=Ts=_s=bs=null}else if(r===bs){if(t===A.SKILL_CHANGE_PANEL_EQUIP&&-1!==i){var T;g=R({},v.findData(L,"index",bs)),p=document.createElement("div");(T=document.createElement("div")).classList.add("popUpskillImgContainer");var C;f=document.createElement("img");(C=document.createElement("img")).classList.add("disable"),p.appendChild(C),p.setAttribute("skillIndex",bs),p.classList.add("popUpSkillContainerItem"),f.src=D;m=R({},v.findData(y,"index",g.skillIcon));for(f.style.clip=v.makeCssClipStyle(m,n),v.setImgCssStyle(f,m,n),T.appendChild(f),p.appendChild(T),Xe.appendChild(p),p.onclick=As.bind(this,p,A.SKILL_CHANGE_PANEL_CONTAINER,s);Ts.firstChild;)Ts.removeChild(Ts.firstChild),Ts.setAttribute("skillIndex","");if(k[Cs]&&(k.splice(Cs,1),O.splice(Cs,1)),k.splice(Cs,0,void 0),O.splice(Cs,0,void 0),this.updateUnEquipSkillSlotCooldown(Cs),g.type===A.SKILL_TYPE_PASSIVE){_=R({},v.findData(L,"index",g.index)).buffToSelf;(E=Gs(a=Xs(Cs)))&&Ys(_)?zs(_):this.onUnequipPassive(_)}}this.setHUDSkills(),js(),Cs=Ts=_s=bs=null}else if(Ts===e)ks();else if(bs=r||null,_s=t,Cs=i,(Ts=e).classList.add("selected"),t===A.SKILL_CHANGE_PANEL_CONTAINER)ot.classList.add("equipable"),lt.classList.add("equipable"),ct.classList.add("equipable"),dt.classList.add("equipable");else if(t===A.SKILL_CHANGE_PANEL_EQUIP&&-1!==i)for(u=0;u<Xe.children.length;u++)Xe.children[u].classList.add("equipable")}else if(bs=r||null,_s=t,Cs=i,(Ts=e).classList.add("selected"),t===A.SKILL_CHANGE_PANEL_CONTAINER)ot.classList.add("equipable"),lt.classList.add("equipable"),ct.classList.add("equipable"),dt.classList.add("equipable");else if(t===A.SKILL_CHANGE_PANEL_EQUIP)switch(i){case-1:break;default:for(u=0;u<Xe.children.length;u++)Xe.children[u].classList.add("equipable")}if(this.checkPopUpSkillChange()?(this.setPopUpSkillChange(s),Cs=Ts=_s=bs=null,Os(),this.updateSelectedPanel()):(this.updateSelectedPanel(bs),t===A.SKILL_CHANGE_PANEL_EQUIP&&!r&&e.classList.contains("selected")&&et.classList.remove("disable")),this.checkSkillsConditions(),!rs){var b=0;for(u=0;u<k.length;u++)k[u]&&b++;2<=b?rs=!0:k[0]!==A.SKILL_INDEX_PYRO_GIVEN&&k[0]!==A.SKILL_INDEX_FROST_GIVEN&&k[0]!==A.SKILL_INDEX_ARCANE_GIVEN&&(rs=!0)}}function Rs(e){if(e===d)var t=A.START_BUTTON;else e===u&&(t=A.RESTART_BUTTON);t===A.RESTART_BUTTON&&u.getElementsByTagName("span")[0].classList.contains("disable")||(ys||(this.disableRestartButton(),Kt.onclick()),this.checkVideoAd(P,t))}function Ps(e,t,s){switch(this.classList.remove("cooldownMaskAni"),this.style.opacity=0,e){case A.SKILL_BASIC_INDEX:qt=!0;break;case A.SKILL_EQUIP1_INDEX:Zt=!0;break;case A.SKILL_EQUIP2_INDEX:Qt=!0;break;case A.SKILL_EQUIP3_INDEX:$t=!0;break;case A.SKILL_EQUIP4_INDEX:es=!0}for(var i=0;i<ts.length;i++)if(ts[i].slot===e){ts.splice(i,1);break}t()}function ks(){for(;Ve.firstChild;)Ve.removeChild(Ve.firstChild);for(;We.firstChild;)We.removeChild(We.firstChild);Ze.innerHTML="",Qe.innerHTML="",bs=null,$e.onclick=new Function,Cs=Ts=_s=null,$e.getElementsByTagName("span")[0].innerHTML=" ",skillUpgradeBlockMask.classList.remove("disable"),et.classList.add("disable"),qe.classList.remove("skillUpgradeEffectAni"),Os()}function Os(){at.classList.remove("selected"),ut.classList.remove("selected"),ot.classList.remove("selected"),lt.classList.remove("selected"),ct.classList.remove("selected"),dt.classList.remove("selected"),ot.classList.remove("equipable"),lt.classList.remove("equipable"),ct.classList.remove("equipable"),dt.classList.remove("equipable");for(var e=0;e<Xe.children.length;e++)Xe.children[e].classList.remove("equipable"),Xe.children[e].classList.remove("selected")}function Ms(e){switch(e){case A.SKILL_BASIC_INDEX:if(_)var t=_;break;case A.SKILL_EQUIP1_INDEX:O[0]&&(t=O[0]);break;case A.SKILL_EQUIP2_INDEX:O[1]&&(t=O[1]);break;case A.SKILL_EQUIP3_INDEX:O[2]&&(t=O[2]);break;case A.SKILL_EQUIP4_INDEX:O[3]&&(t=O[3]);break;case A.SKILL_PASSIVE_INDEX:C&&(t=C)}if(t){var s=Ks(t).replace(/&nbsp;/g,"<br>"),i=document.createElement("div");i.innerHTML=s,i.classList.add("bottomTooltip"),this.parentNode.parentNode.appendChild(i)}}function xs(){for(var e=this.parentNode.parentNode,t=e.getElementsByClassName("bottomTooltip"),s=0;t.length;s++)e.removeChild(t[s])}function ws(){var e=parseInt(this.getAttribute("skillIndex"));if(e&&v.isNumeric(e)){var t=Ks(R({},v.findData(L,"index",e))).replace(/&nbsp;/g,"<br>"),s=document.createElement("div");s.innerHTML=t,s.classList.add("bottomTooltip"),this.appendChild(s)}}function Fs(e,t){var s=document.createElement("div"),i="";switch(e){case A.STAT_POWER_INDEX:i+="Damage Rate <span class='green'>+"+Math.floor(t*A.STAT_CALC_FACTOR_POWER_TO_DAMAGE_RATE*100)/100+"%</span><br>",i+="Max HP <span class='green'>+"+Math.floor(t*A.STAT_CALC_FACTOR_POWER_TO_HP*100)/100+"</span><br>",i+="HP Regen <span class='green'>+"+Math.floor(t*A.STAT_CALC_FACTOR_POWER_TO_HP_REGEN*100)/100+"</span><br>";break;case A.STAT_MAGIC_INDEX:i+="All Resistance <span class='green'>+"+Math.floor(t*A.STAT_CALC_FACTOR_MAGIC_TO_RESISTANCE*100)/100+"%</span><br>",i+="Max MP <span class='green'>+"+Math.floor(t*A.STAT_CALC_FACTOR_MAGIC_TO_MP*100)/100+"</span><br>",i+="MP Regen <span class='green'>+"+Math.floor(t*A.STAT_CALC_FACTOR_MAGIC_TO_MP_REGEN*100)/100+"</span><br>";break;case A.STAT_SPEED_INDEX:i+="Casting Speed <span class='green'>+"+Math.floor(t*A.STAT_CALC_FACTOR_SPEED_TO_CAST_SPEED*100)/100+"%</span><br>",i+="Cooldown Reduce <span class='green'>+"+Math.floor(t*A.STAT_CALC_FACTOR_SPEED_TO_COOLDOWN_REDUCE_RATE*100)/100+"%</span><br>"}s.innerHTML=i,s.classList.add("bottomTooltip"),this.appendChild(s)}function Ns(e,t){var s=document.createElement("div"),i="";e===A.STAT_OFFENCE_INDEX?(i+="<p><strong>All Damage <span class='green'>+"+Math.floor(10*(t.dR-100))/10+"%</span></strong></p>",i+="<p>Fire Damage <span class='green'>+"+Math.floor(10*(t.fiDR-100))/10+"%</span></p>",i+="<p>Frost Damage <span class='green'>+"+Math.floor(10*(t.frDR-100))/10+"%</span></p>",i+="<p>Arcane Damage <span class='green'>+"+Math.floor(10*(t.acDR-100))/10+"%</span></p>"):e===A.STAT_DEFENCE_INDEX&&(i+="<p><strong>All Resistance <span class='green'>+"+Math.floor(10*t.rA)/10+"%</span></strong></p>",i+="<p>Fire Resistance <span class='green'>+"+Math.floor(10*t.rFi)/10+"%</span></p>",i+="<p>Frost Resistance <span class='green'>+"+Math.floor(10*t.rFr)/10+"%</span></p>",i+="<p>Arcane Resistance <span class='green'>+"+Math.floor(10*t.rAc)/10+"%</span></p>"),s.innerHTML=i,s.classList.add("bottomTooltip"),this.appendChild(s)}function Bs(){var e=document.createElement("div"),t=parseInt(this.getAttribute("buffGroupIndex")),s=R({},v.findData(h,"index",t)),i="<h4 class='yellow'>"+s.clientName+"</h4><hr>"+s.clientDesc.replace(/&nbsp;/g,"<br>");e.innerHTML=i,e.classList.add("bottomTooltip"),this.appendChild(e)}function Us(){for(var e=v.getElementsByClassName(this,"bottomTooltip"),t=0;t<e.length;t++)this.removeChild(e[t])}function Hs(e){this.onSkillIconClick(e)}function js(){var e=40/72,t=R({},v.findData(y,"index",_.skillIcon));It.getElementsByTagName("img")[0].style.clip=v.makeCssClipStyle(t,e),It.setAttribute("skillIndex",_.index),v.setImgCssStyle(It.getElementsByTagName("img")[0],t,e),t=R({},v.findData(y,"index",C.skillIcon)),St.getElementsByTagName("img")[0].style.clip=v.makeCssClipStyle(t,e),St.setAttribute("skillIndex",C.index),v.setImgCssStyle(St.getElementsByTagName("img")[0],t,e),e=50/72,O[0]?(t=R({},v.findData(y,"index",O[0].skillIcon)),_t.getElementsByTagName("img")[0].style.clip=v.makeCssClipStyle(t,e),_t.setAttribute("skillIndex",O[0].index),v.setImgCssStyle(_t.getElementsByTagName("img")[0],t,e)):(_t.getElementsByTagName("img")[0].style.clip=v.makeCssClipStyle(i,e),_t.setAttribute("skillIndex",0),v.setImgCssStyle(_t.getElementsByTagName("img")[0],i,e)),O[1]?(t=R({},v.findData(y,"index",O[1].skillIcon)),Tt.getElementsByTagName("img")[0].style.clip=v.makeCssClipStyle(t,e),Tt.setAttribute("skillIndex",O[1].index),v.setImgCssStyle(Tt.getElementsByTagName("img")[0],t,e)):(Tt.getElementsByTagName("img")[0].style.clip=v.makeCssClipStyle(i,e),Tt.setAttribute("skillIndex",0),v.setImgCssStyle(Tt.getElementsByTagName("img")[0],i,e)),O[2]?(t=R({},v.findData(y,"index",O[2].skillIcon)),Ct.getElementsByTagName("img")[0].style.clip=v.makeCssClipStyle(t,e),Ct.setAttribute("skillIndex",O[2].index),v.setImgCssStyle(Ct.getElementsByTagName("img")[0],t,e)):(Ct.getElementsByTagName("img")[0].style.clip=v.makeCssClipStyle(i,e),Ct.setAttribute("skillIndex",0),v.setImgCssStyle(Ct.getElementsByTagName("img")[0],i,e)),O[3]?(t=R({},v.findData(y,"index",O[3].skillIcon)),bt.getElementsByTagName("img")[0].style.clip=v.makeCssClipStyle(t,e),bt.setAttribute("skillIndex",O[3].index),v.setImgCssStyle(bt.getElementsByTagName("img")[0],t,e)):(bt.getElementsByTagName("img")[0].style.clip=v.makeCssClipStyle(i,e),bt.setAttribute("skillIndex",0),v.setImgCssStyle(bt.getElementsByTagName("img")[0],i,e))}function Ks(e,t){var s="",i="white";switch(e.property){case A.SKILL_PROPERTY_FIRE:i="red";break;case A.SKILL_PROPERTY_FROST:i="blue";break;case A.SKILL_PROPERTY_ARCANE:i="purple"}if(s+="<h4 class='"+i+"'><span class='yellow'>Lv "+e.level+"</span> "+e.clientName+"</h4><hr>",s+="<div class='tierLabel'><span class='green'>Tier : </span>"+e.tier+"</span></div>",e.type!==A.SKILL_TYPE_PASSIVE){s+="<div class='titleLabel'><span class='green'>Active</span></div>";var n=e.fireDamage+e.frostDamage+e.arcaneDamage;if(t)var a=t.fireDamage+t.frostDamage+t.arcaneDamage;switch(e.type){case A.SKILL_TYPE_INSTANT_RANGE:s+=t&&n<a?"<div><span class='yellow'>Damage : </span><span class='"+i+"'>"+n+"</span><img src='/images/upIcon.png' class='disable' /></div>":"<div><span class='yellow'>Damage : </span><span class='"+i+"'>"+n+"</span></div>",t&&t.explosionRadius>e.explosionRadius?s+="<div><span class='yellow'>Range : </span>"+e.explosionRadius+"<img src='/images/upIcon.png' class='disable' /></div>":s+="<div><span class='yellow'>Range : </span>"+e.explosionRadius+"</div>";break;case A.SKILL_TYPE_PROJECTILE:t?(s+=n<a?"<div><span class='yellow'>Damage : </span><span class='"+i+"'>"+n+"</span><img src='/images/upIcon.png' class='disable' /></div>":"<div><span class='yellow'>Damage : </span><span class='"+i+"'>"+n+"</span></div>",t.radius>e.radius?s+="<div><span class='yellow'>Radius : </span>"+e.radius+"<img src='/images/upIcon.png' class='disable' /></div>":s+="<div><span class='yellow'>Radius : </span>"+e.radius+"</div>"):(s+="<div><span class='yellow'>Damage : </span><span class='"+i+"'>"+n+"</span></div>",s+="<div><span class='yellow'>Radius : </span>"+e.radius+"</div>");break;case A.SKILL_TYPE_PROJECTILE_EXPLOSION:s+=t&&n<a?"<div><span class='yellow'>Damage : </span><span class='"+i+"'>"+n+"</span><img src='/images/upIcon.png' class='disable' /></div>":"<div><span class='yellow'>Damage : </span><span class='"+i+"'>"+n+"</span></div>",t&&t.explosionRadius>e.explosionRadius?s+="<div><span class='yellow'>Range : </span>"+e.explosionRadius+"<img src='/images/upIcon.png' class='disable' /></div>":s+="<div><span class='yellow'>Range : </span>"+e.explosionRadius+"</div>";break;case A.SKILL_TYPE_PROJECTILE_TICK:case A.SKILL_TYPE_PROJECTILE_TICK_EXPLOSION:t?(s+=n<a?"<div><span class='yellow'>Damage : </span><span class='"+i+"'>"+n+"</span><img src='/images/upIcon.png' class='disable' /></div>":"<div><span class='yellow'>Damage : </span><span class='"+i+"'>"+n+"</span></div>",t.radius>e.radius?s+="<div><span class='yellow'>Radius : </span>"+e.radius+"<img src='/images/upIcon.png' class='disable' /></div>":s+="<div><span class='yellow'>Radius : </span>"+e.radius+"</div>"):(s+="<div><span class='yellow'>Damage : </span><span class='"+i+"'>"+n+"</span></div>",s+="<div><span class='yellow'>Radius : </span>"+e.radius+"</div>");break;case A.SKILL_TYPE_RANGE:if(n)s+=t&&n<a?"<div><span class='yellow'>Damage : </span><span class='"+i+"'>"+n+"</span><img src='/images/upIcon.png' class='disable' /></div>":"<div><span class='yellow'>Damage : </span><span class='"+i+"'>"+n+"</span></div>",t&&t.explosionRadius>e.explosionRadius?s+="<div><span class='yellow'>Range : </span>"+e.explosionRadius+"<img src='/images/upIcon.png' class='disable' /></div>":s+="<div><span class='yellow'>Range : </span>"+e.explosionRadius+"</div>";else{var r=R({},v.findData(h,"index",e.buffToTarget)),o=Math.floor(10*r.buffLifeTime)/1e4;if(t)var l=R({},v.findData(h,"index",t.buffToTarget)),c=Math.floor(10*l.buffLifeTime)/1e4;v.isNumeric(o)&&1<=o&&(t?v.isNumeric(c)&&1<=c&&(s+=o<c?"<div><span class='yellow'>Duration : </span>"+o+"(s)<img src='/images/upIcon.png' class='disable' /></div>":"<div><span class='yellow'>Duration : </span>"+o+"(s)</div>"):s+="<div><span class='yellow'>Duration : </span>"+o+"(s)</div>"),t&&t.explosionRadius>e.explosionRadius?s+="<div><span class='yellow'>Range : </span>"+e.explosionRadius+"<img src='/images/upIcon.png' class='disable' /></div>":s+="<div><span class='yellow'>Range : </span>"+e.explosionRadius+"</div>",(!v.isNumeric(o)||o<1)&&(s+="<div></div>")}break;case A.SKILL_TYPE_SELF:r=R({},v.findData(h,"index",e.buffToSelf)),o=Math.floor(10*r.buffLifeTime)/1e4;if(t)l=R({},v.findData(h,"index",t.buffToSelf)),c=Math.floor(10*l.buffLifeTime)/1e4;t?(isNaN(c)||c<=1?s+="<div><span class='yellow'>Duration : </span>"+o+"(s)<img src='/images/upIcon.png' class='disable' /></div>":s+=o<c?"<div><span class='yellow'>Duration : </span>"+o+"(s)<img src='/images/upIcon.png' class='disable' /></div>":"<div><span class='yellow'>Duration : </span>"+o+"(s)</div>",s+="<div></div>"):isNaN(o)||o<=1||(s+="<div><span class='yellow'>Duration : </span>"+o+"(s)</div>",s+="<div></div>");break;case A.SKILL_TYPE_SELF_EXPLOSION:s+=t&&n<a?"<div><span class='yellow'>Damage : </span><span class='"+i+"'>"+n+"</span><img src='/images/upIcon.png' class='disable' /></div>":"<div><span class='yellow'>Damage : </span><span class='"+i+"'>"+n+"</span></div>",t&&t.explosionRadius>e.explosionRadius?s+="<div><span class='yellow'>Range : </span>"+e.explosionRadius+"<img src='/images/upIcon.png' class='disable' /></div>":s+="<div><span class='yellow'>Range : </span>"+e.explosionRadius+"</div>";break;case A.SKILL_TYPE_TELEPORT:t&&t.range>e.range?s+="<div><span class='yellow'>Range : </span>"+e.range+"<img src='/images/upIcon.png' class='disable' /></div>":s+="<div><span class='yellow'>Range : </span>"+e.range+"</div>",s+="<div></div>"}var d=Math.floor(10*e.cooldown)/1e4;e.type!==A.SKILL_TYPE_INSTANT_RANGE&&e.type!==A.SKILL_TYPE_INSTANT_PROJECTILE&&(t?(t.consumeMP>e.consumeMP?s+="<div><span class='yellow'>MP Cost : </span>"+e.consumeMP+"<img src='/images/downIcon.png' class='disable' /></div>":t.consumeMP<e.consumeMP?s+="<div><span class='yellow'>MP Cost : </span>"+e.consumeMP+"<img src='/images/upIcon.png' class='disable' /></div>":s+="<div><span class='yellow'>MP Cost : </span>"+e.consumeMP+"</div>",t.cooldown<e.cooldown?s+="<div><span class='yellow'>Cooldown : </span>"+d+"(s)<img src='/images/upIcon.png' class='disable' /></div>":s+="<div><span class='yellow'>Cooldown : </span>"+d+"(s)</div>"):(s+="<div><span class='yellow'>MP Cost : </span>"+e.consumeMP+"</div>",s+="<div><span class='yellow'>Cooldown : </span>"+d+"(s)</div>")),s+="<hr>"}else s+="<div class='titleLabel'><span class='green'>Passive</span></div>",s+="<div></div><div></div><hr>";return s+="<p>"+e.clientDesc+"</p>"}function Xs(e){switch(e){case 0:return A.SKILL_EQUIP1_INDEX;case 1:return A.SKILL_EQUIP2_INDEX;case 2:return A.SKILL_EQUIP3_INDEX;case 3:return A.SKILL_EQUIP4_INDEX}}function Gs(e){for(var t=0,s=0;s<ts.length;s++)if(e===ts[s].slot){var i=Date.now()-ts[s].startTime;t=1e3*ts[s].cooldownTime-i;break}return t}function Ys(e){for(var t=0;t<ss.length;t++)if(ss[t]===e)return!0;return!1}function Js(e){for(var t=ss.length-1;0<=t;t--)ss[t]===e&&ss.splice(t,1);ss.push(e)}function zs(e){var t=ss.indexOf(e);-1!==t&&ss.splice(t,1)}function Vs(e){for(var t=ss.length-1;0<=t;t--)if(ss[t]===e){ss.splice(t,1),this(e);break}}function Ws(){os||(os=!0,ze.classList.add("disable"),nt.classList.add("disable"),setTimeout(function(){rs?qs():Xe.classList.add("skillEquipTutorialHighlight")},200),setTimeout(function(){rs?qs():(st.classList.add("disable"),tt.classList.remove("disable"),tt.classList.add("skillEquipTutorialAni"))},500),setTimeout(function(){rs?qs():(tt.classList.add("disable"),it.classList.remove("disable"),it.classList.add("skillEquipTutorialAni"),it.style.animationIterationCount=1),Xe.classList.remove("skillEquipTutorialHighlight")},2500),setTimeout(function(){rs?qs():rt.classList.add("skillEquipTutorialHighlight")},3500),setTimeout(function(){rs?qs():(st.classList.remove("disable"),it.classList.add("disable"),st.classList.add("skillEquipTutorialAni"))},3800),setTimeout(function(){rt.classList.remove("skillEquipTutorialHighlight"),os=!1,qs(),rs||(st.classList.add("disable"),Ws())},5800))}function qs(){ze.classList.remove("disable"),nt.classList.remove("disable"),Xe.classList.remove("skillEquipTutorialHighlight"),rt.classList.remove("skillEquipTutorialHighlight"),tt.classList.add("disable"),st.classList.add("disable"),it.classList.add("disable")}function Zs(){for(var r=document.getElementById("startSceneHudCenterCenterCharSelect").children,e=0;e<r.length;e++)r[e].onclick=function(){var e=parseInt(this.getAttribute("type"));P=e===A.CHAR_TYPE_FIRE||e===A.CHAR_TYPE_FROST||e===A.CHAR_TYPE_ARCANE?e:A.CHAR_TYPE_FIRE;for(var t=0;t<r.length;t++)r[t].classList.remove("selectedChar");this.classList.add("selectedChar");var s="",i="",n="";switch(e){case A.CHAR_TYPE_FIRE:s=p,i=f,n="red";break;case A.CHAR_TYPE_FROST:s=m,i=g,n="blue";break;case A.CHAR_TYPE_ARCANE:s=E,i=I,n="purple"}var a=R({},v.findDataWithTwoColumns(o,"type",P,"level",1));startSceneSelectedCharName.innerHTML="<span class='"+n+"'>"+s+"</span>",startSceneSelectedCharDesc.innerHTML=i,startSceneSelectedCharStatPower.getElementsByTagName("span")[0].innerHTML=a.power,startSceneSelectedCharStatMagic.getElementsByTagName("span")[0].innerHTML=a.magic,startSceneSelectedCharStatSpeed.getElementsByTagName("span")[0].innerHTML=a.speed,startSceneSelectedCharStatPower.onmouseover=Fs.bind(startSceneSelectedCharStatPower,A.STAT_POWER_INDEX,a.power),startSceneSelectedCharStatPower.onmouseout=Us.bind(startSceneSelectedCharStatPower),startSceneSelectedCharStatMagic.onmouseover=Fs.bind(startSceneSelectedCharStatMagic,A.STAT_MAGIC_INDEX,a.magic),startSceneSelectedCharStatMagic.onmouseout=Us.bind(startSceneSelectedCharStatMagic),startSceneSelectedCharStatSpeed.onmouseover=Fs.bind(startSceneSelectedCharStatSpeed,A.STAT_SPEED_INDEX,a.speed),startSceneSelectedCharStatSpeed.onmouseout=Us.bind(startSceneSelectedCharStatSpeed)};r[0].onclick()}function Qs(e){setTimeout(function(){ys=!1,u.getElementsByTagName("span")[0].innerHTML='Join Game <span class="small">(Ad)</span>'},e)}function $s(e,t){var s=e.value.substr(0,1),i=parseInt(v.charToKeyCode(s));" "==s&&(i=32);var n=!1;for(var a in Je)if(a!=t&&Je[a]==i){n=!0;break}n?(e.value="",this.makeFlashMessage("Key Duplicate!!!")):i?(Je[t]=i,e.value="",e.placeholder=" "==s?"Space":s.toUpperCase()):e.value=""}Ds.prototype={initStartScene:function(){r=document.getElementById("startScene"),l=document.getElementById("gameScene"),c=document.getElementById("standingScene"),d=document.getElementById("startButton");document.getElementById("startSceneSelectedCharName"),document.getElementById("startSceneSelectedCharStatPower"),document.getElementById("startSceneSelectedCharStatMagic"),document.getElementById("startSceneSelectedCharStatSpeed"),document.getElementById("startSceneSelectedCharDesc");u=document.getElementById("restartButton"),ft=document.getElementById("standingSceneSelectedCharName"),mt=document.getElementById("standingSceneSelectedCharStatPower"),gt=document.getElementById("standingSceneSelectedCharStatMagic"),Et=document.getElementById("standingSceneSelectedCharStatSpeed"),It=document.getElementById("standingSceneSelectedCharBaseSkill"),St=document.getElementById("standingSceneSelectedCharPassiveSkill"),_t=document.getElementById("standingSceneSelectedCharEquipSkill1"),Tt=document.getElementById("standingSceneSelectedCharEquipSkill2"),Ct=document.getElementById("standingSceneSelectedCharEquipSkill3"),bt=document.getElementById("standingSceneSelectedCharEquipSkill4"),It.getElementsByTagName("img")[0].src=D,St.getElementsByTagName("img")[0].src=D,_t.getElementsByTagName("img")[0].src=D,Tt.getElementsByTagName("img")[0].src=D,Ct.getElementsByTagName("img")[0].src=D,bt.getElementsByTagName("img")[0].src=D,It.onmouseover=ws.bind(It),It.onmouseout=Us.bind(It),St.onmouseover=ws.bind(St),St.onmouseout=Us.bind(St),_t.onmouseover=ws.bind(_t),_t.onmouseout=Us.bind(_t),Tt.onmouseover=ws.bind(Tt),Tt.onmouseout=Us.bind(Tt),Ct.onmouseover=ws.bind(Ct),Ct.onmouseout=Us.bind(Ct),bt.onmouseover=ws.bind(bt),bt.onmouseout=Us.bind(bt),Lt=document.getElementById("standingSceneSkillSettingBtn"),yt=document.getElementById("userStandingNickName"),d.onclick=Rs.bind(this,d),d.getElementsByTagName("span")[0].classList.remove("disable"),d.getElementsByTagName("img")[0].classList.add("disable"),Zs();var e=document.getElementById("startSceneFacebook"),t=document.getElementById("startSceneTwitter"),s=document.getElementById("standingSceneFacebook"),i=document.getElementById("standingSceneTwitter"),n=this.onSocialBtnClick;function a(e){var i=v.createRequest();i.onreadystatechange=function(e){if(4===i.readyState){var t=v.getCookie(document.cookie,"twitter"),s=v.getCookie(document.cookie,"facebook");n(t,s)}},i.open("POST",e,!0),i.send()}e.onclick=a.bind("","/facebook"),s.onclick=a.bind("","/facebook"),t.onclick=a.bind("","/twitter"),i.onclick=a.bind("","/twitter"),jt=document.getElementById("displayContainer"),Ut=document.getElementById("displayAdContainer"),Ht=document.getElementById("displayAdRefresh"),Kt=document.getElementById("videoAdPlay")},completeTwitter:function(){var e=document.getElementById("startSceneTwitterReward"),t=document.getElementById("standingSceneTwitterReward");e.getElementsByTagName("img")[1].classList.remove("disable"),t.getElementsByTagName("img")[1].classList.remove("disable")},completeFacebook:function(){var e=document.getElementById("startSceneFacebookReward"),t=document.getElementById("standingSceneFacebookReward");e.getElementsByTagName("img")[1].classList.remove("disable"),t.getElementsByTagName("img")[1].classList.remove("disable")},setServerList:function(){var a=document.getElementById("servers"),r=!1,o=!1,l=this.onLoadCompleteServerList;setTimeout(function(){r||(alert("Sorry. Can`t find available server."),a.selectedIndex=1,r=!0,l())},A.MAX_FIND_AVAILABLE_SERVER_TIME);var e=0;for(var t in n)if(n[t]){var s="http://"+n[t].IP,i=a.querySelectorAll('[label="'+n[t].SERVER+'"]')[0];v.createDomSelectOption(t,s,!0,i);try{!function(){var n=v.createRequest();n.onreadystatechange=function(e){if(4===n.readyState&&200===n.status){var t=JSON.parse(n.response);if(t.isServerDown){i=(s=a.querySelectorAll('[value="'+t.ip+'"]')[0]).text+" ["+t.currentUser+"/"+t.maxUser+"]";s.text=i}else{var s;(s=a.querySelectorAll('[value="'+t.ip+'"]')[0]).disabled=!1,parseInt(t.currentUser)>=parseInt(t.maxUser)&&s.classList.add("overUser"),Date.now()-t.startTime>=A.MAX_PING_LIMIT&&s.classList.add("highPing"),s.classList.contains("overUser")||s.classList.contains("highPing")||s.classList.add("available");var i=s.text+" ["+t.currentUser+"/"+t.maxUser+"] "+(Date.now()-t.startTime)+"ms";s.text=i,o||(o=!0,a.selectedIndex=t.optionIndex),r||parseInt(t.currentUser)<parseInt(t.maxUser)&&(r=!0,l(),a.selectedIndex=t.optionIndex)}}},n.open("POST",s+"/usersInfo",!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send("ip="+s+"&startTime="+Date.now()+"&optionIndex="+e)}(),e++}catch(e){}}else v.createDomSelectOptGroup(t,a,!1)},getSelectedServer:function(){var e=document.getElementById("servers");return e.options[e.selectedIndex].value},getStartUserName:function(){var e=document.getElementById("userStartNickName").value;if(e){var t=v.processMessage(e,A.USER_NICK_NAME_LENGTH,!0);return t||v.setRandomName(P)}return v.setRandomName(P)},getStandingUserName:function(){var e=yt.value;if(e){var t=v.processMessage(e,A.USER_NICK_NAME_LENGTH,!0);return t||v.setRandomName(P)}return v.setRandomName(P)},checkServerCondition:function(e){var i=v.createRequest(),n=Date.now(),a=this.serverConditionOn,r=this.serverConditionOff;i.onreadystatechange=function(e){if(4===i.readyState)if(200===i.status){var t=JSON.parse(i.response),s=Date.now()-n;t.canJoin?s<A.MAX_PING_LIMIT?a():(alert("Ping is too high! How about join to other server."),r()):(t.version!==A.GAME_VERSION?(alert("Client`s game version is different from server`s. Reload page."),location.reload()):t.isServerDown?(alert("Server is down for update! Reload page."),location.reload()):alert("The server is currently full! How about join to other server."),r())}else alert("Sorry. Unpredicted internet server error!"),r()};try{n=Date.now(),i.open("POST",e+"/serverCheck",!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.send("version="+A.GAME_VERSION)}catch(e){}},setFeedbackBtn:function(){try{Bt=document.getElementById("crowd-shortcut").parentNode}catch(e){}},disableStartButton:function(){d.onclick="",d.getElementsByTagName("span")[0].classList.add("disable"),d.getElementsByTagName("img")[0].classList.remove("disable");for(var e=document.getElementById("startSceneHudCenterCenterCharSelect").children,t=0;t<e.length;t++)e[t].onclick=new Function},enableStartButton:function(){d.onclick=Rs.bind(this,d),d.getElementsByTagName("span")[0].classList.remove("disable"),d.getElementsByTagName("img")[0].classList.add("disable"),Zs()},disableStartScene:function(){r.classList.add("disappearSmoothAni"),r.classList.remove("enable"),setTimeout(function(){r.classList.add("disable")},1e3),l.classList.add("appearSmoothAni"),l.classList.remove("disable"),setTimeout(function(){l.classList.add("enable"),l.classList.remove("appearSmoothAni")},1e3),Ut.classList.add("disable"),Qs(6e5),adEventHandler=function(){ys=!0,Qs(3e5)},Ye.classList.contains("disable")||(vs(Ye),v.setCookie("keySettings",JSON.stringify(Je)))},initStandingScene:function(e,t){Ht.onclick(),Ut.classList.remove("disable"),c.classList.remove("disable"),c.classList.add("enable"),setTimeout(function(){u.getElementsByTagName("span")[0].classList.remove("disable"),u.getElementsByTagName("img")[0].classList.add("disable")},1500),yt.select(),yt.onkeydown=function(e){13!==e.keyCode&&13!==e.which||u.onclick()},yt.value=t;var s=0;switch(e){case A.CHAR_TYPE_FIRE:s=0;break;case A.CHAR_TYPE_FROST:s=1;break;case A.CHAR_TYPE_ARCANE:s=2}u.onclick=Rs.bind(this,u);var i=u.getElementsByTagName("span")[0];i.innerHTML=ys?"Join Game":'Join Game <span class="small">(Ad)</span>';for(var n=this.onSelectCharIcon,a=document.getElementById("standingSceneHudCenterCenterCharSelect").children,r=0;r<a.length;r++){if(s===r){for(var o=0;o<a.length;o++)a[o].classList.remove("selectedChar");a[r].classList.add("selectedChar")}a[r].onclick=function(){var e=parseInt(this.getAttribute("type"));if(e===A.CHAR_TYPE_FIRE||e===A.CHAR_TYPE_FROST||e===A.CHAR_TYPE_ARCANE){P=e;for(var t=0;t<a.length;t++)a[t].classList.remove("selectedChar");this.classList.add("selectedChar"),n(e)}else n(A.CHAR_TYPE_FIRE)}}a[s].onclick(),Lt.onclick=function(){ks(),vs(Ke,!0),pt.onclick(),rs?qs():Ws()}},updateCharInfoSelectedPanel:function(e,t){var s="",i="white";switch(e){case A.CHAR_TYPE_FIRE:s=p,i="red";break;case A.CHAR_TYPE_FROST:s=m,i="blue";break;case A.CHAR_TYPE_ARCANE:s=E,i="purple"}var n=R({},v.findDataWithTwoColumns(o,"type",e,"level",t));ft.innerHTML="<span class='yellow'>Lv "+t+" </span><span class='"+i+"'>"+s+"</span>",mt.getElementsByTagName("span")[0].innerHTML=n.power,gt.getElementsByTagName("span")[0].innerHTML=n.magic,Et.getElementsByTagName("span")[0].innerHTML=n.speed,mt.onmouseover=Fs.bind(mt,A.STAT_POWER_INDEX,n.power),mt.onmouseout=Us.bind(mt),gt.onmouseover=Fs.bind(gt,A.STAT_MAGIC_INDEX,n.magic),gt.onmouseout=Us.bind(gt),Et.onmouseover=Fs.bind(Et,A.STAT_SPEED_INDEX,n.speed),Et.onmouseout=Us.bind(Et),js()},disableStandingScene:function(){Ut.classList.add("disable");for(var e=document.getElementById("standingSceneHudCenterCenterCharSelect").children,t=0;t<e.length;t++)e[t].onclick="";c.classList.add("disappearSmoothAni"),c.classList.remove("enable"),setTimeout(function(){c.classList.add("disable"),c.classList.remove("disappearSmoothAni")},1e3),l.classList.add("appearSmoothAni"),l.classList.remove("disable"),setTimeout(function(){l.classList.add("enable"),l.classList.remove("appearSmoothAni")},1e3),this.disableRestartButton(),Ye.classList.contains("disable")||(vs(Ye),v.setCookie("keySettings",JSON.stringify(Je)))},disableRestartButton:function(){u.onclick="",u.getElementsByTagName("span")[0].classList.add("disable"),u.getElementsByTagName("img")[0].classList.remove("disable"),Lt.onclick=""},initHUD:function(e){F=document.getElementById("hudBaseSkillImg"),N=document.getElementById("hudEquipSkill1Img"),B=document.getElementById("hudEquipSkill2Img"),U=document.getElementById("hudEquipSkill3Img"),H=document.getElementById("hudEquipSkill4Img"),j=document.getElementById("hudPassiveSkillImg"),F.src=D,N.src=D,B.src=D,U.src=D,H.src=D,j.src=D,F.addEventListener("mouseover",Ms.bind(F,A.SKILL_BASIC_INDEX),!1),N.addEventListener("mouseover",Ms.bind(N,A.SKILL_EQUIP1_INDEX),!1),B.addEventListener("mouseover",Ms.bind(B,A.SKILL_EQUIP2_INDEX),!1),U.addEventListener("mouseover",Ms.bind(U,A.SKILL_EQUIP3_INDEX),!1),H.addEventListener("mouseover",Ms.bind(H,A.SKILL_EQUIP4_INDEX),!1),j.addEventListener("mouseover",Ms.bind(j,A.SKILL_PASSIVE_INDEX),!1),F.addEventListener("mouseout",xs.bind(F),!1),N.addEventListener("mouseout",xs.bind(N),!1),B.addEventListener("mouseout",xs.bind(B),!1),U.addEventListener("mouseout",xs.bind(U),!1),H.addEventListener("mouseout",xs.bind(H),!1),j.addEventListener("mouseout",xs.bind(j),!1),F.onclick=Hs.bind(this,A.SKILL_BASIC_INDEX),N.onclick=Hs.bind(this,A.SKILL_EQUIP1_INDEX),B.onclick=Hs.bind(this,A.SKILL_EQUIP2_INDEX),U.onclick=Hs.bind(this,A.SKILL_EQUIP3_INDEX),H.onclick=Hs.bind(this,A.SKILL_EQUIP4_INDEX),K=document.getElementById("hudBtnSkillChange"),X=document.getElementById("gameSceneBuffsContainer"),G=document.getElementById("userHPProgressBar"),J=document.getElementById("userExpProgressBar"),Y=document.getElementById("userMPProgressBar"),z=document.getElementById("hudBaseSkillMask"),V=document.getElementById("hudEquipSkill1Mask"),W=document.getElementById("hudEquipSkill2Mask"),q=document.getElementById("hudEquipSkill3Mask"),Z=document.getElementById("hudEquipSkill4Mask"),z.addEventListener("animationend",Ps.bind(z,A.SKILL_BASIC_INDEX,this.checkSkillsConditions),!1),V.addEventListener("animationend",Ps.bind(V,A.SKILL_EQUIP1_INDEX,this.checkSkillsConditions),!1),W.addEventListener("animationend",Ps.bind(W,A.SKILL_EQUIP2_INDEX,this.checkSkillsConditions),!1),q.addEventListener("animationend",Ps.bind(q,A.SKILL_EQUIP3_INDEX,this.checkSkillsConditions),!1),Z.addEventListener("animationend",Ps.bind(Z,A.SKILL_EQUIP4_INDEX,this.checkSkillsConditions),!1),Q=document.getElementById("hudBaseSkillBlockMask"),$=document.getElementById("hudEquipSkill1BlockMask"),ee=document.getElementById("hudEquipSkill2BlockMask"),te=document.getElementById("hudEquipSkill3BlockMask"),se=document.getElementById("hudEquipSkill4BlockMask"),ie=document.getElementById("hudPassiveSkillBlockMask"),ne=document.getElementById("hudBaseSkillConditionBlockMask"),ae=document.getElementById("hudEquipSkill1ConditionBlockMask"),re=document.getElementById("hudEquipSkill2ConditionBlockMask"),oe=document.getElementById("hudEquipSkill3ConditionBlockMask"),le=document.getElementById("hudEquipSkill4ConditionBlockMask"),ce=document.getElementById("gameSceneHudBottomRightCenter"),de=document.getElementById("gameSceneCharNameAndLevel"),ue=document.getElementById("userStatOffence"),he=document.getElementById("userStatDefence"),pe=document.getElementById("userStatPowerContainer"),fe=document.getElementById("userStatMagicContainer"),me=document.getElementById("userStatSpeedContainer"),Dt=document.getElementById("miniMapUser"),vt=document.getElementById("miniMapChest1"),At=document.getElementById("miniMapChest2"),Rt=document.getElementById("miniMapChest3"),Pt=document.getElementById("miniMapChest4"),kt=document.getElementById("miniMapChest5"),Ot=document.getElementById("miniMapChest6"),Mt=document.getElementById("miniMapChest7"),xt=document.getElementById("miniMapChest8"),wt=document.getElementById("miniMapChest9"),Ft=document.getElementById("gameSceneFpsText"),Nt=document.getElementById("gameScenePingText"),ge=document.getElementById("gameSceneHudTopLeft"),Ee=document.getElementById("gameSceneHudTopCenter"),selectSkillImgContainer=document.getElementById("selectSkillImgContainer"),Ie=document.getElementById("selectSkillInfo"),document.getElementById("btnSelectSkillCancel").onclick=function(){this.onSelectSkillCancelBtnClick()}.bind(this),Se=document.getElementById("goldContainer"),_e=document.getElementById("jewelContainer"),Te=document.getElementById("gameBoardRank"),Ce=document.getElementById("gameBoardName"),be=document.getElementById("gameBoardLevel"),Le=document.getElementById("gameBoardKillScore"),ye=document.getElementById("gameBoardTotalKillCount"),De=document.getElementById("gameBoardTotalScore"),ve=document.getElementById("gameSceneDeadScene"),Ae=document.getElementById("deadSceneBackground"),Re=document.getElementById("deadSceneTextContainer"),Pe=document.getElementById("deadSceneText"),ke=document.getElementById("deadSceneToLevel"),Oe=document.getElementById("deadSceneLoseGold"),Me=document.getElementById("deadSceneLoseJewel"),xe=document.getElementById("chatInputContainer"),we=document.getElementById("chatInput"),Fe=document.getElementById("flashMessageContainer"),Ne=document.getElementById("risingMessageContainer"),Ue=document.getElementById("downMessageContainer"),He=document.getElementById("reconnectScene"),je=document.getElementById("reconnectMessage"),Be=document.getElementById("adminMessageContainer"),Ye=document.getElementById("popUpSetting"),document.getElementById("resetKeySettings").onclick=this.resetKeySettings.bind(this);var t=document.getElementById("settingButton1"),s=document.getElementById("settingButton2");t.onclick=function(){vs(Ye,!1),v.setCookie("keySettings",JSON.stringify(Je))},s.onclick=function(){vs(Ye,!1),v.setCookie("keySettings",JSON.stringify(Je))},Je=e;var i=document.getElementById("bindE"),n=document.getElementById("bindSpace"),a=document.getElementById("bindA"),r=document.getElementById("bind1"),o=document.getElementById("bind2"),l=document.getElementById("bind3"),c=document.getElementById("bind4"),d=document.getElementById("bindS"),u=document.getElementById("bindG"),h=document.getElementById("bindHome");i.oninput=$s.bind(this,i,"BindingE"),n.oninput=$s.bind(this,n,"BindingSpace"),a.oninput=$s.bind(this,a,"BindingA"),r.oninput=$s.bind(this,r,"Binding1"),o.oninput=$s.bind(this,o,"Binding2"),l.oninput=$s.bind(this,l,"Binding3"),c.oninput=$s.bind(this,c,"Binding4"),d.oninput=$s.bind(this,d,"BindingS"),u.oninput=$s.bind(this,u,"BindingG"),h.oninput=$s.bind(this,h,"BindingHome")},changeLoadingText:function(){var e=document.getElementById("loadingText"),t="Loading ";switch(zt){case 1:t+=".";break;case 2:t+="..";break;case 3:t+="..."}3<++zt&&(zt=1),e.innerHTML=t},startSceneLoadingComplete:function(){var e=document.getElementById("loadingImgContainer"),t=document.getElementById("startSceneHudContent");e.getElementsByTagName("span")[0].classList.add("disable"),e.classList.add("disappearSmoothAni"),setTimeout(function(){e.classList.remove("disappearSmoothAni"),e.classList.add("disable")},1e3),t.classList.remove("disable"),t.classList.add("appearSmoothAni"),setTimeout(function(){t.classList.remove("appearSmoothAni")},1e3);var s=document.getElementById("userStartNickName");s.select(),s.onkeydown=function(e){13!==e.keyCode&&13!==e.which||d.onclick()}},drawStartScene:function(){l.classList.add("disable"),c.classList.add("disable")},drawGameScene:function(){if(r.classList.add("disable"),c.classList.add("disable"),Bt)Bt.style.display="none";else try{Bt=document.getElementById("crowd-shortcut").parentNode}catch(e){}},drawRestartScene:function(){if(r.classList.add("disable"),l.classList.add("disable"),Bt)Bt.style.display="block";else try{Bt=document.getElementById("crowd-shortcut").parentNode}catch(e){}},drawFPSAndPing:function(e,t){e<40?(e<0&&(e=0),Ft.innerHTML='FPS : <span class="red">'+e+"</span>"):Ft.innerHTML='FPS : <span class="green">'+e+"</span>",Nt.innerHTML=500<t?'PING : <span class="red">'+t+"ms</span>":'PING : <span class="green">'+t+"ms</span>"},enableSelectSkillInfo:function(e){var t=document.createElement("img"),s=R({},v.findData(y,"index",e.skillIcon));t.src=D;t.style.clip=v.makeCssClipStyle(s,1),v.setImgCssStyle(t,s,1),selectSkillImgContainer.appendChild(t);var i="white";switch(e.property){case A.SKILL_PROPERTY_FIRE:i="red";break;case A.SKILL_PROPERTY_FROST:i="blue";break;case A.SKILL_PROPERTY_ARCANE:i="purple"}switch(Ie.getElementsByTagName("h4")[0].innerHTML="<span class='yellow'>Lv "+e.level+" </span><span class='"+i+"'>"+e.clientName+"</span>",Ie.getElementsByTagName("div")[0].innerHTML="<span class='yellow'>Damage : </span><span class='"+i+"'>"+(e.fireDamage+e.frostDamage+e.arcaneDamage)+"</span>",Ie.getElementsByTagName("div")[1].innerHTML="<span class='yellow'>ManaCost : </span>"+e.consumeMP,Ie.getElementsByTagName("div")[2].innerHTML=e.clientDesc.replace(/&nbsp;/g,"<br>"),Ee.classList.add("enable"),Ee.classList.remove("disable"),e.index){case S:$.classList.remove("disable"),ee.classList.remove("disable"),te.classList.remove("disable"),se.classList.remove("disable"),ie.classList.remove("disable");break;case k[0]:Q.classList.remove("disable"),ee.classList.remove("disable"),te.classList.remove("disable"),se.classList.remove("disable"),ie.classList.remove("disable");break;case k[1]:Q.classList.remove("disable"),$.classList.remove("disable"),te.classList.remove("disable"),se.classList.remove("disable"),ie.classList.remove("disable");break;case k[2]:Q.classList.remove("disable"),$.classList.remove("disable"),ee.classList.remove("disable"),se.classList.remove("disable"),ie.classList.remove("disable");break;case k[3]:Q.classList.remove("disable"),$.classList.remove("disable"),ee.classList.remove("disable"),te.classList.remove("disable"),ie.classList.remove("disable")}},disableSelectSkillInfo:function(){for(;selectSkillImgContainer.firstChild;)selectSkillImgContainer.removeChild(selectSkillImgContainer.firstChild);Ie.getElementsByTagName("h4")[0].innerHTML="",Ee.classList.add("disable"),Ee.classList.remove("enable"),Q.classList.add("disable"),$.classList.add("disable"),ee.classList.add("disable"),te.classList.add("disable"),se.classList.add("disable"),ie.classList.add("disable")},syncSkills:function(e,t,s,i,n,a,r){S=e,_=t,k=s,O=i,b=n,T=a,C=r},updatePossessionSkills:function(e){b=e},setNewSkill:function(e){M.push(e)},updateNewSkills:function(e){for(var t=0;t<e.length;t++)-1===M.indexOf(e[t])&&M.push(e[t]);var s=K.parentNode.getElementsByTagName("img");s[0].classList.add("disable");var i=Lt.getElementsByTagName("img");i[0].classList.add("disable"),M.length&&(s[0].classList.remove("disable"),i[0].classList.remove("disable"))},updateHP:function(e){var t=e.HP/e.mHP*100;100<t&&(t=100),G.style.height=t+"%",G.parentNode.getElementsByTagName("div")[1].innerHTML=Math.floor(e.HP)+"<br>/ "+Math.floor(e.mHP)},updateMP:function(e){w=e.MP;var t=e.MP/e.mMP*100;100<t&&(t=100),Y.style.height=t+"%",Y.parentNode.getElementsByTagName("div")[1].innerHTML=Math.floor(e.MP)+"<br>/ "+Math.floor(e.mMP)},updateExp:function(e,t){if(-1===t)var s=100;else 100<(s=e.ep/t*100)&&(s=100);J.style.width=s+"%"},updateCondition:function(e){x[A.USER_CONDITION_FREEZE]=e[A.USER_CONDITION_FREEZE],x[A.USER_CONDITION_SILENCE]=e[A.USER_CONDITION_SILENCE],x[A.USER_CONDITION_BLUR]=e[A.USER_CONDITION_BLUR]},checkSkillsConditions:function(){var e=!1,t=!1,s=!1,i=!1,n=!1,a=!1;x[A.USER_CONDITION_FREEZE]||x[A.USER_CONDITION_SILENCE]||x[A.USER_CONDITION_BLUR]?e=!0:(qt||(t=!0),O[0]&&(O[0].consumeMP>w?s=!0:Zt?O[0].type===A.SKILL_TYPE_PASSIVE&&(s=!0):s=!0),O[1]&&(O[1].consumeMP>w?i=!0:Qt?O[1].type===A.SKILL_TYPE_PASSIVE&&(i=!0):i=!0),O[2]&&(O[2].consumeMP>w?n=!0:$t?O[2].type===A.SKILL_TYPE_PASSIVE&&(n=!0):n=!0),O[3]&&(O[3].consumeMP>w?a=!0:es?O[3].type===A.SKILL_TYPE_PASSIVE&&(a=!0):a=!0)),e?(ne.classList.remove("disable"),ae.classList.remove("disable"),re.classList.remove("disable"),oe.classList.remove("disable"),le.classList.remove("disable")):(ne.classList.add("disable"),ae.classList.add("disable"),re.classList.add("disable"),oe.classList.add("disable"),le.classList.add("disable"),t&&ne.classList.remove("disable"),s&&ae.classList.remove("disable"),i&&re.classList.remove("disable"),n&&oe.classList.remove("disable"),a&&le.classList.remove("disable"))},applySkill:function(e,t){var s=null,i={};if(S===e?(s=z,qt=!1,i.slot=A.SKILL_BASIC_INDEX):k[0]===e?(s=V,Zt=!1,i.slot=A.SKILL_EQUIP1_INDEX):k[1]===e?(s=W,Qt=!1,i.slot=A.SKILL_EQUIP2_INDEX):k[2]===e?(s=q,$t=!1,i.slot=A.SKILL_EQUIP3_INDEX):k[3]===e&&(s=Z,es=!1,i.slot=A.SKILL_EQUIP4_INDEX),s){var n=R({},v.findData(L,"index",e));if(t)var a=t/1e3;else a=n.cooldown*(100-Jt)/1e5,i.skillIndex=n.index,i.startTime=Date.now(),i.cooldownTime=a,ts.push(i);s.style.animationDuration=a+"s",s.classList.add("cooldownMaskAni")}},applySkillCooldown:function(e,t){for(var s=Xs(t),i=0,n=0;n<ts.length;n++)if(ts[n].slot===s){var a=Date.now()-ts[n].startTime;i=1e3*ts[n].cooldownTime-a}for(n=0;n<ts.length;n++)if(ts[n].skillIndex===e){a=Date.now()-ts[n].startTime;var r=1e3*ts[n].cooldownTime-a;i<r&&500<=r&&this.applySkill(e,r)}},updateUnEquipSkillSlotCooldown:function(e){for(var t=Xs(e),s=!0,i=0;i<ts.length;i++)ts[i].slot===t&&(s=!1);if(s){switch(t){case A.SKILL_EQUIP1_INDEX:Zt=!0,V.classList.remove("cooldownMaskAni"),V.style.opacity=0;break;case A.SKILL_EQUIP2_INDEX:Qt=!0,W.classList.remove("cooldownMaskAni"),W.style.opacity=0;break;case A.SKILL_EQUIP3_INDEX:$t=!0,q.classList.remove("cooldownMaskAni"),q.style.opacity=0;break;case A.SKILL_EQUIP4_INDEX:es=!0,Z.classList.remove("cooldownMaskAni"),Z.style.opacity=0}this.checkSkillsConditions()}},checkCooltime:function(e){switch(e){case S:return!0;case k[0]:return Zt;case k[1]:return Qt;case k[2]:return $t;case k[3]:return es}},clearCooltime:function(){Zt=!0,V.classList.remove("cooldownMaskAni"),V.style.opacity=0,Qt=!0,W.classList.remove("cooldownMaskAni"),W.style.opacity=0,$t=!0,q.classList.remove("cooldownMaskAni"),q.style.opacity=0,es=!0,Z.classList.remove("cooldownMaskAni"),Z.style.opacity=0},setHUDSkills:function(){var e=48/72;if(_){var t=R({},v.findData(y,"index",_.skillIcon));F.style.clip=v.makeCssClipStyle(t,e),v.setImgCssStyle(F,t,e)}else F.style.clip=v.makeCssClipStyle(i,e),v.setImgCssStyle(F,i,e);if(C){t=R({},v.findData(y,"index",C.skillIcon));j.style.clip=v.makeCssClipStyle(t,e),v.setImgCssStyle(j,t,e)}else j.style.clip=v.makeCssClipStyle(i,e),v.setImgCssStyle(j,i,e);if(e=64/72,O[0]){t=R({},v.findData(y,"index",O[0].skillIcon));N.style.clip=v.makeCssClipStyle(t,e),v.setImgCssStyle(N,t,e)}else N.style.clip=v.makeCssClipStyle(i,e),v.setImgCssStyle(N,i,e);if(O[1]){t=R({},v.findData(y,"index",O[1].skillIcon));B.style.clip=v.makeCssClipStyle(t,e),v.setImgCssStyle(B,t,e)}else B.style.clip=v.makeCssClipStyle(i,e),v.setImgCssStyle(B,i,e);if(O[2]){t=R({},v.findData(y,"index",O[2].skillIcon));U.style.clip=v.makeCssClipStyle(t,e),v.setImgCssStyle(U,t,e)}else U.style.clip=v.makeCssClipStyle(i,e),v.setImgCssStyle(U,i,e);if(O[3]){t=R({},v.findData(y,"index",O[3].skillIcon));H.style.clip=v.makeCssClipStyle(t,e),v.setImgCssStyle(H,t,e)}else H.style.clip=v.makeCssClipStyle(i,e),v.setImgCssStyle(H,i,e)},setHUDStats:function(e){var t="white";switch(P){case A.CHAR_TYPE_FIRE:var s=p;t="red";break;case A.CHAR_TYPE_FROST:s=m,t="blue";break;case A.CHAR_TYPE_ARCANE:s=E,t="purple"}20===e.lv?de.innerHTML="<span class='yellow'>Lv MAX</span><span class='"+t+"'>"+s+"</span>":de.innerHTML="<span class='yellow'>Lv "+e.lv+"</span><span class='"+t+"'>"+s+"</span>";var i=Math.floor(10*(e.dR+(e.fiDR+e.frDR+e.acDR)/3-200))/10,n=Math.floor(10*(e.rA+(e.rFi+e.rFr+e.rAc)/3))/10;ue.getElementsByTagName("span")[0].innerHTML=i+" %",ue.onmouseover=Ns.bind(ue,A.STAT_OFFENCE_INDEX,e),ue.onmouseout=Us.bind(ue),he.getElementsByTagName("span")[0].innerHTML=n+" %",he.onmouseover=Ns.bind(he,A.STAT_DEFENCE_INDEX,e),he.onmouseout=Us.bind(he),pe.getElementsByTagName("span")[0].innerHTML=Xt=e.sP,pe.onmouseover=Fs.bind(pe,A.STAT_POWER_INDEX,Xt),pe.onmouseout=Us.bind(pe),fe.getElementsByTagName("span")[0].innerHTML=Gt=e.sM,fe.onmouseover=Fs.bind(fe,A.STAT_MAGIC_INDEX,Gt),fe.onmouseout=Us.bind(fe),me.getElementsByTagName("span")[0].innerHTML=Yt=e.sS,me.onmouseover=Fs.bind(me,A.STAT_SPEED_INDEX,Yt),me.onmouseout=Us.bind(me)},setCooldownReduceRate:function(e){Jt=e},setSkillChangeBtn:function(){K.onclick=function(){ks(),vs(Ke),pt.onclick(),rs?qs():Ws()},a.onclick=function(){ks(),vs(Ke),pt.onclick()},Ge.onclick=function(){ks(),vs(Ke),pt.onclick()}},popChangeWithKey:function(){ks(),vs(Ke),pt.onclick(),K.classList.add("clicked"),setTimeout(function(){K.classList.remove("clicked")},250)},popCloseWithKey:function(){Ke.classList.contains("disable")||(this.closePopUpSkillChange(),K.classList.add("clicked"),setTimeout(function(){K.classList.remove("clicked")},250))},setSkillIconResource:function(e){D=e.src,i=R({},v.findData(y,"index",A.UI_RESOURCE_INDEX_BLANK))},setResource:function(e){Se.innerHTML=e.g,_e.innerHTML=e.j},getResource:function(){return{gold:parseInt(Se.innerText),jewel:parseInt(_e.innerText)}},addResource:function(e,t){var s=parseInt(Se.innerText),i=parseInt(_e.innerText);v.isNumeric(e)&&v.isNumeric(s)&&(Se.innerText=s+e),v.isNumeric(t)&&v.isNumeric(i)&&(_e.innerText=i+t)},makeAdminMessage:function(e){var t=document.createElement("p");t.innerHTML=e,t.classList.add("adminMessage"),Be.appendChild(t),setTimeout(function(){t.classList.add("adminMessageAni")},2e3),setTimeout(function(){Be.removeChild(t)},7e3)},makeDownMessage:function(e,t){Ue.innerHTML="";var s=document.createElement("p"),i=parseInt(t/6e4);s.innerHTML=e+" ("+i+" min)",s.classList.add("downMessage"),Ue.appendChild(s);var n=this;is=setTimeout(function(){t-=6e4,n.makeDownMessage.call(n,e,t)},6e4)},cancelDown:function(){Ue.innerHTML="",is&&clearTimeout(is),is=!1},makeFlashMessage:function(e){if(650<Date.now()-as){as=Date.now();var t=document.createElement("p");t.innerHTML=e,t.classList.add("flashMessage"),Fe.appendChild(t),setTimeout(function(){t.classList.add("flashMessageAni")},2e3),setTimeout(function(){Fe.removeChild(t)},5e3)}},makeRisingMessage:function(i){var e=0;Date.now()>ns+150?(e=0,ns=Date.now()):(e=ns+150-Date.now(),ns=Date.now()+e),setTimeout(function(){var e=document.createElement("div");if(e.classList.add("risingMessage"),i.type===A.GET_RESOURCE_TYPE_GOLD)(t=document.createElement("img")).src="../images/GoldIcon.png",e.appendChild(t),(s=document.createElement("span")).innerHTML="<span class='yellow'> + </span>"+i.amount,e.appendChild(s);else if(i.type===A.GET_RESOURCE_TYPE_JEWEL){var t,s;(t=document.createElement("img")).src="../images/JewelIcon.png",e.appendChild(t),(s=document.createElement("span")).innerHTML="<span class='yellow'> + </span>"+i.amount,e.appendChild(s)}Ne.appendChild(e),setTimeout(function(){e.classList.add("risingMessageAni")},50),setTimeout(function(){Ne.removeChild(e)},3e3)},e)},makeRisingMessageForSkill:function(l,c){var e=0;Date.now()>ns+150?(e=0,ns=Date.now()):(e=ns+150-Date.now(),ns=Date.now()+e),setTimeout(function(){var e=document.createElement("div");e.classList.add("risingMessageSkill");var t=document.createElement("div");(a=document.createElement("img")).src=D;var s=R({},v.findData(y,"index",l.skillIcon));if(a.style.clip=v.makeCssClipStyle(s,40/72),v.setImgCssStyle(a,s,40/72),t.appendChild(a),e.appendChild(t),c){t.classList.add("risingMessageSkillImgToChange");var i=document.createElement("div");i.classList.add("risingMessageArrow"),e.appendChild(i);var n=document.createElement("div");n.classList.add("risingMessageResource");var a=document.createElement("img");if(l.exchangeToGold){a.src="../images/GoldIcon.png";var r=l.exchangeToGold;(o=document.createElement("span")).innerHTML="<span class='yellow'> : </span>"+r}else if(l.exchangeToJewel){var o;a.src="../images/JewelIcon.png",r=l.exchangeToJewel,(o=document.createElement("span")).innerHTML="<span class='yellow'> : </span>&nbsp;"+r}n.appendChild(a),n.appendChild(o),e.appendChild(n)}else t.classList.add("risingMessageSkillImg");Ne.appendChild(e),setTimeout(function(){e.classList.add("risingMessageAniForSkill")},50),setTimeout(function(){Ne.removeChild(e)},3e3)},e)},updateBuffIcon:function(e,c,t,d){for(;X.firstChild;)X.removeChild(X.firstChild);X.innerHTML="";if(C){var s=R({},v.findData(h,"index",C.buffToSelf));(a=document.createElement("div")).setAttribute("buffGroupIndex",C.buffToSelf),(r=document.createElement("div")).classList.add("buffImgContainer"),(o=document.createElement("img")).src=D;var i=R({},v.findData(y,"index",s.buffIcon));o.style.clip=v.makeCssClipStyle(i,.5),v.setImgCssStyle(o,i,.5),r.appendChild(o),a.appendChild(r),X.appendChild(a),a.addEventListener("mouseover",Bs.bind(a),!1),a.addEventListener("mouseout",Us.bind(a),!1)}if(e)for(var u=0;u<e.length;u++){var n=R({},v.findData(h,"index",e[u])),a=document.createElement("div");(r=document.createElement("div")).classList.add("buffImgContainer"),a.setAttribute("buffGroupIndex",n.index),(o=document.createElement("img")).src=D;i=R({},v.findData(y,"index",n.buffIcon));o.style.clip=v.makeCssClipStyle(i,.5),v.setImgCssStyle(o,i,.5),r.appendChild(o),a.appendChild(r),X.appendChild(a),a.addEventListener("mouseover",Bs.bind(a),!1),a.addEventListener("mouseout",Us.bind(a),!1)}if(t)for(u=0;u<t.length;u++){var r,o,l=R({},v.findData(h,"index",t[u]));a=document.createElement("div");(r=document.createElement("div")).classList.add("buffImgContainer"),a.setAttribute("buffGroupIndex",l.index),(o=document.createElement("img")).src=D;i=R({},v.findData(y,"index",l.buffIcon));o.style.clip=v.makeCssClipStyle(i,.5),v.setImgCssStyle(o,i,.5),r.appendChild(o),a.appendChild(r),X.appendChild(a),a.addEventListener("mouseover",Bs.bind(a),!1),a.addEventListener("mouseout",Us.bind(a),!1)}if(c)for(u=0;u<c.length;u++)!function(){var e=R({},v.findData(h,"index",c[u].id)),t=e.buffLifeTime,s=c[u].st+d,i=Date.now()-s,n=(c[u],document.createElement("div"));n.setAttribute("buffGroupIndex",e.index);var a=document.createElement("div");a.classList.add("buffImgContainer");var r=document.createElement("img");r.src=D;var o=R({},v.findData(y,"index",e.buffIcon));r.style.clip=v.makeCssClipStyle(o,.5),v.setImgCssStyle(r,o,.5),a.appendChild(r),n.appendChild(a),X.appendChild(n),n.addEventListener("mouseover",Bs.bind(n),!1),n.addEventListener("mouseout",Us.bind(n),!1);var l=function(){i=Date.now()-s,t-i<=5e3?n.classList.add("buffBeforeEndAni"):setTimeout(l,100)};setTimeout(l,100)}()},initPopUpSkillChanger:function(){Ke=document.getElementById("popUpSkillChange"),a=document.getElementById("popUpCloseBtn"),Xe=document.getElementById("popUpSkillContainer"),Ge=document.getElementById("popUpBackground"),ze=document.getElementById("popUpSkillInfoAndBtn"),(Ve=document.getElementById("popUpSkillInfoIcon")).onclick=ks,We=document.getElementById("popUpSkillInfoDesc"),qe=document.getElementById("skillUpgradeEffect"),Ze=document.getElementById("popUpSkillUpgradeCostGold"),Qe=document.getElementById("popUpSkillUpgradeCostJewel"),$e=document.getElementById("popUpSkillUpgradeBtn"),tt=document.getElementById("popUpSkillTutorialClickText1"),st=document.getElementById("popUpSkillTutorialClickText2"),it=document.getElementById("popUpSkillTutorialArrow"),nt=document.getElementById("popUpSkillTextSkillInfo"),(et=document.getElementById("popUpCancelSkillSelectBtn")).onclick=ks,at=document.getElementById("popUpEquipBaseSkill"),rt=document.getElementById("popUpEquipSkillsContainer"),ot=document.getElementById("popUpEquipSkill1"),lt=document.getElementById("popUpEquipSkill2"),ct=document.getElementById("popUpEquipSkill3"),dt=document.getElementById("popUpEquipSkill4"),ut=document.getElementById("popUpEquipPassiveSkill"),ht=document.getElementById("popUpSortType"),pt=document.getElementById("popUpSortBtn")},checkPopUpSkillChange:function(){var e=!1,t=parseInt(ot.getAttribute("skillIndex")),s=parseInt(lt.getAttribute("skillIndex")),i=parseInt(ct.getAttribute("skillIndex")),n=parseInt(dt.getAttribute("skillIndex"));k[0]&&t!==k[0]&&(e=!0),k[1]&&s!==k[1]&&(e=!0),k[2]&&i!==k[2]&&(e=!0),k[3]&&n!==k[3]&&(e=!0);for(var a=Xe.children,r=0;r<a.length;r++){for(var o=!1,l=parseInt(a[r].getAttribute("skillIndex")),c=0;c<b.length;c++)if(l===b[c]){o=!0;break}o||(e=!0)}return e},upgradeBaseSkill:function(e,t){var s=S;S=e,_=t,bs===s&&this.updateSelectedPanel(e),this.updateDOMElementsSkillIndex(s,e),Ls=!0,$e.getElementsByTagName("span")[0].classList.remove("disable"),$e.getElementsByTagName("img")[0].classList.add("disable"),this.serverResponseTimeout&&(clearTimeout(this.serverResponseTimeout),this.serverResponseTimeout=!1)},upgradeInherentSkill:function(e,t){var s=T;T=e,C=t,bs===s&&this.updateSelectedPanel(e),this.updateDOMElementsSkillIndex(s,e),Ls=!0,$e.getElementsByTagName("span")[0].classList.remove("disable"),$e.getElementsByTagName("img")[0].classList.add("disable"),this.serverResponseTimeout&&(clearTimeout(this.serverResponseTimeout),this.serverResponseTimeout=!1)},upgradePossessionSkill:function(e,t){for(var s=0;s<b.length;s++)if(b[s]===e){var i=b.indexOf(e);b.splice(i,1,t);break}for(s=0;s<k.length;s++)if(k[s]===e){i=k.indexOf(e);k.splice(i,1,t);var n=R({},v.findData(L,"index",t));O.splice(i,1,n);break}bs===e&&this.updateSelectedPanel(t),this.updateDOMElementsSkillIndex(e,t),Ls=!0,$e.getElementsByTagName("span")[0].classList.remove("disable"),$e.getElementsByTagName("img")[0].classList.add("disable"),this.serverResponseTimeout&&(clearTimeout(this.serverResponseTimeout),this.serverResponseTimeout=!1)},playSkillUpgradeEffect:function(){qe.classList.remove("skillUpgradeEffectAni"),setTimeout(function(){qe.classList.add("skillUpgradeEffectAni")},50)},updateDOMElementsSkillIndex:function(e,t){for(var s=document.querySelectorAll('[skillIndex="'+e+'"]'),i=(R({},v.findData(L,"index",t)),0);i<s.length;i++)s[i].setAttribute("skillIndex",t);this.setHUDSkills()},setPopUpSkillChange:function(e,t){if(t){var s=bs;ks()}for(;at.firstChild;)at.removeChild(at.firstChild);for(;ot.firstChild;)ot.removeChild(ot.firstChild);for(;lt.firstChild;)lt.removeChild(lt.firstChild);for(;ct.firstChild;)ct.removeChild(ct.firstChild);for(;dt.firstChild;)dt.removeChild(dt.firstChild);for(;ut.firstChild;)ut.removeChild(ut.firstChild);ot.removeAttribute("skillIndex"),lt.removeAttribute("skillIndex"),ct.removeAttribute("skillIndex"),dt.removeAttribute("skillIndex"),(d=document.createElement("div")).classList.add("popUpskillImgContainer");var i=document.createElement("img");i.src=D;var n=60/72,a=R({},v.findData(y,"index",_.skillIcon));i.style.clip=v.makeCssClipStyle(a,n),v.setImgCssStyle(i,a,n),at.setAttribute("skillIndex",S),d.appendChild(i),at.appendChild(d),at.onclick=As.bind(this,at,A.SKILL_CHANGE_PANEL_EQUIP,e),(d=document.createElement("div")).classList.add("popUpskillImgContainer");var r=document.createElement("img");r.src=D;a=R({},v.findData(y,"index",C.skillIcon));if(r.style.clip=v.makeCssClipStyle(a,n),v.setImgCssStyle(r,a,n),ut.setAttribute("skillIndex",T),d.appendChild(r),ut.appendChild(d),ut.onclick=As.bind(this,ut,A.SKILL_CHANGE_PANEL_EQUIP,e),n=75/72,O[0]){var o=document.createElement("img");(d=document.createElement("div")).classList.add("popUpskillImgContainer"),o.src=D;a=R({},v.findData(y,"index",O[0].skillIcon));o.style.clip=v.makeCssClipStyle(a,n),v.setImgCssStyle(o,a,n),ot.setAttribute("skillIndex",O[0].index),d.appendChild(o),ot.appendChild(d)}if(O[1]){(d=document.createElement("div")).classList.add("popUpskillImgContainer");var l=document.createElement("img");l.src=D;a=R({},v.findData(y,"index",O[1].skillIcon));l.style.clip=v.makeCssClipStyle(a,n),v.setImgCssStyle(l,a,n),lt.setAttribute("skillIndex",O[1].index),d.appendChild(l),lt.appendChild(d)}if(O[2]){(d=document.createElement("div")).classList.add("popUpskillImgContainer");var c=document.createElement("img");c.src=D;a=R({},v.findData(y,"index",O[2].skillIcon));c.style.clip=v.makeCssClipStyle(a,n),v.setImgCssStyle(c,a,n),ct.setAttribute("skillIndex",O[2].index),d.appendChild(c),ct.appendChild(d)}if(O[3]){var d;(d=document.createElement("div")).classList.add("popUpskillImgContainer");var u=document.createElement("img");u.src=D;a=R({},v.findData(y,"index",O[3].skillIcon));u.style.clip=v.makeCssClipStyle(a,n),v.setImgCssStyle(u,a,n),dt.setAttribute("skillIndex",O[3].index),d.appendChild(u),dt.appendChild(d)}(ot.onclick=As.bind(this,ot,A.SKILL_CHANGE_PANEL_EQUIP,e),lt.onclick=As.bind(this,lt,A.SKILL_CHANGE_PANEL_EQUIP,e),ct.onclick=As.bind(this,ct,A.SKILL_CHANGE_PANEL_EQUIP,e),dt.onclick=As.bind(this,dt,A.SKILL_CHANGE_PANEL_EQUIP,e),ht.onclick=function(){var e=parseInt(ht.getAttribute("sortType"));if(e)switch(e){case A.CHAR_TYPE_FIRE:ht.setAttribute("sortType",A.CHAR_TYPE_FROST),ht.src="/images/charFrostSymbol.png";break;case A.CHAR_TYPE_FROST:ht.setAttribute("sortType",A.CHAR_TYPE_ARCANE),ht.src="/images/charArcaneSymbol.png";break;case A.CHAR_TYPE_ARCANE:ht.setAttribute("sortType",A.CHAR_TYPE_FIRE),ht.src="/images/charFireSymbol.png"}else ht.setAttribute("sortType",A.CHAR_TYPE_FIRE),ht.src="/images/charArcaneSymbol.png";pt.onclick()}.bind(this),pt.onclick=function(e){var t=parseInt(ht.getAttribute("sortType"));t||(t=A.CHAR_TYPE_FIRE);for(var s=[],i=[],n=0;n<b.length;n++){var a=R({},v.findData(L,"index",b[n]));a.property===t?s.push(b[n]):i.push(b[n])}s.sort(function(e,t){return e-t}),i.sort(function(e,t){return e-t}),b=[];for(var n=0;n<s.length;n++)b.push(s[n]);for(var n=0;n<i.length;n++)b.push(i[n]);for(;Xe.firstChild;)Xe.removeChild(Xe.firstChild);for(var r=[],n=0;n<k.length;n++)r.push(k[n]);for(var n=0;n<b.length;n++){var o=!1;if(-1!==r.indexOf(b[n])&&(o=!0),!o){var l=!1;-1!==M.indexOf(b[n])&&(l=!0);var a=R({},v.findData(L,"index",b[n])),c=document.createElement("div"),d=document.createElement("div");d.classList.add("popUpskillImgContainer");var u=document.createElement("img");c.setAttribute("skillIndex",b[n]);var h=document.createElement("img");h.src="../images/newIcon.png",l||h.classList.add("disable"),c.appendChild(h),c.classList.add("popUpSkillContainerItem"),u.src=D;var p=R({},v.findData(y,"index",a.skillIcon));u.style.clip=v.makeCssClipStyle(p,75/72),v.setImgCssStyle(u,p,75/72),d.appendChild(u),c.appendChild(d),Xe.appendChild(c),c.onclick=As.bind(this,c,A.SKILL_CHANGE_PANEL_CONTAINER,e)}}}.bind(this,e),pt.onclick(),s)&&Ke.querySelectorAll('[skillIndex="'+s+'"]')[0].onclick()},updateSelectedPanel:function(e){for(;Ve.firstChild;)Ve.removeChild(Ve.firstChild);for(;We.firstChild;)We.removeChild(We.firstChild);if(Ze.innerHTML="",Qe.innerHTML="",et.classList.add("disable"),e){bs=e;var t=R({},v.findData(L,"index",e)),s=document.createElement("img");if(-1!==t.nextSkillIndex)var i=R({},v.findData(L,"index",t.nextSkillIndex));var n=Ks(t,i).replace(/&nbsp;/g,"<br>");if(We.innerHTML=n,i)for(var a=We.getElementsByTagName("img"),r=0;r<a.length;r++)a[r].classList.remove("disable");s.src=D;var o=R({},v.findData(y,"index",t.skillIcon));s.style.clip=v.makeCssClipStyle(o,75/72),v.setImgCssStyle(s,o,75/72);var l=parseInt(Se.innerText),c=parseInt(_e.innerText),d="white";d=l>=t.upgradeGoldAmount?"green":"red",Ze.innerHTML="<span class='"+d+"'>"+t.upgradeGoldAmount+"<br>/ "+l,d=c>=t.upgradeJewelAmount?"green":"red",Qe.innerHTML="<span class='"+d+"'>"+t.upgradeJewelAmount+"<br>/ "+c,Ve.appendChild(s),$e.onclick=function(e){if(Ls&&bs)if(-1!==e.nextSkillIndex){var t=parseInt(Se.innerText),s=parseInt(_e.innerText);t>=e.upgradeGoldAmount&&s>=e.upgradeJewelAmount?(this.onSkillUpgrade(bs),Ls=!1,$e.getElementsByTagName("span")[0].classList.add("disable"),$e.getElementsByTagName("img")[0].classList.remove("disable"),this.serverResponseTimeout=setTimeout(function(){Ls||(Ls=!0,$e.getElementsByTagName("span")[0].classList.remove("disable"),$e.getElementsByTagName("img")[0].classList.add("disable"))},A.MAX_SERVER_RESPONSE_TIME)):this.makeFlashMessage("Not enough resource!!!")}else this.makeFlashMessage("Spell reach max level!!!")}.bind(this,t),et.classList.remove("disable"),-1!==t.nextSkillIndex?($e.getElementsByTagName("span")[0].innerHTML="Upgrade",skillUpgradeBlockMask.classList.add("disable")):($e.getElementsByTagName("span")[0].innerHTML="Max Level",skillUpgradeBlockMask.classList.remove("disable"),Ze.innerHTML="",Qe.innerHTML="")}else $e.onclick=new Function,$e.getElementsByTagName("span")[0].innerHTML=" ",skillUpgradeBlockMask.classList.remove("disable")},closePopUpSkillChange:function(){Ke.classList.contains("enable")&&(ks(),vs(Ke),pt.onclick())},setBoard:function(e,t){var s=[],i=[],n=0,a="",r=0;e.sort(function(e,t){return t.tS-e.tS});for(var o=0;o<e.length;o++)t===e[o].id&&(n=o+1,a=e[o].nm,userLevel=e[o].lv,r=e[o].kS,userScore=e[o].tS,userTotalKillCount=e[o].tK,this.updateKillCount(r,userTotalKillCount)),0!==o&&1!==o&&2!==o||s.push(e[o].id),i.push({rank:o+1,name:e[o].nm,level:e[o].lv,kill:e[o].kS,score:e[o].tS,totalKill:e[o].tK});var l="<h3>Rank</h3><hr>",c="<h3>Name</h3><hr>",d="<h3>Level</h3><hr>",u="<h3>Kills</h3><hr>",h="<h3>Score</h3><hr>",p="<h3>TotalKill</h3><hr>",f=10<i.length?10:i.length;for(o=0;o<f;o++){var m=!1;0!==o&&1!==o&&2!==o||(m=!0),n<=10&&n===o+1?m?(l+=0==o?"<img src='/images/rank1Icon.png'/>":1===o?"<img src='/images/rank2Icon.png'/>":"<img src='/images/rank3Icon.png'/>",c+="<p class='user ranker'>"+i[o].name+"</p>",d+="<p class='user ranker'>"+i[o].level+"</p>",u+="<p class='user ranker'>"+i[o].kill+"</p>",h+="<p class='user ranker'>"+i[o].score+"</p>",p+="<p class='user ranker'>"+i[o].totalKill+"</p>"):(l+="<p class='user'>"+i[o].rank+"</p>",c+="<p class='user'>"+i[o].name+"</p>",d+="<p class='user'>"+i[o].level+"</p>",u+="<p class='user'>"+i[o].kill+"</p>",h+="<p class='user'>"+i[o].score+"</p>",p+="<p class='user'>"+i[o].totalKill+"</p>"):m?(l+=0==o?"<img src='/images/rank1Icon.png'/>":1===o?"<img src='/images/rank2Icon.png'/>":"<img src='/images/rank3Icon.png'/>",c+="<p class='ranker'>"+i[o].name+"</p>",d+="<p class='ranker'>"+i[o].level+"</p>",u+="<p class='ranker'>"+i[o].kill+"</p>",h+="<p class='ranker'>"+i[o].score+"</p>",p+="<p class='ranker'>"+i[o].totalKill+"</p>"):(l+="<p>"+i[o].rank+"</p>",c+="<p>"+i[o].name+"</p>",d+="<p>"+i[o].level+"</p>",u+="<p>"+i[o].kill+"</p>",h+="<p>"+i[o].score+"</p>",p+="<p>"+i[o].totalKill+"</p>")}10<n&&(l+="<p class='user' style='font-size: 12px'>"+n+"</p>",c+="<p class='user' style='font-size: 12px'>"+a+"</p>",d+="<p class='user' style='font-size: 12px'>"+userLevel+"</p>",u+="<p class='user' style='font-size: 12px'>"+r+"</p>",h+="<p class='user' style='font-size: 12px'>"+userScore+"</p>",p+="<p class='user' style='font-size: 12px'>"+userTotalKillCount+"</p>"),Te.innerHTML=l,Ce.innerHTML=c,be.innerHTML=d,Le.innerHTML=u,ye.innerHTML=p,De.innerHTML=h,this.onSetRankers(s)},updateBoard:function(e,t){this.setBoard(e,t)},updateKillBoard:function(e,t){var s=document.createElement("span");s.classList.add("killFeedBack");var i="",n="white",a="white";switch(e.tp){case A.CHAR_TYPE_FIRE:n="red";break;case A.CHAR_TYPE_FROST:n="blue";break;case A.CHAR_TYPE_ARCANE:n="purple"}switch(t.tp){case A.CHAR_TYPE_FIRE:a="red";break;case A.CHAR_TYPE_FROST:a="blue";break;case A.CHAR_TYPE_ARCANE:a="purple"}if(e.nm)r=e.nm;else var r="NoName";if(t.nm)o=t.nm;else var o="NoName";if(e.uID===t.uID)i+="&nbsp; <span class="+n+">"+r+"</span>",i+="&nbsp; commit suicide";else if(e.fl){switch(e.fl){case A.KILL_FEEDBACK_LEVEL_0:break;case A.KILL_FEEDBACK_LEVEL_1:i+='<span class="feedbackLevel1 feedback" style="color : '+A.KILL_FEEDBACK_LEVEL_1_COLOR+'">'+A.KILL_FEEDBACK_LEVEL_1_PREFIX+"</span>",setTimeout(function(){ge.getElementsByClassName("feedbackLevel1")[0].classList.remove("feedbackLevel1")},50);break;case A.KILL_FEEDBACK_LEVEL_2:i+='<span class="feedbackLevel2 feedback" style="color : '+A.KILL_FEEDBACK_LEVEL_2_COLOR+'">'+A.KILL_FEEDBACK_LEVEL_2_PREFIX+"</span>",setTimeout(function(){ge.getElementsByClassName("feedbackLevel2")[0].classList.remove("feedbackLevel2")},50);break;case A.KILL_FEEDBACK_LEVEL_3:i+='<span class="feedbackLevel3 feedback" style="color : '+A.KILL_FEEDBACK_LEVEL_3_COLOR+'">'+A.KILL_FEEDBACK_LEVEL_3_PREFIX+"</span>",setTimeout(function(){ge.getElementsByClassName("feedbackLevel3")[0].classList.remove("feedbackLevel3")},50);break;case A.KILL_FEEDBACK_LEVEL_4:i+='<span class="feedbackLevel4 feedback" style="color : '+A.KILL_FEEDBACK_LEVEL_4_COLOR+'">'+A.KILL_FEEDBACK_LEVEL_4_PREFIX+"</span>",setTimeout(function(){ge.getElementsByClassName("feedbackLevel4")[0].classList.remove("feedbackLevel4")},50);break;case A.KILL_FEEDBACK_LEVEL_5:i+='<span class="feedbackLevel5 feedback" style="color : '+A.KILL_FEEDBACK_LEVEL_5_COLOR+'">'+A.KILL_FEEDBACK_LEVEL_5_PREFIX+"</span>",setTimeout(function(){ge.getElementsByClassName("feedbackLevel5")[0].classList.remove("feedbackLevel5")},50);break;case A.KILL_FEEDBACK_LEVEL_6:i+='<span class="feedbackLevel6 feedback" style="color : '+A.KILL_FEEDBACK_LEVEL_6_COLOR+'">'+A.KILL_FEEDBACK_LEVEL_6_PREFIX+"</span>",setTimeout(function(){ge.getElementsByClassName("feedbackLevel6")[0].classList.remove("feedbackLevel6")},50);break;case A.KILL_FEEDBACK_LEVEL_7:i+='<span class="feedbackLevel7 feedback" style="color : '+A.KILL_FEEDBACK_LEVEL_7_COLOR+'">'+A.KILL_FEEDBACK_LEVEL_7_PREFIX+"</span>",setTimeout(function(){ge.getElementsByClassName("feedbackLevel7")[0].classList.remove("feedbackLevel7")},50)}i+="&nbsp; <span class="+n+">"+r+"</span>",i+="&nbsp;&nbsp; kill ",i+="&nbsp; <span class="+a+">"+o+"</span>"}else i+="&nbsp; <span class="+n+">"+r+"</span>",i+="&nbsp;&nbsp;  kill ",i+="&nbsp; <span class="+a+">"+o+"</span>";i+="&nbsp;!!!<br>",s.innerHTML=i;for(var l=ge.getElementsByClassName("killFeedBack");5<=l.length;)ge.removeChild(l[0]);ge.appendChild(s),setTimeout(function(){s.classList.add("disappearSmoothAni"),setTimeout(function(){s.classList.remove("disappearSmoothAni"),s.classList.add("disable")},1e3)},5e3)},setMiniMapChests:function(e,t){vt.setAttribute("locationID",t[0].id),vt.style.left=Math.floor(100*t[0].posX/A.CANVAS_MAX_SIZE.width)+"%",vt.style.top=Math.floor(100*t[0].posY/A.CANVAS_MAX_SIZE.height)+"%",At.setAttribute("locationID",t[1].id),At.style.left=Math.floor(100*t[1].posX/A.CANVAS_MAX_SIZE.width)+"%",At.style.top=Math.floor(100*t[1].posY/A.CANVAS_MAX_SIZE.height)+"%",Rt.setAttribute("locationID",t[2].id),Rt.style.left=Math.floor(100*t[2].posX/A.CANVAS_MAX_SIZE.width)+"%",Rt.style.top=Math.floor(100*t[2].posY/A.CANVAS_MAX_SIZE.height)+"%",Pt.setAttribute("locationID",t[3].id),Pt.style.left=Math.floor(100*t[3].posX/A.CANVAS_MAX_SIZE.width)+"%",Pt.style.top=Math.floor(100*t[3].posY/A.CANVAS_MAX_SIZE.height)+"%",kt.setAttribute("locationID",t[4].id),kt.style.left=Math.floor(100*t[4].posX/A.CANVAS_MAX_SIZE.width)+"%",kt.style.top=Math.floor(100*t[4].posY/A.CANVAS_MAX_SIZE.height)+"%",Ot.setAttribute("locationID",t[5].id),Ot.style.left=Math.floor(100*t[5].posX/A.CANVAS_MAX_SIZE.width)+"%",Ot.style.top=Math.floor(100*t[5].posY/A.CANVAS_MAX_SIZE.height)+"%",Mt.setAttribute("locationID",t[6].id),Mt.style.left=Math.floor(100*t[6].posX/A.CANVAS_MAX_SIZE.width)+"%",Mt.style.top=Math.floor(100*t[6].posY/A.CANVAS_MAX_SIZE.height)+"%",xt.setAttribute("locationID",t[7].id),xt.style.left=Math.floor(100*t[7].posX/A.CANVAS_MAX_SIZE.width)+"%",xt.style.top=Math.floor(100*t[7].posY/A.CANVAS_MAX_SIZE.height)+"%",wt.setAttribute("locationID",t[8].id),wt.style.left=Math.floor(100*t[8].posX/A.CANVAS_MAX_SIZE.width)+"%",wt.style.top=Math.floor(100*t[8].posY/A.CANVAS_MAX_SIZE.height)+"%";for(var s=vt.parentNode.querySelectorAll("[type=chest]"),i=0;i<s.length-1;i++){(r=s[i].getElementsByTagName("img"))[0].src=A.MINIMAP_CHEST_GROUND_SRC}for(i=0;i<e.length;i++)for(var n=0;n<s.length-1;n++){var a=s[n].getAttribute("locationID");if(e[i].lID===a){var r=s[n].getElementsByTagName("img");1===e[i].gd||2===e[i].gd?r[0].src=A.MINIMAP_CHEST_SRC_1:3===e[i].gd||4===e[i].gd?r[0].src=A.MINIMAP_CHEST_SRC_2:5===e[i].gd&&(r[0].src=A.MINIMAP_CHEST_SRC_3);break}}},setMinimapZones:function(e,t){var s=document.getElementById("miniMapSafe1"),i=document.getElementById("miniMapSafe2"),n=document.getElementById("miniMapPortal1"),a=document.getElementById("miniMapPortal2"),r=document.getElementById("miniMapPortal3"),o=document.getElementById("miniMapPortal4");s.style.left=Math.floor(100*e[0].posX/A.CANVAS_MAX_SIZE.width)+"%",s.style.top=Math.floor(100*e[0].posY/A.CANVAS_MAX_SIZE.height)+"%",i.style.left=Math.floor(100*e[1].posX/A.CANVAS_MAX_SIZE.width)+"%",i.style.top=Math.floor(100*e[1].posY/A.CANVAS_MAX_SIZE.height)+"%",n.style.left=Math.floor(100*t[0].posX/A.CANVAS_MAX_SIZE.width)+"%",n.style.top=Math.floor(100*t[0].posY/A.CANVAS_MAX_SIZE.height)+"%",a.style.left=Math.floor(100*t[1].posX/A.CANVAS_MAX_SIZE.width)+"%",a.style.top=Math.floor(100*t[1].posY/A.CANVAS_MAX_SIZE.height)+"%",r.style.left=Math.floor(100*t[2].posX/A.CANVAS_MAX_SIZE.width)+"%",r.style.top=Math.floor(100*t[2].posY/A.CANVAS_MAX_SIZE.height)+"%",o.style.left=Math.floor(100*t[3].posX/A.CANVAS_MAX_SIZE.width)+"%",o.style.top=Math.floor(100*t[3].posY/A.CANVAS_MAX_SIZE.height)+"%"},createChest:function(e,t){for(var s=vt.parentNode.querySelectorAll("[type=chest]"),i=0;i<s.length;i++)if(e===s[i].getAttribute("locationID")){var n=s[i].getElementsByTagName("img");1===t||2===t?(n[0].src=A.MINIMAP_CHEST_SRC_1,n[0].classList.add("chestAni1"),n[1].classList.add("chestAni1")):3===t||4===t?(n[0].src=A.MINIMAP_CHEST_SRC_2,n[0].classList.add("chestAni2"),n[1].classList.add("chestAni2")):5===t&&(n[0].src=A.MINIMAP_CHEST_SRC_3,n[0].classList.add("chestAni3"),n[1].classList.add("chestAni3")),n[0].classList.add("chestAni"),n[1].classList.add("chestAni")}},deleteChest:function(e){for(var t=vt.parentNode.querySelectorAll("[type=chest]"),s=0;s<t.length;s++)if(e===t[s].getAttribute("locationID")){var i=t[s].getElementsByTagName("img");i[0].src=A.MINIMAP_CHEST_GROUND_SRC,i[0].classList.remove("chestAni"),i[1].classList.remove("chestAni"),i[0].classList.remove("chestAni1"),i[1].classList.remove("chestAni1"),i[0].classList.remove("chestAni2"),i[1].classList.remove("chestAni2"),i[0].classList.remove("chestAni3"),i[1].classList.remove("chestAni3")}},setUserPosition:function(e){Dt.style.left=Math.floor(100*e.x/A.CANVAS_MAX_SIZE.width)+"%",Dt.style.top=Math.floor(100*e.y/A.CANVAS_MAX_SIZE.height)+"%"},updateUserPosition:function(e){Dt.style.left=Math.floor(100*e.x/A.CANVAS_MAX_SIZE.width)+"%",Dt.style.top=Math.floor(100*e.y/A.CANVAS_MAX_SIZE.height)+"%"},showChatInput:function(){xe.classList.remove("disable"),we.select()},getChatMessage:function(){return we.value},disableChatInput:function(){xe.classList.add("disable")},clearChatInput:function(){we.value=""},playDeadScene:function(e,t,s,i,n,a,r){ve.style.width="100%",ve.style.height="100%",Ae.classList.remove("deadSceneBackgroundDefault"),Ae.classList.add("deadSceneBackgroundAni");var o="";o=t?e===t?"You kill yourself":"You are slain by <span class='yellow'>"+t+"</span>":"You are dead",Pe.innerHTML=o;var l="";switch(P){case A.CHAR_TYPE_FIRE:l+=s<a?"<span class='red'>"+p+"</span> level down to <span class='yellow'>"+s+"</span>":"<span class='yellow'>Lv "+s+" </span><span class='red'>"+p+"</span>",r&&(l+="<br><span class='red'>"+p+"</span>`s experience pass on to <span class='blue'>"+m+"</span> and <span class='purple'>"+E+"</span>");break;case A.CHAR_TYPE_FROST:l+=s<a?"<span class='blue'>"+m+"</span> level down to <span class='yellow'>"+s+"</span>":"<span class='yellow'>Lv "+s+" </span><span class='blue'>"+m+"</span>",r&&(l+="<br><span class='blue'>"+m+"</span>`s experience pass on to <span class='blue'>"+p+"</span> and <span class='purple'>"+E+"</span>");break;case A.CHAR_TYPE_ARCANE:l+=s<a?"<span class='purple'>"+E+"</span> level down to <span class='yellow'>"+s+"</span>":"<span class='yellow'>Lv "+s+" </span><span class='purple'>"+E+"</span>",r&&(l+="<br><span class='purple'>"+E+"</span>`s experience pass on to <span class='red'>"+p+"</span> and <span class='blue'>"+m+"</span>")}if(n&&(l+="<br><span class='red'>Some knowledges have lost...<span class='smallFont'>[Some skills level down]</span></span>"),ke.innerHTML=l,i.gold)var c="<span class='red'> -"+i.gold+"</span>";else c=i.gold;if(i.jewel)var d="<span class='red'> -"+i.jewel+"</span>";else d=i.jewel;Oe.innerHTML=c,Me.innerHTML=d,setTimeout(function(){Re.classList.remove("deadSceneTextDefault"),Re.classList.add("deadSceneTextAni")},A.DEAD_SCENE_TEXT_ANI_PLAY_DELAY_TIME);var u=v.isNumeric(parseInt(Se.innerText)-i.gold)?parseInt(Se.innerText)-i.gold:0,h=v.isNumeric(parseInt(_e.innerText)-i.jewel)?parseInt(_e.innerText)-i.jewel:0;this.setResource({g:u,j:h})},disableDeadScene:function(){Pe.innerHTML="",Ae.classList.remove("deadSceneBackgroundAni"),Ae.classList.add("deadSceneBackgroundDefault"),Re.classList.remove("deadSceneTextAni"),Re.classList.add("deadSceneTextDefault"),ve.style.width="0%",ve.style.height="0%",l.classList.add("disappearSmoothAni"),l.classList.remove("enable"),setTimeout(function(){l.classList.add("disable"),l.classList.remove("disappearSmoothAni")},1e3)},bottomToRight:function(){ce.classList.add("bottomRightCenterToRight")},rightToBottom:function(){ce.classList.remove("bottomRightCenterToRight")},playReconnectScene:function(){He.classList.remove("disable"),Wt=setTimeout(function e(){var t="connecting";switch(Vt){case 1:t+=".";break;case 2:t+="..";break;case 3:t+="..."}Vt++;3<Vt&&(Vt=1);je.innerHTML=t;Wt=setTimeout(e,500)},500)},updateKeySettings:function(e){bindE.placeholder=v.keyCodeToChar(e.BindingE),bindSpace.placeholder=v.keyCodeToChar(e.BindingSpace),bindA.placeholder=v.keyCodeToChar(e.BindingA),bind1.placeholder=v.keyCodeToChar(e.Binding1),bind2.placeholder=v.keyCodeToChar(e.Binding2),bind3.placeholder=v.keyCodeToChar(e.Binding3),bind4.placeholder=v.keyCodeToChar(e.Binding4),bindS.placeholder=v.keyCodeToChar(e.BindingS),bindG.placeholder=v.keyCodeToChar(e.BindingG),bindHome.placeholder=v.keyCodeToChar(e.BindingHome)},resetKeySettings:function(){Je.BindingE=ls,Je.BindingSpace=cs,Je.BindingA=ds,Je.Binding1=us,Je.Binding2=hs,Je.Binding3=ps,Je.Binding4=fs,Je.BindingS=ms,Je.BindingG=gs,Je.BindingHome=Es,Je.BindingEnter=Is,Je.BindingEsc=Ss,this.updateKeySettings(Je)},disableReconnectScene:function(){Wt&&clearTimeout(Wt),He.classList.add("disable")},disableDisplayAd:function(){jt.classList.add("disable")},enableDisplayAd:function(){jt.classList.remove("disable")},checkVideoAd:function(e,t){if(ys)this.onStartBtnClick(e,t);else{var s=this;setTimeout(function(){s.checkVideoAd.call(s,e,t)},200)}}},t.exports=Ds},{"../public/gameConfig.json":10,"../public/objectAssign.js":12,"../public/serverList.json":14,"../public/util.js":15,"../public/youtuberList.json":16}],6:[function(e,t,s){var i=e("../public/util.js"),n=e("./CSkill.js"),a=e("../public/gameConfig.json"),r=function(e,t,s){this.objectID=e.oID,this.name=e.nm,this.type=e.tp,this.imgData=e.imgData,this.textCanvas=t,this.textScaleFactor=s,this.isRender=!0,this.hitImgDataList=[],this.buffImgDataList=[],this.imgHandIndex=0,this.level=e.lv,this.exp=e.ep,this.maxHP=e.mHP,this.maxMP=e.mMP,this.HP=e.HP,this.MP=e.MP,this.castSpeed=e.csp,this.conditions=e.cdt,this.currentState=null,this.currentSkill=void 0,this.isExecutedSkill=!1,this.skillCastEffectPlay=!1,this.castEffectFactor=1,this.isMoveBackward=!1,this.effectTimer=Date.now(),this.effectRotateDegree=0,this.effectIndex=0,this.size={width:a.USER_BODY_SIZE,height:a.USER_BODY_SIZE},this.position=e.pos,this.targetPosition=e.tpos,this.direction=e.dir,this.rotateSpeed=e.rsp,this.maxSpeed=e.msp,this.center={x:0,y:0},this.speed={x:0,y:0},this.targetDirection=0,this.timer=Date.now(),this.castingEndTime=!1,this.setCenter(),this.setSpeed(),this.setTargetDirection(),this.chatMessage1="",this.chatMessage2="",this.chatMessage1StartTime=Date.now(),this.chatMessage2StartTime=Date.now(),this.updateInterval=!1,this.imgHandTimeout=!1,this.updateFunction=null,this.entityTreeEle={x:this.position.x,y:this.position.y,width:this.size.width,height:this.size.height,id:this.objectID},this.moveUIUpdateTimer=Date.now(),this.onMove=new Function,this.onMainUserMove=new Function};r.prototype={changeState:function(e){switch(this.currentState=e,this.stop(),this.currentState){case a.OBJECT_STATE_IDLE:this.updateFunction=this.idle.bind(this);break;case a.OBJECT_STATE_MOVE:this.updateFunction=this.rotate.bind(this);break;case a.OBJECT_STATE_ATTACK:this.updateFunction=this.attack.bind(this);break;case a.OBJECT_STATE_CAST:this.updateFunction=this.rotate.bind(this);break;case a.OBJECT_STATE_DEATH:this.updateFunction=this.idle.bind(this);break;case a.OBJECT_STATE_MOVE_AND_ATTACK:this.updateFunction=this.rotate.bind(this)}this.update()},update:function(){this.updateInterval=setInterval(this.updateFunction,25)},setCenter:function(){this.center.x=this.position.x+this.size.width/2,this.center.y=this.position.y+this.size.height/2},idle:function(){this.doEveryTick()},rotate:function(){var e=(Date.now()-this.timer)/1e3;i.rotate.call(this,e),this.doEveryTick()},move:function(e,t){t?i.move.call(this,e,t):i.move.call(this,e),500<Date.now()-this.moveUIUpdateTimer&&(this.moveUIUpdateTimer=Date.now(),this.onMainUserMove())},setTargetDirection:function(e){i.setTargetDirection.call(this,e)},setSpeed:function(e){i.setSpeed.call(this,e)},attack:function(){this.executeSkill(),this.doEveryTick()},doEveryTick:function(){this.timer=Date.now();for(var e=this.hitImgDataList.length-1;0<=e;e--)Date.now()-this.hitImgDataList[e].startTime>=this.hitImgDataList[e].resourceLifeTime&&this.hitImgDataList.splice(e,1);Date.now()-this.chatMessage1StartTime>=a.CHAT_MESSAGE_TIME&&(this.chatMessage1=this.chatMessage2,this.chatMessage1StartTime=this.chatMessage2StartTime,this.chatMessage2="",this.chatMessage2StartTime=Date.now()),this.isRender&&Date.now()-this.effectTimer>=a.USER_ATTACH_EFFECT_CHANGE_TIME&&(this.effectTimer=Date.now(),this.effectRotateDegree+=10,100<this.effectIndex?this.effectIndex=0:this.effectIndex+=1,360<=this.effectRotateDegree&&(this.effectRotateDegree-=360))},updateBuffImgData:function(e){this.buffImgDataList=e},updateSkillHitImgData:function(e){e.startTime=Date.now(),this.hitImgDataList.push(e)},stop:function(){this.updateInterval&&(clearInterval(this.updateInterval),this.updateInterval=!1),this.currentSkill&&(this.currentSkill.destroy(),this.currentSkill=void 0,this.isExecutedSkill=!1,this.skillCastEffectPlay=!1),this.imgHandTimeout&&(clearTimeout(this.imgHandTimeout),this.imgHandTimeout=!1),this.isMoveBackward=!1,this.imgHandIndex=0,this.castingEndTime=!1},setEntityEle:function(){this.entityTreeEle={x:this.position.x,y:this.position.y,width:this.size.width,height:this.size.height,id:this.objectID}},makeSkillInstance:function(e){var t=Math.floor(a.USER_ANI_TIME*(100/this.castSpeed)),s=new n(e,e.fireTime-t);return s.onUserAniStart=function(e,t){var s=t/5;this.castingEndTime=Date.now()+(e.totalTime-e.userAniStartTime),this.imgHandTimeout=setTimeout(function e(t){this.imgHandIndex<4?(this.imgHandIndex++,this.imgHandTimeout=setTimeout(e.bind(this,t),t)):this.imgHandIndex=0}.bind(this,s),s)}.bind(this,s,t),s.onTimeOver=function(e){e.destroy(),this.currentSkill=void 0,this.isExecutedSkill=!1,this.skillCastEffectPlay=!1,this.castingEndTime=!1,this.changeState(a.OBJECT_STATE_IDLE,"onTimeOverHandler")}.bind(this,s),s},setSkill:function(e){this.currentSkill=e},executeSkill:function(){try{!this.isExecutedSkill&&this.currentSkill&&(this.skillCastEffectPlay=!0,this.skillCastEffectStartTime=Date.now(),this.isExecutedSkill=!0,this.currentSkill.executeSkill()),this.setCastEffectFactor()}catch(e){}},setCastEffectFactor:function(){var e=Date.now()-this.skillCastEffectStartTime;this.castEffectFactor=i.interpolationSine(e)},updateSkillPossessions:function(e){this.possessSkills=e},makeProjectile:function(e,t,s){return t.makeProjectile(this.center,e,s)},changePosition:function(e){this.position.x=e.x-this.size.width/2,this.position.y=e.y-this.size.height/2,this.setCenter()},setChatMsg:function(e){this.chatMessage2?(this.chatMessage1=this.chatMessage2,this.chatMessage1StartTime=this.chatMessage2StartTime,this.chatMessage2=e,this.chatMessage2StartTime=Date.now()):this.chatMessage1?(this.chatMessage2=e,this.chatMessage2StartTime=Date.now()):(this.chatMessage1=e,this.chatMessage1StartTime=Date.now())},getCurrentState:function(){return this.currentState},getCurrentSkillIndex:function(){return this.currentSkill.index},setRenderVar:function(e){this.isRender=e},updateTextCanvas:function(e){this.textCanvas=e}},t.exports=r},{"../public/gameConfig.json":10,"../public/util.js":15,"./CSkill.js":4}],7:[function(n,a,e){(function(e){var t=e.WebSocket||e.MozWebSocket,i=n("msgpack-js");function s(){this.isFirst=!0,this.number=0,this.autoReconnectInterval=2e3}s.prototype.open=function(e){this.url=e,this.instance=new t(this.url),this.instance.binaryType="arraybuffer",this.instance.onopen=function(){this.isFirst?this.onopen():this.emit("needReconnect");this.isFirst=!1}.bind(this),this.instance.onmessage=function(e,t){this.number++,this.onmessage(e,t,this.number)}.bind(this),this.instance.onclose=function(e){switch(e){case 1e3:break;default:this.reconnect(e)}this.onclose(e)}.bind(this),this.instance.onerror=function(e){switch(e.code){case"ECONNREFUSED":this.reconnect(e);break;default:this.onerror(e)}}.bind(this)},s.prototype.send=function(e,t){try{this.instance.send(e,t)}catch(e){this.instance.emit("error",e)}},s.prototype.emit=function(e){for(var t=[],s=1;s<arguments.length;s++)t.push(arguments[s]);1===this.instance.readyState&&this.send(i.encode({type:e,vars:t}))},s.prototype.reconnect=function(e){this.instance.onopen=new Function,this.instance.onmessage=new Function,this.instance.onclose=new Function,this.instance.onerror=new Function;var t=this;setTimeout(function(){t.open(t.url)},this.autoReconnectInterval)},s.prototype.close=function(){this.instance&&this.instance.close()},s.prototype.onopen=function(e){},s.prototype.onmessage=function(e,t,s){},s.prototype.onerror=function(e){},s.prototype.onclose=function(e){},a.exports=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"msgpack-js":29}],8:[function(e,t,s){function l(e){return"string"==typeof e?e:!0===e?'"':null}function d(e){if(null===e)return"null";if(e&&(1===e.nodeType||9===e.nodeType))return"element";var t=Object.prototype.toString.call(e).match(/\[object (.*?)\]/)[1].toLowerCase();if("number"===t){if(isNaN(e))return"nan";if(!isFinite(e))return"infinity"}return t}function p(e,t,s,i,n){return"undefined"===d(e)?u("",t,s,i,n):"null"===d(e)?u("null",t,s,i,n):Array.isArray(e)?function(e,s,i,t,n){if(a=e,a.every(function(e){var t=d(e);return!t.match(/array|object/)}))return u(e.join(";"),s,i+n.arrayDenote,t,n);var a;e.forEach(function(e,t){return p(e,s,i+n.arrayDenote,t,n)})}(e,t,s,i,n):"object"==typeof e?(a=e,r=t,o=s,l=i,c=n,void Object.keys(a).forEach(function(e){return p(a[e],r,o+c.objectDenote+e,l,c)})):u(String(e),t,s,i,n);var a,r,o,l,c}function u(e,t,s,i,n){return t&&t[s]||(t[s]=[]),i<t[s].length&&(i=t[s].length),t[s][i]=e,t}function h(e){return e?String(e).trim().replace(/^["|'](.*)["|']$/,"$1"):""}function f(e,t,s){if(s&&-1!==e.indexOf(s))return function(e,t,s){t=t||",",s=s||'"';var i=new RegExp("(?!\\s*$)\\s*(?:"+s+"([^"+s+"\\\\]*(?:\\\\[\\S\\s][^"+s+"\\\\]*)*)"+s+"|([^"+t+s+"\\s\\\\]*(?:\\s+[^"+t+s+"\\s\\\\]+)*))\\s*(?:"+t+"|$)","g"),n=[];e.replace(i,function(e,t,s){return void 0!==t?n.push(t.replace(/\\'/g,"'")):void 0!==s&&n.push(s),""}),/,\s*$/.test(e)&&n.push("");return n}(e,t,s);var i=[];return e.split(t).forEach(function(e){var t=e.trim();i.push(t)}),i}t.exports={toObject:function(e,t){var s=(t=t||{}).delimiter||",",a=l(t.quote),i=e,r=null;if("string"!=typeof i)throw new Error("Invalid input, input data should be a string");i=i.split(/[\n\r]+/gi),"string"==typeof t.headers?(r=t.headers.split(/[\n\r]+/gi),r=a?f(r.shift(),s,a):r.shift().split(s)):r=a?f(i.shift(),s,a):i.shift().split(s);var o=[];return i.forEach(function(i){if(i){i=a?f(i,s,a):i.split(s);var n={};r.forEach(function(e,t){var s=h(i[t]);parseInt(s)||0===parseInt(s)?n[e]=parseInt(s):parseFloat(s)?n[e]=parseFloat(s):n[e]=s}),o.push(n)}}),o},toArray:function(e,t){var s=(t=t||{}).delimiter||",",i=l(t.quote),n=e;if("string"!=typeof n)throw new Error("Invalid input, input data should be a string");n=n.split(/[\n\r]+/gi);var a=[];return n.forEach(function(e){e&&(e=(e=i?f(e,s,i):e.split(s)).map(function(e){return h(e)}),a.push(e))}),a},toColumnArray:function(e,t){var s=(t=t||{}).delimiter||",",i=l(t.quote),n=e,a=null;if("string"!=typeof n)throw new Error("Invalid input, input data should be a string");n=n.split(/[\n\r]+/gi),"string"==typeof t.headers?(a=t.headers.split(/[\n\r]+/gi),a=i?f(a.shift(),s,i):a.shift().split(s)):a=i?f(n.shift(),s,i):n.shift().split(s);var r={};return a.forEach(function(e){r[e]=[]}),n.forEach(function(e){e&&(e=i?f(e,s,i):e.split(s)).forEach(function(e,t){r[a[t]].push(h(e))})}),r},toSchemaObject:function(e,t){var i=(t=t||{}).delimiter||",",n=l(t.quote),s=e,a=null;if("string"!=typeof s)throw new Error("Invalid input, input should be a string");s=s.split(/[\n\r]+/gi),"string"==typeof t.headers?(a=t.headers.split(/[\n\r]+/gi),a=n?f(a.shift(),i,n):a.shift().split(i)):a=n?f(s.shift(),i,n):s.shift().split(i);var r=[];return s.forEach(function(e){if(e){e=n?f(e,i,n):e.split(i);var s={};e.forEach(function(e,t){!function e(t,s,i,n,a){var r,o,l=t.match(/\[*[\d]\]\.(\w+)|\.|\[\]|\[(.)\]|-|\+/gi);if(l){var c=l[0];if(-1!==l.indexOf("-"))return!0;if(-1!==l.indexOf(".")){var d=t.split(".");o=d.shift(),i[o]=i[o]||{},e(d.join("."),s,i[o],n,a)}else if(-1!==l.indexOf("[]"))r=t.replace(/\[\]/gi,""),i[r]||(i[r]=[]),i[r].push(s);else if(/\[*[\d]\]\.(\w+)/.test(c)){r=t.split("[").shift();var u=parseInt(c.match(/\[(.)\]/).pop(),10);o=t.split(".").pop(),i[r]=i[r]||[],i[r][u]=i[r][u]||{},i[r][u][o]=s}else if(/\[(.)\]/.test(c)){var n=c.match(/\[(.)\]/).pop();r=t.replace(/\[(.)\]/gi,""),i[r]=f(s,n,a)}else-1!==l.indexOf("+")&&(r=t.replace(/\+/gi,""),i[r]=Number(s))}else i[t]=h(s);return i}(a[t],e,s,i,n)}),r.push(s)}}),r},toCSV:function(e,t){(t=t||{}).delimiter=t.delimiter||",",t.wrap=t.wrap||"",t.arrayDenote=t.arrayDenote&&String(t.arrayDenote).trim()?t.arrayDenote:"[]",t.objectDenote=t.objectDenote&&String(t.objectDenote).trim()?t.objectDenote:".",t.detailedOutput="boolean"!=typeof t.detailedOutput||t.detailedOutput,t.headers=String(t.headers).toLowerCase();var s={},i="";t.headers.match(/none|full|relative|key/)?t.headers=t.headers.match(/none|full|relative|key/)[0]:t.headers="full";!0===t.wrap&&(t.wrap='"');"string"==typeof e&&(e=JSON.parse(e));p(e,s,"",0,t);var n=function(e,t,s){var i=/([^\[\]\.]+)$/,n=/\[\]\.?([^\[\]]+)$/;switch(e){case"none":return null;case"full":return Object.keys(t);case"key":return Object.keys(t).map(function(e){var t=e.match(i);return t&&2===t.length?t[1]:e});case"relative":return Object.keys(t).map(function(e){var t=e.match(n);return t&&2===t.length?t[1]:e})}}(t.headers,s);n&&(t.wrap&&(n=n.map(function(e){return t.wrap+e+t.wrap})),i=n.join(t.delimiter));var a=(c=s,d=0,Object.keys(c).forEach(function(e){Array.isArray(c[e])&&c[e].length>d&&(d=c[e].length)}),d),r=Object.keys(s),o=[],l=/\n|\r/g;var c,d;t.wrap||(l=new RegExp("\n|\r|"+t.delimiter,"g"));for(var u=0;u<a;u++){o=[];for(var h=0;h<r.length;h++)s[r[h]][u]?(s[r[h]][u]=s[r[h]][u].replace(l,"\t"),t.wrap&&(s[r[h]][u]=t.wrap+s[r[h]][u]+t.wrap),o[o.length]=s[r[h]][u]):o[o.length]="";i+="\n"+o.join(t.delimiter)}return i}}},{}],9:[function(e,t,s){t.exports={userStatData:"index,level,needExp,type,power,magic,speed,imgData\n1,1,150,1,22,14,19,1\n2,2,200,1,24,15,21,1\n3,3,250,1,27,17,23,1\n4,4,300,1,29,18,25,1\n5,5,350,1,32,20,27,1\n6,6,400,1,34,21,29,2\n7,7,500,1,37,23,31,2\n8,8,600,1,39,24,33,2\n9,9,700,1,42,26,35,2\n10,10,800,1,44,27,37,2\n11,11,900,1,47,29,39,3\n12,12,1000,1,49,30,41,3\n13,13,1100,1,52,32,43,3\n14,14,1300,1,54,33,45,3\n15,15,1500,1,57,35,47,3\n16,16,1700,1,59,36,49,4\n17,17,1900,1,62,38,51,4\n18,18,2200,1,64,39,53,4\n19,19,2500,1,67,41,55,4\n20,20,-1,1,69,42,57,5\n101,1,150,2,17,21,17,6\n102,2,200,2,19,23,18,6\n103,3,250,2,21,26,20,6\n104,4,300,2,23,28,21,6\n105,5,350,2,25,31,23,6\n106,6,400,2,27,33,24,7\n107,7,500,2,29,36,26,7\n108,8,600,2,31,38,27,7\n109,9,700,2,33,41,29,7\n110,10,800,2,35,43,30,7\n111,11,900,2,37,46,32,8\n112,12,1000,2,39,48,33,8\n113,13,1100,2,41,51,35,8\n114,14,1300,2,43,53,36,8\n115,15,1500,2,45,56,38,8\n116,16,1700,2,47,58,39,9\n117,17,1900,2,49,61,41,9\n118,18,2200,2,51,63,42,9\n119,19,2500,2,53,66,44,9\n120,20,-1,2,55,68,45,10\n201,1,150,3,18,15,22,11\n202,2,200,3,20,16,24,11\n203,3,250,3,22,18,27,11\n204,4,300,3,24,19,29,11\n205,5,350,3,26,21,32,11\n206,6,400,3,28,22,34,12\n207,7,500,3,30,24,37,12\n208,8,600,3,32,25,39,12\n209,9,700,3,34,27,42,12\n210,10,800,3,36,28,44,12\n211,11,900,3,38,30,47,13\n212,12,1000,3,40,31,49,13\n213,13,1100,3,42,33,52,13\n214,14,1300,3,44,34,54,13\n215,15,1500,3,46,36,57,13\n216,16,1700,3,48,37,59,14\n217,17,1900,3,50,39,62,14\n218,18,2200,3,52,40,64,14\n219,19,2500,3,54,42,67,14\n220,20,-1,3,56,43,69,15\n",skillData:"index,name,level,type,property,tier,groupIndex,nextSkillIndex,totalTime,fireTime,cooldown,range,explosionRadius,explosionDamageRate,consumeMP,fireDamage,frostDamage,arcaneDamage,doDamageToMP,damageToMPRate,doDamageToSelf,damageToSelfRate,healHP,healHPRate,healMP,healMPRate,repeatDelay,repeatCount,buffToSelf,buffToTarget,projectileCount,radius,maxSpeed,lifeTime,tickTime,upgradeGoldAmount,upgradeJewelAmount,clientName,clientDesc,effectLastTime,skillIcon,hitEffectGroup,explosionEffectGroup,projectileEffectGroup,exchangeToGold,exchangeToJewel\n11,PyroBaseAttack1,1,1,1,1,10,12,500,400,150,60,45,0,0,100,0,0,0,0,0,0,0,0,0,0,0,0,,1,0,0,0,0,0,500,0,Pyro Attack, Damage to near front &nbsp; Ignite enemy(20%),300,1,6,,,200,\n12,PyroBaseAttack2,2,1,1,1,10,13,500,400,150,60,45,0,0,130,0,0,0,0,0,0,0,0,0,0,0,0,,1,0,0,0,0,0,1000,0,Pyro Attack, Damage to near front &nbsp; Ignite enemy(20%) <img src='/images/upIcon.png' class='disable' />,300,1,6,,,200,\n13,PyroBaseAttack3,3,1,1,1,10,14,500,400,150,60,47,0,0,150,0,0,0,0,0,0,0,0,0,0,0,0,,2,0,0,0,0,0,1500,1,Pyro Attack, Damage to near front &nbsp; Ignite enemy(30%),300,1,6,,,200,\n14,PyroBaseAttack4,4,1,1,1,10,15,500,400,150,60,47,0,0,180,0,0,0,0,0,0,0,0,0,0,0,0,,2,0,0,0,0,0,2000,2,Pyro Attack, Damage to near front &nbsp; Ignite enemy(30%) <img src='/images/upIcon.png' class='disable' />,300,1,6,,,200,\n15,PyroBaseAttack5,5,1,1,1,10,-1,500,400,150,60,50,0,0,200,0,0,0,0,0,0,0,0,0,0,0,0,,3,0,0,0,0,0,0,0,Pyro Attack, Damage to near front &nbsp; Ignite enemy(40%),300,1,6,,,200,\n21,FireBolt1,1,3,1,1,20,22,500,300,2500,0,0,0,40,300,0,0,0,0,0,0,0,0,0,0,0,0,,2,1,30,650,1500,0,500,0,Fire Bolt, Fire projectile &nbsp; Ignite enemy(30%),0,2,6,,,200,\n22,FireBolt2,2,3,1,1,20,23,500,300,2500,0,0,0,50,330,0,0,0,0,0,0,0,0,0,0,0,0,,2,1,30,650,1500,0,1000,0,Fire Bolt, Fire projectile &nbsp; Ignite enemy(30%) <img src='/images/upIcon.png' class='disable' />,0,2,6,,,200,\n23,FireBolt3,3,3,1,1,20,24,500,300,2500,0,0,0,60,360,0,0,0,0,0,0,0,0,0,0,0,0,,3,1,32,650,1500,0,1500,1,Fire Bolt, Fire projectile &nbsp; Ignite enemy(40%),0,2,6,,,200,\n24,FireBolt4,4,3,1,1,20,25,500,300,2500,0,0,0,70,390,0,0,0,0,0,0,0,0,0,0,0,0,,3,1,32,650,1500,0,2000,2,Fire Bolt, Fire projectile &nbsp; Ignite enemy(40%) <img src='/images/upIcon.png' class='disable' />,0,2,6,,,200,\n25,FireBolt5,5,3,1,1,20,-1,500,300,2500,0,0,0,80,420,0,0,0,0,0,0,0,0,0,0,0,0,,4,1,35,650,1500,0,0,0,Fire Bolt, Fire projectile &nbsp; Ignite enemy(50%),0,2,6,,,200,\n31,BurningSoul1,1,11,1,1,30,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,,0,0,0,0,0,500,0,Burning Soul, +4 HP regen <img src='/images/upIcon.png' class='disable' />,0,3,,,,200,\n32,BurningSoul2,2,11,1,1,30,33,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,,0,0,0,0,0,1000,0,Burning Soul, +6 HP regen <img src='/images/upIcon.png' class='disable' />  <img src='/images/plusIcon.png' class='disable' />,0,3,,,,200,\n33,BurningSoul3,3,11,1,1,30,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,,0,0,0,0,0,1500,1,Burning Soul, +7 HP regen <img src='/images/upIcon.png' class='disable' /> &nbsp; +300 HP,0,3,,,,200,\n34,BurningSoul4,4,11,1,1,30,35,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,,0,0,0,0,0,2000,2,Burning Soul, +9 HP regen <img src='/images/upIcon.png' class='disable' /> &nbsp; +300 HP <img src='/images/upIcon.png' class='disable' /> <img src='/images/plusIcon.png' class='disable' />,0,3,,,,200,\n35,BurningSoul5,5,11,1,1,30,-1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10,,0,0,0,0,0,0,0,Burning Soul, +10 HP regen &nbsp; +500 HP &nbsp; +10% Damage rate,0,3,,,,200,\n41,FireBall1,1,4,1,1,40,42,800,600,8000,0,110,0,100,350,0,0,0,0,0,0,0,0,0,0,0,0,,2,1,30,550,1500,0,1000,0,Fire Ball, Fire explosive projectile &nbsp; Ignite enemy(30%),300,4,6,,,400,\n42,FireBall2,2,4,1,1,40,43,800,600,8000,0,110,0,120,410,0,0,0,0,0,0,0,0,0,0,0,0,,2,1,30,550,1500,0,1500,1,Fire Ball, Fire explosive projectile &nbsp; Ignite enemy(30%) <img src='/images/upIcon.png' class='disable' />,300,4,6,,,400,\n43,FireBall3,3,4,1,1,40,44,800,600,8000,0,120,0,140,450,0,0,0,0,0,0,0,0,0,0,0,0,,3,1,35,550,1500,0,2000,2,Fire Ball, Fire explosive projectile &nbsp; Ignite enemy(40%),300,4,6,,,400,\n44,FireBall4,4,4,1,1,40,45,800,600,8000,0,120,0,160,510,0,0,0,0,0,0,0,0,0,0,0,0,,3,1,35,550,1500,0,2500,3,Fire Ball, Fire explosive projectile &nbsp; Ignite enemy(40%) <img src='/images/upIcon.png' class='disable' />,300,4,6,,,400,\n45,FireBall5,5,4,1,1,40,-1,800,600,8000,0,130,0,180,550,0,0,0,0,0,0,0,0,0,0,0,0,,4,1,40,550,1500,0,0,0,Fire Ball, Fire explosive projectile &nbsp; Ignite enemy(50%),300,4,6,,,400,\n51,InnerFire1,1,8,1,2,50,52,500,300,25000,0,0,0,100,0,0,0,0,0,1,100,0,0,0,0,0,0,11,16,0,0,0,0,0,1000,0,Inner Fire, +20% Damage rate <img src='/images/upIcon.png' class='disable' /> &nbsp; Make Ignite oneself,0,5,,,,400,\n52,InnerFire2,2,8,1,2,50,53,500,300,25000,0,0,0,120,0,0,0,0,0,1,100,0,0,0,0,0,0,12,16,0,0,0,0,0,1500,1,Inner Fire, +27% Damage rate <img src='/images/upIcon.png' class='disable' /> &nbsp; Make Ignite oneself <img src='/images/plusIcon.png' class='disable' />,0,5,,,,400,\n53,InnerFire3,3,8,1,2,50,54,500,300,25000,0,0,0,140,0,0,0,0,0,1,100,0,0,0,0,0,0,13,16,0,0,0,0,0,2000,2,Inner Fire, +30% Damage rate <img src='/images/upIcon.png' class='disable' /> &nbsp; Make Ignite oneself &nbsp; +10% Fire resistance,0,5,,,,400,\n54,InnerFire4,4,8,1,2,50,55,500,300,25000,0,0,0,160,0,0,0,0,0,1,100,0,0,0,0,0,0,14,16,0,0,0,0,0,2500,3,Inner Fire, +37% Damage rate <img src='/images/upIcon.png' class='disable' /> &nbsp; Make Ignite oneself &nbsp; +10% Fire resistance <img src='/images/upIcon.png' class='disable' /> <img src='/images/plusIcon.png' class='disable' />,0,5,,,,400,\n55,InnerFire5,5,8,1,2,50,-1,500,300,25000,0,0,0,180,0,0,0,0,0,1,100,0,0,0,0,0,0,15,16,0,0,0,0,0,0,0,Inner Fire, +40% Damage rate &nbsp; Make Ignite oneself &nbsp; +15% Fire resistance &nbsp; +3 HP regen,0,5,,,,400,\n61,RollingFire1,1,5,1,3,60,62,800,600,15000,0,0,0,130,50,0,0,0,0,0,0,0,0,0,0,0,0,,1,1,50,280,2000,60,1500,1,Rolling Fire, Fire rolling projectile &nbsp; Ignite enemy(20%),0,6,6,,1007,900,\n62,RollingFire2,2,5,1,3,60,63,800,600,15000,0,0,0,160,65,0,0,0,0,0,0,0,0,0,0,0,0,,1,1,50,280,2000,60,2000,2,Rolling Fire, Fire rolling projectile &nbsp; Ignite enemy(20%) <img src='/images/upIcon.png' class='disable' />,0,6,6,,1007,900,\n63,RollingFire3,3,5,1,3,60,64,800,600,15000,0,0,0,190,75,0,0,0,0,0,0,0,0,0,0,0,0,,2,1,53,280,2000,60,2500,3,Rolling Fire, Fire rolling projectile &nbsp; Ignite enemy(30%),0,6,6,,1007,900,\n64,RollingFire4,4,5,1,3,60,65,800,600,15000,0,0,0,220,90,0,0,0,0,0,0,0,0,0,0,0,0,,2,1,53,280,2000,60,3000,4,Rolling Fire, Fire rolling projectile &nbsp; Ignite enemy(30%) <img src='/images/upIcon.png' class='disable' />,0,6,6,,1007,900,\n65,RollingFire5,5,5,1,3,60,-1,800,600,15000,0,0,0,250,100,0,0,0,0,0,0,0,0,0,0,0,0,,3,1,55,280,2000,60,0,0,Rolling Fire, Fire rolling projectile &nbsp; Ignite enemy(40%),0,6,6,,1007,900,\n71,Fury1,1,11,1,3,70,72,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,,0,0,0,0,0,1500,1,Fury, +5% Move and Cast speed <img src='/images/upIcon.png' class='disable' />,0,7,,,,900,\n72,Fury2,2,11,1,3,70,73,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,18,,0,0,0,0,0,2000,2,Fury, +8% Move and Cast speed <img src='/images/upIcon.png' class='disable' /> <img src='/images/plusIcon.png' class='disable' />,0,7,,,,900,\n73,Fury3,3,11,1,3,70,74,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,19,,0,0,0,0,0,2500,3,Fury, +10% Move and Cast speed <img src='/images/upIcon.png' class='disable' /> &nbsp; +10% Move and Cast speed[While Ignite],0,7,,,,900,\n74,Fury4,4,11,1,3,70,75,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,20,,0,0,0,0,0,3000,4,Fury, +13% Move and Cast speed <img src='/images/upIcon.png' class='disable' /> &nbsp; +10% Move and Cast speed[While Ignite] <img src='/images/upIcon.png' class='disable' /> <img src='/images/plusIcon.png' class='disable' />,0,7,,,,900,\n75,Fury5,5,11,1,3,70,-1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,21,,0,0,0,0,0,0,0,Fury, +15% Move and Cast speed &nbsp; +15% Move and Cast speed[While Ignite] &nbsp; +10% Cooldown reduce rate,0,7,,,,900,\n81,Explosion1,1,9,1,4,80,82,1300,1100,20000,0,250,0,130,450,0,0,0,0,1,50,0,0,0,0,0,0,,5,0,0,0,0,0,2000,1,Explosion, Damage to near position &nbsp; Ignite enemy and oneself(100%) &nbsp; Damage to self(50%) <img src='/images/upIcon.png' class='disable' />,300,8,6,,,,1\n82,Explosion2,2,9,1,4,80,83,1300,1100,20000,0,250,0,160,510,0,0,0,0,1,45,0,0,0,0,0,0,,5,0,0,0,0,0,2500,2,Explosion, Damage to near position &nbsp; Ignite enemy and oneself(100%) &nbsp; Damage to self(45%) <img src='/images/upIcon.png' class='disable' />,300,8,6,,,,1\n83,Explosion3,3,9,1,4,80,84,1300,1100,20000,0,275,0,190,550,0,0,0,0,1,40,0,0,0,0,0,0,,5,0,0,0,0,0,3000,3,Explosion, Damage to near position &nbsp; Ignite enemy and oneself(100%) &nbsp; Damage to self(40%) <img src='/images/upIcon.png' class='disable' />,300,8,6,,,,1\n84,Explosion4,4,9,1,4,80,85,1300,1100,20000,0,275,0,220,610,0,0,0,0,1,35,0,0,0,0,0,0,,5,0,0,0,0,0,3500,4,Explosion, Damage to near position &nbsp; Ignite enemy and oneself(100%) &nbsp; Damage to self(35%) <img src='/images/upIcon.png' class='disable' />,300,8,6,,,,1\n85,Explosion5,5,9,1,4,80,-1,1300,1100,20000,0,300,0,250,650,0,0,0,0,1,25,0,0,0,0,0,0,,5,0,0,0,0,0,0,0,Explosion, Damage to near position &nbsp; Ignite enemy and oneself(100%) &nbsp; Damage to self(25%),300,8,6,,,,1\n91,Pyromaniac1,1,11,1,5,90,92,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,22,,0,0,0,0,0,2000,2,Pyromaniac, +5 Power <img src='/images/upIcon.png' class='disable' /> &nbsp;   +10% Fire Damage rate <img src='/images/upIcon.png' class='disable' />,0,9,,,,,1\n92,Pyromaniac2,2,11,1,5,90,93,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,23,,0,0,0,0,0,2500,3,Pyromaniac, +8 Power <img src='/images/upIcon.png' class='disable' /> &nbsp;   +14% Fire Damage rate <img src='/images/upIcon.png' class='disable' /> <img src='/images/plusIcon.png' class='disable' />,0,9,,,,,1\n93,Pyromaniac3,3,11,1,5,90,94,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,,0,0,0,0,0,3000,4,Pyromaniac, +10 Power <img src='/images/upIcon.png' class='disable' /> &nbsp;   +17% Fire Damage rate <img src='/images/upIcon.png' class='disable' /> &nbsp;  3% Damage Rate Per 10% Life Loss <img src='/images/upIcon.png' class='disable' />,0,9,,,,,1\n94,Pyromaniac4,4,11,1,5,90,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,25,,0,0,0,0,0,3500,5,Pyromaniac, +13 Power <img src='/images/upIcon.png' class='disable' /> &nbsp;   +21% Fire Damage rate <img src='/images/upIcon.png' class='disable' /> &nbsp;  4% Damage Rate Per 10% Life Loss <img src='/images/upIcon.png' class='disable' /> <img src='/images/plusIcon.png' class='disable' />,0,9,,,,,1\n95,Pyromaniac5,5,11,1,5,90,-1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,26,,0,0,0,0,0,0,0,Pyromaniac, +15 Power &nbsp;   +25% Fire Damage rate &nbsp;  +15% Cast Speed &nbsp;  +5% Damage Rate Per 10% Life Loss,0,9,,,,,1\n1001,FrosterBaseAttack1,1,1,2,1,1000,1002,600,400,150,60,47,0,0,0,80,0,0,0,0,0,0,0,0,0,0,0,,102,0,0,0,0,0,500,0,Froster Attack, Damage to near front &nbsp; Chill enemy(25%),300,101,7,,,200,\n1002,FrosterBaseAttack2,2,1,2,1,1000,1003,600,400,150,60,47,0,0,0,110,0,0,0,0,0,0,0,0,0,0,0,,102,0,0,0,0,0,1000,0,Froster Attack, Damage to near front &nbsp; Chill enemy(25%) <img src='/images/upIcon.png' class='disable' />,300,101,7,,,200,\n1003,FrosterBaseAttack3,3,1,2,1,1000,1004,600,400,150,60,50,0,0,0,130,0,0,0,0,0,0,0,0,0,0,0,,103,0,0,0,0,0,1500,1,Froster Attack, Damage to near front &nbsp; Chill enemy(30%),300,101,7,,,200,\n1004,FrosterBaseAttack4,4,1,2,1,1000,1005,600,400,150,60,50,0,0,0,160,0,0,0,0,0,0,0,0,0,0,0,,103,0,0,0,0,0,2000,2,Froster Attack, Damage to near front &nbsp; Chill enemy(30%) <img src='/images/upIcon.png' class='disable' />,300,101,7,,,200,\n1005,FrosterBaseAttack5,5,1,2,1,1000,-1,600,400,150,60,53,0,0,0,180,0,0,0,0,0,0,0,0,0,0,0,,104,0,0,0,0,0,0,0,Froster Attack, Damage to near front &nbsp; Chill enemy(35%),300,101,7,,,200,\n1011,IceBolt1,1,3,2,1,1010,1012,500,300,2500,0,0,0,50,0,280,0,0,0,0,0,0,0,0,0,0,0,,105,1,32,650,1500,0,500,0,Ice Bolt, Fire projectile &nbsp; Chill enemy(40%),300,102,7,,,200,\n1012,IceBolt2,2,3,2,1,1010,1013,500,300,2500,0,0,0,60,0,310,0,0,0,0,0,0,0,0,0,0,0,,105,1,32,650,1500,0,1000,0,Ice Bolt, Fire projectile &nbsp; Chill enemy(40%) <img src='/images/upIcon.png' class='disable' />,300,102,7,,,200,\n1013,IceBolt3,3,3,2,1,1010,1014,500,300,2500,0,0,0,70,0,340,0,0,0,0,0,0,0,0,0,0,0,,106,1,34,650,1500,0,1500,1,Ice Bolt, Fire projectile &nbsp; Chill enemy(45%),300,102,7,,,200,\n1014,IceBolt4,4,3,2,1,1010,1015,500,300,2500,0,0,0,80,0,370,0,0,0,0,0,0,0,0,0,0,0,,106,1,34,650,1500,0,2000,2,Ice Bolt, Fire projectile &nbsp; Chill enemy(45%) <img src='/images/upIcon.png' class='disable' />,300,102,7,,,200,\n1015,IceBolt5,5,3,2,1,1010,-1,500,300,2500,0,0,0,90,0,400,0,0,0,0,0,0,0,0,0,0,0,,107,1,36,650,1500,0,0,0,Ice Bolt, Fire projectile &nbsp; Chill enemy(50%),300,102,7,,,200,\n1021,Healing1,1,8,2,1,1020,1022,500,300,9000,0,0,0,80,0,0,0,0,0,0,0,300,0,0,0,0,0,2000,,0,0,0,0,0,500,0,Healing, Heal 300 HP <img src='/images/upIcon.png' class='disable' />,300,103,,,,200,\n1022,Healing2,2,8,2,1,1020,1023,500,300,9000,0,0,0,95,0,0,0,0,0,0,0,360,0,0,0,0,0,2000,,0,0,0,0,0,1000,0,Healing, Heal 360 HP <img src='/images/upIcon.png' class='disable' /> <img src='/images/plusIcon.png' class='disable' />,300,103,,,,200,\n1023,Healing3,3,8,2,1,1020,1024,500,300,9000,0,0,0,110,0,0,0,0,0,0,0,400,0,0,0,0,0,116,,0,0,0,0,0,1500,1,Healing, Heal 400 HP <img src='/images/upIcon.png' class='disable' /> &nbsp; Every second +2% HP Restore,300,103,,,,200,\n1024,Healing4,4,8,2,1,1020,1025,500,300,9000,0,0,0,125,0,0,0,0,0,0,0,460,0,0,0,0,0,116,,0,0,0,0,0,2000,2,Healing, Heal 460 HP <img src='/images/upIcon.png' class='disable' /> &nbsp; Every second +2% HP Restore <img src='/images/upIcon.png' class='disable' /> <img src='/images/plusIcon.png' class='disable' />,300,103,,,,200,\n1025,Healing5,5,8,2,1,1020,-1,500,300,9000,0,0,0,140,0,0,0,0,0,0,0,500,0,0,20,0,0,117,,0,0,0,0,0,0,0,Healing, Heal 500 HP &nbsp; Every second +3% HP Restore &nbsp; +20% MP Restore,300,103,,,,200,\n1031,FrozenSoul1,1,11,2,1,1030,1032,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,111,,0,0,0,0,0,500,0,Frozen Soul, +3 MP regen <img src='/images/upIcon.png' class='disable' />,300,104,,,,200,\n1032,FrozenSoul2,2,11,2,1,1030,1033,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,112,,0,0,0,0,0,1000,0,Frozen Soul, +5 MP regen <img src='/images/upIcon.png' class='disable' /> <img src='/images/plusIcon.png' class='disable' />,300,104,,,,200,\n1033,FrozenSoul3,3,11,2,1,1030,1034,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,113,,0,0,0,0,0,1500,1,Frozen Soul, +6 MP regen <img src='/images/upIcon.png' class='disable' /> &nbsp; +150 MP,300,104,,,,200,\n1034,FrozenSoul4,4,11,2,1,1030,1035,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,114,,0,0,0,0,0,2000,2,Frozen Soul, +8 MP regen <img src='/images/upIcon.png' class='disable' /> &nbsp; +150 MP <img src='/images/upIcon.png' class='disable' /> <img src='/images/plusIcon.png' class='disable' />,300,104,,,,200,\n1035,FrozenSoul5,5,11,2,1,1030,-1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,115,,0,0,0,0,0,0,0,Frozen Soul, +9 MP regen &nbsp; +300 MP &nbsp; +10% All Resistance ,300,104,,,,200,\n1041,Purify1,1,8,2,2,1040,1042,500,300,20000,0,0,0,120,0,0,0,0,0,0,0,0,0,0,0,0,0,118,,0,0,0,0,0,1000,0,Purify, Every second Dispel oneself &nbsp; Every second +3% HP Restore <img src='/images/upIcon.png' class='disable' />,300,105,,,,400,\n1042,Purify2,2,8,2,2,1040,1043,500,300,20000,0,0,0,120,0,0,0,0,0,0,0,0,0,0,0,0,0,119,,0,0,0,0,0,1500,1,Purify, Every second Dispel oneself &nbsp; Every second +4% HP Restore,300,105,,,,400,\n1043,Purify3,3,8,2,2,1040,1044,500,300,20000,0,0,0,100,0,0,0,0,0,0,0,0,0,0,0,0,0,120,,0,0,0,0,0,2000,2,Purify, Every second Dispel oneself &nbsp; Every second +4% HP Restore <img src='/images/upIcon.png' class='disable' />,300,105,,,,400,\n1044,Purify4,4,8,2,2,1040,1045,500,300,20000,0,0,0,100,0,0,0,0,0,0,0,0,0,0,0,0,0,121,,0,0,0,0,0,2500,3,Purify, Every second Dispel oneself &nbsp; Every second +5% HP Restore,300,105,,,,400,\n1045,Purify5,5,8,2,2,1040,-1,500,300,20000,0,0,0,80,0,0,0,0,0,0,0,0,0,0,0,0,0,122,,0,0,0,0,0,0,0,Purify, Every second Dispel oneself &nbsp; Every second +5% HP Restore,300,105,,,,400,\n1051,IceBlock1,1,8,2,2,1050,1052,500,300,20000,0,0,0,120,0,0,0,0,0,1,100,0,0,0,0,0,0,123,137,0,0,0,0,0,1000,0,Ice Block, Make Immortal(4s) and Freeze oneself(3s) &nbsp; Every second +5% HP Restore <img src='/images/upIcon.png' class='disable' />,300,106,,,,400,\n1052,IceBlock2,2,8,2,2,1050,1053,500,300,20000,0,0,0,120,0,0,0,0,0,1,100,0,0,0,0,0,0,124,137,0,0,0,0,0,1500,1,Ice Block, Make Immortal(4s) and Freeze oneself(3s) &nbsp; Every second +6% HP Restore <img src='/images/upIcon.png' class='disable' /> <img src='/images/plusIcon.png' class='disable' />,300,106,,,,400,\n1053,IceBlock3,3,8,2,2,1050,1054,500,300,20000,0,0,0,100,0,0,0,0,0,1,100,0,0,0,0,0,0,125,137,0,0,0,0,0,2000,2,Ice Block, Make Immortal(4s) and Freeze oneself(3s) &nbsp; Every second +7% HP Restore <img src='/images/upIcon.png' class='disable' /> &nbsp; Every second +5% MP Restore,300,106,,,,400,\n1054,IceBlock4,4,8,2,2,1050,1055,500,300,20000,0,0,0,100,0,0,0,0,0,1,100,0,0,0,0,0,0,126,137,0,0,0,0,0,2500,3,Ice Block, Make Immortal(4s) and Freeze oneself(3s) &nbsp; Every second +8% HP Restore <img src='/images/upIcon.png' class='disable' /> &nbsp; Every second +5% MP Restore <img src='/images/upIcon.png' class='disable' />,300,106,,,,400,\n1055,IceBlock5,5,8,2,2,1050,-1,500,300,20000,0,0,0,80,0,0,0,0,0,1,100,0,0,0,0,0,0,127,137,0,0,0,0,0,0,0,Ice Block, Make Immortal(4s) and Freeze oneself(3s) &nbsp; Every second +10% HP Restore &nbsp; Every second +8% MP Restore,300,106,,,,400,\n1061,ColdSnap1,1,7,2,3,1060,1062,850,600,15000,410,120,0,60,0,110,0,0,0,0,0,0,0,0,0,350,2,,108,0,0,0,0,0,1500,1,Cold Snap, Damage target area(3 times) &nbsp; Chill enemy(70%),250,107,7,,,900,\n1062,ColdSnap2,2,7,2,3,1060,1063,850,600,15000,410,120,0,65,0,115,0,0,0,0,0,0,0,0,0,350,2,,108,0,0,0,0,0,2000,2,Cold Snap, Damage target area(3 times) <img src='/images/upIcon.png' class='disable' />&nbsp; Chill enemy(70%) ,250,107,7,,,900,\n1063,ColdSnap3,3,7,2,3,1060,1064,850,600,15000,430,130,0,65,0,115,0,0,0,0,0,0,0,0,0,350,3,,108,0,0,0,0,0,2500,3,Cold Snap, Damage target area(4 times) &nbsp; Chill enemy(70%),250,107,7,,,900,\n1064,ColdSnap4,4,7,2,3,1060,1065,850,600,15000,430,130,0,70,0,120,0,0,0,0,0,0,0,0,0,350,3,,108,0,0,0,0,0,3000,4,Cold Snap, Damage target area(4 times) <img src='/images/upIcon.png' class='disable' />&nbsp; Chill enemy(70%) ,250,107,7,,,900,\n1065,ColdSnap5,5,7,2,3,1060,-1,850,600,15000,450,140,0,70,0,120,0,0,0,0,0,0,0,0,0,350,4,,108,0,0,0,0,0,0,0,Cold Snap, Damage target area(5 times) &nbsp; Chill enemy(70%),250,107,7,,,900,\n1071,FrozenOrb1,1,6,2,4,1070,1072,800,600,15000,0,120,800,160,0,45,0,0,0,0,0,0,0,0,0,0,0,,101,1,52,280,2000,60,2000,1,Frozen Orb, Fire rolling explosive projectile &nbsp; Chill enemy(20%),300,108,7,1008,1008,,1\n1072,FrozenOrb2,2,6,2,4,1070,1073,800,600,15000,0,120,800,180,0,60,0,0,0,0,0,0,0,0,0,0,0,,101,1,52,280,2000,60,2500,2,Frozen Orb, Fire rolling explosive projectile &nbsp; Chill enemy(20%) <img src='/images/upIcon.png' class='disable' />,300,108,7,1008,1008,,1\n1073,FrozenOrb3,3,6,2,4,1070,1074,800,600,15000,0,130,800,200,0,70,0,0,0,0,0,0,0,0,0,0,0,,102,1,54,280,2000,60,3000,3,Frozen Orb, Fire rolling explosive projectile &nbsp; Chill enemy(25%),300,108,7,1008,1008,,1\n1074,FrozenOrb4,4,6,2,4,1070,1075,800,600,15000,0,130,800,220,0,85,0,0,0,0,0,0,0,0,0,0,0,,102,1,54,280,2000,60,3500,4,Frozen Orb, Fire rolling explosive projectile &nbsp; Chill enemy(25%) <img src='/images/upIcon.png' class='disable' />,300,108,7,1008,1008,,1\n1075,FrozenOrb5,5,6,2,4,1070,-1,800,600,15000,0,140,800,240,0,95,0,0,0,0,0,0,0,0,0,0,0,,103,1,56,280,2000,60,0,0,Frozen Orb, Fire rolling explosive projectile &nbsp; Chill enemy(30%),300,108,7,1008,1008,,1\n1081,IceSpear1,1,3,2,2,1080,1082,550,300,8000,0,0,0,60,0,150,0,0,0,0,0,0,0,0,0,0,0,,102,3,27,500,1000,0,1000,0,Ice Spear, Fire 3 projectile &nbsp; Chill enemy(25%),300,110,7,,,400,\n1082,IceSpear2,2,3,2,2,1080,1083,550,300,8000,0,0,0,65,0,160,0,0,0,0,0,0,0,0,0,0,0,,102,3,27,500,1000,0,1500,1,Ice Spear, Fire 3 projectile <img src='/images/upIcon.png' class='disable' /> &nbsp; Chill enemy(25%) <img src='/images/upIcon.png' class='disable' />,300,110,7,,,400,\n1083,IceSpear3,3,3,2,2,1080,1084,550,300,8000,0,0,0,65,0,160,0,0,0,0,0,0,0,0,0,250,1,,103,3,27,500,1000,0,2000,2,Ice Spear, Fire 3 projectile (2 times)&nbsp; Chill enemy(30%),300,110,7,,,400,\n1084,IceSpear4,4,3,2,2,1080,1085,550,300,8000,0,0,0,70,0,170,0,0,0,0,0,0,0,0,0,250,1,,103,3,27,500,1000,0,2500,3,Ice Spear, Fire 3 projectile (2 times)<img src='/images/upIcon.png' class='disable' /> &nbsp; Chill enemy(30%) <img src='/images/upIcon.png' class='disable' />,300,110,7,,,400,\n1085,IceSpear5,5,3,2,2,1080,-1,550,300,8000,0,0,0,70,0,170,0,0,0,0,0,0,0,0,0,250,2,,104,3,27,500,1000,0,0,0,Ice Spear, Fire 3 projectile (3 times)&nbsp; Chill enemy(35%),300,110,7,,,400,\n1091,Freezer1,1,11,2,5,1090,1092,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,128,,0,0,0,0,0,2000,2,Freezer, +5 Magic <img src='/images/upIcon.png' class='disable' /> &nbsp;   +10% Frost Damage rate <img src='/images/upIcon.png' class='disable' />,0,109,,,,,1\n1092,Freezer2,2,11,2,5,1090,1093,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,129,,0,0,0,0,0,2500,3,Freezer, +8 Magic <img src='/images/upIcon.png' class='disable' /> &nbsp;   +14% Frost Damage rate <img src='/images/upIcon.png' class='disable' /> <img src='/images/plusIcon.png' class='disable' />,0,109,,,,,1\n1093,Freezer3,3,11,2,5,1090,1094,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,130,,0,0,0,0,0,3000,4,Freezer, +10 Magic <img src='/images/upIcon.png' class='disable' /> &nbsp;   +17% Frost Damage rate <img src='/images/upIcon.png' class='disable' /> &nbsp;  Can Make Freezing When Hit Chill Enemy(15%) <img src='/images/upIcon.png' class='disable' />,0,109,,,,,1\n1094,Freezer4,4,11,2,5,1090,1095,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,131,,0,0,0,0,0,3500,5,Freezer, +13 Magic <img src='/images/upIcon.png' class='disable' /> &nbsp;   +21% Frost Damage rate <img src='/images/upIcon.png' class='disable' /> &nbsp;  Can Make Freezing When Hit Chill Enemy(20%) <img src='/images/upIcon.png' class='disable' /> <img src='/images/plusIcon.png' class='disable' />,0,109,,,,,1\n1095,Freezer5,5,11,2,5,1090,-1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,132,,0,0,0,0,0,0,0,Freezer, +15 Magic &nbsp;   +25% Frost Damage rate &nbsp;  +7.5% Move Speed &nbsp;  Can Make Freezing When Hit Chill Enemy(25%),0,109,,,,,1\n2001,MysterBaseAttack1,1,1,3,1,2000,2002,600,400,150,60,45,0,0,0,0,80,1,20,0,0,0,0,0,0,0,0,,,0,0,0,0,0,500,0,Myster Attack, Damage to near front &nbsp; Burn enemy MP(20%),300,201,8,,,200,\n2002,MysterBaseAttack2,2,1,3,1,2000,2003,600,400,150,60,45,0,0,0,0,110,1,20,0,0,0,0,0,0,0,0,,,0,0,0,0,0,1000,0,Myster Attack, Damage to near front &nbsp; Burn enemy MP(20%) <img src='/images/upIcon.png' class='disable' />,300,201,8,,,200,\n2003,MysterBaseAttack3,3,1,3,1,2000,2004,600,400,150,60,47,0,0,0,0,130,1,25,0,0,0,0,0,0,0,0,,,0,0,0,0,0,1500,1,Myster Attack, Damage to near front &nbsp; Burn enemy MP(25%),300,201,8,,,200,\n2004,MysterBaseAttack4,4,1,3,1,2000,2005,600,400,150,60,47,0,0,0,0,160,1,25,0,0,0,0,0,0,0,0,,,0,0,0,0,0,2000,2,Myster Attack, Damage to near front &nbsp; Burn enemy MP(25%) <img src='/images/upIcon.png' class='disable' />,300,201,8,,,200,\n2005,MysterBaseAttack5,5,1,3,1,2000,-1,600,400,150,60,50,0,0,0,0,180,1,30,0,0,0,0,0,0,0,0,,,0,0,0,0,0,0,0,Myster Attack, Damage to near front &nbsp; Burn enemy MP(30%),300,201,8,,,200,\n2011,ArcaneBolt1,1,3,3,1,2010,2012,500,300,2400,0,0,0,45,0,0,280,1,20,0,0,0,0,0,0,0,0,,,1,30,650,1500,0,500,0,Arcane Bolt, Fire projectile &nbsp; Burn enemy MP(20%),300,202,8,,,200,\n2012,ArcaneBolt2,2,3,3,1,2010,2013,500,300,2400,0,0,0,55,0,0,310,1,20,0,0,0,0,0,0,0,0,,,1,30,650,1500,0,1000,0,Arcane Bolt, Fire projectile &nbsp; Burn enemy MP(20%) <img src='/images/upIcon.png' class='disable' />,300,202,8,,,200,\n2013,ArcaneBolt3,3,3,3,1,2010,2014,500,300,2400,0,0,0,65,0,0,340,1,25,0,0,0,0,0,0,0,0,,,1,32,650,1500,0,1500,1,Arcane Bolt, Fire projectile &nbsp; Burn enemy MP(25%),300,202,8,,,200,\n2014,ArcaneBolt4,4,3,3,1,2010,2015,500,300,2400,0,0,0,75,0,0,370,1,25,0,0,0,0,0,0,0,0,,,1,32,650,1500,0,2000,2,Arcane Bolt, Fire projectile &nbsp; Burn enemy MP(25%) <img src='/images/upIcon.png' class='disable' />,300,202,8,,,200,\n2015,ArcaneBolt5,5,3,3,1,2010,-1,500,300,2400,0,0,0,85,0,0,400,1,30,0,0,0,0,0,0,0,0,,,1,35,650,1500,0,0,0,Arcane Bolt, Fire projectile &nbsp; Burn enemy MP(30%),300,202,8,,,200,\n2021,ArcaneCloak1,1,11,3,1,2020,2022,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,201,,0,0,0,0,0,500,0,Arcane Cloak, +10% All Resistance <img src='/images/upIcon.png' class='disable' /> <img src='/images/plusIcon.png' class='disable' />,0,203,,,,200,\n2022,ArcaneCloak2,2,11,3,1,2020,2023,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,202,,0,0,0,0,0,1000,0,Arcane Cloak, +11% All Resistance <img src='/images/upIcon.png' class='disable' /> &nbsp; +5% Arcane Resistance <img src='/images/plusIcon.png' class='disable' />,0,203,,,,200,\n2023,ArcaneCloak3,3,11,3,1,2020,2024,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,203,,0,0,0,0,0,1500,1,Arcane Cloak, +12% All Resistance <img src='/images/upIcon.png' class='disable' /> &nbsp; +5% Arcane Resistance &nbsp; +5% Frost Resistance <img src='/images/plusIcon.png' class='disable' />,0,203,,,,200,\n2024,ArcaneCloak4,4,11,3,1,2020,2025,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,204,,0,0,0,0,0,2000,2,Arcane Cloak, +13% All Resistance <img src='/images/upIcon.png' class='disable' /> &nbsp; +5% Arcane Resistance <img src='/images/upIcon.png' class='disable' /> &nbsp; +5% Frost Resistance <img src='/images/upIcon.png' class='disable' /> &nbsp; +5% Fire Resistance <img src='/images/upIcon.png' class='disable' />,0,203,,,,200,\n2025,ArcaneCloak5,5,11,3,1,2020,-1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,205,,0,0,0,0,0,0,0,Arcane Cloak, +15% All Resistance &nbsp; + 10% Arcane Resistance &nbsp; +10% Frost Resistance &nbsp; +10% Fire Resistance,0,203,,,,200,\n2031,ArcaneMissile1,1,3,3,2,2030,2032,500,300,6000,0,0,0,110,0,0,160,1,15,0,0,0,0,0,0,0,0,,,3,25,500,1500,0,1000,0,Arcane Missile, Fire 3 projectile &nbsp; Burn enemy MP(15%),300,204,8,,,400,\n2032,ArcaneMissile2,2,3,3,2,2030,2033,500,300,6000,0,0,0,130,0,0,185,1,15,0,0,0,0,0,0,0,0,,,3,25,500,1500,0,1500,1,Arcane Missile, Fire 3 projectile <img src='/images/upIcon.png' class='disable' /> &nbsp; Burn enemy MP(15%),300,204,8,,,400,\n2033,ArcaneMissile3,3,3,3,2,2030,2034,500,300,6000,0,0,0,150,0,0,200,1,15,0,0,0,0,0,0,0,0,,,4,25,500,1500,0,2000,2,Arcane Missile, Fire 4 projectile &nbsp; Burn enemy MP(15%),300,204,8,,,400,\n2034,ArcaneMissile4,4,3,3,2,2030,2035,500,300,6000,0,0,0,170,0,0,225,1,15,0,0,0,0,0,0,0,0,,,4,25,500,1500,0,2500,3,Arcane Missile, Fire 4 projectile <img src='/images/upIcon.png' class='disable' /> &nbsp; Burn enemy MP(15%),300,204,8,,,400,\n2035,ArcaneMissile5,5,3,3,2,2030,-1,500,300,6000,0,0,0,190,0,0,240,1,15,0,0,0,0,0,0,0,0,,,5,25,500,1500,0,0,0,Arcane Missile, Fire 5 projectile &nbsp; Burn enemy MP(15%),300,204,8,,,400,\n2041,Silence1,1,7,3,2,2040,2042,500,300,15000,360,110,0,110,0,0,0,0,0,0,0,0,0,0,0,0,0,,206,0,0,0,0,0,1000,0,Silence, Silence enemy,300,205,,1009,,400,\n2042,Silence2,2,7,3,2,2040,2043,500,300,15000,360,110,0,130,0,0,0,0,0,0,0,0,0,0,0,0,0,,207,0,0,0,0,0,1500,1,Silence, Silence enemy,300,205,,1009,,400,\n2043,Silence3,3,7,3,2,2040,2044,500,300,13000,380,120,0,150,0,0,0,0,0,0,0,0,0,0,0,0,0,,207,0,0,0,0,0,2000,2,Silence, Silence enemy,300,205,,1009,,400,\n2044,Silence4,4,7,3,2,2040,2045,500,300,13000,380,120,0,170,0,0,0,0,0,0,0,0,0,0,0,0,0,,208,0,0,0,0,0,2500,3,Silence, Silence enemy,300,205,,1009,,400,\n2045,Silence5,5,7,3,2,2040,-1,500,300,11000,400,130,0,190,0,0,0,0,0,0,0,0,0,0,0,0,0,,208,0,0,0,0,0,0,0,Silence, Silence enemy,300,205,,1009,,400,\n2061,Blink1,1,10,3,3,2060,2062,500,300,11000,300,40,0,100,0,0,0,0,0,0,0,0,0,0,0,0,0,,,0,0,0,0,0,1500,1,Blink, Move direct to target position,300,207,,,,900,\n2062,Blink2,2,10,3,3,2060,2063,500,300,11000,320,40,0,100,0,0,0,0,0,0,0,0,0,0,0,0,0,,,0,0,0,0,0,2000,2,Blink, Move direct to target position,300,207,,,,900,\n2063,Blink3,3,10,3,3,2060,2064,500,300,10000,320,40,0,90,0,0,0,0,0,0,0,0,0,0,0,0,0,,,0,0,0,0,0,2500,3,Blink, Move direct to target position,300,207,,,,900,\n2064,Blink4,4,10,3,3,2060,2065,500,300,10000,350,40,0,90,0,0,0,0,0,0,0,0,0,0,0,0,0,,,0,0,0,0,0,3000,4,Blink, Move direct to target position,300,207,,,,900,\n2065,Blink5,5,10,3,3,2060,-1,500,300,9000,350,40,0,80,0,0,0,0,0,0,0,0,0,0,0,0,0,,,0,0,0,0,0,0,0,Blink, Move direct to target position,300,207,,,,900,\n2071,ArcaneBlast1,1,7,3,3,2070,2072,800,600,14000,370,110,0,110,0,0,300,1,20,0,0,0,0,0,0,0,0,,,0,0,0,0,0,1500,1,Arcane Blast, Damage to target area &nbsp; Burn enemy MP(20%),300,208,8,,,900,\n2072,ArcaneBlast2,2,7,3,3,2070,2073,800,600,14000,370,110,0,135,0,0,365,1,20,0,0,0,0,0,0,0,0,,,0,0,0,0,0,2000,2,Arcane Blast, Damage to target area &nbsp; Burn enemy MP(20%) <img src='/images/upIcon.png' class='disable' />,300,208,8,,,900,\n2073,ArcaneBlast3,3,7,3,3,2070,2074,800,600,14000,410,120,0,160,0,0,400,1,25,0,0,0,0,0,0,0,0,,,0,0,0,0,0,2500,3,Arcane Blast, Damage to target area &nbsp; Burn enemy MP(25%),300,208,8,,,900,\n2074,ArcaneBlast4,4,7,3,3,2070,2075,800,600,14000,410,120,0,185,0,0,465,1,25,0,0,0,0,0,0,0,0,,,0,0,0,0,0,3000,4,Arcane Blast, Damage to target area &nbsp; Burn enemy MP(25%) <img src='/images/upIcon.png' class='disable' />,300,208,8,,,900,\n2075,ArcaneBlast5,5,7,3,3,2070,-1,800,600,14000,450,130,0,210,0,0,500,1,30,0,0,0,0,0,0,0,0,,,0,0,0,0,0,0,0,Arcane Blast, Damage to target area &nbsp; Burn enemy MP(30%),300,208,8,,,900,\n2081,Haste1,1,8,3,3,2080,2082,500,300,32000,0,0,0,110,0,0,0,0,0,0,0,0,0,0,0,0,0,211,,0,0,0,0,0,1500,1,Haste, +15% Move and Cast speed <img src='/images/upIcon.png' class='disable' />,300,209,,,,900,\n2082,Haste2,2,8,3,3,2080,2083,500,300,32000,0,0,0,135,0,0,0,0,0,0,0,0,0,0,0,0,0,212,,0,0,0,0,0,2000,2,Haste, +18% Move and Cast speed <img src='/images/upIcon.png' class='disable' />,300,209,,,,900,\n2083,Haste3,3,8,3,3,2080,2084,500,300,30000,0,0,0,160,0,0,0,0,0,0,0,0,0,0,0,0,0,213,,0,0,0,0,0,2500,3,Haste, +20% Move and Cast speed <img src='/images/upIcon.png' class='disable' />,300,209,,,,900,\n2084,Haste4,4,8,3,3,2080,2085,500,300,30000,0,0,0,185,0,0,0,0,0,0,0,0,0,0,0,0,0,214,,0,0,0,0,0,3000,4,Haste, +23% Move and Cast speed <img src='/images/upIcon.png' class='disable' />,300,209,,,,900,\n2085,Haste5,5,8,3,3,2080,-1,500,300,28000,0,0,0,210,0,0,0,0,0,0,0,0,0,0,0,0,0,215,,0,0,0,0,0,0,0,Haste, +25% Move and Cast speed <img src='/images/upIcon.png' class='disable' />,300,209,,,,900,\n2091,Mystic1,1,11,3,5,2090,2092,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,216,,0,0,0,0,0,2000,2,Mystic, +2 All Stat <img src='/images/upIcon.png' class='disable' /> &nbsp;   +10% All Damage rate <img src='/images/upIcon.png' class='disable' />,0,210,,,,,1\n2092,Mystic2,2,11,3,5,2090,2093,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,217,,0,0,0,0,0,2500,3,Mystic, +4 All Stat <img src='/images/upIcon.png' class='disable' /> &nbsp;   +13% All Damage rate <img src='/images/upIcon.png' class='disable' /> <img src='/images/plusIcon.png' class='disable' />,0,210,,,,,1\n2093,Mystic3,3,11,3,5,2090,2094,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,218,,0,0,0,0,0,3000,4,Mystic, +5 All Stat <img src='/images/upIcon.png' class='disable' /> &nbsp;   +15% All Damage rate <img src='/images/upIcon.png' class='disable' /> &nbsp;  Add Random Buff When Use Arcane Spell <img src='/images/upIcon.png' class='disable' /> ,0,210,,,,,1\n2094,Mystic4,4,11,3,5,2090,2095,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,219,,0,0,0,0,0,3500,5,Mystic, +7 All Stat <img src='/images/upIcon.png' class='disable' /> &nbsp;   +18% All Damage rate <img src='/images/upIcon.png' class='disable' /> &nbsp;  Add Random Buff When Use Arcane Spell <img src='/images/upIcon.png' class='disable' />,0,210,,,,,1\n2095,Mystic5,5,11,3,5,2090,-1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,220,,0,0,0,0,0,0,0,Mystic, +8 All Stat &nbsp;   +20% All Damage rate &nbsp;  +15% Cooldown Reduce rate &nbsp;  Add Random Buff When Use Arcane Spell,0,210,,,,,1\n",buffGroupData:"index,name,clientName,clientDesc,isBuff,buff1,buff2,buff3,buff4,buff5,buff6,buff7,buff8,buff9,buff10,buffLifeTime,buffApplyRate,buffIcon,buffEffectGroup\n1,Ignite20,Ignite, Damage 3% of Max HP,0,1,,,,,,,,,,5000,20,515,5\n2,Ignite30,Ignite, Damage 3% of Max HP,0,1,,,,,,,,,,5000,30,515,5\n3,Ignite40,Ignite, Damage 3% of Max HP,0,1,,,,,,,,,,5000,40,515,5\n4,Ignite50,Ignite, Damage 3% of Max HP,0,1,,,,,,,,,,5000,50,515,5\n5,Ignite100,Ignite, Damage 3% of Max HP,0,1,,,,,,,,,,5000,100,515,5\n6,BurningSoul1,BurningSoul, +4 HP regen,1,22,,,,,,,,,,0,100,501,1010\n7,BurningSoul2,BurningSoul, +6 HP regen,1,23,,,,,,,,,,0,100,501,1010\n8,BurningSoul3,BurningSoul, +7 HP regen &nbsp; +300 HP,1,24,3,,,,,,,,,0,100,501,1010\n9,BurningSoul4,BurningSoul, +9 HP regen &nbsp; +300 HP,1,25,3,,,,,,,,,0,100,501,1010\n10,BurningSoul5,BurningSoul, +10 HP regen &nbsp; +500 HP &nbsp; +10% Damage rate,1,26,4,82,,,,,,,,0,100,501,1010\n11,InnerFire1,InnerFire, +20% Damage rate &nbsp; Make Ignite oneself,1,86,,,,,,,,,,15000,100,502,1001\n12,InnerFire2,InnerFire, +27% Damage rate &nbsp; Make Ignite oneself,1,87,,,,,,,,,,15000,100,502,1001\n13,InnerFire3,InnerFire, +30% Damage rate &nbsp; Make Ignite oneself &nbsp; +10% Fire resistance,1,88,123,,,,,,,,,15000,100,502,1001\n14,InnerFire4,InnerFire, +37% Damage rate &nbsp; Make Ignite oneself &nbsp; +10% Fire resistance,1,89,123,,,,,,,,,15000,100,502,1001\n15,InnerFire5,InnerFire, +40% Damage rate &nbsp; Make Ignite oneself &nbsp; +15% Fire resistance &nbsp; +3 HP regen,1,90,124,21,,,,,,,,15000,100,502,1001\n16,InnerFireIgnite,Ignite, Damage 3% of Max HP,0,1,,,,,,,,,,15000,100,515,5\n17,Fury1,Fury, +5% Move and Cast speed,1,32,45,,,,,,,,,0,100,503,1002\n18,Fury2,Fury, +8% Move and Cast speed,1,33,46,,,,,,,,,0,100,503,1002\n19,Fury3,Fury, +10% Move and Cast speed &nbsp; If ignite additional +10% Move and Cast speed,1,35,47,57,59,,,,,,,0,100,503,1002\n20,Fury4,Fury, +13% Move and Cast speed &nbsp; If ignite additional +10% Move and Cast speed,1,37,49,57,59,,,,,,,0,100,503,1002\n21,Fury5,Fury, +15% Move and Cast speed &nbsp; If ignite additional +15% Move and Cast speed &nbsp; +10% Cooldown reduce rate,1,38,50,58,60,113,,,,,,0,100,503,1002\n22,Pyromaniac1,Pyromaniac, +5 Power &nbsp;   +10% Fire Damage rate,1,63,91,,,,,,,,,0,100,504,101\n23,Pyromaniac2,Pyromaniac, +8 Power &nbsp;   +14% Fire Damage rate,1,65,92,,,,,,,,,0,100,504,101\n24,Pyromaniac3,Pyromaniac, +10 Power &nbsp;   +17% Fire Damage rate &nbsp;  3% Damage Rate Per 10% Life Loss,1,66,93,101,,,,,,,,0,100,504,101\n25,Pyromaniac4,Pyromaniac, +13 Power &nbsp;   +21% Fire Damage rate &nbsp;  4% Damage Rate Per 10% Life Loss,1,67,94,102,,,,,,,,0,100,504,101\n26,Pyromaniac5,Pyromaniac, +15 Power &nbsp;   +25% Fire Damage rate &nbsp;  +15% Cast Speed &nbsp;  +5% Damage Rate Per 10% Life Loss,1,68,95,103,50,,,,,,,0,100,504,101\n101,Chill20,Chill, Decrease 30% Move and Cast Speed,0,2,,,,,,,,,,3000,20,516,2\n102,Chill25,Chill, Decrease 30% Move and Cast Speed,0,2,,,,,,,,,,3000,25,516,2\n103,Chill30,Chill, Decrease 30% Move and Cast Speed,0,2,,,,,,,,,,3000,30,516,2\n104,Chill35,Chill, Decrease 30% Move and Cast Speed,0,2,,,,,,,,,,3000,35,516,2\n105,Chill40,Chill, Decrease 30% Move and Cast Speed,0,2,,,,,,,,,,3000,40,516,2\n106,Chill45,Chill, Decrease 30% Move and Cast Speed,0,2,,,,,,,,,,3000,45,516,2\n107,Chill50,Chill, Decrease 30% Move and Cast Speed,0,2,,,,,,,,,,3000,50,516,2\n108,Chill70,Chill, Decrease 30% Move and Cast Speed,0,2,,,,,,,,,,3000,70,516,2\n109,Chill85,Chill, Decrease 30% Move and Cast Speed,0,2,,,,,,,,,,3000,85,516,2\n110,Chill100,Chill, Decrease 30% Move and Cast Speed,0,2,,,,,,,,,,3000,100,516,2\n111,FrozenSoul1,FrozenSoul, +3 MP regen,1,27,,,,,,,,,,0,100,505,1011\n112,FrozenSoul2,FrozenSoul, +5 MP regen,1,28,,,,,,,,,,0,100,505,1011\n113,FrozenSoul3,FrozenSoul, +6 MP regen &nbsp; +150 MP,1,29,5,,,,,,,,,0,100,505,1011\n114,FrozenSoul4,FrozenSoul, +8 MP regen &nbsp; +150 MP,1,30,5,,,,,,,,,0,100,505,1011\n115,FrozenSoul5,FrozenSoul, +9 MP regen &nbsp; +300 MP &nbsp; +10% All Resistance ,1,31,6,115,,,,,,,,0,100,505,1011\n116,Heal3,Heal, +2% HP Restore,1,8,,,,,,,,,,5000,100,514,1012\n117,Heal5,Heal, +3% HP Restore,1,9,,,,,,,,,,5000,100,514,1012\n118,Purify1,Purify, Purify oneself &nbsp; +3% HP Restore,1,9,110,,,,,,,,,3000,100,506,1012\n119,Purify2,Purify, Purify oneself &nbsp; +4% HP Restore,1,10,110,,,,,,,,,3000,100,506,1012\n120,Purify3,Purify, Purify oneself &nbsp; +4% HP Restore,1,10,110,,,,,,,,,4000,100,506,1012\n121,Purify4,Purify, Purify oneself &nbsp; +5% HP Restore,1,11,110,,,,,,,,,4000,100,506,1012\n122,Purify5,Purify, Purify oneself &nbsp; +5% HP Restore,1,11,110,,,,,,,,,5000,100,506,1012\n123,IceBlock1,IceBlock, Immortal &nbsp; +5% HP Restore,1,145,11,,,,,,,,,4000,100,507,1\n124,IceBlock2,IceBlock, Immortal &nbsp; +6% HP Restore,1,145,12,,,,,,,,,4000,100,507,1\n125,IceBlock3,IceBlock, Immortal &nbsp; +7% HP and MP Restore &nbsp; +5% MP Restore,1,145,13,18,,,,,,,,4000,100,507,1\n126,IceBlock4,IceBlock, Immortal &nbsp; +8% HP and MP Restore &nbsp; +5% MP Restore,1,145,14,18,,,,,,,,4000,100,507,1\n127,IceBlock5,IceBlock, Immortal &nbsp; +10% HP and MP Restore &nbsp; +8% MP Restore,1,145,15,19,,,,,,,,4000,100,507,1\n128,Freezer1,Freezer, +5 Magic &nbsp;   +10% Frost Damage rate,1,71,96,,,,,,,,,0,100,508,102\n129,Freezer2,Freezer, +8 Magic &nbsp;   +14% Frost Damage rate,1,73,97,,,,,,,,,0,100,508,102\n130,Freezer3,Freezer, +10 Magic &nbsp;   +17% Frost Damage rate &nbsp;  Can Make Freezing When Hit Chill Enemy(15%),1,74,98,104,,,,,,,,0,100,508,102\n131,Freezer4,Freezer, +13 Magic &nbsp;   +21% Frost Damage rate &nbsp;  Can Make Freezing When Hit Chill Enemy(20%),1,75,99,105,,,,,,,,0,100,508,102\n132,Freezer5,Freezer, +15 Magic &nbsp;   +25% Frost Damage rate &nbsp;  +7.5% Move Speed &nbsp;  Can Make Freezing When Hit Chill Enemy(25%),1,76,100,106,34,,,,,,,0,100,508,102\n133,Freeze1,Freeze, Frozen &nbsp; Can`t do anything!!!,0,108,,,,,,,,,,1000,15,517,3\n134,Freeze2,Freeze, Frozen &nbsp; Can`t do anything!!!,0,108,,,,,,,,,,1000,20,517,3\n135,Freeze3,Freeze, Frozen &nbsp; Can`t do anything!!!,0,108,,,,,,,,,,1000,25,517,3\n136,Freeze5,Freeze, Frozen &nbsp; Can`t do anything!!!,0,108,,,,,,,,,,1000,100,517,3\n137,IceBlockFreeze,Freeze, Frozen &nbsp; Can`t do anything!!!,0,109,,,,,,,,,,3000,100,517,3\n201,ArcaneCloak1,ArcaneCloak, +10% All Resistance,1,115,,,,,,,,,,0,100,509,1005\n202,ArcaneCloak2,ArcaneCloak, +11% All Resistance &nbsp; +5% Arcane Resistance,1,116,125,,,,,,,,,0,100,509,1005\n203,ArcaneCloak3,ArcaneCloak, +12% All Resistance &nbsp; +5% Arcane Resistance &nbsp; +5% Frost Resistance,1,117,125,127,,,,,,,,0,100,509,1005\n204,ArcaneCloak4,ArcaneCloak, +13% All Resistance &nbsp; +5% Arcane Resistance &nbsp; +5% Frost Resistance &nbsp; +5% Fire Resistance,1,118,125,127,122,,,,,,,0,100,509,1005\n205,ArcaneCloak5,ArcaneCloak, +15% All Resistance &nbsp; + 10% Arcane Resistance &nbsp; +10% Frost Resistance &nbsp; +10% Fire Resistance,1,119,126,128,123,,,,,,,0,100,509,1005\n206,Silence1,Silence, Silenced &nbsp; Can`t cast spell!!!,0,129,,,,,,,,,,3000,100,518,4\n207,Silence2,Silence, Silenced &nbsp; Can`t cast spell!!!,0,129,,,,,,,,,,4000,100,518,4\n208,Silence3,Silence, Silenced &nbsp; Can`t cast spell!!!,0,129,,,,,,,,,,5000,100,518,4\n209,Dispel,Dispel, Dispel Buff,0,112,,,,,,,,,,500,100,519,1013\n210,DispelSelf,Dispel, Dispel Debuff,0,111,,,,,,,,,,500,100,513,1013\n211,Haste1,Haste, +15% Move and Cast speed,1,38,50,,,,,,,,,15000,100,510,1006\n212,Haste2,Haste, +18% Move and Cast speed,1,39,51,,,,,,,,,15000,100,510,1006\n213,Haste3,Haste, +20% Move and Cast speed,1,40,52,,,,,,,,,20000,100,510,1006\n214,Haste4,Haste, +23% Move and Cast speed,1,41,53,,,,,,,,,20000,100,510,1006\n215,Haste5,Haste, +25% Move and Cast speed,1,42,54,,,,,,,,,20000,100,510,1006\n216,Mystic1,Mystic, +2 All Stat &nbsp;   +10% All Damage rate,1,61,69,77,82,,,,,,,0,100,511,103\n217,Mystic2,Mystic, +4 All Stat &nbsp;   +13% All Damage rate,1,62,70,78,83,,,,,,,0,100,511,103\n218,Mystic3,Mystic, +5 All Stat &nbsp;   +15% All Damage rate &nbsp;  Add Random Buff When Use Arcane Spell ,1,63,71,79,84,130,,,,,,0,100,511,103\n219,Mystic4,Mystic, +7 All Stat &nbsp;   +18% All Damage rate &nbsp;  Add Random Buff When Use Arcane Spell,1,64,72,80,85,131,,,,,,0,100,511,103\n220,Mystic5,Mystic, +8 All Stat &nbsp;   +20% All Damage rate &nbsp;  +15% Cooldown Reduce rate &nbsp;  Add Random Buff When Use Arcane Spell,1,65,73,81,86,132,114,,,,,0,100,511,103\n221,RandomBuff1-1,MysticBuff1, +50 HP Restore,1,133,,,,,,,,,,6000,100,511,1014\n222,RandomBuff1-2,MysticBuff1, +30 MP Restore,1,134,,,,,,,,,,6000,100,511,1015\n223,RandomBuff1-3,MysticBuff1, +15% Damage Rate,1,135,,,,,,,,,,6000,100,511,1016\n224,RandomBuff1-4,MysticBuff1, +5% All Resistance,1,136,,,,,,,,,,6000,100,511,1017\n225,RandomBuff1-5,MysticBuff1, +10% Move and Cast speed,1,35,47,,,,,,,,,6000,100,511,1018\n226,RandomBuff2-1,MysticBuff2, +65 HP Restore,1,137,,,,,,,,,,7000,100,511,1014\n227,RandomBuff2-2,MysticBuff2, +40 MP Restore,1,138,,,,,,,,,,7000,100,511,1015\n228,RandomBuff2-3,MysticBuff2, +30% Damage Rate,1,139,,,,,,,,,,7000,100,511,1016\n229,RandomBuff2-4,MysticBuff2, +10% All Resistance,1,140,,,,,,,,,,7000,100,511,1017\n230,RandomBuff2-5,MysticBuff2, +15% Move and Cast speed,1,36,48,,,,,,,,,7000,100,511,1018\n231,RandomBuff3-1,MysticBuff3, +80 HP Restore,1,141,,,,,,,,,,8000,100,511,1014\n232,RandomBuff3-2,MysticBuff3, +50 MP Restore,1,142,,,,,,,,,,8000,100,511,1015\n233,RandomBuff3-3,MysticBuff3, +45% Damage Rate,1,143,,,,,,,,,,8000,100,511,1016\n234,RandomBuff3-4,MysticBuff3, +15% All Resistance,1,144,,,,,,,,,,8000,100,511,1017\n235,RandomBuff3-5,MysticBuff3, +20% Move and Cast speed,1,38,50,,,,,,,,,8000,100,511,1018\n1000,StartBuff,Immortal, Immortal ,1,145,146,147,,,,,,,,5000,100,512,1\n1001,LevelUPBuff,LevelUp, Level Up!!! ,1,146,147,,,,,,,,,1000,100,512,1019\n1002,EnvImmortal,Immortal, Immortal &nbsp;   You are totaly safe in here!,1,145,,,,,,,,,,0,100,512,1021\n1003,EnvPortal,,,1,149,145,,,,,,,,,1500,100,1002,1020\n1100,objBuffHeal,HP Heal, +500 HP Restore &nbsp;   +300 MP Restore,1,150,151,,,,,,,,,300,100,514,1011\n1101,objBuffDamage,Damage Buff, +50% Damage Rate,1,152,,,,,,,,,,15000,100,502,1001\n1102,objBuffSpeed,Speed, +25% Move and Cast speed,1,42,54,,,,,,,,,15000,100,510,1006\n1103,objBuffDefence,Defence, +30% All Resistance,1,153,,,,,,,,,,15000,100,509,1005\n1104,objBuffImmortal,Immortal, Immortal ,1,145,,,,,,,,,,10000,100,512,1\n2000,onlyForEffect,,,1,148,,,,,,,,,,500,100,1002,1012\n",chestData:"index,grade,HP,imgData,provideExp,provideGold,provideJewel,provideScore,minGoldCount,maxGoldCount,minGoldAmount,maxGoldAmount,minJewelCount,maxJewelCount,minJewelAmount,maxJewelAmount,minSkillCount,maxSkillCount,SkillIndex1,SkillDropRate1,SkillIndex2,SkillDropRate2,SkillIndex3,SkillDropRate3,SkillIndex4,SkillDropRate4,SkillIndex5,SkillDropRate5,SkillIndex6,SkillDropRate6,SkillIndex7,SkillDropRate7,SkillIndex7,SkillDropRate7,SkillIndex8,SkillDropRate8,SkillIndex9,SkillDropRate9,SkillIndex10,SkillDropRate10,SkillIndex11,SkillDropRate11,SkillIndex12,SkillDropRate12,SkillIndex13,SkillDropRate13,SkillIndex14,SkillDropRate14,SkillIndex15,SkillDropRate15,SkillIndex16,SkillDropRate16,SkillIndex17,SkillDropRate17,SkillIndex18,SkillDropRate18,SkillIndex19,SkillDropRate19,SkillIndex20,SkillDropRate20\n1,1,2000,108,300,50,0,100,5,7,60,130,0,1,1,1,1,1,21,75,31,100,41,75,51,50,61,50,71,50,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\n2,1,2000,108,300,50,0,100,5,7,60,130,0,1,1,1,1,1,1011,75,1021,100,1031,100,1041,75,1051,75,1061,50,1081,75,,,,,,,,,,,,,,,,,,,,,,,,,,,,\n3,1,2000,108,300,50,0,100,5,7,60,130,0,1,1,1,1,1,2011,75,2021,50,2031,75,2041,50,2061,50,2071,50,2081,50,,,,,,,,,,,,,,,,,,,,,,,,,,,,\n4,2,2500,109,500,100,0,150,6,7,80,175,1,1,1,1,1,1,41,75,51,50,61,50,71,50,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\n5,2,2500,109,500,100,0,150,6,7,80,175,1,1,1,1,1,1,1041,75,1051,75,1061,50,1081,75,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\n6,2,2500,109,500,100,0,150,6,7,80,175,1,1,1,1,1,1,2031,75,2041,50,2061,50,2071,50,2081,50,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\n7,3,3500,110,750,150,0,200,7,8,100,200,1,2,1,1,1,2,41,75,51,50,61,50,71,50,81,25,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\n8,3,3500,110,750,150,0,200,7,8,100,200,1,2,1,1,1,2,1041,75,1051,75,1061,50,1071,50,1081,75,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\n9,3,3500,110,750,150,0,200,7,8,100,200,1,2,1,1,1,2,2031,75,2041,50,2061,50,2071,50,2081,50,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\n10,4,4500,111,900,200,0,350,7,9,125,250,1,2,1,1,1,2,41,75,51,50,61,50,71,50,81,25,1041,75,1051,75,1061,50,1071,50,1081,75,,,,,,,,,,,,,,,,,,,,,,\n11,4,4500,111,900,200,0,350,7,9,125,250,1,2,1,1,1,2,1041,75,1051,75,1061,50,1071,50,2031,75,2041,50,2061,50,2071,50,2081,50,1081,75,,,,,,,,,,,,,,,,,,,,,,\n12,4,4500,111,900,200,0,350,7,9,125,250,1,2,1,1,1,2,2031,75,2041,50,2061,50,2071,50,2081,50,41,75,51,50,61,50,71,50,81,50,,,,,,,,,,,,,,,,,,,,,,\n13,5,6000,112,1000,250,0,500,8,10,150,300,2,2,1,1,1,2,61,50,71,50,81,25,1061,50,1071,50,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\n14,5,6000,112,1000,250,0,500,8,10,150,300,2,2,1,1,1,2,1061,50,1071,50,2061,50,2071,50,2081,50,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\n15,5,6000,112,1000,250,0,500,8,10,150,300,2,2,1,1,1,2,2061,50,2071,50,2081,50,61,50,71,50,81,50,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\n",obstacleData:"index,type,id,posX,posY,radius,treeImgRadius,imgData\n1,1,OTT1,1813,5287,15,45,103\n2,1,OTT2,2916,4689,15,45,103\n3,1,OTT3,3534,5217,15,45,103\n4,1,OTT4,2659,2268,15,45,103\n5,1,OTT5,2205,4811,15,45,103\n6,1,OTT6,4255,5123,15,45,103\n7,1,OTT7,911,5296,15,45,103\n8,1,OTT8,5019,847,15,45,103\n9,1,OTT9,3650,3575,15,45,103\n10,1,OTT10,2442,5525,15,45,103\n11,1,OTT11,4170,1353,15,45,103\n12,1,OTT12,2703,3846,15,45,103\n13,1,OTT13,1050,5250,15,45,103\n14,1,OTT14,5747,3310,15,45,103\n15,1,OTT15,1155,5825,15,45,103\n16,1,OTT16,3538,3638,25,75,102\n17,1,OTT17,5915,2959,25,75,102\n18,1,OTT18,1326,2446,25,75,102\n19,1,OTT19,2381,1937,25,75,102\n20,1,OTT20,5638,4165,25,75,102\n21,1,OTT21,4779,1984,25,75,102\n22,1,OTT22,4577,3139,25,75,102\n23,1,OTT23,5046,3716,25,75,102\n24,1,OTT24,4318,5169,25,75,102\n25,1,OTT25,4394,933,25,75,102\n26,1,OTT26,1539,3673,25,75,102\n27,1,OTT27,2505,1130,25,75,102\n28,1,OTT28,3130,420,25,75,102\n29,1,OTT29,1619,5102,25,75,102\n30,1,OTT30,1495,471,25,75,102\n31,1,OTT31,5776,3131,25,75,102\n32,1,OTT32,5713,5996,25,75,102\n33,1,OTT33,5333,5525,25,75,102\n34,1,OTT34,713,5955,25,75,102\n35,1,OTT35,1487,2343,25,75,102\n36,1,OTT36,3320,2989,25,75,102\n37,1,OTT37,4549,5696,25,75,102\n38,1,OTT38,1885,1192,25,75,102\n39,1,OTT39,620,3401,25,75,102\n40,1,OTT40,1365,1602,25,75,102\n41,1,OTT41,4259,5741,25,75,102\n42,1,OTT42,3759,2736,25,75,102\n43,1,OTT43,2441,2818,25,75,102\n44,1,OTT44,1297,2105,25,75,102\n45,1,OTT45,2790,1331,25,75,102\n46,1,OTT46,1056,1944,25,75,102\n47,1,OTT47,3698,1095,25,75,102\n48,1,OTT48,2627,3504,25,75,102\n49,1,OTT49,3488,1280,25,75,102\n50,1,OTT50,5526,4258,25,75,102\n51,1,OTT51,2504,1595,25,75,102\n52,1,OTT52,4500,1250,25,75,102\n53,1,OTT53,2582,749,30,90,101\n54,1,OTT54,5811,4682,30,90,101\n55,1,OTT55,1681,1557,30,90,101\n56,1,OTT56,5229,4733,30,90,101\n57,1,OTT57,2955,3093,30,90,101\n58,1,OTT58,3779,2909,30,90,101\n59,1,OTT59,5111,2341,30,90,101\n60,1,OTT60,3025,4827,30,90,101\n61,1,OTT61,1756,2445,30,90,101\n62,1,OTT62,4879,1238,30,90,101\n63,1,OTT63,3044,1209,30,90,101\n64,1,OTT64,2502,5932,30,90,101\n65,1,OTT65,3481,1035,30,90,101\n66,1,OTT66,3321,4427,30,90,101\n67,1,OTT67,5508,1295,30,90,101\n68,1,OTT68,650,728,30,90,101\n69,1,OTT69,1030,5347,30,90,101\n70,1,OTT70,5296,5735,30,90,101\n71,1,OTT71,5335,4911,30,90,101\n72,1,OTT72,4424,756,30,90,101\n73,1,OTT73,3617,3077,30,90,101\n74,1,OTT74,2067,3735,30,90,101\n75,1,OTT75,5656,1688,30,90,101\n76,1,OTT76,2026,3498,30,90,101\n77,1,OTT77,4142,5665,30,90,101\n78,1,OTT78,2142,1107,30,90,101\n79,1,OTT79,421,1652,30,90,101\n80,1,OTT80,5672,5072,30,90,101\n81,1,OTT81,2898,3001,30,90,101\n82,1,OTT82,5229,5102,30,90,101\n83,1,OTT83,1712,5196,30,90,101\n84,1,OTT84,844,4561,30,90,101\n85,1,OTT85,3324,2013,30,90,101\n86,1,OTT86,5427,1796,30,90,101\n87,1,OTT87,1800,1100,30,90,101\n88,1,OTT88,1900,1850,30,90,101\n89,1,OTT89,4350,4650,30,90,101\n90,1,OTT90,4450,4600,30,90,101\n91,1,OTT91,4600,1350,30,90,101\n101,2,OTR1,2908,4747,50,,106\n102,2,OTR2,5515,1649,50,,106\n103,2,OTR3,2290,5083,50,,106\n104,2,OTR4,3017,1005,50,,106\n105,2,OTR5,5004,4010,50,,106\n106,2,OTR6,1866,2244,50,,106\n107,2,OTR7,591,879,50,,106\n108,2,OTR8,3546,5294,50,,106\n109,2,OTR9,638,2656,50,,106\n110,2,OTR10,5974,3515,50,,106\n111,2,OTR11,5355,1263,50,,106\n112,2,OTR12,3815,716,50,,106\n113,2,OTR13,1121,2027,50,,106\n114,2,OTR14,3565,2288,50,,106\n115,2,OTR15,1075,5062,50,,106\n116,2,OTR16,4508,425,50,,106\n117,2,OTR17,4486,3926,50,,106\n118,2,OTR18,4685,3434,50,,106\n119,2,OTR19,3495,2151,50,,106\n120,2,OTR20,664,461,50,,106\n121,2,OTR21,4250,914,50,,106\n122,2,OTR22,3419,933,50,,106\n123,2,OTR23,3913,5340,50,,106\n124,2,OTR24,3886,5790,50,,106\n125,2,OTR25,3154,4025,50,,106\n126,2,OTR26,2000,1200,50,,106\n127,2,OTR27,4963,3212,70,,105\n128,2,OTR28,1190,5523,70,,105\n129,2,OTR29,3644,4896,70,,105\n130,2,OTR30,5263,886,70,,105\n131,2,OTR31,3689,3554,70,,105\n132,2,OTR32,2274,2461,70,,105\n133,2,OTR33,1310,1804,70,,105\n134,2,OTR34,1144,5225,70,,105\n135,2,OTR35,814,1889,70,,105\n136,2,OTR36,2152,3749,70,,105\n137,2,OTR37,4610,1118,70,,105\n138,2,OTR38,2968,782,70,,105\n139,2,OTR39,1476,1488,70,,105\n140,2,OTR40,651,3039,70,,105\n141,2,OTR41,2017,1779,70,,105\n142,2,OTR42,5493,5642,70,,105\n143,2,OTR43,4557,1479,70,,105\n144,2,OTR44,3421,4950,70,,105\n145,2,OTR45,1643,4767,70,,105\n146,2,OTR46,5339,3605,70,,105\n147,2,OTR47,666,2321,70,,105\n148,2,OTR48,3681,2011,70,,105\n149,2,OTR49,5014,5235,70,,105\n150,2,OTR50,2958,1974,70,,105\n151,2,OTR51,1758,3574,70,,105\n152,2,OTR52,3550,2900,70,,105\n201,3,OCG1,2090,920,35,,113\n202,3,OCG2,4480,1400,35,,113\n203,3,OCG3,2060,2000,35,,113\n204,3,OCG4,5520,2400,35,,113\n205,3,OCG5,3160,3160,35,,113\n206,3,OCG6,800,3920,35,,113\n207,3,OCG7,4260,4320,35,,113\n208,3,OCG8,1840,4920,35,,113\n209,3,OCG9,4230,5400,35,,113\n210,4,EIG1,3050,1300,150,,206\n211,4,EIG2,3100,4950,150,,206\n212,5,EPT1,1400,2900,20,,207\n213,5,EPT2,4800,3300,20,,207\n214,5,EPT3,3300,1300,20,,207\n215,5,EPT4,3100,5200,20,,207\n",resourceData:"index,name,srcPosX,srcPosY,srcWidth,srcHeight,width,height\n1,pyroNovice,0,0,70,70,60,60\n2,pyroApprentice,70,0,70,70,61,61\n3,pyroAdept,140,0,70,70,63,63\n4,pyroExpert,210,0,70,70,64,64\n5,pyroMaster,280,0,70,70,65,65\n6,frosterNovice,0,70,70,70,60,60\n7,frosterApprentice,70,70,70,70,61,61\n8,frosterAdept,140,70,70,70,63,63\n9,frosterExpert,210,70,70,70,64,64\n10,frosterMaster,280,70,70,70,65,65\n11,mysterNovice,0,140,70,70,60,60\n12,mysterApprentice,70,140,70,70,61,61\n13,mysterAdept,140,140,70,70,63,63\n14,mysterExpert,210,140,70,70,64,64\n15,mysterMaster,280,140,70,70,65,65\n16,charHandIdle,0,210,120,100,120,100\n17,charHandCast1,120,210,120,100,120,100\n18,charHandCast2,240,210,120,100,120,100\n19,charHandCast3,360,210,120,100,120,100\n20,charHandCast4,480,210,120,100,120,100\n21,castEffectFire,0,310,120,100,120,100\n22,castEffectFrost,120,310,120,100,120,100\n23,castEffectArcane,240,310,120,100,120,100\n24,projectileFire,0,220,70,70,65,65\n25,projectileFrost,70,220,70,70,65,65\n26,projectileArcane,140,220,70,70,65,65\n27,skillEffectFire,0,290,160,160,155,155\n28,skillEffectFrost,160,290,160,160,155,155\n29,skillEffectArcane,320,290,160,160,155,155\n30,ranker1,455,5,60,60,60,60\n31,ranker2,515,5,60,60,60,60\n32,ranker3,575,5,60,60,60,60\n33,Goblin,0,500,120,100,84,70\n34,Orc,120,500,120,100,96,80\n35,OrcFighter,240,500,120,100,108,90\n100,projectileSkillArrow,0,410,240,80,240,80\n101,objTreeLarge,210,0,210,210,225,225\n102,objTreeMedium,210,0,210,210,185,185\n103,objTreeSmall,210,0,210,210,145,145\n104,objTreeInside,420,0,210,210,0,0\n105,objStoneLarge,0,0,210,210,165,165\n106,objStoneMedium,0,0,210,210,125,125\n107,objStoneSmall,0,0,210,210,85,85\n108,objChest1,0,210,90,90,85,85\n109,objChest2,90,210,90,90,85,85\n110,objChest3,180,210,90,90,85,85\n111,objChest4,270,210,90,90,85,85\n112,objChest5,360,210,90,90,85,85\n113,objChestGround,450,210,90,90,85,85\n200,objGold,0,300,70,70,65,65\n201,objJewel,70,300,70,70,65,65\n202,objSkillFire,0,370,70,70,65,65\n203,objSkillFrost,70,370,70,70,65,65\n204,objSkillArcane,140,370,70,70,65,65\n205,objBox,140,300,70,70,65,65\n206,envImmortal,0,90,150,150,150,150\n207,envPortal1,0,0,90,90,90,90\n208,envPortal2,90,0,90,90,90,90\n209,envPortal3,180,0,90,90,90,90\n210,envPortal4,270,0,90,90,90,90\n211,envPortal5,360,0,90,90,90,90\n212,objBuffHeal,70,440,70,70,65,65\n213,objBuffDamage,140,440,70,70,65,65\n214,objBuffSpeed,210,440,70,70,65,65\n215,objBuffDefence,280,440,70,70,65,65\n216,objBuffImmortal,350,440,70,70,65,65\n1001,conditionEffectFreeze,0,0,80,80,75,75\n1002,conditionEffectChill,80,0,80,80,75,75\n1003,conditionEffectImmortal,160,0,80,80,75,75\n1004,conditionEffectSilence,240,0,80,80,75,75\n1005,conditionEffectIgnite1,0,80,60,60,55,55\n1006,conditionEffectIgnite2,60,80,60,60,55,55\n1007,conditionEffectIgnite3,120,80,60,60,55,55\n1008,conditionEffectIgnite4,180,80,60,60,55,55\n1009,conditionEffectIgnite5,240,80,60,60,55,55\n1010,conditionEffectIgnite6,300,80,60,60,55,55\n1011,fireHitEffect,210,220,70,70,65,65\n1012,frostHitEffect,280,220,70,70,65,65\n1013,arcaneHitEffect,350,220,70,70,65,65\n1014,blankImg,0,450,60,60,55,55\n1015,passiveEffectFire1,60,450,60,60,60,60\n1016,passiveEffectFire2,120,450,60,60,65,65\n1017,passiveEffectFire3,180,450,60,60,70,70\n1018,passiveEffectFire4,240,450,60,60,75,75\n1019,passiveEffectFire5,300,450,60,60,80,80\n1020,passiveEffectFire6,360,450,60,60,85,85\n1021,passiveEffectFire7,420,450,60,60,90,90\n1022,passiveEffectFrost1,0,510,60,60,60,60\n1023,passiveEffectFrost2,60,510,60,60,65,65\n1024,passiveEffectFrost3,120,510,60,60,70,70\n1025,passiveEffectFrost4,180,510,60,60,75,75\n1026,passiveEffectFrost5,240,510,60,60,80,80\n1027,passiveEffectFrost6,300,510,60,60,85,85\n1028,passiveEffectFrost7,360,510,60,60,90,90\n1029,passiveEffectArcane1,480,450,60,60,60,60\n1030,passiveEffectArcane2,420,510,60,60,65,65\n1031,passiveEffectArcane3,480,510,60,60,70,70\n1032,passiveEffectArcane4,540,510,60,60,75,75\n1033,passiveEffectArcane5,600,510,60,60,80,80\n1034,passiveEffectArcane6,660,510,60,60,85,85\n1035,passiveEffectArcane7,720,510,60,60,90,90\n1036,fireSkillEffectInnerFire,0,140,80,80,80,80\n1037,fireSkillEffectFury1,80,140,80,80,80,80\n1038,fireSkillEffectFury2,80,140,80,80,83,83\n1039,fireSkillEffectFury3,80,140,80,80,86,86\n1040,fireSkillEffectFury4,80,140,80,80,90,90\n1041,fireSkillEffectFury5,80,140,80,80,85,88\n1042,frostSkillEffectPurify,160,140,80,80,70,70\n1043,frostSkillEffectIceBlock,240,140,80,80,90,90\n1044,arcaneSkillEffectCloak,320,140,80,80,90,90\n1045,arcaneSkillEffectHaste1,400,140,80,80,80,80\n1046,arcaneSkillEffectHaste2,400,140,80,80,83,83\n1047,arcaneSkillEffectHaste3,400,140,80,80,86,86\n1048,arcaneSkillEffectHaste4,400,140,80,80,90,90\n1049,arcaneSkillEffectHaste5,400,140,80,80,85,88\n1050,fireProjectileRollingFire,480,290,90,90,90,90\n1051,frostProjectileFrostOrb,570,290,90,90,90,90\n1052,arcaneSkillNoDamageExplosion,660,290,90,90,90,90\n1053,regenHP1,360,80,60,60,55,55\n1054,regenHP2,420,80,60,60,55,55\n1055,regenHP3,480,80,60,60,55,55\n1056,regenHP4,540,80,60,60,55,55\n1057,regenHP5,600,80,60,60,55,55\n1058,regenMP1,360,20,60,60,55,55\n1059,regenMP2,420,20,60,60,55,55\n1060,regenMP3,480,20,60,60,55,55\n1061,regenMP4,540,20,60,60,55,55\n1062,regenMP5,600,20,60,60,55,55\n1063,purifyAndHeal1,660,20,60,60,55,55\n1064,purifyAndHeal2,720,20,60,60,55,55\n1065,dispel1,480,140,60,60,55,55\n1066,dispel2,540,140,60,60,55,55\n1067,dispel3,600,140,60,60,55,55\n1068,dispel4,660,140,60,60,55,55\n1069,levelUp1,160,0,80,80,64,64\n1070,levelUp2,160,0,80,80,66,66\n1071,levelUp3,160,0,80,80,68,68\n1072,levelUp4,160,0,80,80,70,70\n1073,levelUp5,160,0,80,80,72,72\n1074,portalEffect1,575,375,80,80,120,120\n1075,portalEffect2,575,375,80,80,122,122\n1076,portalEffect3,575,375,80,80,124,124\n1077,portalEffect4,575,375,80,80,126,126\n1078,portalEffect5,575,375,80,80,128,128\n1079,portalEffect6,575,375,80,80,130,130\n1080,portalEffect7,575,375,80,80,128,128\n1081,portalEffect8,575,375,80,80,126,126\n1082,portalEffect9,575,375,80,80,124,124\n1083,portalEffect10,575,375,80,80,122,122\n",iconResourceData:"index,name,top,right,bottom,left\n1,Pyro Attack,0,72,72,0\n2,Fire Bolt,0,144,72,72\n3,Burning Soul,0,216,72,144\n4,Fire Ball,0,288,72,216\n5,Inner Fire,0,360,72,288\n6,Rolling Fire,0,432,72,360\n7,Fury,0,504,72,432\n8,Explosion,0,576,72,504\n9,Pyromaniac,0,648,72,576\n101,Froster Attack,72,72,144,0\n102,Ice Bolt,72,144,144,72\n103,Healing,72,216,144,144\n104,Frozen Soul,72,288,144,216\n105,Purify,72,360,144,288\n106,Ice Block,72,432,144,360\n107,Cold Snap,72,504,144,432\n108,Frozen Orb,72,576,144,504\n109,Freezer,72,648,144,576\n110,Ice Spear,72,720,144,648\n201,Myster Attack,144,72,216,0\n202,Arcane Bolt,144,144,216,72\n203,Arcane Cloak,144,216,216,144\n204,Arcane Missile,144,288,216,216\n205,Silence,144,360,216,288\n206,Dispel,144,432,216,360\n207,Blink,144,504,216,432\n208,Arcane Blast,144,576,216,504\n209,Haste,144,648,216,576\n210,Mystic,144,720,216,648\n501,Buff_Burning Soul,360,72,432,0\n502,Buff_Inner Fire,360,144,432,72\n503,Buff_Fury,360,216,432,144\n504,Buff_Pyromaniac,360,288,432,216\n505,Buff_Frozen Soul,360,360,432,288\n506,Buff_Purify,360,432,432,360\n507,Buff_Ice Block,360,504,432,432\n508,Buff_Freezer,360,576,432,504\n509,Buff_Arcane Cloak,432,72,504,0\n510,Buff_Haste,432,144,504,72\n511,Buff_Mystic,432,216,504,144\n512,Buff_Immortal,432,288,504,216\n513,Buff_Dispel,360,648,432,576\n514,Buff_Heal,360,720,432,648\n515,Debuff_Ignite,288,72,360,0\n516,Debuff_Chill,288,144,360,72\n517,Debuff_Freeze,288,216,360,144\n518,Debuff_Silence,288,288,360,216\n519,Debuff_Dispel,288,360,360,288\n1001,blankImg,216,72,288,0\n1002,whiteBlankImg,216,144,288,72\n",effectGroupData:"index,name,isRotate,rotateStartDegree,isAttach,isFront,resourceLifeTime,resourceIndex1,resourceIndex2,resourceIndex3,resourceIndex4,resourceIndex5,resourceIndex6,resourceIndex7,resourceIndex8,resourceIndex9,resourceIndex10\n1,Immortal,1,0,1,1,,1003,,,,,,,,,\n2,Chill,0,,1,1,,1002,,,,,,,,,\n3,Freeze,0,,1,1,,1001,,,,,,,,,\n4,Silence,0,,1,1,,1004,,,,,,,,,\n5,Ignite,0,,0,0,300,1005,1006,1007,1008,1009,1010,,,,\n6,fireHitEffect,0,,1,1,100,1011,,,,,,,,,\n7,frostHitEffect,0,,1,1,100,1012,,,,,,,,,\n8,arcaneHitEffect,0,,1,1,100,1013,,,,,,,,,\n101,firePassive,0,,1,0,,1014,1014,1014,1015,1016,1017,1018,1019,1020,1021\n102,frostPassive,0,,1,0,,1014,1014,1014,1022,1023,1024,1025,1026,1027,1028\n103,arcanePassive,1,0,1,0,,1014,1014,1014,1029,1030,1031,1032,1033,1034,1035\n1001,fireSkillEffectInnerFire,1,0,1,0,,1036,,,,,,,,,\n1002,fireSkillEffectFury,0,,1,0,,1037,1038,1039,1040,1041,1040,1039,1038,1037,1037\n1003,frostSkillEffectPurify,1,0,1,1,,1042,,,,,,,,,\n1004,frostSkillEffectIceBlock,1,0,1,1,,1043,,,,,,,,,\n1005,arcaneSkillEffectCloak,1,0,1,0,,1044,,,,,,,,,\n1006,arcaneSkillEffectHaste,1,0,1,0,,1048,1047,1046,1045,1045,1045,1046,1047,1048,1049\n1007,fireProjectileRollingFire,1,0,0,1,,1050,,,,,,,,,\n1008,frostProjectileFrostOrb,1,0,0,1,,1051,,,,,,,,,\n1009,arcaneSkillNoDamageExplosion,0,,0,1,,1052,,,,,,,,,\n1010,regenHP,0,,1,1,,1054,1053,1054,1055,1056,1057,1014,1014,1014,1014\n1011,regenMP,0,,1,1,,1014,1014,1014,1014,1059,1058,1059,1060,1061,1062\n1012,purifyAndHeal,0,,1,1,,1063,1064,1063,1058,1059,,,,,\n1013,dispel,0,,1,1,,1066,1065,1066,1067,1068,,,,,\n1014,mysticRegenHP,0,,1,1,,1014,1014,1054,1053,1054,1055,1056,1057,1014,1014\n1015,mysticRegenMP,0,,1,1,,1014,1059,1058,1059,1060,1061,1062,1014,1014,1014\n1016,mysticInnerFire,1,180,1,0,,1036,,,,,,,,,\n1017,mysticCloak,1,180,1,0,,1044,,,,,,,,,\n1018,mysticHaste,1,0,1,0,,1045,1045,1046,1047,1048,1049,1048,1047,1046,1045\n1019,levelUp,1,0,1,1,,1069,1070,1071,1072,1073,1072,1071,1070,1069,\n1020,Portal,1,0,1,1,1000,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083\n1021,ImmortalZone,1,0,1,0,,1003,,,,,,,,,\n",mobData:"index,name,mobName,size,moveSpeed,rotateSpeed,attackTime,maxHP,damage,resistAll,attackRange,maxHitRange,resourceIndex,dropIndex,imgRatio\n1,Goblin1,Goblin,45,170,360,200,800,20,0,50,500,33,1,70\n2,Goblin2,Goblin,45,170,360,200,800,20,0,50,500,33,2,70\n3,Goblin3,Goblin,45,170,360,200,800,20,0,50,500,33,3,70\n4,Orc1,Orc,50,160,360,200,3300,50,10,60,550,34,4,80\n5,Orc2,Orc,50,160,360,200,3300,50,10,60,550,34,5,80\n6,Orc3,Orc,50,160,360,200,3300,50,10,60,550,34,6,80\n7,OrcFighter1,OrcFighter,55,155,360,180,5500,80,20,60,600,35,7,90\n8,OrcFighter2,OrcFighter,55,155,360,180,5500,80,20,60,600,35,8,90\n9,OrcFighter3,OrcFighter,55,155,360,180,5500,80,20,60,600,35,9,90\n",objBuffData:"index,name,buffGroupIndex,resourceIndex\n1,Heal,1100,212\n2,Damage,1101,213\n3,Speed,1102,214\n4,Defence,1103,215\n5,Immortal,1104,216\n"}},{}],10:[function(e,t,s){t.exports={CRYPKEY:"3vUisU6ckJDeD8hDPfOpONIFAj7lwYGO",GAME_VERSION:"1.0.6",MAX_SERVER_RESPONSE_TIME:5e3,LIMIT_NO_ACTION_TIME:24e5,LONG_TIME_INTERVAL:3e5,MAX_PING_LIMIT:1e3,INTERVAL:60,FPS:60,MAX_FIND_AVAILABLE_SERVER_TIME:2e4,RESOURCES_COUNT:5,RESOURCE_SRC_CHARACTER:"../images/Character.png",RESOURCE_SRC_OBJECT:"../images/Objects.png",RESOURCE_SRC_SKILL_EFFECT:"../images/SkillEffect.png",RESOURCE_SRC_ENVIRONMENT:"../images/Environment.png",RESOURCE_SRC_UI:"../images/UI.png",MINIMAP_CHEST_GROUND_SRC:"../images/chestGround.png",MINIMAP_CHEST_SRC_1:"../images/chest1.png",MINIMAP_CHEST_SRC_2:"../images/chest2.png",MINIMAP_CHEST_SRC_3:"../images/chest3.png",MINIMAP_VOID_SRC:"../images/void.png",START_BUTTON:1,RESTART_BUTTON:2,MINIMUM_LOADING_TIME:2e3,CHANGE_LOADING_TEXT_TIME:500,SKILL_INFORM_TIME:150,SKILL_HIT_EFFECT_TIME:100,USER_ATTACH_EFFECT_CHANGE_TIME:150,USER_DETACH_EFFECT_CHANGE_TIME:50,USER_DETACH_EFFECT_MAKE_TIME:200,RISE_TEXT_LIFE_TIME:3e3,PROJECTILE_EFFECT_CHANGE_TIME:150,CHAT_MESSAGE_TIME:5e3,USER_BODY_SIZE:64,USER_NICK_NAME_LENGTH:15,CHAT_MESSAGE_LENGTH:25,DEAD_SCENE_TEXT_ANI_PLAY_DELAY_TIME:1e3,DEAD_SCENE_PLAY_TIME:5e3,CAST_EFFECT_INTERPOLATION_FACTOR:.1,SKILL_EFFECT_INTERPOLATION_FACTOR:.6,USER_ANI_TIME:500,IMG_COLLISION_CLEAR_TIME:200,CANVAS_MAX_SIZE:{width:6400,height:6400},CANVAS_MAX_LOCAL_SIZE:{width:1600,height:1e3},IMAGE_SOURCE_SIZE:{width:800,height:600},DRAW_MODE_NORMAL:1,DRAW_MODE_SKILL_RANGE:2,SKILL_CHANGE_PANEL_CONTAINER:1,SKILL_CHANGE_PANEL_EQUIP:2,OBJECT_STATE_IDLE:1,OBJECT_STATE_MOVE:2,OBJECT_STATE_ATTACK:3,OBJECT_STATE_CAST:4,OBJECT_STATE_DEATH:5,OBJECT_STATE_MOVE_AND_ATTACK:6,MOVE_SLIGHT_RATE:.6,MOVE_BACK_WARD_SPEED_DECREASE_RATE:.5,GAME_STATE_LOAD:1,GAME_STATE_START_SCENE:2,GAME_STATE_GAME_START:3,GAME_STATE_GAME_ON:4,GAME_STATE_GAME_END:5,GAME_STATE_RESTART_SCENE:6,GAME_STATE_RESTART:7,CHAR_TYPE_FIRE:1,CHAR_TYPE_FROST:2,CHAR_TYPE_ARCANE:3,CHAR_TYPE_MOB:4,PREFIX_USER:"USR",PREFIX_MONSTER:"MON",PREFIX_SKILL:"SKL",PREFIX_SKILL_PROJECTILE:"SKP",PREFIX_CHEST:"CHT",PREFIX_OBSTACLE_TREE:"OTT",PREFIX_OBSTACLE_ROCK:"OTR",PREFIX_OBSTACLE_CHEST_GROUND:"OCG",PREFIX_OBJECT_EXP:"OXP",PREFIX_OBJECT_SKILL:"OSK",PREFIX_OBJECT_GOLD:"OGD",PREFIX_OBJECT_JEWEL:"OJW",PREFIX_OBJECT_BOX:"OBX",PREFIX_OBJECT_BUFF:"OBB",PREFIX_ENVIRONMENT_IMMORTAL_GROUND:"EIG",PREFIX_ENVIRONMENT_PORTAL:"EPT",USER_CONDITION_IMMORTAL:1,USER_CONDITION_CHILL:2,USER_CONDITION_FREEZE:3,USER_CONDITION_SILENCE:4,USER_CONDITION_IGNITE:5,USER_CONDITION_BLUR:6,SKILL_PROPERTY_FIRE:1,SKILL_PROPERTY_FROST:2,SKILL_PROPERTY_ARCANE:3,SKILL_INDEX_PYRO_BASE:11,SKILL_INDEX_PYRO_PASSIVE:91,SKILL_INDEX_PYRO_GIVEN:21,SKILL_INDEX_FROST_BASE:1001,SKILL_INDEX_FROST_PASSIVE:1091,SKILL_INDEX_FROST_GIVEN:1011,SKILL_INDEX_ARCANE_BASE:2001,SKILL_INDEX_ARCANE_PASSIVE:2091,SKILL_INDEX_ARCANE_GIVEN:2011,TUTORIAL_SKILL_FIRE_INDEX:41,TUTORIAL_SKILL_FROST_INDEX:1021,TUTORIAL_SKILL_ARCANE_INDEX:2021,SKILL_TYPE_INSTANT_RANGE:1,SKILL_TYPE_INSTANT_PROJECTILE:2,SKILL_TYPE_PROJECTILE:3,SKILL_TYPE_PROJECTILE_EXPLOSION:4,SKILL_TYPE_PROJECTILE_TICK:5,SKILL_TYPE_PROJECTILE_TICK_EXPLOSION:6,SKILL_TYPE_RANGE:7,SKILL_TYPE_SELF:8,SKILL_TYPE_SELF_EXPLOSION:9,SKILL_TYPE_TELEPORT:10,SKILL_TYPE_PASSIVE:11,SKILL_BASIC_INDEX:1,SKILL_EQUIP1_INDEX:2,SKILL_EQUIP2_INDEX:3,SKILL_EQUIP3_INDEX:4,SKILL_EQUIP4_INDEX:5,SKILL_PASSIVE_INDEX:6,STAT_POWER_INDEX:1,STAT_MAGIC_INDEX:2,STAT_SPEED_INDEX:3,STAT_OFFENCE_INDEX:4,STAT_DEFENCE_INDEX:5,PROJECTILE_FIRE_DISTANCE:20,MULTI_PROJECTILE_DEGREE:15,OBJ_SKILL_RADIUS:20,OBJ_JEWEL_RADIUS:20,OBJ_BOX_RADIUS:23,OBJ_BUFF_RADIUS:25,GET_RESOURCE_TYPE_GOLD:1,GET_RESOURCE_TYPE_JEWEL:2,GET_RESOURCE_TYPE_EXP:3,OBJ_TYPE_TREE:1,OBJ_TYPE_ROCK:2,OBJ_TYPE_CHEST_GROUND:3,ENV_TYPE_IMMORTAL_GROUND:4,ENV_TYPE_PORTAL:5,RESOURCE_INDEX_USER_HAND_1:16,RESOURCE_INDEX_USER_HAND_2:17,RESOURCE_INDEX_USER_HAND_3:18,RESOURCE_INDEX_USER_HAND_4:19,RESOURCE_INDEX_USER_HAND_5:20,RESOURCE_INDEX_CASTING_FIRE:21,RESOURCE_INDEX_CASTING_FROST:22,RESOURCE_INDEX_CASTING_ARCANE:23,RESOURCE_INDEX_PROJECTILE_FIRE:24,RESOURCE_INDEX_PROJECTILE_FROST:25,RESOURCE_INDEX_PROJECTILE_ARCANE:26,RESOURCE_INDEX_SKILL_EFFECT_FIRE:27,RESOURCE_INDEX_SKILL_EFFECT_FROST:28,RESOURCE_INDEX_SKILL_EFFECT_ARCANE:29,RESOURCE_INDEX_RANK_1:30,RESOURCE_INDEX_RANK_2:31,RESOURCE_INDEX_RANK_3:32,RESOURCE_INDEX_PORTAL_1:207,RESOURCE_INDEX_PORTAL_2:208,RESOURCE_INDEX_PORTAL_3:209,RESOURCE_INDEX_PORTAL_4:210,RESOURCE_INDEX_PORTAL_5:211,RESOURCE_INDEX_PROJECTILE_SKILL_ARROW:100,RESOURCE_INDEX_OBSTACLE_TREE_INSIDE:104,RESOURCE_INDEX_OBJ_GOLD:200,RESOURCE_INDEX_OBJ_JEWEL:201,RESOURCE_INDEX_OBJ_BOX:205,RESOURCE_INDEX_OBJ_SKILL_FIRE:202,RESOURCE_INDEX_OBJ_SKILL_FROST:203,RESOURCE_INDEX_OBJ_SKILL_ARCANE:204,RESOURCE_INDEX_CHEST_GRADE_1:108,RESOURCE_INDEX_CHEST_GRADE_2:109,RESOURCE_INDEX_CHEST_GRADE_3:110,RESOURCE_INDEX_CHEST_GRADE_4:111,RESOURCE_INDEX_CHEST_GRADE_5:112,UI_RESOURCE_INDEX_BLANK:1001,STAT_CALC_FACTOR_POWER_TO_DAMAGE_RATE:.5,STAT_CALC_FACTOR_POWER_TO_HP:25,STAT_CALC_FACTOR_POWER_TO_HP_REGEN:.05,STAT_CALC_FACTOR_MAGIC_TO_RESISTANCE:.25,STAT_CALC_FACTOR_MAGIC_TO_MP:15,STAT_CALC_FACTOR_MAGIC_TO_MP_REGEN:.03,STAT_CALC_FACTOR_SPEED_TO_CAST_SPEED:.25,STAT_CALC_FACTOR_SPEED_TO_COOLDOWN_REDUCE_RATE:.25,KILL_FEEDBACK_LEVEL_0:1,KILL_FEEDBACK_LEVEL_1:2,KILL_FEEDBACK_LEVEL_1_PREFIX:"Gorgeous",KILL_FEEDBACK_LEVEL_1_COLOR:"#f5ebb6",KILL_FEEDBACK_LEVEL_2:3,KILL_FEEDBACK_LEVEL_2_PREFIX:"Amazing",KILL_FEEDBACK_LEVEL_2_COLOR:"#f5e489",KILL_FEEDBACK_LEVEL_3:4,KILL_FEEDBACK_LEVEL_3_PREFIX:"Incredible",KILL_FEEDBACK_LEVEL_3_COLOR:"#f7de57",KILL_FEEDBACK_LEVEL_4:5,KILL_FEEDBACK_LEVEL_4_PREFIX:"Heroic",KILL_FEEDBACK_LEVEL_4_COLOR:"#f9dc3e",KILL_FEEDBACK_LEVEL_5:6,KILL_FEEDBACK_LEVEL_5_PREFIX:"Legendary",KILL_FEEDBACK_LEVEL_5_COLOR:"#fbda25",KILL_FEEDBACK_LEVEL_6:7,KILL_FEEDBACK_LEVEL_6_PREFIX:"Mythic",KILL_FEEDBACK_LEVEL_6_COLOR:"#f9d511",KILL_FEEDBACK_LEVEL_7:8,KILL_FEEDBACK_LEVEL_7_PREFIX:"Godlike",KILL_FEEDBACK_LEVEL_7_COLOR:"#ffd700"}},{}],11:[function(e,t,s){t.exports={backspace:"8",tab:"9",enter:"13",shift:"16",ctrl:"17",alt:"18",pause_break:"19",caps_lock:"20",escape:"27",page_up:"33","page down":"34",end:"35",home:"36",left_arrow:"37",up_arrow:"38",right_arrow:"39",down_arrow:"40",insert:"45",delete:"46",0:"48",1:"49",2:"50",3:"51",4:"52",5:"53",6:"54",7:"55",8:"56",9:"57",a:"65",b:"66",c:"67",d:"68",e:"69",f:"70",g:"71",h:"72",i:"73",j:"74",k:"75",l:"76",m:"77",n:"78",o:"79",p:"80",q:"81",r:"82",s:"83",t:"84",u:"85",v:"86",w:"87",x:"88",y:"89",z:"90","left_window key":"91","right_window key":"92",select_key:"93","numpad 0":"96","numpad 1":"97","numpad 2":"98","numpad 3":"99","numpad 4":"100","numpad 5":"101","numpad 6":"102","numpad 7":"103","numpad 8":"104","numpad 9":"105",multiply:"106",add:"107",subtract:"109","decimal point":"110",divide:"111",f1:"112",f2:"113",f3:"114",f4:"115",f5:"116",f6:"117",f7:"118",f8:"119",f9:"120",f10:"121",f11:"122",f12:"123",num_lock:"144",scroll_lock:"145",semi_colon:"186",equal_sign:"187",comma:"188",dash:"189",period:"190",forward_slash:"191",grave_accent:"192",open_bracket:"219",backslash:"220",closebracket:"221",single_quote:"222",space:"32"}},{}],12:[function(e,t,s){"use strict";var l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},s=0;s<10;s++)t["_"+String.fromCharCode(s)]=s;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(e){i[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var s,i,n=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),a=1;a<arguments.length;a++){for(var r in s=Object(arguments[a]))c.call(s,r)&&(n[r]=s[r]);if(l){i=l(s);for(var o=0;o<i.length;o++)d.call(s,i[o])&&(n[i[o]]=s[i[o]])}}return n}},{}],13:[function(e,t,s){var i,n;i=this,n=function(){var a=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};return function(){var g,f,C,i,b,r,n,L;function m(e){var t,s;if(this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this.maxElements=e.maxElements,null==this.width||null==this.height)throw new Error("Missing quadtree dimensions.");if(null==this.x&&(this.x=0),null==this.y&&(this.y=0),null==this.maxElements&&(this.maxElements=1),this.contents=[],this.oversized=[],this.size=0,this.width<1||this.height<1)throw new Error("Dimensions must be positive integers.");if(!a(this.x)||!a(this.y))throw new Error("Coordinates must be integers");if(this.maxElements<1)throw new Error("The maximum number of elements before a split must be a positive integer.");for(t in(s=this).children={NW:{create:function(){return new m({x:s.x,y:s.y,width:Math.max(Math.floor(s.width/2),1),height:Math.max(Math.floor(s.height/2),1),maxElements:s.maxElements})},tree:null},NE:{create:function(){return new m({x:s.x+Math.max(Math.floor(s.width/2),1),y:s.y,width:Math.ceil(s.width/2),height:Math.max(Math.floor(s.height/2),1),maxElements:s.maxElements})},tree:null},SW:{create:function(){return new m({x:s.x,y:s.y+Math.max(Math.floor(s.height/2),1),width:Math.max(Math.floor(s.width/2),1),height:Math.ceil(s.height/2),maxElements:s.maxElements})},tree:null},SE:{create:function(){return new m({x:s.x+Math.max(Math.floor(s.width/2),1),y:s.y+Math.max(Math.floor(s.height/2),1),width:Math.ceil(s.width/2),height:Math.ceil(s.height/2),maxElements:s.maxElements})},tree:null}},this.children)this.children[t].get=function(){return null!=this.tree||(this.tree=this.create()),this.tree}}return i=function(e){var t,s;return{x:Math.floor((null!=(t=e.width)?t:1)/2)+e.x,y:Math.floor((null!=(s=e.height)?s:1)/2)+e.y}},g=function(e,t){var s,i,n,a;return!(e.x>=t.x+(null!=(s=t.width)?s:1)||e.x+(null!=(i=e.width)?i:1)<=t.x||e.y>=t.y+(null!=(n=t.height)?n:1)||e.y+(null!=(a=e.height)?a:1)<=t.y)},f=function(e,t){var s;return s=i(t),e.x<s.x?e.y<s.y?"NW":"SW":e.y<s.y?"NE":"SE"},L=function(e){if("object"!=typeof e)throw new Error("Element must be an Object.");if(null==e.x||null==e.y)throw new Error("Coordinates properties are missing.");if((null!=e?e.width:void 0)<0||(null!=e?e.height:void 0)<0)throw new Error("Width and height must be positive integers.")},r=function(e){var t,s,i,n;return s=Math.max(Math.floor(e.width/2),1),i=Math.ceil(e.width/2),n=Math.max(Math.floor(e.height/2),1),t=Math.ceil(e.height/2),{NW:{x:e.x,y:e.y,width:s,height:n},NE:{x:e.x+s,y:e.y,width:i,height:n},SW:{x:e.x,y:e.y+n,width:s,height:t},SE:{x:e.x+s,y:e.y+n,width:i,height:t}}},C=function(e,t){var s,i,n,a;for(i in a=[],n=r(t))s=n[i],g(e,s)&&a.push(i);return a},b=function(e,s){var t;return(t=function(t){return e["_"+t]=e[t],Object.defineProperty(e,t,{set:function(e){return s.remove(this,!0),this["_"+t]=e,s.push(this)},get:function(){return this["_"+t]},configurable:!0})})("x"),t("y"),t("width"),t("height")},n=function(t){var e;return(e=function(e){if(null!=t["_"+e])return delete t[e],t[e]=t["_"+e],delete t["_"+e]})("x"),e("y"),e("width"),e("height")},m.prototype.push=function(e,t){return this.pushAll([e],t)},m.prototype.pushAll=function(e,t){var s,i,n,a,r,o,l,c,d,u,h,p,f,m,g,E,I,S,_,T;for(h=0,m=e.length;h<m;h++)u=e[h],L(u),t&&b(u,this);for(l=[{tree:this,elements:e}];0<l.length;){for(T=(I=l.shift()).tree,c={NW:null,NE:null,SW:null,SE:null},p=0,g=(o=I.elements).length;p<g;p++)if(r=o[p],T.size++,1!==(d=C(r,T)).length||1===T.width||1===T.height)T.oversized.push(r);else if(T.size-T.oversized.length<=T.maxElements)T.contents.push(r);else{for(a=d[0],_=T.children[a],null==c[a]&&(c[a]={tree:_.get(),elements:[]}),c[a].elements.push(r),f=0,E=(S=T.contents).length;f<E;f++)i=S[f],null==c[n=C(i,T)[0]]&&(c[n]={tree:T.children[n].get(),elements:[]}),c[n].elements.push(i);T.contents=[]}for(a in c)null!=(s=c[a])&&l.push(s)}return this},m.prototype.remove=function(e,t){var s,i;return L(e),-1<(s=this.oversized.indexOf(e))?(this.oversized.splice(s,1),this.size--,t||n(e),!0):-1<(s=this.contents.indexOf(e))?(this.contents.splice(s,1),this.size--,t||n(e),!0):!(null==(i=this.children[f(e,this)]).tree||!i.tree.remove(e,t))&&(this.size--,0===i.tree.size&&(i.tree=null),!0)},m.prototype.colliding=function(e,t){var s,i,n,a,r,o,l,c,d,u,h,p,f,m;for(null==t&&(t=g),L(e),r=[],n=[this];0<n.length;){for(o=0,d=(p=(m=n.shift()).oversized).length;o<d;o++)(i=p[o])!==e&&t(e,i)&&r.push(i);for(l=0,u=(f=m.contents).length;l<u;l++)(i=f[l])!==e&&t(e,i)&&r.push(i);for(0===(a=C(e,m)).length&&(a=[],e.x>=m.x+m.width&&a.push("NE"),e.y>=m.y+m.height&&a.push("SW"),0<a.length&&(1===a.length?a.push("SE"):a=["SE"])),c=0,h=a.length;c<h;c++)s=a[c],null!=m.children[s].tree&&n.push(m.children[s].tree)}return r},m.prototype.onCollision=function(e,t,s){var i,n,a,r,o,l,c,d,u,h,p,f,m;for(null==s&&(s=g),L(e),a=[this];0<a.length;){for(o=0,d=(p=(m=a.shift()).oversized).length;o<d;o++)(n=p[o])!==e&&s(e,n)&&t(n);for(l=0,u=(f=m.contents).length;l<u;l++)(n=f[l])!==e&&s(e,n)&&t(n);for(0===(r=C(e,m)).length&&(r=[],e.x>=m.x+m.width&&r.push("NE"),e.y>=m.y+m.height&&r.push("SW"),0<r.length&&(1===r.length?r.push("SE"):r=["SE"])),c=0,h=r.length;c<h;c++)i=r[c],null!=m.children[i].tree&&a.push(m.children[i].tree)}return null},m.prototype.get=function(e){return this.where(e)},m.prototype.where=function(i){var e,t,s,n,a,r,o,l,c,d,u,h,p;if("object"==typeof i&&(null==i.x||null==i.y))return this.find(function(e){var t,s;for(s in t=!0,i)i[s]!==e[s]&&(t=!1);return t});for(L(i),n=[],s=[this];0<s.length;){for(a=0,l=(d=(p=s.shift()).oversized).length;a<l;a++){for(o in t=d[a],e=!0,i)i[o]!==t[o]&&(e=!1);e&&n.push(t)}for(r=0,c=(u=p.contents).length;r<c;r++){for(o in t=u[r],e=!0,i)i[o]!==t[o]&&(e=!1);e&&n.push(t)}null!=(h=p.children[f(i,p)]).tree&&s.push(h.tree)}return n},m.prototype.each=function(e){var t,s,i,n,a,r,o,l,c,d;for(s=[this];0<s.length;){for(n=0,r=(l=(d=s.shift()).oversized).length;n<r;n++)i=l[n],"function"==typeof e&&e(i);for(a=0,o=(c=d.contents).length;a<o;a++)i=c[a],"function"==typeof e&&e(i);for(t in d.children)null!=d.children[t].tree&&s.push(d.children[t].tree)}return this},m.prototype.find=function(e){var t,s,i,n,a,r,o,l,c,d,u;for(s=[this],n=[];0<s.length;){for(a=0,o=(c=(u=s.shift()).oversized).length;a<o;a++)i=c[a],("function"==typeof e?e(i):void 0)&&n.push(i);for(r=0,l=(d=u.contents).length;r<l;r++)i=d[r],("function"==typeof e?e(i):void 0)&&n.push(i);for(t in u.children)null!=u.children[t].tree&&s.push(u.children[t].tree)}return n},m.prototype.filter=function(h){var p;return(p=function(e){var t,s,i,n,a,r,o,l,c,d,u;for(t in(s=new m({x:e.x,y:e.y,width:e.width,height:e.height,maxElements:e.maxElements})).size=0,e.children)null!=e.children[t].tree&&(s.children[t].tree=p(e.children[t].tree),s.size+=null!=(l=null!=(c=s.children[t].tree)?c.size:void 0)?l:0);for(n=0,r=(d=e.oversized).length;n<r;n++)i=d[n],(null==h||("function"==typeof h?h(i):void 0))&&s.oversized.push(i);for(a=0,o=(u=e.contents).length;a<o;a++)i=u[a],(null==h||("function"==typeof h?h(i):void 0))&&s.contents.push(i);return s.size+=s.oversized.length+s.contents.length,0===s.size?null:s})(this)},m.prototype.reject=function(t){return this.filter(function(e){return!("function"==typeof t?t(e):void 0)})},m.prototype.visit=function(e){var t,s,i;for(s=[this];0<s.length;)for(t in i=s.shift(),e.bind(i)(),i.children)null!=i.children[t].tree&&s.push(i.children[t].tree);return this},m.prototype.pretty=function(){var e,t,s,i,n,a,r;for(a="",s=function(e){var t,s,i;for(i="",t=s=e;s<=0?t<0:0<t;s<=0?++t:--t)i+="   ";return i},t=[{label:"ROOT",tree:this,level:0}];0<t.length;){for(e in a+=(i=s((r=t.shift()).level))+"| "+r.label+"\n"+i+"| ------------\n",0<r.tree.oversized.length&&(a+=i+"| * Oversized elements *\n"+i+"|   "+r.tree.oversized+"\n"),0<r.tree.contents.length&&(a+=i+"| * Leaf content *\n"+i+"|   "+r.tree.contents+"\n"),n=!1,r.tree.children)null!=r.tree.children[e].tree&&(n=!0,t.unshift({label:e,tree:r.tree.children[e].tree,level:r.level+1}));n&&(a+=i+"\n")}return a},m}()},"function"==typeof define&&define.amd?define([],n):"object"==typeof s&&t.exports?t.exports=n():i.Quadtree=n()},{}],14:[function(e,t,s){t.exports={"NORTH EAST AMERICA":"","NORTH EAST AMERICA 1":{SERVER:"NORTH EAST AMERICA",IP:"52.90.99.174"},EUROPE:"","EUROPE 1":{SERVER:"EUROPE",IP:"18.196.2.82"}}},{}],15:[function(i,e,c){var d=i("./gameConfig.json"),u=Math.PI/180,o=i("../../modules/public/objectAssign.js"),n=i("msgpack-js");function h(e){for(var t=e,s=0;s<6;s++)t+=Math.floor(16*Math.random()).toString(16);return t}c.rotate=function(e){c.isNumeric(this.rotateSpeed)&&(this.targetDirection===this.direction?this.currentState===d.OBJECT_STATE_MOVE||this.currentState===d.OBJECT_STATE_MOVE_AND_ATTACK?this.move(e):this.currentState===d.OBJECT_STATE_ATTACK||this.currentState===d.OBJECT_STATE_CAST&&this.executeSkill():(0<this.direction&&this.targetDirection<0?180-this.direction+180+this.targetDirection<this.direction-this.targetDirection?Math.abs(this.targetDirection-this.direction)<this.rotateSpeed*e?this.direction+=Math.abs(this.targetDirection-this.direction):this.direction+=this.rotateSpeed*e:this.targetDirection<this.direction&&(Math.abs(this.targetDirection-this.direction)<this.rotateSpeed*e?this.direction-=Math.abs(this.targetDirection-this.direction):this.direction-=this.rotateSpeed*e):this.direction<0&&0<this.targetDirection?180+this.direction+180-this.targetDirection<this.targetDirection-this.direction?Math.abs(this.targetDirection-this.direction)<this.rotateSpeed*e?this.direction-=Math.abs(this.targetDirection-this.direction):this.direction-=this.rotateSpeed*e:this.targetDirection>this.direction&&(Math.abs(this.targetDirection-this.direction)<this.rotateSpeed*e?this.direction+=Math.abs(this.targetDirection-this.direction):this.direction+=this.rotateSpeed*e):this.targetDirection>this.direction?Math.abs(this.targetDirection-this.direction)<this.rotateSpeed*e?this.direction+=Math.abs(this.targetDirection-this.direction):this.direction+=this.rotateSpeed*e:this.targetDirection<this.direction&&(Math.abs(this.targetDirection-this.direction)<this.rotateSpeed*e?this.direction-=Math.abs(this.targetDirection-this.direction):this.direction-=this.rotateSpeed*e),this.currentState!==d.OBJECT_STATE_MOVE&&this.currentState!==d.OBJECT_STATE_MOVE_AND_ATTACK||this.move(e,!0)),180<=this.direction?this.direction-=360:this.direction<=-180&&(this.direction+=360))},c.move=function(e,t){if(c.isNumeric(this.speed.x)&&c.isNumeric(this.speed.y)){var s=this.targetPosition.x-this.center.x,i=this.targetPosition.y-this.center.y,n=Math.pow(s,2)+Math.pow(i,2);n<100&&this.currentState===d.OBJECT_STATE_MOVE_AND_ATTACK?this.executeSkill():n<100&&(this.stop(),this.changeState(d.OBJECT_STATE_IDLE)),Math.abs(s)<Math.abs(this.speed.x)*e&&(this.speed.x=s/e),Math.abs(i)<Math.abs(this.speed.y)*e&&(this.speed.y=i/e);var a=this.onMove();a&&c.isNumeric(a.x)&&c.isNumeric(a.y)&&(this.position.x+=a.x,this.position.y+=a.y),t?(this.position.x+=this.speed.x*e*d.MOVE_SLIGHT_RATE,this.position.y+=this.speed.y*e*d.MOVE_SLIGHT_RATE):(this.position.x+=this.speed.x*e,this.position.y+=this.speed.y*e),this.position.x<0?this.position.x=0:this.position.x>d.CANVAS_MAX_SIZE.width-this.size.width&&(this.position.x=d.CANVAS_MAX_SIZE.width-this.size.width),this.position.y<0?this.position.y=0:this.position.y>d.CANVAS_MAX_SIZE.height-this.size.height&&(this.position.y=d.CANVAS_MAX_SIZE.height-this.size.height),this.setCenter(),a&&(this.isMoveBackward?(this.setTargetDirection(!0),this.setSpeed(d.MOVE_BACK_WARD_SPEED_DECREASE_RATE)):(this.setTargetDirection(),this.setSpeed()))}},c.setSpeed=function(e){var t=this.targetPosition.x-this.center.x,s=this.targetPosition.y-this.center.y,i=Math.pow(t,2),n=Math.pow(s,2);0==t&&0==s?(this.speed.x=0,this.speed.y=0):i+n<100?(this.speed.x=t,this.speed.y=s):(this.speed.x=(0<=t?1:-1)*this.maxSpeed*Math.sqrt(i/(i+n)),this.speed.y=(0<=s?1:-1)*this.maxSpeed*Math.sqrt(n/(i+n))),e&&(this.speed.x*=1-e,this.speed.y*=1-e)},c.setTargetDirection=function(e){var t=this.targetPosition.x-this.center.x,s=this.targetPosition.y-this.center.y,i=180*Math.atan(s/t)/Math.PI;isNaN(i)?this.targetDirection=this.direction:this.targetDirection=t<0&&0<=s?i+180:t<0&&s<0?i-180:i,e&&(0<=this.targetDirection?this.targetDirection-=180:this.targetDirection+=180)},c.setTargetPosition=function(e,t){var s=e.x,i=e.y;return s<t.size.width/2?s=t.size.width/2:s>d.CANVAS_MAX_SIZE.width-t.size.width/2&&(s=d.CANVAS_MAX_SIZE.width-t.size.width/2),i<t.size.height/2?i=t.size.height/2:i>d.CANVAS_MAX_SIZE.height-t.size.height/2&&(i=d.CANVAS_MAX_SIZE.height-t.size.height/2),{x:Math.floor(s),y:Math.floor(i)}},c.setMoveAttackUserTargetPosition=function(e,t,s){var i=e.x-s.center.x,n=e.y-s.center.y,a=i/Math.sqrt(Math.pow(i,2)+Math.pow(n,2)),r=n/Math.sqrt(Math.pow(i,2)+Math.pow(n,2)),o=t.range,l=i-a*o,c=n-r*o;if(Math.sqrt(Math.pow(i,2)+Math.pow(n,2))<o)var d=!0;else d=!1;return{x:s.center.x+l,y:s.center.y+c,moveBackward:d}},c.checkCircleCollision=function(e,t,s,a,i){var r=[],o={x:t,y:s,width:2*a,height:2*a,id:i};return e.onCollision(o,function(e){if(o.id!==e.id){var t=o.x+a,s=o.y+a,i=e.x+e.width/2,n=e.y+e.height/2;0<Math.pow(a+e.width/2,2)-Math.pow(i-t,2)-Math.pow(n-s,2)&&(r.collisionPosition={x:(t+i)/2,y:(s+n)/2},r.push(e))}}),r},c.calcCompelPos=function(e,t){for(var s={x:0,y:0},i=0;i<t.length;i++){var n=e.x+e.width/2,a=e.y+e.height/2,r=n-(t[i].x+t[i].width/2),o=a-(t[i].y+t[i].height/2),l=e.width/2+t[i].width/2-Math.sqrt(Math.pow(r,2)+Math.pow(o,2)),c=Math.pow(o/r,2),d=l*Math.sqrt(1/(1+c)),u=l*Math.sqrt(c/(1+c));s.x+=(0<r?1:-1)*d*1.1,s.y+=(0<o?1:-1)*u*1.1}return s},c.checkAndCalcCompelPos=function(e,t,s,i,n,a){var r=[];a={x:t,y:s,width:2*i,height:2*i,id:n};e.onCollision(a,function(e){if(a.id!==e.id){var t=a.x+a.width/2,s=a.y+a.height/2,i=e.x+e.width/2,n=e.y+e.height/2;0<Math.pow(a.width/2+e.width/2,2)-Math.pow(i-t,2)-Math.pow(n-s,2)&&r.push(e)}});var o={x:0,y:0};for(var l in r){var c=a.y+a.height/2,d=a.x+a.width/2-(r[l].x+r[l].width/2),u=c-(r[l].y+r[l].height/2),h=a.width/2+r[l].width/2-Math.sqrt(Math.pow(d,2)+Math.pow(u,2)),p=Math.pow(u/d,2),f=h*Math.sqrt(1/(1+p)),m=h*Math.sqrt(p/(1+p));o.x+=(0<d?1:-1)*f*1,o.y+=(0<u?1:-1)*m*1}return o},c.localToWorldPosition=function(e,t){return{x:e.x+t.x,y:e.y+t.y}},c.worldToLocalPosition=function(e,t,s){return s?{x:(e.x-t.x)*s,y:(e.y-t.y)*s}:{x:e.x-t.x,y:e.y-t.y}},c.worldXCoordToLocalX=function(e,t,s){return(e-t)*s},c.worldYCoordToLocalY=function(e,t,s){return(e-t)*s},c.isXInCanvas=function(e,t){return 0<e&&e<t.canvasSize.width},c.isYInCanvas=function(e,t){return 0<e&&e<t.canvasSize.height},c.isObjInCanvas=function(e,t,s){return e.x-(t+100)<=s.canvasSize.width&&0<=e.x+(t+100)&&e.y-(t+100)<=s.canvasSize.height&&0<=e.y+(t+100)},c.distanceSquare=function(e,t){var s=e.x-t.x,i=e.y-t.y;return Math.pow(s,2)+Math.pow(i,2)},c.distance=function(e,t){var s=c.distanceSpuare(e,t);return Math.sqrt(s)},c.calcSkillTargetPosition=function(e,t,s){switch(e.type){case d.SKILL_TYPE_INSTANT_RANGE:var i=e.range*Math.cos(s.direction*u),n=e.range*Math.sin(s.direction*u);return{x:s.center.x+i,y:s.center.y+n};case d.SKILL_TYPE_INSTANT_PROJECTILE:return{x:t.x,y:t.y};case d.SKILL_TYPE_RANGE:var a=c.distanceSquare(s.center,t);if(Math.pow(e.range,2)>a)return{x:t.x,y:t.y};var r=t.x-s.center.x,o=t.y-s.center.y,l=Math.atan(o/r);isNaN(l)?l=s.direction:r<0&&0<=o?l+=Math.PI:r<0&&o<0&&(l-=Math.PI);i=e.range*Math.cos(l),n=e.range*Math.sin(l);return{x:s.center.x+i,y:s.center.y+n};case d.SKILL_TYPE_SELF:case d.SKILL_TYPE_SELF_EXPLOSION:return{x:s.center.x,y:s.center.y};case d.SKILL_TYPE_TELEPORT:a=c.distanceSquare(s.center,t);if(Math.pow(e.range,2)>a)return{x:t.x,y:t.y};r=t.x-s.center.x,o=t.y-s.center.y,l=Math.atan(o/r);isNaN(l)?l=s.direction:r<0&&0<=o?l+=Math.PI:r<0&&o<0&&(l-=Math.PI);i=e.range*Math.cos(l),n=e.range*Math.sin(l);return{x:s.center.x+i,y:s.center.y+n};case d.SKILL_TYPE_PROJECTILE:case d.SKILL_TYPE_PROJECTILE_TICK:case d.SKILL_TYPE_PROJECTILE_EXPLOSION:case d.SKILL_TYPE_PROJECTILE_TICK_EXPLOSION:return{x:t.x,y:t.y}}},c.calcSkillTargetDirection=function(e,t,s){switch(e){case d.SKILL_TYPE_INSTANT_RANGE:case d.SKILL_TYPE_INSTANT_PROJECTILE:return s.direction;case d.SKILL_TYPE_RANGE:return c.calcTargetDirection(t,s.center,s.direction);case d.SKILL_TYPE_SELF:case d.SKILL_TYPE_SELF_EXPLOSION:return s.direction;case d.SKILL_TYPE_TELEPORT:case d.SKILL_TYPE_PROJECTILE:case d.SKILL_TYPE_PROJECTILE_TICK:case d.SKILL_TYPE_PROJECTILE_EXPLOSION:case d.SKILL_TYPE_PROJECTILE_TICK_EXPLOSION:return c.calcTargetDirection(t,s.center,s.direction)}},c.calcTargetDirection=function(e,t,s){var i=e.x-t.x,n=e.y-t.y,a=180*Math.atan(n/i)/Math.PI;return isNaN(a)?s:i<0&&0<=n?a+180:i<0&&n<0?a-180:a},c.calcTargetPosition=function(e,t,s){return{x:s*Math.cos(t*u),y:s*Math.sin(t*u)}},c.findData=function(e,t,s){for(var i=void 0,n=0;n<e.length;n++)if(e[n][t]==s){i=e[n];break}return i},c.findAllDatas=function(e,t,s){for(var i=[],n=0;n<e.length;n++)e[n][t]==s&&i.push(e[n]);return i},c.findDataWithTwoColumns=function(e,t,s,i,n){for(var a=[],r=null,o=0;o<e.length;o++)e[o][t]==s&&a.push(e[o]);if(0<a.length)for(o=0;o<a.length;o++)if(a[o][i]==n){r=a[o];break}return r},c.findAndSetBuffs=function(e,t,s){for(var i=[],n=0;n<10;n++){var a=e["buff"+(n+1)];if(!a)return i;var r=o({},c.findData(t,"index",a));r.actorID=s,i.push(r)}return i},c.getBuffs=function(e){for(var t=[],s=0;s<10;s++)e["buff"+(s+1)]&&t.push(e["buff"+(s+1)]);return t},c.getMobs=function(e,t){for(var s=[],i=0;i<5;i++)if(e["genMob"+(i+1)]){var n=c.findData(t,"index",e["genMob"+(i+1)]);s.push(n)}return s},c.setResourceData=function(e,t){for(var s=t.resourceLength=0;s<10;s++){var i=t["resourceIndex"+(s+1)];if(!i)break;var n=o({},c.findData(e,"index",i));t["resourceIndex"+(s+1)]=n,t.resourceLength=s+1}return!!t.resourceLength},c.makeUserEffect=function(e,t){var s={x:e.center.x,y:e.center.y};return{index:t.index,isRotate:t.isRotate,resourceIndex1:t.resourceIndex1,resourceIndex2:t.resourceIndex2,resourceIndex3:t.resourceIndex3,resourceIndex4:t.resourceIndex4,resourceIndex5:t.resourceIndex5,resourceIndex6:t.resourceIndex6,resourceIndex7:t.resourceIndex7,resourceIndex8:t.resourceIndex8,resourceIndex9:t.resourceIndex9,resourceIndex10:t.resourceIndex10,resourceLength:t.resourceLength,resourceLifeTime:t.resourceLifeTime,startTime:Date.now(),effectTimer:Date.now(),effectIndex:0,center:s,changeIndex:function(){this.effectIndex+1>=this.resourceLength?this.effectIndex=0:this.effectIndex++,this.effectTimer=Date.now()}}},c.generateRandomUniqueID=function(e,t,s){if(!s){for(var i=!1;!i;){var n=h(t);for(var a in i=!0,e)n==e[a].objectID&&(i=!1)}return n}if(s){for(var r=[],o=0;o<s;o++)for(i=!1;!i;){n=h(t);for(var a in i=!0,e)n==e[a].objectID&&(i=!1);for(var l=0;l<r.length;l++)n==r[l]&&(i=!1);i&&r.push(n)}return r}},c.getElementsByClassName=function(e,t){for(var s=[],i=e.getElementsByTagName("div"),n=0;n<i.length;n++)for(var a=0;a<i[n].classList.length;a++)i[n].classList[a]===t&&s.push(i[n]);return s},c.calcForePosition=function(e,t,s,i){return{x:e.x+i*Math.cos(s*u)-t,y:e.y+i*Math.sin(s*u)-t}},c.interpolationSine=function(e,t){return t?d.SKILL_EFFECT_INTERPOLATION_FACTOR*Math.sin(Math.PI*e/t)+.5:d.CAST_EFFECT_INTERPOLATION_FACTOR*Math.sin(2*Math.PI*e/1e3)+1},c.isNumeric=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},c.makeCssClipStyle=function(e,t){return t?"rect("+e.top*t+"px,"+e.right*t+"px,"+e.bottom*t+"px,"+e.left*t+"px)":"rect("+e.top+"px,"+e.right+"px,"+e.bottom+"px,"+e.left+"px)"},c.setImgCssStyle=function(e,t,s){s?(e.style.position="absolute",e.style.top=-t.top*s+"px",e.style.left=-t.left*s+"px",e.style.width=d.IMAGE_SOURCE_SIZE.width*s+"px",e.style.height=d.IMAGE_SOURCE_SIZE.height*s+"px"):(e.style.position="absolute",e.style.top=-t.top+"px",e.style.left=-t.left+"px",e.style.width=d.IMAGE_SOURCE_SIZE.width+"px",e.style.height=d.IMAGE_SOURCE_SIZE.height+"px")},c.processMessage=function(e,t,s){var i=e.replace(/(<([^>]+)>)/gi,"").substring(0,t);return s?i.replace(/\s/gi,""):i},c.createDomSelectOptGroup=function(e,t){var s=document.createElement("optgroup");s.label=e,t.appendChild(s)},c.createDomSelectOption=function(e,t,s,i){var n=document.createElement("option");n.setAttribute("value",t),s&&(n.disabled=!0);var a=document.createTextNode(e);n.appendChild(a),i.appendChild(n)},c.createRequest=function(){var t;try{t=new XMLHttpRequest}catch(e){try{t=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){t=new ActiveXObject("Microsoft.XMLHTTP")}}return t},c.getCookie=function(e,t){for(var s=e.split(";"),i=0;i<s.length;i++){for(var n=s[i];" "==n.charAt(0);)n=n.substring(1);if(0===n.indexOf(t)){var a=n.substring(t.length+1,n.length);return"true"===a||"false"!==a&&a}}return""},c.setCookie=function(e,t){var s=new Date;s.setTime(s.getTime()+6048e5);var i="expires="+s.toUTCString();document.cookie=e+"="+t+";"+i+";path=/"},c.isRender=function(e,t,s,i,n){var a=i||900,r=n||600;return!(Math.abs(t.center.x-e.center.x)>a&&Math.abs(s.x-e.center.x)>a)&&!(Math.abs(t.center.y-e.center.y)>r&&Math.abs(s.y-e.center.y)>r)},c.setDrawUser=function(e,t,s){var i=[];for(var n in e){var a=c.worldToLocalPosition(e[n].center,s.userOffset,s.scaleFactor);if(c.isObjInCanvas(a,e[n].size.width,s)){var r=c.worldToLocalPosition(e[n].position,s.userOffset,s.scaleFactor),o=!1;e[n].currentSkill&&(o=e[n].currentSkill.property),i.push({objectID:e[n].objectID,level:e[n].level,name:e[n].name,textCanvas:e[n].textCanvas,textScaleFactor:e[n].textScaleFactor,HP:e[n].HP,maxHP:e[n].maxHP,MP:e[n].MP,maxMP:e[n].maxMP,chatMessage1:e[n].chatMessage1,chatMessage2:e[n].chatMessage2,localCenter:a,localPosition:r,direction:e[n].direction,buffImgDataList:e[n].buffImgDataList,effectIndex:e[n].effectIndex,effectRotateDegree:e[n].effectRotateDegree,imgHandIndex:e[n].imgHandIndex,imgData:e[n].imgData,skillCastEffectPlay:e[n].skillCastEffectPlay,currentSkill:o,castEffectFactor:e[n].castEffectFactor,hitImgDataList:e[n].hitImgDataList,buffImgDataList:e[n].buffImgDataList})}}return i},c.setDrawMobs=function(e,t){var s=[];for(var i in e){var n=c.worldToLocalPosition(e[i].center,t.userOffset,t.scaleFactor);if(c.isObjInCanvas(n,e[i].size.width,t)){var a=c.worldToLocalPosition(e[i].position,t.userOffset,t.scaleFactor);s.push({objectID:e[i].objectID,HP:e[i].HP,maxHP:e[i].maxHP,localCenter:n,localPosition:a,direction:e[i].direction+e[i].attackDegree,effectIndex:e[i].effectIndex,effectRotateDegree:e[i].effectRotateDegree,imgData:e[i].imgData,buffImgDataList:e[i].buffImgDataList,hitImgDataList:e[i].hitImgDataList})}}return s},c.setRandomName=function(e){for(var t="",s=0;s<3;s++)t+=Math.floor(10*Math.random());switch(e){case d.CHAR_TYPE_FIRE:return"Pyro#"+t;case d.CHAR_TYPE_FROST:return"Froster#"+t;case d.CHAR_TYPE_ARCANE:return"Myster#"+t}},c.charToKeyCode=function(e){return i("./keyCodeTable")[e.toLowerCase()]},c.keyCodeToChar=function(e){var t=i("./keyCodeTable");for(var s in t)if(t[s]==e)return s.toUpperCase()},c.makeCacheCanvas=function(e,t,s){var i=document.createElement("canvas"),n=i.getContext("2d");return i.width=400*s,i.height=100*s,n.beginPath(),n.textAlign="center",n.fillStyle="black",n.font="bold 15px Arial",n.fillText("Lv."+e+" "+t,200*s,50*s,200*s),n.closePath(),i},c.makePacketForm=function(e){for(var t=[],s=1;s<arguments.length;s++)t.push(arguments[s]);return n.encode({type:e,vars:t})},c.decodePacket=function(e){return n.decode(e)}},{"../../modules/public/objectAssign.js":12,"./gameConfig.json":10,"./keyCodeTable":11,"msgpack-js":29}],16:[function(e,t,s){t.exports={1:{NAME:"TasselsPlays",HREF:"https://www.youtube.com/watch?v=v4UdZjaGYLs"},2:{NAME:"Fady",HREF:"https://www.youtube.com/watch?v=zkqpXRhDW6o"}}},{}],17:[function(e,t,s){!function(e){"use strict";var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";t.exports.toByteArray=function(e){var t,s,i,n,a,r;if(0<e.length%4)throw"Invalid string. Length must be a multiple of 4";for(r=[],i=0<(a=0<(a=e.indexOf("="))?e.length-a:0)?e.length-4:e.length,s=t=0;t<i;t+=4,s+=3)n=o.indexOf(e[t])<<18|o.indexOf(e[t+1])<<12|o.indexOf(e[t+2])<<6|o.indexOf(e[t+3]),r.push((16711680&n)>>16),r.push((65280&n)>>8),r.push(255&n);return 2===a?(n=o.indexOf(e[t])<<2|o.indexOf(e[t+1])>>4,r.push(255&n)):1===a&&(n=o.indexOf(e[t])<<10|o.indexOf(e[t+1])<<4|o.indexOf(e[t+2])>>2,r.push(n>>8&255),r.push(255&n)),r},t.exports.fromByteArray=function(e){var t,s,i,n,a=e.length%3,r="";for(t=0,i=e.length-a;t<i;t+=3)s=(e[t]<<16)+(e[t+1]<<8)+e[t+2],r+=o[(n=s)>>18&63]+o[n>>12&63]+o[n>>6&63]+o[63&n];switch(a){case 1:s=e[e.length-1],r+=o[s>>2],r+=o[s<<4&63],r+="==";break;case 2:s=(e[e.length-2]<<8)+e[e.length-1],r+=o[s>>10],r+=o[s>>4&63],r+=o[s<<2&63],r+="="}return r}}()},{}],18:[function(e,t,s){var i={};function n(e,t){for(var s in e)t[s]=e[s]}(t.exports=i).from=e("./from.js"),i.to=e("./to.js"),i.is=e("./is.js"),i.subarray=e("./subarray.js"),i.join=e("./join.js"),i.copy=e("./copy.js"),i.create=e("./create.js"),n(e("./read.js"),i),n(e("./write.js"),i)},{"./copy.js":19,"./create.js":20,"./from.js":21,"./is.js":22,"./join.js":23,"./read.js":25,"./subarray.js":26,"./to.js":27,"./write.js":28}],19:[function(e,t,s){t.exports=function(e,t,s,i,n){if(s=arguments.length<3?0:s,i=arguments.length<4?0:i,(n=arguments.length<5?e.length:n)===i)return;if(0===t.length||0===e.length)return;n>e.length&&(n=e.length);t.length-s<n-i&&(n=t.length-s+i);if(e.buffer!==t.buffer)return function(e,t,s,i,n){for(var a=n-i+s,r=s,o=i;r<a;++r,++o)t[r]=e[o]}(e,t,s,i,n);return function(e,t,s,i,n){for(var a=n+i,r=new Uint8Array(l.call(e,i,a)),o=0;i<a;++i,++o)t[s++]=r[o]}(e,t,s,i,n)};var l=[].slice},{}],20:[function(e,t,s){t.exports=function(e){return new Uint8Array(e)}},{}],21:[function(e,t,s){t.exports=function(e,t){if(Array.isArray(e))return new Uint8Array(e);return n[t||"utf8"](e)};var i=e("base64-js"),n={hex:function(e){for(var t=e.length/2,s=new Uint8Array(t),i="",n=0,a=e.length;n<a;++n)i+=e.charAt(n),0<n&&n%2==1&&(s[n>>>1]=parseInt(i,16),i="");return s},utf8:function(e){for(var t,s,i=[],n=0,a=e.length;n<a;++n)if(128&(s=e.charCodeAt(n))){t=encodeURIComponent(e.charAt(n)).substr(1).split("%");for(var r=0,o=t.length;r<o;++r)i[i.length]=parseInt(t[r],16)}else i[i.length]=s;return new Uint8Array(i)},base64:function(e){return new Uint8Array(i.toByteArray(e))}}},{"base64-js":17}],22:[function(e,t,s){t.exports=function(e){return e instanceof Uint8Array}},{}],23:[function(e,t,s){t.exports=function(e,t){if(!e.length)return new Uint8Array(0);var s=void 0!==t?t:function(e){for(var t=0,s=0,i=e.length;s<i;++s)t+=e[s].byteLength;return t}(e),i=new Uint8Array(s),n=e[0],a=n.length,r=0,o=0,l=0;for(;l<s;)o!==a?i[l++]=n[o++]:(o=0,n=e[++r],a=n&&n.length);return i}},{}],24:[function(e,t,s){var i,n;t.exports=i={},n="undefined"==typeof WeakMap?null:new WeakMap,i.get=n?function(e){var t=n.get(e.buffer);t||n.set(e.buffer,t=new DataView(e.buffer,0));return t}:function(e){return new DataView(e.buffer,0)}},{}],25:[function(e,t,s){t.exports={readUInt8:function(e,t){return e[t]},readInt8:function(e,t){var s=e[t];return s<128?s:s-256},readUInt16LE:function(e,t){return i.get(e).getUint16(t+e.byteOffset,!0)},readUInt32LE:function(e,t){return i.get(e).getUint32(t+e.byteOffset,!0)},readInt16LE:function(e,t){return i.get(e).getInt16(t+e.byteOffset,!0)},readInt32LE:function(e,t){return i.get(e).getInt32(t+e.byteOffset,!0)},readFloatLE:function(e,t){return i.get(e).getFloat32(t+e.byteOffset,!0)},readDoubleLE:function(e,t){return i.get(e).getFloat64(t+e.byteOffset,!0)},readUInt16BE:function(e,t){return i.get(e).getUint16(t+e.byteOffset,!1)},readUInt32BE:function(e,t){return i.get(e).getUint32(t+e.byteOffset,!1)},readInt16BE:function(e,t){return i.get(e).getInt16(t+e.byteOffset,!1)},readInt32BE:function(e,t){return i.get(e).getInt32(t+e.byteOffset,!1)},readFloatBE:function(e,t){return i.get(e).getFloat32(t+e.byteOffset,!1)},readDoubleBE:function(e,t){return i.get(e).getFloat64(t+e.byteOffset,!1)}};var i=e("./mapped.js")},{"./mapped.js":24}],26:[function(e,t,s){t.exports=function(e,t,s){return e.subarray(t||0,s||e.length)}},{}],27:[function(e,t,s){t.exports=function(e,t){return a[t||"utf8"](e)};var i=e("base64-js"),n=e("to-utf8"),a={hex:function(e){for(var t,s="",i=0,n=e.length;i<n;++i)t=e[i],s+=((240&t)>>>4).toString(16),s+=(15&t).toString(16);return s},utf8:function(e){return n(e)},base64:function(e){return i.fromByteArray(e)}}},{"base64-js":17,"to-utf8":30}],28:[function(e,t,s){t.exports={writeUInt8:function(e,t,s){return e[s]=t},writeInt8:function(e,t,s){return e[s]=t<0?t+256:t},writeUInt16LE:function(e,t,s){return i.get(e).setUint16(s+e.byteOffset,t,!0)},writeUInt32LE:function(e,t,s){return i.get(e).setUint32(s+e.byteOffset,t,!0)},writeInt16LE:function(e,t,s){return i.get(e).setInt16(s+e.byteOffset,t,!0)},writeInt32LE:function(e,t,s){return i.get(e).setInt32(s+e.byteOffset,t,!0)},writeFloatLE:function(e,t,s){return i.get(e).setFloat32(s+e.byteOffset,t,!0)},writeDoubleLE:function(e,t,s){return i.get(e).setFloat64(s+e.byteOffset,t,!0)},writeUInt16BE:function(e,t,s){return i.get(e).setUint16(s+e.byteOffset,t,!1)},writeUInt32BE:function(e,t,s){return i.get(e).setUint32(s+e.byteOffset,t,!1)},writeInt16BE:function(e,t,s){return i.get(e).setInt16(s+e.byteOffset,t,!1)},writeInt32BE:function(e,t,s){return i.get(e).setInt32(s+e.byteOffset,t,!1)},writeFloatBE:function(e,t,s){return i.get(e).setFloat32(s+e.byteOffset,t,!1)},writeDoubleBE:function(e,t,s){return i.get(e).setFloat64(s+e.byteOffset,t,!1)}};var i=e("./mapped.js")},{"./mapped.js":24}],29:[function(e,t,s){"use strict";var u=e("bops");function i(e,t){this.offset=t||0,this.buffer=e}function h(t){return Object.keys(t).filter(function(e){return"function"!=typeof t[e]||!!t[e].toJSON})}s.encode=function(e){var t=function e(t){var s=typeof t;var i,n;if("string"===s){if((i=u.from(t).length)<32)return 1+i;if(i<65536)return 3+i;if(i<4294967296)return 5+i}if(u.is(t)){if((i=t.length)<65536)return 3+i;if(i<4294967296)return 5+i}if("number"===s){if(t<<0!==t)return 9;if(0<=t){if(t<128)return 1;if(t<256)return 2;if(t<65536)return 3;if(t<4294967296)return 5;if(t<0x10000000000000000)return 9;throw new Error("Number too big 0x"+t.toString(16))}if(-32<=t)return 1;if(-128<=t)return 2;if(-32768<=t)return 3;if(-2147483648<=t)return 5;if(-0x8000000000000000<=t)return 9;throw new Error("Number too small -0x"+t.toString(16).substr(1))}if("boolean"===s||"undefined"===s||null===t)return 1;if("function"==typeof t.toJSON)return e(t.toJSON());if("object"===s){if("function"==typeof t.toJSON&&(t=t.toJSON()),n=0,Array.isArray(t)){i=t.length;for(var a=0;a<i;a++)n+=e(t[a])}else{var r=h(t);i=r.length;for(var a=0;a<i;a++){var o=r[a];n+=e(o)+e(t[o])}}if(i<16)return 1+n;if(i<65536)return 3+n;if(i<4294967296)return 5+n;throw new Error("Array or object too long 0x"+i.toString(16))}if("function"===s)return 0;throw new Error("Unknown type "+s)}(e);if(0!=t){var s=u.create(t);return function e(t,s,i){var n=typeof t;var a,r;if("string"===n){if(t=u.from(t),(a=t.length)<32)return s[i]=160|a,u.copy(t,s,i+1),1+a;if(a<65536)return s[i]=218,u.writeUInt16BE(s,a,i+1),u.copy(t,s,i+3),3+a;if(a<4294967296)return s[i]=219,u.writeUInt32BE(s,a,i+1),u.copy(t,s,i+5),5+a}if(u.is(t)){if((a=t.length)<65536)return s[i]=216,u.writeUInt16BE(s,a,i+1),u.copy(t,s,i+3),3+a;if(a<4294967296)return s[i]=217,u.writeUInt32BE(s,a,i+1),u.copy(t,s,i+5),5+a}if("number"===n){if(t<<0!==t)return s[i]=203,u.writeDoubleBE(s,t,i+1),9;if(0<=t){if(t<128)return s[i]=t,1;if(t<256)return s[i]=204,s[i+1]=t,2;if(t<65536)return s[i]=205,u.writeUInt16BE(s,t,i+1),3;if(t<4294967296)return s[i]=206,u.writeUInt32BE(s,t,i+1),5;if(t<0x10000000000000000)return s[i]=207,u.writeUInt64BE(s,t,i+1),9;throw new Error("Number too big 0x"+t.toString(16))}if(-32<=t)return u.writeInt8(s,t,i),1;if(-128<=t)return s[i]=208,u.writeInt8(s,t,i+1),2;if(-32768<=t)return s[i]=209,u.writeInt16BE(s,t,i+1),3;if(-2147483648<=t)return s[i]=210,u.writeInt32BE(s,t,i+1),5;if(-0x8000000000000000<=t)return s[i]=211,u.writeInt64BE(s,t,i+1),9;throw new Error("Number too small -0x"+t.toString(16).substr(1))}if("undefined"===n)return s[i]=196,1;if(null===t)return s[i]=192,1;if("boolean"===n)return s[i]=t?195:194,1;if("function"==typeof t.toJSON)return e(t.toJSON(),s,i);if("object"===n){r=0;var o=Array.isArray(t);if(o)a=t.length;else{var l=h(t);a=l.length}if(a<16?(s[i]=a|(o?144:128),r=1):a<65536?(s[i]=o?220:222,u.writeUInt16BE(s,a,i+1),r=3):a<4294967296&&(s[i]=o?221:223,u.writeUInt32BE(s,a,i+1),r=5),o)for(var c=0;c<a;c++)r+=e(t[c],s,i+r);else for(var c=0;c<a;c++){var d=l[c];r+=e(d,s,i+r),r+=e(t[d],s,i+r)}return r}if("function"===n)return;throw new Error("Unknown type "+n)}(e,s,0),s}},s.decode=function(e){var t=new i(e),s=t.parse();if(t.offset!==e.length)throw new Error(e.length-t.offset+" trailing bytes");return s},i.prototype.map=function(e){for(var t={},s=0;s<e;s++){t[this.parse()]=this.parse()}return t},i.prototype.buf=function(e){var t=u.subarray(this.buffer,this.offset,this.offset+e);return this.offset+=e,t},i.prototype.raw=function(e){var t=u.to(u.subarray(this.buffer,this.offset,this.offset+e));return this.offset+=e,t},i.prototype.array=function(e){for(var t=new Array(e),s=0;s<e;s++)t[s]=this.parse();return t},i.prototype.parse=function(){var e,t,s=this.buffer[this.offset];if(160==(224&s))return t=31&s,this.offset++,this.raw(t);if(128==(240&s))return t=15&s,this.offset++,this.map(t);if(144==(240&s))return t=15&s,this.offset++,this.array(t);if(0==(128&s))return this.offset++,s;if(224==(224&s))return e=u.readInt8(this.buffer,this.offset),this.offset++,e;switch(s){case 218:return t=u.readUInt16BE(this.buffer,this.offset+1),this.offset+=3,this.raw(t);case 219:return t=u.readUInt32BE(this.buffer,this.offset+1),this.offset+=5,this.raw(t);case 192:return this.offset++,null;case 194:return this.offset++,!1;case 195:return this.offset++,!0;case 196:return void this.offset++;case 204:return e=this.buffer[this.offset+1],this.offset+=2,e;case 205:return e=u.readUInt16BE(this.buffer,this.offset+1),this.offset+=3,e;case 206:return e=u.readUInt32BE(this.buffer,this.offset+1),this.offset+=5,e;case 207:return e=u.readUInt64BE(this.buffer,this.offset+1),this.offset+=9,e;case 208:return e=u.readInt8(this.buffer,this.offset+1),this.offset+=2,e;case 209:return e=u.readInt16BE(this.buffer,this.offset+1),this.offset+=3,e;case 210:return e=u.readInt32BE(this.buffer,this.offset+1),this.offset+=5,e;case 211:return e=u.readInt64BE(this.buffer,this.offset+1),this.offset+=9,e;case 222:return t=u.readUInt16BE(this.buffer,this.offset+1),this.offset+=3,this.map(t);case 223:return t=u.readUInt32BE(this.buffer,this.offset+1),this.offset+=5,this.map(t);case 220:return t=u.readUInt16BE(this.buffer,this.offset+1),this.offset+=3,this.array(t);case 221:return t=u.readUInt32BE(this.buffer,this.offset+1),this.offset+=5,this.array(t);case 216:return t=u.readUInt16BE(this.buffer,this.offset+1),this.offset+=3,this.buf(t);case 217:return t=u.readUInt32BE(this.buffer,this.offset+1),this.offset+=5,this.buf(t);case 202:return e=u.readFloatBE(this.buffer,this.offset+1),this.offset+=5,e;case 203:return e=u.readDoubleBE(this.buffer,this.offset+1),this.offset+=9,e}throw new Error("Unknown type 0x"+s.toString(16))}},{bops:18}],30:[function(e,t,s){t.exports=function(e,t,s){t=void 0===t?0:t,s=void 0===s?e.length:s;var i,n,a=0,r=0;l.length=o.length=0;for(;a<e.length;)n=e[a],!r&&128&n?(i=u(n),r+=i,i<8&&(l[l.length]=n&d[6-i])):r?(l[l.length]=n&d[6],!--r&&l.length&&(o[o.length]=c(h(l)),l.length=0)):o[o.length]=c(n),++a;l.length&&!r&&(o[o.length]=c(h(l)),l.length=0);return o.join("")};var o=[],l=[],c=String.fromCharCode,i=[64,32,16,8,4,2,1],d=[0,1,3,7,15,31,63,127];function u(e){for(var t=0;t<7&&e&i[t];++t);return t}function h(e){for(var t=0,s=0,i=e.length;s<i;++s)t|=e[s]<<6*(i-s-1);return t}},{}],31:[function(i,e,t){var G,Y,n,m,J,o,g,a,E,r,l,c,d,u,h,p,f,I,S,_,T,C,b,L,y,D,v,A,R,P,z=i("../../modules/public/util.js"),k=(i("../../modules/client/CUser.js"),i("../../modules/client/CManager.js")),V=i("../../modules/public/gameConfig.json"),W=i("../../modules/public/objectAssign.js"),s=i("../../modules/public/csvjson.js"),O=i("../../modules/public/data.json"),M=i("../../modules/client/WebSocketClient.js"),x={delimiter:",",quote:'"'},q=s.toObject(O.userStatData,x),Z=s.toObject(O.skillData,x),w=s.toObject(O.buffGroupData,x),Q=s.toObject(O.resourceData,x),F=s.toObject(O.iconResourceData,x),$=s.toObject(O.obstacleData,x),ee=s.toObject(O.mobData,x),te=s.toObject(O.effectGroupData,x),N=i("../../modules/client/CUIManager.js"),B=Math.PI/180,se=(V.FPS,1e3/V.INTERVAL),U=0,H=!1,j=!1,K=Date.now(),X=Date.now(),ie=!1,ne=!1,ae=!1,re=!1,oe=!1,le=new Array(5),ce=!1,de=Date.now(),ue=[],he=new Array(5),pe=0,fe=!0,me=Date.now(),ge=0,Ee=V.GAME_STATE_LOAD,Ie=null,Se=null,_e=null,Te=!1,Ce=!1,be=Date.now(),Le=0,ye=0,De=!1,ve=Date.now(),Ae=Date.now(),Re=Date.now(),Pe=Date.now(),ke=null,Oe=!1,Me=!1,xe=!0,we=0,Fe=0,Ne=V.DRAW_MODE_NORMAL,Be={x:0,y:0},Ue=null,He=1,je=1,Ke=1,Xe=1,Ge=1,Ye=V.SKILL_INDEX_PYRO_BASE,Je=V.SKILL_INDEX_PYRO_PASSIVE,ze=new Array(4),Ve=V.SKILL_INDEX_FROST_BASE,We=V.SKILL_INDEX_FROST_PASSIVE,qe=new Array(4),Ze=V.SKILL_INDEX_ARCANE_BASE,Qe=V.SKILL_INDEX_ARCANE_PASSIVE,$e=new Array(4),et="",tt=0,st=null,it=0,nt=null,at=new Array(4),rt=new Array(4),ot=[],lt=null,ct={gold:0,jewel:0},dt=!1,ut=!1,ht=[],pt={BindingE:69,BindingSpace:32,BindingA:65,Binding1:49,Binding2:50,Binding3:51,Binding4:52,BindingS:83,BindingG:71,BindingHome:36,BindingEnter:13,BindingEsc:27};function ft(e){switch(Ie&&window.cancelAnimFrame(Ie),clearInterval(De),Ie=null,De=!1,e){case V.GAME_STATE_LOAD:Ee=e,Se=gt,_e=Et;break;case V.GAME_STATE_START_SCENE:Ee=e,Se=null,_e=It;break;case V.GAME_STATE_GAME_START:Ee=e,Se=St,_e=_t;break;case V.GAME_STATE_GAME_ON:Ee=e,Se=Tt,_e=Ct;break;case V.GAME_STATE_END:Ee=e,Se=bt,_e=Ct;break;case V.GAME_STATE_RESTART_SCENE:Ee=e,Se=null,_e=Lt;break;case V.GAME_STATE_RESTART:Ee=e,Se=yt,_e=null}!function(){_e&&mt();Se&&Se()}()}function mt(){Ie=window.requestAnimFrame(mt),_e()}function gt(){!function(){n=document.getElementById("canvas"),m=n.getContext("2d"),(Y=new N(Z,w,F,q)).updateKillCount=function(e,t){we=e,Fe=t},Y.onSetRankers=function(e){ht=e},Y.onLoadCompleteServerList=function(){ie=!0},Y.serverConditionOn=function(){ne=!0},Y.serverConditionOff=function(){ne=!1,Y.enableStartButton(),ft(V.GAME_STATE_START_SCENE)},Y.onStartBtnClick=function(e,t){Ae=Date.now(),He=e,t===V.START_BUTTON?ft(V.GAME_STATE_GAME_START):t===V.RESTART_BUTTON&&ft(V.GAME_STATE_RESTART)},Y.onSkillUpgrade=function(e){Ae=Date.now(),G.emit("upgradeSkill",e)},Y.onExchangeSkill=function(e){if(Xt(e),J.getUserCurrentState(V.userID)===V.OBJECT_STATE_CAST){var t=J.getUserCurrentSkillIndex(V.userID);-1===at.indexOf(t)&&J.stopUser()}},Y.onExchangePassive=function(e,t){G.emit("exchangePassive",e,t)},Y.onEquipPassive=function(e){G.emit("equipPassive",e)},Y.onUnequipPassive=function(e){G.emit("unequipPassive",e)},Y.onSkillIconClick=function(e){if(Ae=Date.now(),e===V.SKILL_BASIC_INDEX)var t=W({},st);else e===V.SKILL_EQUIP1_INDEX?t=W({},rt[0]):e===V.SKILL_EQUIP2_INDEX?t=W({},rt[1]):e===V.SKILL_EQUIP3_INDEX?t=W({},rt[2]):e===V.SKILL_EQUIP4_INDEX&&(t=W({},rt[3]));Ut(t)},Y.onSelectSkillCancelBtnClick=function(){Ht(V.DRAW_MODE_NORMAL)},Y.onSelectCharIcon=function(e){Ae=Date.now();var t=1;switch(He=e){case V.CHAR_TYPE_FIRE:t=Ke,tt=Ye;for(var s=0;s<4;s++)at[s]=ze[s];it=Je;break;case V.CHAR_TYPE_FROST:t=Xe,tt=Ve;for(var s=0;s<4;s++)at[s]=qe[s];it=We;break;case V.CHAR_TYPE_ARCANE:t=Ge,tt=Ze;for(var s=0;s<4;s++)at[s]=$e[s];it=Qe}st=W({},z.findData(Z,"index",tt)),nt=W({},z.findData(Z,"index",it));for(var s=0;s<4;s++)at[s]?rt[s]=W({},z.findData(Z,"index",at[s])):rt[s]=void 0;Y.syncSkills(tt,st,at,rt,ot,it,nt),Y.setPopUpSkillChange(!0),Y.updateCharInfoSelectedPanel(e,t)},Y.onPopUpSkillChangeClick=function(){Ae=Date.now()},Y.onSocialBtnClick=function(e,t){var s=re,i=oe;e&&(re=!0,Y.completeTwitter()),t&&(oe=!0,Y.completeFacebook()),ae&&G&&(s!==re&&G.emit("completeTwitter"),i!==oe&&G.emit("completeFacebook"))},document.body.onmousedown=function(e){2===e.button&&Ne===V.DRAW_MODE_SKILL_RANGE&&Ht(V.DRAW_MODE_NORMAL)},z=i("../../modules/public/util.js"),i("../../modules/client/CUser.js"),k=i("../../modules/client/CManager.js"),V=i("../../modules/public/gameConfig.json"),(J=new k(V)).onSkillFire=vt,J.onProjectileSkillFire=At,J.onUserLevelUp=function(e){je=e},J.onNeedToGetObjBuffResource=function(e){e.resourceData=W({},z.findData(Q,"index",e.rID))},ke=new Yt,o=new Image,g=new Image,a=new Image,E=new Image,r=new Image,le[0]=W({},z.findData(Q,"index",V.RESOURCE_INDEX_USER_HAND_1)),le[1]=W({},z.findData(Q,"index",V.RESOURCE_INDEX_USER_HAND_2)),le[2]=W({},z.findData(Q,"index",V.RESOURCE_INDEX_USER_HAND_3)),le[3]=W({},z.findData(Q,"index",V.RESOURCE_INDEX_USER_HAND_4)),le[4]=W({},z.findData(Q,"index",V.RESOURCE_INDEX_USER_HAND_5)),he[0]=W({},z.findData(Q,"index",V.RESOURCE_INDEX_PORTAL_1)),he[1]=W({},z.findData(Q,"index",V.RESOURCE_INDEX_PORTAL_2)),he[2]=W({},z.findData(Q,"index",V.RESOURCE_INDEX_PORTAL_3)),he[3]=W({},z.findData(Q,"index",V.RESOURCE_INDEX_PORTAL_4)),he[4]=W({},z.findData(Q,"index",V.RESOURCE_INDEX_PORTAL_5)),l=W({},z.findData(Q,"index",V.RESOURCE_INDEX_OBSTACLE_TREE_INSIDE)),c=W({},z.findData(Q,"index",V.RESOURCE_INDEX_OBJ_GOLD)),d=W({},z.findData(Q,"index",V.RESOURCE_INDEX_OBJ_JEWEL)),u=W({},z.findData(Q,"index",V.RESOURCE_INDEX_OBJ_BOX)),h=W({},z.findData(Q,"index",V.RESOURCE_INDEX_OBJ_SKILL_FIRE)),p=W({},z.findData(Q,"index",V.RESOURCE_INDEX_OBJ_SKILL_FROST)),f=W({},z.findData(Q,"index",V.RESOURCE_INDEX_OBJ_SKILL_ARCANE)),I=W({},z.findData(Q,"index",V.RESOURCE_INDEX_CASTING_FIRE)),S=W({},z.findData(Q,"index",V.RESOURCE_INDEX_CASTING_FROST)),_=W({},z.findData(Q,"index",V.RESOURCE_INDEX_CASTING_ARCANE)),T=W({},z.findData(Q,"index",V.RESOURCE_INDEX_PROJECTILE_FIRE)),C=W({},z.findData(Q,"index",V.RESOURCE_INDEX_PROJECTILE_FROST)),b=W({},z.findData(Q,"index",V.RESOURCE_INDEX_PROJECTILE_ARCANE)),L=W({},z.findData(Q,"index",V.RESOURCE_INDEX_SKILL_EFFECT_FIRE)),y=W({},z.findData(Q,"index",V.RESOURCE_INDEX_SKILL_EFFECT_FROST)),D=W({},z.findData(Q,"index",V.RESOURCE_INDEX_SKILL_EFFECT_ARCANE)),v=W({},z.findData(Q,"index",V.RESOURCE_INDEX_RANK_1)),A=W({},z.findData(Q,"index",V.RESOURCE_INDEX_RANK_2)),R=W({},z.findData(Q,"index",V.RESOURCE_INDEX_RANK_3)),P=W({},z.findData(Q,"index",V.RESOURCE_INDEX_PROJECTILE_SKILL_ARROW));var e=z.getCookie(document.cookie,"keySettings");e&&(pt=JSON.parse(e),Y.updateKeySettings(pt));o.src=V.RESOURCE_SRC_OBJECT,o.onload=Dt,g.src=V.RESOURCE_SRC_CHARACTER,g.onload=Dt,E.src=V.RESOURCE_SRC_SKILL_EFFECT,E.onload=Dt,r.src=V.RESOURCE_SRC_ENVIRONMENT,r.onload=Dt,a.src=V.RESOURCE_SRC_UI,a.onload=Dt,Y.setSkillIconResource(a),Y.initStartScene(),Y.initHUD(pt),Y.initPopUpSkillChanger(),Y.setSkillChangeBtn();var t=z.getCookie(document.cookie,"twitter"),s=z.getCookie(document.cookie,"facebook");t&&(re=!0,Y.completeTwitter());s&&(oe=!0,Y.completeFacebook());j=!0}(),Rt(),window.oncontextmenu=function(){return!1},window.onresize=function(){Rt()},window.onblur=function(){Ee===V.GAME_STATE_GAME_ON&&J.stopUser()},window.onbeforeunload=function(e){return G.close(),"Are you sure?"}}function Et(){H&&j&&Date.now()-K>=V.MINIMUM_LOADING_TIME&&ie?(Y.startSceneLoadingComplete(),ft(V.GAME_STATE_START_SCENE)):Date.now()-X>=V.CHANGE_LOADING_TEXT_TIME&&(X=Date.now(),Y.changeLoadingText())}function It(){Y.drawStartScene()}function St(){Y.setFeedbackBtn(),Y.disableStartButton();var e=Y.getSelectedServer();e&&Y.checkServerCondition(e)}function _t(){if(!ae)if(ne){ae=!0;var e=Y.getSelectedServer();e?(!function(e){function j(e,t){var s=W({},z.findData(Z,"index",e));Y.makeRisingMessageForSkill(s,!1),t&&function(e){J.updateSkillPossessions(V.userID,e);var t=[];if(ot.length!==e.length)for(var s=0;s<e.length;s++)-1===ot.indexOf(e[s])&&t.push(e[s]);ot=e,t.length&&Y.updateNewSkills(t);Y.updatePossessionSkills(ot),Y.setPopUpSkillChange(!1,!0)}(t)}function K(e,t,s,i,n,a,r){var o;Y.updateKillBoard(e,t),t.uID===V.userID&&(J.iamDead(),function(){switch(He){case V.CHAR_TYPE_FIRE:Ke=je;break;case V.CHAR_TYPE_FROST:Xe=je;break;case V.CHAR_TYPE_ARCANE:Ge=je}je<Ke&&(je=Ke);je<Xe&&(je=Xe);je<Ge&&(je=Ge)}(),ut=function(e){if(Ke<e.pLv||Xe<e.fLv||Ge<e.mLv)return!0;return!1}(i),Ke=i.pLv,Xe=i.fLv,Ge=i.mLv,lt=e.nm,ct={gold:n.gL,jewel:n.jL},a?(!function(e){tt=e.bS,it=e.iPS,ot=e.pS,Y.updatePossessionSkills(ot);for(var t=0;t<4;t++)for(var s=0;s<e.pS.length;s++){var i=W({},z.findData(Z,"index",e.pS[s]));if(rt[t]&&rt[t].groupIndex===i.groupIndex&&(at.splice(t,1,i.index),rt.splice(t,1,i)),ze[t]){var n=W({},z.findData(Z,"index",ze[t]));n.groupIndex===i.groupIndex&&ze.splice(t,1,i.index)}if(qe[t]){var n=W({},z.findData(Z,"index",qe[t]));n.groupIndex===i.groupIndex&&qe.splice(t,1,i.index)}if($e[t]){var n=W({},z.findData(Z,"index",$e[t]));n.groupIndex===i.groupIndex&&$e.splice(t,1,i.index)}}}(a),dt=!0,a.lS):dt=![],Ye=(o=r).pBS,Je=o.pIPS,Ve=o.fBS,We=o.fIPS,Ze=o.mBS,Qe=o.mIPS,ft(V.GAME_STATE_END)),J.kickUser(t.uID),Y.updateBoard(s,V.userID)}function X(e){!function(e,t){for(var s=[],i=0;i<t.length;i++)buffImgDataIndex=W({},z.findData(w,"index",t[i])).buffEffectGroup,buffImgData=W({},z.findData(te,"index",buffImgDataIndex)),hasResource=z.setResourceData(Q,buffImgData),hasResource&&s.push(buffImgData);J.updateMobBuffImgData(e,s)}(e.oID,e.bL)}(G=new M).open(e.replace("http","ws")),G.onopen=function(){var e=z.getCookie(document.cookie,"twitter"),t=z.getCookie(document.cookie,"facebook");G.emit("reqStartGame",He,et,e,t),Re=Date.now(),G.emit("firePing",Re),De||xe||G.emit("needReconnect")},G.onmessage=function(e){Me&&(clearTimeout(Me),Me=!1);var t,s,i,n,a,r,o,l,c,d,u,h,p,f,m,g,E,I,S,_,T,C,b,L,y,D,v,A,R,P,k,O,M,x,w,F,N,B,U=z.decodePacket(new Uint8Array(e.data)),H=U.vars;switch(U.type){case"dontCheat":B=H[0],z.isNumeric(B.x)&&z.isNumeric(B.y)&&J.moveUserToNewPos(V.userID,B);break;case"reqReconnectResource":!function(){clearInterval(De);var e={};e.baseSkill=tt,e.equipSkills=at,e.inherentPassiveSkill=it,e.possessSkills=ot;var t=J.getUserPosition(V.userID),s=J.getUserExp(V.userID),i=Y.getResource(),n=J.getUserHP(V.userID),a=J.getUserMP(V.userID);G.emit("reqReconnect",et,He,{level:je,exp:s,HP:n,MP:a},e,we,Fe,t,i)}();break;case"resReconnect":!function(e,t,s,i,n,a,r){V.userID=e.oID,J.resetUsers(t,V.scaleFactor);for(var o=0;o<s.length;o++)Gt(s[o]);J.resetObjs(i),J.resetChests(n),J.resetMobs(r),J.synchronizeUser(V.userID),J.onMainUserMove=function(e){Y.updateUserPosition(e.position)},Y.setBoard(a,V.userID);var l=W({},z.findAllDatas($,"type",V.OBJ_TYPE_CHEST_GROUND));Y.setMiniMapChests(n,l),Ee===V.GAME_STATE_GAME_ON?(kt(),Ot(),De=setInterval(Pt,se)):(Y.disableDeadScene(),Y.disableStandingScene(),Oe&&(clearTimeout(Oe),Oe=!1),ft(V.GAME_STATE_RESTART));J.setUserInitState(V.userID),Y.disableReconnectScene(),G.emit("reconnectSuccess")}(H[0],H[1],H[2],H[3],H[4],H[5],H[6]);break;case"adminMessage":N=H[0],Y.makeAdminMessage(N);break;case"downServer":w=H[0],F=H[1],Y.makeDownMessage(w,F);break;case"nowServerIsDown":G.close(),window.onbeforeunload="",window.location.href="/serverdown";break;case"cancelServerDown":Y.makeAdminMessage("Server down canceled."),Y.cancelDown();break;case"firePong":M=H[0],x=H[1],Le=Date.now()-M,ye=Date.now()-(x+Le/2),G.emit("updateUserTimeDiff",Date.now(),Le);break;case"syncAndSetSkills":!function(e){Date.now();V.userID=e.oID,tt=e.bS,st=W({},z.findData(Z,"index",e.bS)),it=e.ipS,nt=W({},z.findData(Z,"index",e.ipS));for(var t=0;t<4;t++)e.eS[t]?at[t]=e.eS[t]:at[t]=void 0;for(var t=0;t<4;t++)e.eS[t]?rt[t]=W({},z.findData(Z,"index",e.eS[t])):rt[t]=void 0;ot=e.pS,Y.syncSkills(tt,st,at,rt,ot,it,nt),Y.setHUDSkills(),Y.updateBuffIcon(),Y.setHUDStats(e),Y.updateCondition(e.cdt),Y.setCooldownReduceRate(e.cRR),Y.setPopUpSkillChange(),Y.setUserPosition(e.pos)}(H[0]);break;case"resStartGame":!function(e,t,s,i,n,a){xe=!1,J.start(q,Q,$,ee),J.setUsers(e,V.scaleFactor);for(var r=0;r<t.length;r++)Gt(t[r]);J.setObjs(s),J.setChests(i),J.setMobs(a),J.synchronizeUser(V.userID),J.onMainUserMove=function(e){Y.updateUserPosition(e.position)};var o=V.TUTORIAL_SKILL_FIRE_INDEX;switch(He){case V.CHAR_TYPE_FIRE:o=V.TUTORIAL_SKILL_FIRE_INDEX;break;case V.CHAR_TYPE_FROST:o=V.TUTORIAL_SKILL_FROST_INDEX;break;case V.CHAR_TYPE_ARCANE:o=V.TUTORIAL_SKILL_ARCANE_INDEX}Y.setNewSkill(o);var l=W({},z.findAllDatas($,"type",V.OBJ_TYPE_CHEST_GROUND)),c=W({},z.findAllDatas($,"type",V.ENV_TYPE_IMMORTAL_GROUND)),d=W({},z.findAllDatas($,"type",V.ENV_TYPE_PORTAL));Y.setBoard(n,V.userID),Y.setMiniMapChests(i,l),Y.setMinimapZones(c,d),kt(),Ot(),ft(V.GAME_STATE_GAME_ON),De=setInterval(Pt,se)}(H[0],H[1],H[2],H[3],H[4],H[5]);break;case"resRestartGame":!function(e,t){switch(J.iamRestart(e,V.scaleFactor),J.setUserData(e),J.changeUserStat(e,!0,V.scaleFactor),Y.updateCondition(e.cdt),Y.updateMP(e),Y.checkSkillsConditions(),kt(),Ot(),tt=e.bS,st=W({},z.findData(Z,"index",e.bS)),it=e.ipS,nt=W({},z.findData(Z,"index",e.ipS)),He){case V.CHAR_TYPE_FIRE:for(var s=0;s<4;s++)at[s]=ze[s];break;case V.CHAR_TYPE_FROST:for(var s=0;s<4;s++)at[s]=qe[s];break;case V.CHAR_TYPE_ARCANE:for(var s=0;s<4;s++)at[s]=$e[s]}for(var s=0;s<4;s++)at[s]?rt[s]=W({},z.findData(Z,"index",at[s])):rt[s]=void 0;ot=e.pS,Y.syncSkills(tt,st,at,rt,ot,it,nt),Y.setHUDSkills(),Y.setHUDStats(e),Y.setCooldownReduceRate(e.cRR),Y.setPopUpSkillChange(),Y.updateBoard(t,V.userID),Y.updateHP(e),Y.updateMP(e),Y.setUserPosition(e.pos),ft(V.GAME_STATE_GAME_ON),J.setUserInitState(V.userID),De=setInterval(Pt,se)}(H[0],H[1]);break;case"userJoined":k=H[0],O=H[1],J.setUser(k,V.scaleFactor),Y.updateBoard(O,V.userID),J.setUserInitState(k.oID);break;case"userDataUpdate":P=H[0],J.updateUserData(P);break;case"userDataSync":R=H[0],J.syncUserData(R);break;case"userMoveAndAttack":v=H[0],(A=W({},z.findData(Z,"index",v.sID))).targetPosition=v.sTPos,J.moveAndAttackUser(v.oID,v.tpos,A,v.mB);break;case"userDataUpdateAndUseSkill":!function(e){J.updateUserData(e);var t=W({},z.findData(Z,"index",e.sID));J.applyCastSpeed(e.oID,t),t.targetPosition=e.sTPos,t.direction=e.sDir,(t.type===V.SKILL_TYPE_PROJECTILE||t.type===V.SKILL_TYPE_PROJECTILE_TICK||t.type===V.SKILL_TYPE_PROJECTILE_EXPLOSION||t.type===V.SKILL_TYPE_PROJECTILE_TICK_EXPLOSION||t.type===V.SKILL_TYPE_INSTANT_PROJECTILE)&&(t.projectileIDs=e.sPIDs);J.useSkill(e.oID,t)}(H[0]);break;case"skillFired":!function(s,i){var e=s.sT+ye-Date.now();e<0&&(e=0);setTimeout(function(){var e=W({},z.findData(Z,"index",s.sID));if(e.targetPosition=s.sTPos,e.explosionEffectGroup){var t=W({},z.findData(te,"index",e.explosionEffectGroup));z.setResourceData(Q,t)}i===V.userID&&Y.applySkill(e.index),J.applySkill(e,i,t)},e)}(H[0],H[1]);break;case"projectilesFired":!function(n,e,a){var t=e+ye-Date.now();t<0&&(t=0);setTimeout(function(){for(var e=0;e<n.length;e++){var t=W({},z.findData(Z,"index",n[e].sID));if(t.userID=a,t.objectID=n[e].oID,t.position=n[e].pos,t.speed=n[e].sp,t.startTime=Date.now(),a==V.userID&&Y.applySkill(t.index),t.projectileEffectGroup){var s=W({},z.findData(te,"index",t.projectileEffectGroup));z.setResourceData(Q,s)}if(t.explosionEffectGroup){var i=W({},z.findData(te,"index",t.explosionEffectGroup));z.setResourceData(Q,i)}J.applyProjectile(t,s,i)}},t)}(H[0],H[1],H[2]);break;case"moveUserToNewPos":y=H[0],D=H[1],J.moveUserToNewPos(y,D);break;case"upgradeSkill":!function(e,t,s){if(Y.setResource(s),e===tt)tt=t,st=W({},z.findData(Z,"index",t)),Y.upgradeBaseSkill(tt,st);else if(e===it)it=t,nt=W({},z.findData(Z,"index",t)),Y.upgradeInherentSkill(it,nt);else{for(var i=0;i<4;i++){var n=W({},z.findData(Z,"index",t));at[i]===e&&(at.splice(i,1,t),rt.splice(i,1,n)),ze[i]===e&&ze.splice(i,1,t),qe[i]===e&&qe.splice(i,1,t),$e[i]===e&&$e.splice(i,1,t)}for(var i=0;i<ot.length;i++)if(ot[i]===e){ot.splice(i,1,t),Y.upgradePossessionSkill(e,t);break}}Y.playSkillUpgradeEffect(),Xt(He)}(H[0],H[1],H[2]);break;case"updateUserPrivateStat":L=H[0],Y.setHUDStats(L),Y.setCooldownReduceRate(L.cRR);break;case"deleteProjectile":C=H[0],b=H[1],J.deleteProjectile(C,b);break;case"explodeProjectile":S=H[0],_=H[1],T=H[2],J.explodeProjectile(S,_,T);break;case"createOBJs":I=H[0],J.setObjs(I);break;case"deleteOBJ":E=H[0],J.deleteOBJ(E);break;case"createChest":g=H[0],J.createChest(g),Y.createChest(g.lID,g.gd);break;case"chestDamaged":f=H[0],m=H[1],J.updateChest(f,m),ue.indexOf(f)&&(ue.push(f),setTimeout(function(){var e=ue.indexOf(f);ue.splice(e,1)},V.SKILL_HIT_EFFECT_TIME));break;case"deleteChest":p=H[0],J.deleteChest(p),Y.deleteChest(p);break;case"getResource":u=H[0],h=H[1],Y.makeRisingMessage(h),Y.setResource(u);break;case"getSkill":j(H[0],H[1]);break;case"skillChangeToResource":c=H[0],d=W({},z.findData(Z,"index",c)),Y.addResource(d.exchangeToGold,d.exchangeToJewel),Y.makeRisingMessageForSkill(d,!0);break;case"changeUserStat":!function(e,t){if(e.oID===V.userID){Y.updateCondition(e.cdt),Y.updateHP(e),Y.updateMP(e),Y.checkSkillsConditions(),t&&Y.makeRisingMessage(t);var s=W({},z.findDataWithTwoColumns(q,"type",He,"level",e.lv)).needExp;Y.updateExp(e,s)}J.changeUserStat(e,!1,V.scaleFactor)}(H[0],H[1]);break;case"userDamaged":!function(e,t){if(t){var s=W({},z.findData(Z,"index",t)).hitEffectGroup,i=W({},z.findData(te,"index",s)),n=z.setResourceData(Q,i);n&&J.updateSkillHitImgData(e.oID,i)}J.changeUserStat(e,!1,V.scaleFactor),e.oID===V.userID&&(Y.updateHP(e),Y.updateMP(e),Y.updateCondition(e.cdt),Y.checkSkillsConditions())}(H[0],H[1]);break;case"updateBuff":!function(e){e.oID===V.userID&&Y.updateBuffIcon(e.pL,e.bL,e.aL,ye);Gt(e)}(H[0]);break;case"updateRank":l=H[0],Y.updateBoard(l,V.userID);break;case"chatting":r=H[0],o=H[1],J.setUserChatMsg(r,o);break;case"userDead":K(H[0],H[1],H[2],H[3],H[4],H[5],H[6]);break;case"userLeave":n=H[0],a=H[1],J.kickUser(n),Y.updateBoard(a,V.userID);break;case"mobCreated":i=H[0],J.setMobs(i);break;case"mobChangeState":s=H[0],J.changeStateMob(s);break;case"mobTakeDamage":!function(e,t){if(J.updateMob(e),t){var s=W({},z.findData(Z,"index",t)).hitEffectGroup,i=W({},z.findData(te,"index",s)),n=z.setResourceData(Q,i);n&&J.updateMobHitImgData(e.oID,i)}}(H[0],H[1]);break;case"mobUpdateBuff":X(H[0]);break;case"mobDead":t=H[0],J.deleteMob(t)}},G.onerror=function(e){},G.onclose=function(e){G&&(Y.playReconnectScene(),Mt(),xt()),Me||(Me=setTimeout(function(){G.close(),window.onbeforeunload="",window.location.href="/error"},3e4))}}(e),et=Y.getStartUserName()):(alert("Select available server."),ae=!1,Y.enableStartButton(),ft(V.GAME_STATE_START_SCENE))}else ae&&(ae=!1,Y.enableStartButton(),ft(V.GAME_STATE_START_SCENE))}function Tt(){Y.disableStartScene()}function Ct(){ke.countFrames(),function(){500<Date.now()-Pe&&(Pe=Date.now(),Y.drawGameScene(),Y.drawFPSAndPing(ke.lastFrameCount,Le));V.userOffset={x:J.user.center.x-V.canvasSize.width/(2*V.scaleFactor),y:J.user.center.y-V.canvasSize.height/(2*V.scaleFactor)},(V.userOffset.x<=0||V.userOffset.y<=0||V.userOffset.x>=V.CANVAS_MAX_SIZE.width-V.CANVAS_MAX_LOCAL_SIZE.width||V.userOffset.y>=V.CANVAS_MAX_SIZE.height-V.CANVAS_MAX_LOCAL_SIZE.height)&&(m.fillStyle="rgb(103, 124, 81)",m.fillRect(0,0,n.width,n.height)),function(){if(V.userOffset.x<=200||V.userOffset.y<=200||V.userOffset.x>=V.CANVAS_MAX_SIZE.width-200-V.CANVAS_MAX_LOCAL_SIZE.width||V.userOffset.y>=V.CANVAS_MAX_SIZE.height-200-V.CANVAS_MAX_LOCAL_SIZE.height){m.fillStyle="rgb(96, 56, 19)";var e=-V.userOffset.x*V.scaleFactor,t=-V.userOffset.y*V.scaleFactor,s=V.CANVAS_MAX_SIZE.width*V.scaleFactor,i=V.CANVAS_MAX_SIZE.height*V.scaleFactor;m.fillRect(e,t,s,i)}m.fillStyle="rgb(105, 147, 50)",e=(200-V.userOffset.x)*V.scaleFactor,t=(200-V.userOffset.y)*V.scaleFactor,s=(V.CANVAS_MAX_SIZE.width-400)*V.scaleFactor,i=(V.CANVAS_MAX_SIZE.height-400)*V.scaleFactor,m.fillRect(e,t,s,i)}(),function(){m.lineWidth=2,m.strokeStyle="rgb(103, 124, 81)",m.beginPath();for(var e=-V.userOffset.x-800;e<V.canvasSize.width;e+=50){var t=e*V.scaleFactor;z.isXInCanvas(t,V)&&(m.moveTo(t,0),m.lineTo(t,V.canvasSize.height))}for(var s=-V.userOffset.y-500;s<V.canvasSize.height;s+=50){var i=s*V.scaleFactor;z.isYInCanvas(i,V)&&(m.moveTo(0,i),m.lineTo(V.canvasSize.width,i))}m.stroke(),m.closePath()}(),function(){for(var e=0;e<J.immortalGrounds.length;e++){var t=z.worldToLocalPosition(J.immortalGrounds[e].center,V.userOffset,V.scaleFactor);z.isObjInCanvas(t,J.immortalGrounds[e].size.width/2,V)&&m.drawImage(r,J.immortalGrounds[e].imgData.srcPosX,J.immortalGrounds[e].imgData.srcPosY,J.immortalGrounds[e].imgData.srcWidth,J.immortalGrounds[e].imgData.srcHeight,t.x-J.immortalGrounds[e].size.width/2*V.scaleFactor,t.y-J.immortalGrounds[e].size.height/2*V.scaleFactor,J.immortalGrounds[e].size.width*V.scaleFactor,J.immortalGrounds[e].size.height*V.scaleFactor)}}(),function(){for(var e=0;e<J.objGolds.length;e++){var t=z.worldXCoordToLocalX(J.objGolds[e].pos.x,V.userOffset.x,V.scaleFactor),s=z.worldYCoordToLocalY(J.objGolds[e].pos.y,V.userOffset.y,V.scaleFactor),i=2*J.objGolds[e].rad*V.scaleFactor;z.isObjInCanvas({x:t,y:s},i,V)&&m.drawImage(o,c.srcPosX,c.srcPosY,c.srcWidth,c.srcHeight,t,s,i,i)}for(var e=0;e<J.objJewels.length;e++)t=z.worldXCoordToLocalX(J.objJewels[e].pos.x,V.userOffset.x,V.scaleFactor),s=z.worldYCoordToLocalY(J.objJewels[e].pos.y,V.userOffset.y,V.scaleFactor),i=2*V.OBJ_JEWEL_RADIUS*V.scaleFactor,z.isObjInCanvas({x:t,y:s},i,V)&&m.drawImage(o,d.srcPosX,d.srcPosY,d.srcWidth,d.srcHeight,t,s,i,i);for(var e=0;e<J.objBoxs.length;e++)t=z.worldXCoordToLocalX(J.objBoxs[e].pos.x,V.userOffset.x,V.scaleFactor),s=z.worldYCoordToLocalY(J.objBoxs[e].pos.y,V.userOffset.y,V.scaleFactor),i=2*V.OBJ_BOX_RADIUS*V.scaleFactor,z.isObjInCanvas({x:t,y:s},i,V)&&m.drawImage(o,u.srcPosX,u.srcPosY,u.srcWidth,u.srcHeight,t,s,i,i);for(var e=0;e<J.objSkills.length;e++){switch(t=z.worldXCoordToLocalX(J.objSkills[e].pos.x,V.userOffset.x,V.scaleFactor),s=z.worldYCoordToLocalY(J.objSkills[e].pos.y,V.userOffset.y,V.scaleFactor),i=2*V.OBJ_SKILL_RADIUS*V.scaleFactor,J.objSkills[e].pro){case V.SKILL_PROPERTY_FIRE:var n=h;break;case V.SKILL_PROPERTY_FROST:n=p;break;case V.SKILL_PROPERTY_ARCANE:n=f}m.drawImage(o,n.srcPosX,n.srcPosY,n.srcWidth,n.srcHeight,t,s,i,i)}for(var e=0;e<J.objBuffs.length;e++)t=z.worldXCoordToLocalX(J.objBuffs[e].pos.x,V.userOffset.x,V.scaleFactor),s=z.worldYCoordToLocalY(J.objBuffs[e].pos.y,V.userOffset.y,V.scaleFactor),i=2*V.OBJ_BUFF_RADIUS*V.scaleFactor,z.isObjInCanvas({x:t,y:s},i,V)&&m.drawImage(o,J.objBuffs[e].resourceData.srcPosX,J.objBuffs[e].resourceData.srcPosY,J.objBuffs[e].resourceData.srcWidth,J.objBuffs[e].resourceData.srcHeight,t,s,i,i)}(),function(){for(var e=0;e<J.userEffects.length;e++){var t=J.userEffects[e]["resourceIndex"+(J.userEffects[e].effectIndex+1)],s=z.worldToLocalPosition(J.userEffects[e].center,V.userOffset,V.scaleFactor);m.drawImage(E,t.srcPosX,t.srcPosY,t.srcWidth,t.srcHeight,s.x-t.width/2*V.scaleFactor,s.y-t.height/2*V.scaleFactor,t.width*V.scaleFactor,t.height*V.scaleFactor)}}();var e=z.setDrawUser(J.users,J.user,V);if(function(e){for(var t=0;t<e.length;t++){var s=e[t].localCenter;m.save();var i=e[t].direction*B;m.translate(s.x,s.y),m.rotate(i);for(var n=0;n<e[t].buffImgDataList.length;n++)if(!e[t].buffImgDataList[n].isFront&&e[t].buffImgDataList[n].isAttach){var a=e[t].effectIndex%e[t].buffImgDataList[n].resourceLength+1,r=e[t].buffImgDataList[n]["resourceIndex"+a];if(e[t].buffImgDataList[n].isRotate){m.restore(),m.save(),m.translate(s.x,s.y);var o=(e[t].buffImgDataList[n].rotateStartDegree+e[t].effectRotateDegree)*B;m.rotate(o),m.drawImage(E,r.srcPosX,r.srcPosY,r.srcWidth,r.srcHeight,-r.width/2*V.scaleFactor,-r.height/2*V.scaleFactor,r.width*V.scaleFactor,r.height*V.scaleFactor),m.restore(),m.save(),m.translate(s.x,s.y),m.rotate(i)}else m.drawImage(E,r.srcPosX,r.srcPosY,r.srcWidth,r.srcHeight,-r.width/2*V.scaleFactor,-r.height/2*V.scaleFactor,r.width*V.scaleFactor,r.height*V.scaleFactor)}var r=le[e[t].imgHandIndex];if(m.drawImage(g,r.srcPosX,r.srcPosY,r.srcWidth,r.srcHeight,-r.width/2*V.scaleFactor,-r.height/2*V.scaleFactor,r.width*V.scaleFactor,r.height*V.scaleFactor),m.drawImage(g,e[t].imgData.srcPosX,e[t].imgData.srcPosY,e[t].imgData.srcWidth,e[t].imgData.srcHeight,-e[t].imgData.width/2*V.scaleFactor,-e[t].imgData.height/2*V.scaleFactor,e[t].imgData.width*V.scaleFactor,e[t].imgData.height*V.scaleFactor),e[t].skillCastEffectPlay&&e[t].currentSkill){switch(e[t].currentSkill){case V.SKILL_PROPERTY_FIRE:var r=I;break;case V.SKILL_PROPERTY_FROST:r=S;break;case V.SKILL_PROPERTY_ARCANE:r=_}var l=e[t].castEffectFactor;m.drawImage(g,r.srcPosX,r.srcPosY,r.srcWidth,r.srcHeight,-r.width/2*V.scaleFactor*l,-r.height/2*V.scaleFactor*l,r.width*V.scaleFactor*l,r.height*V.scaleFactor*l)}for(var n=0;n<e[t].hitImgDataList.length;n++)if(e[t].hitImgDataList[n].isAttach){var a=e[t].effectIndex%e[t].hitImgDataList[n].resourceLength+1,r=e[t].hitImgDataList[n]["resourceIndex"+a];if(e[t].hitImgDataList[n].isRotate){m.restore(),m.save(),m.translate(s.x,s.y);var o=(e[t].hitImgDataList[n].rotateStartDegree+e[t].effectRotateDegree)*B;m.rotate(o),m.drawImage(g,r.srcPosX,r.srcPosY,r.srcWidth,r.srcHeight,-r.width/2*V.scaleFactor,-r.height/2*V.scaleFactor,r.width*V.scaleFactor,r.height*V.scaleFactor),m.restore(),m.save(),m.translate(s.x,s.y),m.rotate(i)}else m.drawImage(E,r.srcPosX,r.srcPosY,r.srcWidth,r.srcHeight,-r.width/2*V.scaleFactor,-r.height/2*V.scaleFactor,r.width*V.scaleFactor,r.height*V.scaleFactor)}for(var n=0;n<e[t].buffImgDataList.length;n++)if(e[t].buffImgDataList[n].isFront&&e[t].buffImgDataList[n].isAttach){var a=e[t].effectIndex%e[t].buffImgDataList[n].resourceLength+1,r=e[t].buffImgDataList[n]["resourceIndex"+a];if(e[t].buffImgDataList[n].isRotate){m.restore(),m.save(),m.translate(s.x,s.y);var o=e[t].effectRotateDegree*B;m.rotate(o),m.drawImage(E,r.srcPosX,r.srcPosY,r.srcWidth,r.srcHeight,-r.width/2*V.scaleFactor,-r.height/2*V.scaleFactor,r.width*V.scaleFactor,r.height*V.scaleFactor),m.restore(),m.save(),m.translate(s.x,s.y),m.rotate(i)}else m.drawImage(E,r.srcPosX,r.srcPosY,r.srcWidth,r.srcHeight,-r.width/2*V.scaleFactor,-r.height/2*V.scaleFactor,r.width*V.scaleFactor,r.height*V.scaleFactor)}m.restore();for(var c=e[t].localPosition,d=!1,n=0;n<ht.length;n++)ht[n]===e[t].objectID&&(d=n+1);var u=void 0;if(d){switch(d){case 1:u=v;break;case 2:u=A;break;case 3:u=R}m.drawImage(g,u.srcPosX,u.srcPosY,u.srcWidth,u.srcHeight,s.x-15*V.scaleFactor,s.y-90*V.scaleFactor,30*V.scaleFactor,30*V.scaleFactor)}if(m.drawImage(e[t].textCanvas,s.x-200*e[t].textScaleFactor,c.y-65*e[t].textScaleFactor),e[t].HP!==e[t].maxHP||e[t].MP!==e[t].maxMP){m.beginPath(),m.fillStyle="#ff0000";var h=c.x-7*V.scaleFactor,p=e[t].HP/e[t].maxHP*78*V.scaleFactor,f=7*V.scaleFactor;m.fillRect(h,c.y+80*V.scaleFactor,p,f),m.fillStyle="#0000ff",p=e[t].MP/e[t].maxMP*78*V.scaleFactor,f=4*V.scaleFactor,m.fillRect(h,c.y+87*V.scaleFactor,p,f),m.strokeStyle="rgb(15,15,15)",p=78*V.scaleFactor,f=10*V.scaleFactor,m.lineJoin="round",m.fillRect(h,c.y+86.25*V.scaleFactor,p,.75),m.strokeRect(h,c.y+80*V.scaleFactor,p,f),m.closePath()}}}(e),function(e){for(var t=0;t<e.length;t++){var s=e[t].localCenter;m.save();var i=e[t].direction*B;m.translate(s.x,s.y),m.rotate(i);for(var n=0;n<e[t].buffImgDataList.length;n++)if(!e[t].buffImgDataList[n].isFront&&e[t].buffImgDataList[n].isAttach){var a=e[t].effectIndex%e[t].buffImgDataList[n].resourceLength+1,r=e[t].buffImgDataList[n]["resourceIndex"+a];if(e[t].buffImgDataList[n].isRotate){m.restore(),m.save(),m.translate(s.x,s.y);var o=(e[t].buffImgDataList[n].rotateStartDegree+e[t].effectRotateDegree)*B;m.rotate(o),m.drawImage(E,r.srcPosX,r.srcPosY,r.srcWidth,r.srcHeight,-r.width/2*V.scaleFactor,-r.height/2*V.scaleFactor,r.width*V.scaleFactor,r.height*V.scaleFactor),m.restore(),m.save(),m.translate(s.x,s.y),m.rotate(i)}else m.drawImage(E,r.srcPosX,r.srcPosY,r.srcWidth,r.srcHeight,-r.width/2*V.scaleFactor,-r.height/2*V.scaleFactor,r.width*V.scaleFactor,r.height*V.scaleFactor)}m.drawImage(g,e[t].imgData.srcPosX,e[t].imgData.srcPosY,e[t].imgData.srcWidth,e[t].imgData.srcHeight,-e[t].imgData.width/2*V.scaleFactor,-e[t].imgData.height/2*V.scaleFactor,e[t].imgData.width*V.scaleFactor,e[t].imgData.height*V.scaleFactor);for(var n=0;n<e[t].hitImgDataList.length;n++)if(e[t].hitImgDataList[n].isAttach){var a=e[t].effectIndex%e[t].hitImgDataList[n].resourceLength+1,r=e[t].hitImgDataList[n]["resourceIndex"+a];if(e[t].hitImgDataList[n].isRotate){m.restore(),m.save(),m.translate(s.x,s.y);var o=(e[t].hitImgDataList[n].rotateStartDegree+e[t].effectRotateDegree)*B;m.rotate(o),m.drawImage(g,r.srcPosX,r.srcPosY,r.srcWidth,r.srcHeight,-r.width/2*V.scaleFactor,-r.height/2*V.scaleFactor,r.width*V.scaleFactor,r.height*V.scaleFactor),m.restore(),m.save(),m.translate(s.x,s.y),m.rotate(i)}else m.drawImage(E,r.srcPosX,r.srcPosY,r.srcWidth,r.srcHeight,-r.width/2*V.scaleFactor,-r.height/2*V.scaleFactor,r.width*V.scaleFactor,r.height*V.scaleFactor)}for(var n=0;n<e[t].buffImgDataList.length;n++)if(e[t].buffImgDataList[n].isFront&&e[t].buffImgDataList[n].isAttach){var a=e[t].effectIndex%e[t].buffImgDataList[n].resourceLength+1,r=e[t].buffImgDataList[n]["resourceIndex"+a];if(e[t].buffImgDataList[n].isRotate){m.restore(),m.save(),m.translate(s.x,s.y);var o=e[t].effectRotateDegree*B;m.rotate(o),m.drawImage(E,r.srcPosX,r.srcPosY,r.srcWidth,r.srcHeight,-r.width/2*V.scaleFactor,-r.height/2*V.scaleFactor,r.width*V.scaleFactor,r.height*V.scaleFactor),m.restore(),m.save(),m.translate(s.x,s.y),m.rotate(i)}else m.drawImage(E,r.srcPosX,r.srcPosY,r.srcWidth,r.srcHeight,-r.width/2*V.scaleFactor,-r.height/2*V.scaleFactor,r.width*V.scaleFactor,r.height*V.scaleFactor)}if(m.restore(),e[t].HP!==e[t].maxHP){var l=e[t].localPosition;m.beginPath(),m.fillStyle="#ff0000";var c=l.x-7*V.scaleFactor,d=e[t].HP/e[t].maxHP*60*V.scaleFactor,u=7*V.scaleFactor;m.fillRect(c,l.y+60*V.scaleFactor,d,u),m.strokeStyle="rgb(15,15,15)",d=60*V.scaleFactor,m.lineJoin="round",m.strokeRect(c,l.y+60*V.scaleFactor,d,u),m.closePath()}}}(z.setDrawMobs(J.monsters,V)),function(){var e=!1;Date.now()-de>=V.IMG_COLLISION_CLEAR_TIME&&(e=!0,de=Date.now());for(var t=0;t<J.obstacles.length-J.treesCount;t++){var s=z.worldToLocalPosition(J.obstacles[t].center,V.userOffset,V.scaleFactor);z.isObjInCanvas(s,J.obstacles[t].imgData.width/2,V)&&(m.drawImage(o,J.obstacles[t].imgData.srcPosX,J.obstacles[t].imgData.srcPosY,J.obstacles[t].imgData.srcWidth,J.obstacles[t].imgData.srcHeight,s.x-J.obstacles[t].imgData.width/2*V.scaleFactor,s.y-J.obstacles[t].imgData.height/2*V.scaleFactor,J.obstacles[t].imgData.width*V.scaleFactor,J.obstacles[t].imgData.height*V.scaleFactor),J.obstacles[t].staticEle.isCollide&&(m.beginPath(),m.arc(s.x,s.y,J.obstacles[t].imgData.width/2*.9*V.scaleFactor,0,2*Math.PI),m.fillStyle="rgba(255, 0, 0, 0.5)",m.fill(),m.closePath()),e&&(J.obstacles[t].staticEle.isCollide=!1))}(function(){for(var e=0;e<J.projectiles.length;e++){if(J.projectiles[e].projectileImgData)var t=J.projectiles[e].projectileImgData.resourceIndex1,s=J.projectiles[e].projectileImgData.isRotate;else switch(J.projectiles[e].property){case V.SKILL_PROPERTY_FIRE:t=T;break;case V.SKILL_PROPERTY_FROST:t=C;break;case V.SKILL_PROPERTY_ARCANE:t=b}var i=z.worldXCoordToLocalX(J.projectiles[e].position.x,V.userOffset.x,V.scaleFactor),n=z.worldYCoordToLocalY(J.projectiles[e].position.y,V.userOffset.y,V.scaleFactor),a=J.projectiles[e].radius*V.scaleFactor;if(s){var r=i+a,o=n+a;m.save(),m.translate(r,o);var l=J.projectiles[e].effectRotateDegree*B;m.rotate(l),m.drawImage(E,t.srcPosX,t.srcPosY,t.srcWidth,t.srcHeight,-a,-a,2*a,2*a),m.restore()}else m.drawImage(E,t.srcPosX,t.srcPosY,t.srcWidth,t.srcHeight,i,n,2*a,2*a)}})(),function(){for(var e=0;e<J.chests.length;e++){m.beginPath();var t=z.worldToLocalPosition(J.chests[e].center,V.userOffset,V.scaleFactor);if(m.drawImage(o,J.chests[e].imgData.srcPosX,J.chests[e].imgData.srcPosY,J.chests[e].imgData.srcWidth,J.chests[e].imgData.srcHeight,t.x-J.chests[e].imgData.width/2*V.scaleFactor,t.y-J.chests[e].imgData.height/2*V.scaleFactor,J.chests[e].imgData.width*V.scaleFactor,J.chests[e].imgData.height*V.scaleFactor),-1!==ue.indexOf(J.chests[e].locationID)){var s=z.worldToLocalPosition(J.chests[e].position,V.userOffset,V.scaleFactor);m.fillStyle="rgba(255, 0, 0, 0.5)",m.fillRect(s.x,s.y-2.5,.85*J.chests[e].imgData.width*V.scaleFactor,.85*J.chests[e].imgData.height*V.scaleFactor)}m.fillStyle="#ff0000";var i=J.chests[e].HP/J.chests[e].maxHP*85*V.scaleFactor,n=10*V.scaleFactor,a=t.x-42.5*V.scaleFactor,r=t.y+60*V.scaleFactor;m.fillRect(a,r,i,n),m.strokeStyle="#000000",i=85*V.scaleFactor,m.strokeRect(a,r,i,n),m.closePath()}}(),function(){for(var e=0;e<J.portals.length;e++){var t=z.worldToLocalPosition(J.portals[e].center,V.userOffset,V.scaleFactor),s=he[pe];z.isObjInCanvas(t,J.portals[e].size.width/2,V)&&(m.save(),m.translate(t.x,t.y),m.rotate(ge*B),m.drawImage(r,s.srcPosX,s.srcPosY,s.srcWidth,s.srcHeight,-J.portals[e].size.width/2*V.scaleFactor,-J.portals[e].size.height/2*V.scaleFactor,J.portals[e].size.width*V.scaleFactor,J.portals[e].size.height*V.scaleFactor),m.restore())}100<Date.now()-me&&(me=Date.now(),fe?4<=pe?fe=!(pe=3):pe++:pe<=0?(pe=1,fe=!0):pe--,ge++)}();for(var t=J.obstacles.length-J.treesCount;t<J.obstacles.length;t++){var s=z.worldToLocalPosition(J.obstacles[t].center,V.userOffset,V.scaleFactor);z.isObjInCanvas(s,J.obstacles[t].imgData.width/2,V)&&(J.obstacles[t].treeImgEle.isCollide?m.drawImage(o,l.srcPosX,l.srcPosY,l.srcWidth,l.srcHeight,s.x-J.obstacles[t].imgData.width/2*V.scaleFactor,s.y-J.obstacles[t].imgData.height/2*V.scaleFactor,J.obstacles[t].imgData.width*V.scaleFactor,J.obstacles[t].imgData.height*V.scaleFactor):m.drawImage(o,J.obstacles[t].imgData.srcPosX,J.obstacles[t].imgData.srcPosY,J.obstacles[t].imgData.srcWidth,J.obstacles[t].imgData.srcHeight,s.x-J.obstacles[t].imgData.width/2*V.scaleFactor,s.y-J.obstacles[t].imgData.height/2*V.scaleFactor,J.obstacles[t].imgData.width*V.scaleFactor,J.obstacles[t].imgData.height*V.scaleFactor),e&&(J.obstacles[t].treeImgEle.isCollide=!1),J.obstacles[t].staticEle.isCollide&&(m.beginPath(),m.arc(s.x,s.y,J.obstacles[t].imgData.width/2*.9*V.scaleFactor,0,2*Math.PI),m.fillStyle="rgba(255, 0, 0, 0.5)",m.fill(),m.closePath()),e&&(J.obstacles[t].staticEle.isCollide=!1))}}(),function(e){for(var t=0;t<e.length;t++){var s=e[t].localCenter,i=e[t].localPosition;if(e[t].chatMessage2){m.beginPath(),m.textAlign="center",m.font="20px normal",m.strokeStyle="#000000";var n=(12*e[t].chatMessage1.length+20)*V.scaleFactor;m.fillStyle="#ffffff",m.fillRect(s.x-n/2,i.y-55*V.scaleFactor,n,25*V.scaleFactor),m.strokeRect(s.x-n/2,i.y-55*V.scaleFactor,n,25*V.scaleFactor),m.fillStyle="#000000",m.fillText(e[t].chatMessage1,s.x,i.y-36*V.scaleFactor),n=(12*e[t].chatMessage2.length+20)*V.scaleFactor,m.fillStyle="#ffffff",m.fillRect(s.x-n/2,i.y-30*V.scaleFactor,n,25*V.scaleFactor),m.strokeRect(s.x-n/2,i.y-30*V.scaleFactor,n,25*V.scaleFactor),m.fillStyle="#000000",m.fillText(e[t].chatMessage2,s.x,i.y-11*V.scaleFactor),m.moveTo(s.x-8,i.y-5*V.scaleFactor),m.lineTo(s.x+8,i.y-5*V.scaleFactor),m.lineTo(s.x,i.y),m.fill(),m.closePath()}else if(e[t].chatMessage1){m.beginPath();var n=(12*e[t].chatMessage1.length+20)*V.scaleFactor;m.strokeStyle="#000000",m.fillStyle="#ffffff",m.fillRect(s.x-n/2,i.y-30*V.scaleFactor,n,25*V.scaleFactor),m.strokeRect(s.x-n/2,i.y-30*V.scaleFactor,n,25*V.scaleFactor),m.fillStyle="#000000",m.moveTo(s.x-8,i.y-5*V.scaleFactor),m.lineTo(s.x+8,i.y-5*V.scaleFactor),m.lineTo(s.x,i.y),m.fill(),m.textAlign="center",m.font="20px normal",m.fillText(e[t].chatMessage1,s.x,i.y-11*V.scaleFactor),m.closePath()}}}(e),function(){for(var e=0;e<J.effects.length;e++){if(m.beginPath(),m.fillStyle="#ff0000",J.effects[e].effectImgData)var t=J.effects[e].effectImgData.resourceIndex1;else switch(J.effects[e].property){case V.SKILL_PROPERTY_FIRE:t=L;break;case V.SKILL_PROPERTY_FROST:t=y;break;case V.SKILL_PROPERTY_ARCANE:t=D}var s=z.worldXCoordToLocalX(J.effects[e].position.x+J.effects[e].radius,V.userOffset.x,V.scaleFactor),i=z.worldYCoordToLocalY(J.effects[e].position.y+J.effects[e].radius,V.userOffset.y,V.scaleFactor),n=J.effects[e].radius*J.effects[e].scaleFactor;m.drawImage(E,t.srcPosX,t.srcPosY,t.srcWidth,t.srcHeight,s-n,i-n,2*n,2*n),m.closePath()}}(),Ne===V.DRAW_MODE_SKILL_RANGE)!function(){if(Ue.type===V.SKILL_TYPE_PROJECTILE||Ue.type===V.SKILL_TYPE_PROJECTILE_TICK||Ue.type===V.SKILL_TYPE_PROJECTILE_EXPLOSION||Ue.type===V.SKILL_TYPE_PROJECTILE_TICK_EXPLOSION){m.beginPath(),m.save();var e=z.worldToLocalPosition(J.users[V.userID].center,V.userOffset),t=Be.x-e.x,s=Be.y-e.y,i=Math.atan(s/t);isNaN(i)?i=0:t<0&&0<=s?i+=Math.PI:t<0&&s<0&&(i-=Math.PI),m.translate(e.x*V.scaleFactor,e.y*V.scaleFactor),m.rotate(i),m.drawImage(g,P.srcPosX,P.srcPosY,P.srcWidth,P.srcHeight,-P.width/2*V.scaleFactor,-P.height/2*V.scaleFactor,P.width*V.scaleFactor,P.height*V.scaleFactor),m.closePath(),m.restore()}else if(Ue.index===tt)m.beginPath(),m.fillStyle="#ffffff",m.globalAlpha=.7,m.arc(Be.x*V.scaleFactor,Be.y*V.scaleFactor,Ue.explosionRadius*V.scaleFactor,0,2*Math.PI),m.fill(),m.closePath();else{m.beginPath(),m.fillStyle="#ffffff",m.globalAlpha=.5;var e=z.worldToLocalPosition(J.users[V.userID].center,V.userOffset);m.arc(e.x*V.scaleFactor,e.y*V.scaleFactor,Ue.range*V.scaleFactor,0,2*Math.PI),m.fill(),m.closePath(),m.beginPath(),m.globalAlpha=.7;var n=z.distanceSquare(e,Be);if(Math.pow(Ue.range,2)>n)m.arc(Be.x*V.scaleFactor,Be.y*V.scaleFactor,Ue.explosionRadius*V.scaleFactor,0,2*Math.PI);else{var t=Be.x-e.x,s=Be.y-e.y,i=Math.atan(s/t);isNaN(i)?i=0:t<0&&0<=s?i+=Math.PI:t<0&&s<0&&(i-=Math.PI);var a=Ue.range*Math.cos(i),r=Ue.range*Math.sin(i),o={x:e.x+a,y:e.y+r};m.arc(o.x*V.scaleFactor,o.y*V.scaleFactor,Ue.explosionRadius*V.scaleFactor,0,2*Math.PI)}m.fill()}m.globalAlpha=1}();else if(Ce&&150<Date.now()-be&&!J.user.castingEndTime){be=Date.now(),Ae=Date.now();var t=z.localToWorldPosition(Be,V.userOffset),s=z.setTargetPosition(t,J.users[V.userID]);J.moveUser(s);var i=J.processUserData();i.targetPosition={x:Math.floor(s.x),y:Math.floor(s.y)},ve=Date.now(),G.emit("userMoveStart",i)}}()}function bt(){var e=1;switch(He){case V.CHAR_TYPE_FIRE:e=Ke;break;case V.CHAR_TYPE_FROST:e=Xe;break;case V.CHAR_TYPE_ARCANE:e=Ge}Ce=!1,Mt(),xt(),Ne===V.DRAW_MODE_SKILL_RANGE&&Ht(V.DRAW_MODE_NORMAL),Y.closePopUpSkillChange(),Xt(He),Y.playDeadScene(V.userID,lt,e,ct,dt,je,ut),Oe=setTimeout(function(){Oe=!1,Y.closePopUpSkillChange(),Y.disableDeadScene(),Y.clearCooltime(),Y.initStandingScene(He,et),Y.setPopUpSkillChange(!0),ft(V.GAME_STATE_RESTART_SCENE)},V.DEAD_SCENE_PLAY_TIME)}function Lt(){Y.drawRestartScene()}function yt(){Y.disableStandingScene(),et=Y.getStandingUserName(),G.emit("reqRestartGame",et,He,at)}function Dt(){++U>=V.RESOURCES_COUNT&&(H=!0,Y.setServerList())}function vt(e,t){var s=J.processSkillData(e);s.sT=t,-1===at.indexOf(s.sID)&&tt!==s.sID?J.stopUser():G.emit("skillFired",s)}function At(e,t){var s=J.processProjectileData(e);G.emit("projectilesFired",s,t)}function Rt(){n.width=window.innerWidth,n.height=window.innerHeight,window.innerWidth<1200?Y.bottomToRight():Y.rightToBottom(),window.innerWidth<1024?Y.disableDisplayAd():Y.enableDisplayAd(),V.canvasSize={width:window.innerWidth,height:window.innerHeight},function(e){e.scaleX=1,e.scaleY=1,e.canvasSize.width>=e.CANVAS_MAX_LOCAL_SIZE.width&&(e.scaleX=e.canvasSize.width/e.CANVAS_MAX_LOCAL_SIZE.width);e.canvasSize.height>=e.CANVAS_MAX_LOCAL_SIZE.height&&(e.scaleY=e.canvasSize.height/e.CANVAS_MAX_LOCAL_SIZE.height);e.scaleX>e.scaleY?e.scaleFactor=e.scaleX:e.scaleFactor=e.scaleY}(V)}function Pt(){var e=J.processUserData(),t=!1;1e3<=Date.now()-ve&&(t=!0,ve=Date.now()),5e3<=Date.now()-Re&&(Re=Date.now(),G.emit("firePing",Re)),G.emit("userDataUpdate",e,t,ke.lastFrameCount)}function kt(){n.addEventListener("click",Nt,!1),n.addEventListener("mousemove",jt,!1),n.addEventListener("mousedown",wt,!1),n.addEventListener("mouseup",Ft,!1)}function Ot(){document.addEventListener("keydown",Bt,!1)}function Mt(){n.removeEventListener("click",Nt),n.removeEventListener("mousemove",jt),n.removeEventListener("mousedown",wt),n.removeEventListener("mouseup",Ft)}function xt(){document.removeEventListener("keydown",Bt)}function wt(){Ce=!0}function Ft(){Ce=!1}window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},window.cancelAnimFrame=window.cancelAnimationFrame||window.mozCancelAnimationFrame;var Nt=function(r){Te&&(Te=!1,Y.disableChatInput()),Ae=Date.now(),ce&&(clearTimeout(ce),ce=!1);var e=0;J.user.castingEndTime&&(e=J.user.castingEndTime-Date.now()+30),ce=setTimeout(function(){var e={x:r.clientX/V.scaleFactor,y:r.clientY/V.scaleFactor},t=z.localToWorldPosition(e,V.userOffset);if(Ne===V.DRAW_MODE_SKILL_RANGE)if(Ue.index===tt){var s=z.setMoveAttackUserTargetPosition(t,Ue,J.users[V.userID]),i={x:Math.floor(s.x),y:Math.floor(s.y)},n=W({},Ue);n.targetPosition={x:Math.floor(t.x),y:Math.floor(t.y)},J.moveAndAttackUser(V.userID,i,n,s.moveBackward);var a=J.processUserData();a.targetPosition=i,a.moveBackward=s.moveBackward,a.skillIndex=Ue.index,a.skillTargetPosition={x:Math.floor(t.x),y:Math.floor(t.y)},Ht(V.DRAW_MODE_NORMAL),ve=Date.now(),G.emit("userMoveAndAttack",a)}else Kt(Ue,t,J.users[V.userID]),Ht(V.DRAW_MODE_NORMAL)},e)},Bt=function(e){Ae=Date.now();var t,s=e.keyCode||e.which||0;if(Ne===V.DRAW_MODE_NORMAL&&!Te){if(s===pt.BindingE||s===pt.BindingSpace){if(J.user.currentState!==V.OBJECT_STATE_ATTACK)var i=W({},st)}else s===pt.Binding1?i=W({},rt[0]):s===pt.Binding2?i=W({},rt[1]):s===pt.Binding3?i=W({},rt[2]):s===pt.Binding4&&(i=W({},rt[3]));Ut(i),s===pt.BindingA&&(i=W({},st),(t=i).index===tt&&(J.user.conditions[V.USER_CONDITION_FREEZE]||J.user.conditions[V.USER_CONDITION_SILENCE]||J.user.conditions[V.USER_CONDITION_BLUR]||(J.applyCastSpeed(V.userID,t),Ue=t,Ht(V.DRAW_MODE_SKILL_RANGE))))}if(s===pt.BindingG&&(Te||Y.popChangeWithKey()),s===pt.BindingEsc&&(Ne===V.DRAW_MODE_SKILL_RANGE&&Ht(V.DRAW_MODE_NORMAL),Te?(Te=!1,Y.disableChatInput()):Y.popCloseWithKey()),s===pt.BindingS&&!Te){J.stopUser();var n=J.processUserData();ve=Date.now(),G.emit("userStop",n)}if(s===pt.BindingEnter)if(Te){Te=!1;var a=z.processMessage(Y.getChatMessage(),V.CHAT_MESSAGE_LENGTH,!1);Y.disableChatInput(),Y.clearChatInput(),a&&G.emit("chatting",a)}else Te=!0,Y.showChatInput();s===pt.BindingHome&&(15<=je?G.emit("killme"):Y.makeFlashMessage("Suicide is limited to level 15 or higher."))};function Ut(e){ce&&(clearTimeout(ce),ce=!1);var t=0;J.user.castingEndTime&&(t=J.user.castingEndTime-Date.now()+30),ce=setTimeout(function(){e&&e.hasOwnProperty("index")&&e.type!==V.SKILL_TYPE_PASSIVE&&(J.user.conditions[V.USER_CONDITION_FREEZE]?(Y.makeFlashMessage("FROZEN!!!"),Ne===V.DRAW_MODE_SKILL_RANGE&&Ht(V.DRAW_MODE_NORMAL)):J.user.conditions[V.USER_CONDITION_SILENCE]?(Y.makeFlashMessage("SILENCED!!!"),Ne===V.DRAW_MODE_SKILL_RANGE&&Ht(V.DRAW_MODE_NORMAL)):J.user.conditions[V.USER_CONDITION_BLUR]?(Y.makeFlashMessage("Using Portal!!!"),Ne===V.DRAW_MODE_SKILL_RANGE&&Ht(V.DRAW_MODE_NORMAL)):J.user.MP<e.consumeMP?(Y.makeFlashMessage("Not enough Mana!!!"),Ne===V.DRAW_MODE_SKILL_RANGE&&Ht(V.DRAW_MODE_NORMAL)):Y.checkCooltime(e.index)?(J.applyCastSpeed(V.userID,e),e.type===V.SKILL_TYPE_PROJECTILE||e.type===V.SKILL_TYPE_PROJECTILE_EXPLOSION||e.type===V.SKILL_TYPE_PROJECTILE_TICK||e.type===V.SKILL_TYPE_PROJECTILE_TICK_EXPLOSION||e.type===V.SKILL_TYPE_RANGE||e.type===V.SKILL_TYPE_TELEPORT?Ne===V.DRAW_MODE_NORMAL&&(Ue=e,Ht(V.DRAW_MODE_SKILL_RANGE)):Kt(e,J.users[V.userID].center,J.users[V.userID])):e.index!==tt&&(Y.makeFlashMessage("Spell is not ready!!!"),Ne===V.DRAW_MODE_SKILL_RANGE&&Ht(V.DRAW_MODE_NORMAL)))},t)}function Ht(e){e===V.DRAW_MODE_NORMAL?(Ne=V.DRAW_MODE_NORMAL,Ue=null,Y.disableSelectSkillInfo()):e===V.DRAW_MODE_SKILL_RANGE&&(Ne=V.DRAW_MODE_SKILL_RANGE,Y.enableSelectSkillInfo(Ue))}function jt(e){Be.x=e.clientX/V.scaleFactor,Be.y=e.clientY/V.scaleFactor}function Kt(e,t,s){if(Y.checkCooltime(e.index)&&!s.conditions[V.USER_CONDITION_FREEZE]&&!s.conditions[V.USER_CONDITION_SILENCE]&&!s.conditions[V.USER_CONDITION_BLUR]){if(e.targetPosition=z.calcSkillTargetPosition(e,t,s),e.type===V.SKILL_TYPE_TELEPORT)for(var i=!0,n=1;i;){n++;var a=J.checkCollisionWithObstacles(e.targetPosition,s);a.length?e.targetPosition=J.reCalcSkillTargetPosition(e.targetPosition,s,a):i=!1,20<=n&&(i=!1)}e.direction=z.calcSkillTargetDirection(e.type,e.targetPosition,s),e.type!==V.SKILL_TYPE_PROJECTILE&&e.type!==V.SKILL_TYPE_PROJECTILE_TICK&&e.type!==V.SKILL_TYPE_PROJECTILE_EXPLOSION&&e.type!==V.SKILL_TYPE_PROJECTILE_TICK_EXPLOSION&&e.type!==V.SKILL_TYPE_INSTANT_PROJECTILE||(e.projectileIDs=z.generateRandomUniqueID(J.projectiles,V.PREFIX_SKILL_PROJECTILE,e.projectileCount)),J.useSkill(V.userID,e);var r=J.processUserData();r.skillIndex=e.index,r.skillDirection=Math.floor(e.direction),r.skillTargetPosition={x:Math.floor(e.targetPosition.x),y:Math.floor(e.targetPosition.y)},e.projectileIDs&&(r.projectileIDs=e.projectileIDs),ve=Date.now(),G.emit("userUseSkill",r)}}function Xt(e){switch(e){case V.CHAR_TYPE_FIRE:Ye=tt,Je=it;for(var t=0;t<at.length;t++)ze[t]=at[t];break;case V.CHAR_TYPE_FROST:Ve=tt,We=it;for(t=0;t<at.length;t++)qe[t]=at[t];break;case V.CHAR_TYPE_ARCANE:Ze=tt,Qe=it;for(t=0;t<at.length;t++)$e[t]=at[t]}}function Gt(e){var t=[],s=W({},z.findData(Z,"index",e.iP)).buffToSelf,i=W({},z.findData(w,"index",s)).buffEffectGroup,n=W({},z.findData(te,"index",i)),a=z.setResourceData(Q,n);a&&t.push(n);for(var r=0;r<e.bL.length;r++)i=W({},z.findData(w,"index",e.bL[r].id)).buffEffectGroup,n=W({},z.findData(te,"index",i)),(a=z.setResourceData(Q,n))&&t.push(n);for(r=0;r<e.pL.length;r++)i=W({},z.findData(w,"index",e.pL[r])).buffEffectGroup,n=W({},z.findData(te,"index",i)),(a=z.setResourceData(Q,n))&&t.push(n);for(r=0;r<e.aL.length;r++)i=W({},z.findData(w,"index",e.aL[r])).buffEffectGroup,n=W({},z.findData(te,"index",i)),(a=z.setResourceData(Q,n))&&t.push(n);J.updateUserBuffImgData(e.oID,t)}function Yt(){this.lastFrameCount=0,this.lastFrameTime=Date.now(),this.frameCount=0}Yt.prototype.countFrames=function(){this.frameCount++,Date.now()>=this.lastFrameTime+1e3&&(this.lastFrameTime=Date.now(),this.lastFrameCount=this.frameCount,this.frameCount=0)},ft(V.GAME_STATE_LOAD),setInterval(function(){Date.now()>=Ae+V.LIMIT_NO_ACTION_TIME&&(G.close(),window.onbeforeunload="",window.location.href="/noaction")},V.LONG_TIME_INTERVAL)},{"../../modules/client/CManager.js":1,"../../modules/client/CUIManager.js":5,"../../modules/client/CUser.js":6,"../../modules/client/WebSocketClient.js":7,"../../modules/public/csvjson.js":8,"../../modules/public/data.json":9,"../../modules/public/gameConfig.json":10,"../../modules/public/objectAssign.js":12,"../../modules/public/util.js":15}]},{},[31]);